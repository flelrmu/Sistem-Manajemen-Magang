var w3=Object.defineProperty;var W3=(e,t,n)=>t in e?w3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fe=(e,t,n)=>W3(e,typeof t!="symbol"?t+"":t,n);function k3(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ut(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mh={exports:{}},Ps={},Dh={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ik;function V3(){if(Ik)return Fe;Ik=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),d=Symbol.iterator;function m(D){return D===null||typeof D!="object"?null:(D=d&&D[d]||D["@@iterator"],typeof D=="function"?D:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,b={};function y(D,O,ue){this.props=D,this.context=O,this.refs=b,this.updater=ue||p}y.prototype.isReactComponent={},y.prototype.setState=function(D,O){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,O,"setState")},y.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function v(){}v.prototype=y.prototype;function G(D,O,ue){this.props=D,this.context=O,this.refs=b,this.updater=ue||p}var S=G.prototype=new v;S.constructor=G,h(S,y.prototype),S.isPureReactComponent=!0;var R=Array.isArray,B=Object.prototype.hasOwnProperty,V={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function X(D,O,ue){var ye,Be={},xe=null,Te=null;if(O!=null)for(ye in O.ref!==void 0&&(Te=O.ref),O.key!==void 0&&(xe=""+O.key),O)B.call(O,ye)&&!W.hasOwnProperty(ye)&&(Be[ye]=O[ye]);var Xe=arguments.length-2;if(Xe===1)Be.children=ue;else if(1<Xe){for(var se=Array(Xe),Ge=0;Ge<Xe;Ge++)se[Ge]=arguments[Ge+2];Be.children=se}if(D&&D.defaultProps)for(ye in Xe=D.defaultProps,Xe)Be[ye]===void 0&&(Be[ye]=Xe[ye]);return{$$typeof:e,type:D,key:xe,ref:Te,props:Be,_owner:V.current}}function N(D,O){return{$$typeof:e,type:D.type,key:O,ref:D.ref,props:D.props,_owner:D._owner}}function x(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function Y(D){var O={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ue){return O[ue]})}var F=/\/+/g;function E(D,O){return typeof D=="object"&&D!==null&&D.key!=null?Y(""+D.key):O.toString(36)}function M(D,O,ue,ye,Be){var xe=typeof D;(xe==="undefined"||xe==="boolean")&&(D=null);var Te=!1;if(D===null)Te=!0;else switch(xe){case"string":case"number":Te=!0;break;case"object":switch(D.$$typeof){case e:case t:Te=!0}}if(Te)return Te=D,Be=Be(Te),D=ye===""?"."+E(Te,0):ye,R(Be)?(ue="",D!=null&&(ue=D.replace(F,"$&/")+"/"),M(Be,O,ue,"",function(Ge){return Ge})):Be!=null&&(x(Be)&&(Be=N(Be,ue+(!Be.key||Te&&Te.key===Be.key?"":(""+Be.key).replace(F,"$&/")+"/")+D)),O.push(Be)),1;if(Te=0,ye=ye===""?".":ye+":",R(D))for(var Xe=0;Xe<D.length;Xe++){xe=D[Xe];var se=ye+E(xe,Xe);Te+=M(xe,O,ue,se,Be)}else if(se=m(D),typeof se=="function")for(D=se.call(D),Xe=0;!(xe=D.next()).done;)xe=xe.value,se=ye+E(xe,Xe++),Te+=M(xe,O,ue,se,Be);else if(xe==="object")throw O=String(D),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return Te}function T(D,O,ue){if(D==null)return D;var ye=[],Be=0;return M(D,ye,"","",function(xe){return O.call(ue,xe,Be++)}),ye}function z(D){if(D._status===-1){var O=D._result;O=O(),O.then(function(ue){(D._status===0||D._status===-1)&&(D._status=1,D._result=ue)},function(ue){(D._status===0||D._status===-1)&&(D._status=2,D._result=ue)}),D._status===-1&&(D._status=0,D._result=O)}if(D._status===1)return D._result.default;throw D._result}var P={current:null},L={transition:null},q={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:L,ReactCurrentOwner:V};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:T,forEach:function(D,O,ue){T(D,function(){O.apply(this,arguments)},ue)},count:function(D){var O=0;return T(D,function(){O++}),O},toArray:function(D){return T(D,function(O){return O})||[]},only:function(D){if(!x(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Fe.Component=y,Fe.Fragment=n,Fe.Profiler=a,Fe.PureComponent=G,Fe.StrictMode=r,Fe.Suspense=c,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Fe.act=ee,Fe.cloneElement=function(D,O,ue){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ye=h({},D.props),Be=D.key,xe=D.ref,Te=D._owner;if(O!=null){if(O.ref!==void 0&&(xe=O.ref,Te=V.current),O.key!==void 0&&(Be=""+O.key),D.type&&D.type.defaultProps)var Xe=D.type.defaultProps;for(se in O)B.call(O,se)&&!W.hasOwnProperty(se)&&(ye[se]=O[se]===void 0&&Xe!==void 0?Xe[se]:O[se])}var se=arguments.length-2;if(se===1)ye.children=ue;else if(1<se){Xe=Array(se);for(var Ge=0;Ge<se;Ge++)Xe[Ge]=arguments[Ge+2];ye.children=Xe}return{$$typeof:e,type:D.type,key:Be,ref:xe,props:ye,_owner:Te}},Fe.createContext=function(D){return D={$$typeof:o,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:i,_context:D},D.Consumer=D},Fe.createElement=X,Fe.createFactory=function(D){var O=X.bind(null,D);return O.type=D,O},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(D){return{$$typeof:l,render:D}},Fe.isValidElement=x,Fe.lazy=function(D){return{$$typeof:I,_payload:{_status:-1,_result:D},_init:z}},Fe.memo=function(D,O){return{$$typeof:u,type:D,compare:O===void 0?null:O}},Fe.startTransition=function(D){var O=L.transition;L.transition={};try{D()}finally{L.transition=O}},Fe.unstable_act=ee,Fe.useCallback=function(D,O){return P.current.useCallback(D,O)},Fe.useContext=function(D){return P.current.useContext(D)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(D){return P.current.useDeferredValue(D)},Fe.useEffect=function(D,O){return P.current.useEffect(D,O)},Fe.useId=function(){return P.current.useId()},Fe.useImperativeHandle=function(D,O,ue){return P.current.useImperativeHandle(D,O,ue)},Fe.useInsertionEffect=function(D,O){return P.current.useInsertionEffect(D,O)},Fe.useLayoutEffect=function(D,O){return P.current.useLayoutEffect(D,O)},Fe.useMemo=function(D,O){return P.current.useMemo(D,O)},Fe.useReducer=function(D,O,ue){return P.current.useReducer(D,O,ue)},Fe.useRef=function(D){return P.current.useRef(D)},Fe.useState=function(D){return P.current.useState(D)},Fe.useSyncExternalStore=function(D,O,ue){return P.current.useSyncExternalStore(D,O,ue)},Fe.useTransition=function(){return P.current.useTransition()},Fe.version="18.3.1",Fe}var dk;function uG(){return dk||(dk=1,Dh.exports=V3()),Dh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ck;function R3(){if(Ck)return Ps;Ck=1;var e=uG(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var I,d={},m=null,p=null;u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(p=c.ref);for(I in c)r.call(c,I)&&!i.hasOwnProperty(I)&&(d[I]=c[I]);if(l&&l.defaultProps)for(I in c=l.defaultProps,c)d[I]===void 0&&(d[I]=c[I]);return{$$typeof:t,type:l,key:m,ref:p,props:d,_owner:a.current}}return Ps.Fragment=n,Ps.jsx=o,Ps.jsxs=o,Ps}var Ak;function x3(){return Ak||(Ak=1,Mh.exports=R3()),Mh.exports}var A=x3(),k=uG();const H=ut(k),pZ=k3({__proto__:null,default:H},[k]);var od={},Th={exports:{}},Mn={},jh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mk;function X3(){return mk||(mk=1,function(e){function t(L,q){var ee=L.length;L.push(q);e:for(;0<ee;){var D=ee-1>>>1,O=L[D];if(0<a(O,q))L[D]=q,L[ee]=O,ee=D;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var q=L[0],ee=L.pop();if(ee!==q){L[0]=ee;e:for(var D=0,O=L.length,ue=O>>>1;D<ue;){var ye=2*(D+1)-1,Be=L[ye],xe=ye+1,Te=L[xe];if(0>a(Be,ee))xe<O&&0>a(Te,Be)?(L[D]=Te,L[xe]=ee,D=xe):(L[D]=Be,L[ye]=ee,D=ye);else if(xe<O&&0>a(Te,ee))L[D]=Te,L[xe]=ee,D=xe;else break e}}return q}function a(L,q){var ee=L.sortIndex-q.sortIndex;return ee!==0?ee:L.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],I=1,d=null,m=3,p=!1,h=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=L)r(u),q.sortIndex=q.expirationTime,t(c,q);else break;q=n(u)}}function R(L){if(b=!1,S(L),!h)if(n(c)!==null)h=!0,z(B);else{var q=n(u);q!==null&&P(R,q.startTime-L)}}function B(L,q){h=!1,b&&(b=!1,v(X),X=-1),p=!0;var ee=m;try{for(S(q),d=n(c);d!==null&&(!(d.expirationTime>q)||L&&!Y());){var D=d.callback;if(typeof D=="function"){d.callback=null,m=d.priorityLevel;var O=D(d.expirationTime<=q);q=e.unstable_now(),typeof O=="function"?d.callback=O:d===n(c)&&r(c),S(q)}else r(c);d=n(c)}if(d!==null)var ue=!0;else{var ye=n(u);ye!==null&&P(R,ye.startTime-q),ue=!1}return ue}finally{d=null,m=ee,p=!1}}var V=!1,W=null,X=-1,N=5,x=-1;function Y(){return!(e.unstable_now()-x<N)}function F(){if(W!==null){var L=e.unstable_now();x=L;var q=!0;try{q=W(!0,L)}finally{q?E():(V=!1,W=null)}}else V=!1}var E;if(typeof G=="function")E=function(){G(F)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,T=M.port2;M.port1.onmessage=F,E=function(){T.postMessage(null)}}else E=function(){y(F,0)};function z(L){W=L,V||(V=!0,E())}function P(L,q){X=y(function(){L(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){h||p||(h=!0,z(B))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(L){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var ee=m;m=q;try{return L()}finally{m=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ee=m;m=L;try{return q()}finally{m=ee}},e.unstable_scheduleCallback=function(L,q,ee){var D=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?D+ee:D):ee=D,L){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ee+O,L={id:I++,callback:q,priorityLevel:L,startTime:ee,expirationTime:O,sortIndex:-1},ee>D?(L.sortIndex=ee,t(u,L),n(c)===null&&L===n(u)&&(b?(v(X),X=-1):b=!0,P(R,ee-D))):(L.sortIndex=O,t(c,L),h||p||(h=!0,z(B))),L},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(L){var q=m;return function(){var ee=m;m=q;try{return L.apply(this,arguments)}finally{m=ee}}}}(Lh)),Lh}var fk;function J3(){return fk||(fk=1,jh.exports=X3()),jh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hk;function Y3(){if(hk)return Mn;hk=1;var e=uG(),t=J3();function n(g){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+g,C=1;C<arguments.length;C++)s+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+g+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function i(g,s){o(g,s),o(g+"Capture",s)}function o(g,s){for(a[g]=s,g=0;g<s.length;g++)r.add(s[g])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},d={};function m(g){return c.call(d,g)?!0:c.call(I,g)?!1:u.test(g)?d[g]=!0:(I[g]=!0,!1)}function p(g,s,C,f){if(C!==null&&C.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:C!==null?!C.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function h(g,s,C,f){if(s===null||typeof s>"u"||p(g,s,C,f))return!0;if(f)return!1;if(C!==null)switch(C.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function b(g,s,C,f,Z,w,J){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=Z,this.mustUseProperty=C,this.propertyName=g,this.type=s,this.sanitizeURL=w,this.removeEmptyString=J}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){y[g]=new b(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var s=g[0];y[s]=new b(s,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){y[g]=new b(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){y[g]=new b(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){y[g]=new b(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){y[g]=new b(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){y[g]=new b(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){y[g]=new b(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){y[g]=new b(g,5,!1,g.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function G(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var s=g.replace(v,G);y[s]=new b(s,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var s=g.replace(v,G);y[s]=new b(s,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var s=g.replace(v,G);y[s]=new b(s,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){y[g]=new b(g,1,!1,g.toLowerCase(),null,!1,!1)}),y.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){y[g]=new b(g,1,!1,g.toLowerCase(),null,!0,!0)});function S(g,s,C,f){var Z=y.hasOwnProperty(s)?y[s]:null;(Z!==null?Z.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(h(s,C,Z,f)&&(C=null),f||Z===null?m(s)&&(C===null?g.removeAttribute(s):g.setAttribute(s,""+C)):Z.mustUseProperty?g[Z.propertyName]=C===null?Z.type===3?!1:"":C:(s=Z.attributeName,f=Z.attributeNamespace,C===null?g.removeAttribute(s):(Z=Z.type,C=Z===3||Z===4&&C===!0?"":""+C,f?g.setAttributeNS(f,s,C):g.setAttribute(s,C))))}var R=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),V=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),Y=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),L=Symbol.iterator;function q(g){return g===null||typeof g!="object"?null:(g=L&&g[L]||g["@@iterator"],typeof g=="function"?g:null)}var ee=Object.assign,D;function O(g){if(D===void 0)try{throw Error()}catch(C){var s=C.stack.trim().match(/\n( *(at )?)/);D=s&&s[1]||""}return`
`+D+g}var ue=!1;function ye(g,s){if(!g||ue)return"";ue=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var f=$}Reflect.construct(g,[],s)}else{try{s.call()}catch($){f=$}g.call(s.prototype)}else{try{throw Error()}catch($){f=$}g()}}catch($){if($&&f&&typeof $.stack=="string"){for(var Z=$.stack.split(`
`),w=f.stack.split(`
`),J=Z.length-1,K=w.length-1;1<=J&&0<=K&&Z[J]!==w[K];)K--;for(;1<=J&&0<=K;J--,K--)if(Z[J]!==w[K]){if(J!==1||K!==1)do if(J--,K--,0>K||Z[J]!==w[K]){var j=`
`+Z[J].replace(" at new "," at ");return g.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",g.displayName)),j}while(1<=J&&0<=K);break}}}finally{ue=!1,Error.prepareStackTrace=C}return(g=g?g.displayName||g.name:"")?O(g):""}function Be(g){switch(g.tag){case 5:return O(g.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return g=ye(g.type,!1),g;case 11:return g=ye(g.type.render,!1),g;case 1:return g=ye(g.type,!0),g;default:return""}}function xe(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case W:return"Fragment";case V:return"Portal";case N:return"Profiler";case X:return"StrictMode";case E:return"Suspense";case M:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case Y:return(g.displayName||"Context")+".Consumer";case x:return(g._context.displayName||"Context")+".Provider";case F:var s=g.render;return g=g.displayName,g||(g=s.displayName||s.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case T:return s=g.displayName||null,s!==null?s:xe(g.type)||"Memo";case z:s=g._payload,g=g._init;try{return xe(g(s))}catch{}}return null}function Te(g){var s=g.type;switch(g.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=s.render,g=g.displayName||g.name||"",s.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(s);case 8:return s===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Xe(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function se(g){var s=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ge(g){var s=se(g)?"checked":"value",C=Object.getOwnPropertyDescriptor(g.constructor.prototype,s),f=""+g[s];if(!g.hasOwnProperty(s)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var Z=C.get,w=C.set;return Object.defineProperty(g,s,{configurable:!0,get:function(){return Z.call(this)},set:function(J){f=""+J,w.call(this,J)}}),Object.defineProperty(g,s,{enumerable:C.enumerable}),{getValue:function(){return f},setValue:function(J){f=""+J},stopTracking:function(){g._valueTracker=null,delete g[s]}}}}function Je(g){g._valueTracker||(g._valueTracker=Ge(g))}function ge(g){if(!g)return!1;var s=g._valueTracker;if(!s)return!0;var C=s.getValue(),f="";return g&&(f=se(g)?g.checked?"true":"false":g.value),g=f,g!==C?(s.setValue(g),!0):!1}function dt(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function Ee(g,s){var C=s.checked;return ee({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??g._wrapperState.initialChecked})}function Rt(g,s){var C=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;C=Xe(s.value!=null?s.value:C),g._wrapperState={initialChecked:f,initialValue:C,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function xt(g,s){s=s.checked,s!=null&&S(g,"checked",s,!1)}function tn(g,s){xt(g,s);var C=Xe(s.value),f=s.type;if(C!=null)f==="number"?(C===0&&g.value===""||g.value!=C)&&(g.value=""+C):g.value!==""+C&&(g.value=""+C);else if(f==="submit"||f==="reset"){g.removeAttribute("value");return}s.hasOwnProperty("value")?aa(g,s.type,C):s.hasOwnProperty("defaultValue")&&aa(g,s.type,Xe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(g.defaultChecked=!!s.defaultChecked)}function Xr(g,s,C){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+g._wrapperState.initialValue,C||s===g.value||(g.value=s),g.defaultValue=s}C=g.name,C!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,C!==""&&(g.name=C)}function aa(g,s,C){(s!=="number"||dt(g.ownerDocument)!==g)&&(C==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+C&&(g.defaultValue=""+C))}var ia=Array.isArray;function Yn(g,s,C,f){if(g=g.options,s){s={};for(var Z=0;Z<C.length;Z++)s["$"+C[Z]]=!0;for(C=0;C<g.length;C++)Z=s.hasOwnProperty("$"+g[C].value),g[C].selected!==Z&&(g[C].selected=Z),Z&&f&&(g[C].defaultSelected=!0)}else{for(C=""+Xe(C),s=null,Z=0;Z<g.length;Z++){if(g[Z].value===C){g[Z].selected=!0,f&&(g[Z].defaultSelected=!0);return}s!==null||g[Z].disabled||(s=g[Z])}s!==null&&(s.selected=!0)}}function Jr(g,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},s,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function lg(g,s){var C=s.value;if(C==null){if(C=s.children,s=s.defaultValue,C!=null){if(s!=null)throw Error(n(92));if(ia(C)){if(1<C.length)throw Error(n(93));C=C[0]}s=C}s==null&&(s=""),C=s}g._wrapperState={initialValue:Xe(C)}}function ls(g,s){var C=Xe(s.value),f=Xe(s.defaultValue);C!=null&&(C=""+C,C!==g.value&&(g.value=C),s.defaultValue==null&&g.defaultValue!==C&&(g.defaultValue=C)),f!=null&&(g.defaultValue=""+f)}function ss(g){var s=g.textContent;s===g._wrapperState.initialValue&&s!==""&&s!==null&&(g.value=s)}function BS(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _m(g,s){return g==null||g==="http://www.w3.org/1999/xhtml"?BS(s):g==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var _u,SS=function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,C,f,Z){MSApp.execUnsafeLocalFunction(function(){return g(s,C,f,Z)})}:g}(function(g,s){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=s;else{for(_u=_u||document.createElement("div"),_u.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=_u.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;s.firstChild;)g.appendChild(s.firstChild)}});function cs(g,s){if(s){var C=g.firstChild;if(C&&C===g.lastChild&&C.nodeType===3){C.nodeValue=s;return}}g.textContent=s}var us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xE=["Webkit","ms","Moz","O"];Object.keys(us).forEach(function(g){xE.forEach(function(s){s=s+g.charAt(0).toUpperCase()+g.substring(1),us[s]=us[g]})});function wS(g,s,C){return s==null||typeof s=="boolean"||s===""?"":C||typeof s!="number"||s===0||us.hasOwnProperty(g)&&us[g]?(""+s).trim():s+"px"}function WS(g,s){g=g.style;for(var C in s)if(s.hasOwnProperty(C)){var f=C.indexOf("--")===0,Z=wS(C,s[C],f);C==="float"&&(C="cssFloat"),f?g.setProperty(C,Z):g[C]=Z}}var XE=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qm(g,s){if(s){if(XE[g]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,g));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function $m(g,s){if(g.indexOf("-")===-1)return typeof s.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ef=null;function tf(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var nf=null,sg=null,cg=null;function kS(g){if(g=Xs(g)){if(typeof nf!="function")throw Error(n(280));var s=g.stateNode;s&&(s=bI(s),nf(g.stateNode,g.type,s))}}function VS(g){sg?cg?cg.push(g):cg=[g]:sg=g}function RS(){if(sg){var g=sg,s=cg;if(cg=sg=null,kS(g),s)for(g=0;g<s.length;g++)kS(s[g])}}function xS(g,s){return g(s)}function XS(){}var rf=!1;function JS(g,s,C){if(rf)return g(s,C);rf=!0;try{return xS(g,s,C)}finally{rf=!1,(sg!==null||cg!==null)&&(XS(),RS())}}function Is(g,s){var C=g.stateNode;if(C===null)return null;var f=bI(C);if(f===null)return null;C=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(g=g.type,f=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!f;break e;default:g=!1}if(g)return null;if(C&&typeof C!="function")throw Error(n(231,s,typeof C));return C}var af=!1;if(l)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){af=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{af=!1}function JE(g,s,C,f,Z,w,J,K,j){var $=Array.prototype.slice.call(arguments,3);try{s.apply(C,$)}catch(oe){this.onError(oe)}}var Cs=!1,qu=null,$u=!1,of=null,YE={onError:function(g){Cs=!0,qu=g}};function NE(g,s,C,f,Z,w,J,K,j){Cs=!1,qu=null,JE.apply(YE,arguments)}function HE(g,s,C,f,Z,w,J,K,j){if(NE.apply(this,arguments),Cs){if(Cs){var $=qu;Cs=!1,qu=null}else throw Error(n(198));$u||($u=!0,of=$)}}function so(g){var s=g,C=g;if(g.alternate)for(;s.return;)s=s.return;else{g=s;do s=g,s.flags&4098&&(C=s.return),g=s.return;while(g)}return s.tag===3?C:null}function YS(g){if(g.tag===13){var s=g.memoizedState;if(s===null&&(g=g.alternate,g!==null&&(s=g.memoizedState)),s!==null)return s.dehydrated}return null}function NS(g){if(so(g)!==g)throw Error(n(188))}function FE(g){var s=g.alternate;if(!s){if(s=so(g),s===null)throw Error(n(188));return s!==g?null:g}for(var C=g,f=s;;){var Z=C.return;if(Z===null)break;var w=Z.alternate;if(w===null){if(f=Z.return,f!==null){C=f;continue}break}if(Z.child===w.child){for(w=Z.child;w;){if(w===C)return NS(Z),g;if(w===f)return NS(Z),s;w=w.sibling}throw Error(n(188))}if(C.return!==f.return)C=Z,f=w;else{for(var J=!1,K=Z.child;K;){if(K===C){J=!0,C=Z,f=w;break}if(K===f){J=!0,f=Z,C=w;break}K=K.sibling}if(!J){for(K=w.child;K;){if(K===C){J=!0,C=w,f=Z;break}if(K===f){J=!0,f=w,C=Z;break}K=K.sibling}if(!J)throw Error(n(189))}}if(C.alternate!==f)throw Error(n(190))}if(C.tag!==3)throw Error(n(188));return C.stateNode.current===C?g:s}function HS(g){return g=FE(g),g!==null?FS(g):null}function FS(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var s=FS(g);if(s!==null)return s;g=g.sibling}return null}var KS=t.unstable_scheduleCallback,ES=t.unstable_cancelCallback,KE=t.unstable_shouldYield,EE=t.unstable_requestPaint,Ft=t.unstable_now,ME=t.unstable_getCurrentPriorityLevel,gf=t.unstable_ImmediatePriority,MS=t.unstable_UserBlockingPriority,eI=t.unstable_NormalPriority,DE=t.unstable_LowPriority,DS=t.unstable_IdlePriority,tI=null,oa=null;function TE(g){if(oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(tI,g,void 0,(g.current.flags&128)===128)}catch{}}var Yr=Math.clz32?Math.clz32:zE,jE=Math.log,LE=Math.LN2;function zE(g){return g>>>=0,g===0?32:31-(jE(g)/LE|0)|0}var nI=64,rI=4194304;function As(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function aI(g,s){var C=g.pendingLanes;if(C===0)return 0;var f=0,Z=g.suspendedLanes,w=g.pingedLanes,J=C&268435455;if(J!==0){var K=J&~Z;K!==0?f=As(K):(w&=J,w!==0&&(f=As(w)))}else J=C&~Z,J!==0?f=As(J):w!==0&&(f=As(w));if(f===0)return 0;if(s!==0&&s!==f&&!(s&Z)&&(Z=f&-f,w=s&-s,Z>=w||Z===16&&(w&4194240)!==0))return s;if(f&4&&(f|=C&16),s=g.entangledLanes,s!==0)for(g=g.entanglements,s&=f;0<s;)C=31-Yr(s),Z=1<<C,f|=g[C],s&=~Z;return f}function UE(g,s){switch(g){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PE(g,s){for(var C=g.suspendedLanes,f=g.pingedLanes,Z=g.expirationTimes,w=g.pendingLanes;0<w;){var J=31-Yr(w),K=1<<J,j=Z[J];j===-1?(!(K&C)||K&f)&&(Z[J]=UE(K,s)):j<=s&&(g.expiredLanes|=K),w&=~K}}function lf(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function TS(){var g=nI;return nI<<=1,!(nI&4194240)&&(nI=64),g}function sf(g){for(var s=[],C=0;31>C;C++)s.push(g);return s}function ms(g,s,C){g.pendingLanes|=s,s!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,s=31-Yr(s),g[s]=C}function OE(g,s){var C=g.pendingLanes&~s;g.pendingLanes=s,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=s,g.mutableReadLanes&=s,g.entangledLanes&=s,s=g.entanglements;var f=g.eventTimes;for(g=g.expirationTimes;0<C;){var Z=31-Yr(C),w=1<<Z;s[Z]=0,f[Z]=-1,g[Z]=-1,C&=~w}}function cf(g,s){var C=g.entangledLanes|=s;for(g=g.entanglements;C;){var f=31-Yr(C),Z=1<<f;Z&s|g[f]&s&&(g[f]|=s),C&=~Z}}var at=0;function jS(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var LS,uf,zS,US,PS,If=!1,iI=[],pi=null,bi=null,yi=null,fs=new Map,hs=new Map,Zi=[],QE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OS(g,s){switch(g){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":fs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(s.pointerId)}}function ps(g,s,C,f,Z,w){return g===null||g.nativeEvent!==w?(g={blockedOn:s,domEventName:C,eventSystemFlags:f,nativeEvent:w,targetContainers:[Z]},s!==null&&(s=Xs(s),s!==null&&uf(s)),g):(g.eventSystemFlags|=f,s=g.targetContainers,Z!==null&&s.indexOf(Z)===-1&&s.push(Z),g)}function _E(g,s,C,f,Z){switch(s){case"focusin":return pi=ps(pi,g,s,C,f,Z),!0;case"dragenter":return bi=ps(bi,g,s,C,f,Z),!0;case"mouseover":return yi=ps(yi,g,s,C,f,Z),!0;case"pointerover":var w=Z.pointerId;return fs.set(w,ps(fs.get(w)||null,g,s,C,f,Z)),!0;case"gotpointercapture":return w=Z.pointerId,hs.set(w,ps(hs.get(w)||null,g,s,C,f,Z)),!0}return!1}function QS(g){var s=co(g.target);if(s!==null){var C=so(s);if(C!==null){if(s=C.tag,s===13){if(s=YS(C),s!==null){g.blockedOn=s,PS(g.priority,function(){zS(C)});return}}else if(s===3&&C.stateNode.current.memoizedState.isDehydrated){g.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}g.blockedOn=null}function oI(g){if(g.blockedOn!==null)return!1;for(var s=g.targetContainers;0<s.length;){var C=Cf(g.domEventName,g.eventSystemFlags,s[0],g.nativeEvent);if(C===null){C=g.nativeEvent;var f=new C.constructor(C.type,C);ef=f,C.target.dispatchEvent(f),ef=null}else return s=Xs(C),s!==null&&uf(s),g.blockedOn=C,!1;s.shift()}return!0}function _S(g,s,C){oI(g)&&C.delete(s)}function qE(){If=!1,pi!==null&&oI(pi)&&(pi=null),bi!==null&&oI(bi)&&(bi=null),yi!==null&&oI(yi)&&(yi=null),fs.forEach(_S),hs.forEach(_S)}function bs(g,s){g.blockedOn===s&&(g.blockedOn=null,If||(If=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qE)))}function ys(g){function s(Z){return bs(Z,g)}if(0<iI.length){bs(iI[0],g);for(var C=1;C<iI.length;C++){var f=iI[C];f.blockedOn===g&&(f.blockedOn=null)}}for(pi!==null&&bs(pi,g),bi!==null&&bs(bi,g),yi!==null&&bs(yi,g),fs.forEach(s),hs.forEach(s),C=0;C<Zi.length;C++)f=Zi[C],f.blockedOn===g&&(f.blockedOn=null);for(;0<Zi.length&&(C=Zi[0],C.blockedOn===null);)QS(C),C.blockedOn===null&&Zi.shift()}var ug=R.ReactCurrentBatchConfig,gI=!0;function $E(g,s,C,f){var Z=at,w=ug.transition;ug.transition=null;try{at=1,df(g,s,C,f)}finally{at=Z,ug.transition=w}}function eM(g,s,C,f){var Z=at,w=ug.transition;ug.transition=null;try{at=4,df(g,s,C,f)}finally{at=Z,ug.transition=w}}function df(g,s,C,f){if(gI){var Z=Cf(g,s,C,f);if(Z===null)Rf(g,s,f,lI,C),OS(g,f);else if(_E(Z,g,s,C,f))f.stopPropagation();else if(OS(g,f),s&4&&-1<QE.indexOf(g)){for(;Z!==null;){var w=Xs(Z);if(w!==null&&LS(w),w=Cf(g,s,C,f),w===null&&Rf(g,s,f,lI,C),w===Z)break;Z=w}Z!==null&&f.stopPropagation()}else Rf(g,s,f,null,C)}}var lI=null;function Cf(g,s,C,f){if(lI=null,g=tf(f),g=co(g),g!==null)if(s=so(g),s===null)g=null;else if(C=s.tag,C===13){if(g=YS(s),g!==null)return g;g=null}else if(C===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;g=null}else s!==g&&(g=null);return lI=g,null}function qS(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ME()){case gf:return 1;case MS:return 4;case eI:case DE:return 16;case DS:return 536870912;default:return 16}default:return 16}}var vi=null,Af=null,sI=null;function $S(){if(sI)return sI;var g,s=Af,C=s.length,f,Z="value"in vi?vi.value:vi.textContent,w=Z.length;for(g=0;g<C&&s[g]===Z[g];g++);var J=C-g;for(f=1;f<=J&&s[C-f]===Z[w-f];f++);return sI=Z.slice(g,1<f?1-f:void 0)}function cI(g){var s=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&s===13&&(g=13)):g=s,g===10&&(g=13),32<=g||g===13?g:0}function uI(){return!0}function ew(){return!1}function On(g){function s(C,f,Z,w,J){this._reactName=C,this._targetInst=Z,this.type=f,this.nativeEvent=w,this.target=J,this.currentTarget=null;for(var K in g)g.hasOwnProperty(K)&&(C=g[K],this[K]=C?C(w):w[K]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?uI:ew,this.isPropagationStopped=ew,this}return ee(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=uI)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=uI)},persist:function(){},isPersistent:uI}),s}var Ig={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mf=On(Ig),Zs=ee({},Ig,{view:0,detail:0}),tM=On(Zs),ff,hf,vs,II=ee({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bf,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==vs&&(vs&&g.type==="mousemove"?(ff=g.screenX-vs.screenX,hf=g.screenY-vs.screenY):hf=ff=0,vs=g),ff)},movementY:function(g){return"movementY"in g?g.movementY:hf}}),tw=On(II),nM=ee({},II,{dataTransfer:0}),rM=On(nM),aM=ee({},Zs,{relatedTarget:0}),pf=On(aM),iM=ee({},Ig,{animationName:0,elapsedTime:0,pseudoElement:0}),oM=On(iM),gM=ee({},Ig,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),lM=On(gM),sM=ee({},Ig,{data:0}),nw=On(sM),cM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dM(g){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(g):(g=IM[g])?!!s[g]:!1}function bf(){return dM}var CM=ee({},Zs,{key:function(g){if(g.key){var s=cM[g.key]||g.key;if(s!=="Unidentified")return s}return g.type==="keypress"?(g=cI(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?uM[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bf,charCode:function(g){return g.type==="keypress"?cI(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?cI(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),AM=On(CM),mM=ee({},II,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rw=On(mM),fM=ee({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bf}),hM=On(fM),pM=ee({},Ig,{propertyName:0,elapsedTime:0,pseudoElement:0}),bM=On(pM),yM=ee({},II,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),ZM=On(yM),vM=[9,13,27,32],yf=l&&"CompositionEvent"in window,Gs=null;l&&"documentMode"in document&&(Gs=document.documentMode);var GM=l&&"TextEvent"in window&&!Gs,aw=l&&(!yf||Gs&&8<Gs&&11>=Gs),iw=" ",ow=!1;function gw(g,s){switch(g){case"keyup":return vM.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lw(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var dg=!1;function BM(g,s){switch(g){case"compositionend":return lw(s);case"keypress":return s.which!==32?null:(ow=!0,iw);case"textInput":return g=s.data,g===iw&&ow?null:g;default:return null}}function SM(g,s){if(dg)return g==="compositionend"||!yf&&gw(g,s)?(g=$S(),sI=Af=vi=null,dg=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return aw&&s.locale!=="ko"?null:s.data;default:return null}}var wM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sw(g){var s=g&&g.nodeName&&g.nodeName.toLowerCase();return s==="input"?!!wM[g.type]:s==="textarea"}function cw(g,s,C,f){VS(f),s=fI(s,"onChange"),0<s.length&&(C=new mf("onChange","change",null,C,f),g.push({event:C,listeners:s}))}var Bs=null,Ss=null;function WM(g){Ww(g,0)}function dI(g){var s=hg(g);if(ge(s))return g}function kM(g,s){if(g==="change")return s}var uw=!1;if(l){var Zf;if(l){var vf="oninput"in document;if(!vf){var Iw=document.createElement("div");Iw.setAttribute("oninput","return;"),vf=typeof Iw.oninput=="function"}Zf=vf}else Zf=!1;uw=Zf&&(!document.documentMode||9<document.documentMode)}function dw(){Bs&&(Bs.detachEvent("onpropertychange",Cw),Ss=Bs=null)}function Cw(g){if(g.propertyName==="value"&&dI(Ss)){var s=[];cw(s,Ss,g,tf(g)),JS(WM,s)}}function VM(g,s,C){g==="focusin"?(dw(),Bs=s,Ss=C,Bs.attachEvent("onpropertychange",Cw)):g==="focusout"&&dw()}function RM(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return dI(Ss)}function xM(g,s){if(g==="click")return dI(s)}function XM(g,s){if(g==="input"||g==="change")return dI(s)}function JM(g,s){return g===s&&(g!==0||1/g===1/s)||g!==g&&s!==s}var Nr=typeof Object.is=="function"?Object.is:JM;function ws(g,s){if(Nr(g,s))return!0;if(typeof g!="object"||g===null||typeof s!="object"||s===null)return!1;var C=Object.keys(g),f=Object.keys(s);if(C.length!==f.length)return!1;for(f=0;f<C.length;f++){var Z=C[f];if(!c.call(s,Z)||!Nr(g[Z],s[Z]))return!1}return!0}function Aw(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function mw(g,s){var C=Aw(g);g=0;for(var f;C;){if(C.nodeType===3){if(f=g+C.textContent.length,g<=s&&f>=s)return{node:C,offset:s-g};g=f}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=Aw(C)}}function fw(g,s){return g&&s?g===s?!0:g&&g.nodeType===3?!1:s&&s.nodeType===3?fw(g,s.parentNode):"contains"in g?g.contains(s):g.compareDocumentPosition?!!(g.compareDocumentPosition(s)&16):!1:!1}function hw(){for(var g=window,s=dt();s instanceof g.HTMLIFrameElement;){try{var C=typeof s.contentWindow.location.href=="string"}catch{C=!1}if(C)g=s.contentWindow;else break;s=dt(g.document)}return s}function Gf(g){var s=g&&g.nodeName&&g.nodeName.toLowerCase();return s&&(s==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||s==="textarea"||g.contentEditable==="true")}function YM(g){var s=hw(),C=g.focusedElem,f=g.selectionRange;if(s!==C&&C&&C.ownerDocument&&fw(C.ownerDocument.documentElement,C)){if(f!==null&&Gf(C)){if(s=f.start,g=f.end,g===void 0&&(g=s),"selectionStart"in C)C.selectionStart=s,C.selectionEnd=Math.min(g,C.value.length);else if(g=(s=C.ownerDocument||document)&&s.defaultView||window,g.getSelection){g=g.getSelection();var Z=C.textContent.length,w=Math.min(f.start,Z);f=f.end===void 0?w:Math.min(f.end,Z),!g.extend&&w>f&&(Z=f,f=w,w=Z),Z=mw(C,w);var J=mw(C,f);Z&&J&&(g.rangeCount!==1||g.anchorNode!==Z.node||g.anchorOffset!==Z.offset||g.focusNode!==J.node||g.focusOffset!==J.offset)&&(s=s.createRange(),s.setStart(Z.node,Z.offset),g.removeAllRanges(),w>f?(g.addRange(s),g.extend(J.node,J.offset)):(s.setEnd(J.node,J.offset),g.addRange(s)))}}for(s=[],g=C;g=g.parentNode;)g.nodeType===1&&s.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<s.length;C++)g=s[C],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var NM=l&&"documentMode"in document&&11>=document.documentMode,Cg=null,Bf=null,Ws=null,Sf=!1;function pw(g,s,C){var f=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;Sf||Cg==null||Cg!==dt(f)||(f=Cg,"selectionStart"in f&&Gf(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ws&&ws(Ws,f)||(Ws=f,f=fI(Bf,"onSelect"),0<f.length&&(s=new mf("onSelect","select",null,s,C),g.push({event:s,listeners:f}),s.target=Cg)))}function CI(g,s){var C={};return C[g.toLowerCase()]=s.toLowerCase(),C["Webkit"+g]="webkit"+s,C["Moz"+g]="moz"+s,C}var Ag={animationend:CI("Animation","AnimationEnd"),animationiteration:CI("Animation","AnimationIteration"),animationstart:CI("Animation","AnimationStart"),transitionend:CI("Transition","TransitionEnd")},wf={},bw={};l&&(bw=document.createElement("div").style,"AnimationEvent"in window||(delete Ag.animationend.animation,delete Ag.animationiteration.animation,delete Ag.animationstart.animation),"TransitionEvent"in window||delete Ag.transitionend.transition);function AI(g){if(wf[g])return wf[g];if(!Ag[g])return g;var s=Ag[g],C;for(C in s)if(s.hasOwnProperty(C)&&C in bw)return wf[g]=s[C];return g}var yw=AI("animationend"),Zw=AI("animationiteration"),vw=AI("animationstart"),Gw=AI("transitionend"),Bw=new Map,Sw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(g,s){Bw.set(g,s),i(s,[g])}for(var Wf=0;Wf<Sw.length;Wf++){var kf=Sw[Wf],HM=kf.toLowerCase(),FM=kf[0].toUpperCase()+kf.slice(1);Gi(HM,"on"+FM)}Gi(yw,"onAnimationEnd"),Gi(Zw,"onAnimationIteration"),Gi(vw,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(Gw,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KM=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function ww(g,s,C){var f=g.type||"unknown-event";g.currentTarget=C,HE(f,s,void 0,g),g.currentTarget=null}function Ww(g,s){s=(s&4)!==0;for(var C=0;C<g.length;C++){var f=g[C],Z=f.event;f=f.listeners;e:{var w=void 0;if(s)for(var J=f.length-1;0<=J;J--){var K=f[J],j=K.instance,$=K.currentTarget;if(K=K.listener,j!==w&&Z.isPropagationStopped())break e;ww(Z,K,$),w=j}else for(J=0;J<f.length;J++){if(K=f[J],j=K.instance,$=K.currentTarget,K=K.listener,j!==w&&Z.isPropagationStopped())break e;ww(Z,K,$),w=j}}}if($u)throw g=of,$u=!1,of=null,g}function bt(g,s){var C=s[Hf];C===void 0&&(C=s[Hf]=new Set);var f=g+"__bubble";C.has(f)||(kw(s,g,2,!1),C.add(f))}function Vf(g,s,C){var f=0;s&&(f|=4),kw(C,g,f,s)}var mI="_reactListening"+Math.random().toString(36).slice(2);function Vs(g){if(!g[mI]){g[mI]=!0,r.forEach(function(C){C!=="selectionchange"&&(KM.has(C)||Vf(C,!1,g),Vf(C,!0,g))});var s=g.nodeType===9?g:g.ownerDocument;s===null||s[mI]||(s[mI]=!0,Vf("selectionchange",!1,s))}}function kw(g,s,C,f){switch(qS(s)){case 1:var Z=$E;break;case 4:Z=eM;break;default:Z=df}C=Z.bind(null,s,C,g),Z=void 0,!af||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(Z=!0),f?Z!==void 0?g.addEventListener(s,C,{capture:!0,passive:Z}):g.addEventListener(s,C,!0):Z!==void 0?g.addEventListener(s,C,{passive:Z}):g.addEventListener(s,C,!1)}function Rf(g,s,C,f,Z){var w=f;if(!(s&1)&&!(s&2)&&f!==null)e:for(;;){if(f===null)return;var J=f.tag;if(J===3||J===4){var K=f.stateNode.containerInfo;if(K===Z||K.nodeType===8&&K.parentNode===Z)break;if(J===4)for(J=f.return;J!==null;){var j=J.tag;if((j===3||j===4)&&(j=J.stateNode.containerInfo,j===Z||j.nodeType===8&&j.parentNode===Z))return;J=J.return}for(;K!==null;){if(J=co(K),J===null)return;if(j=J.tag,j===5||j===6){f=w=J;continue e}K=K.parentNode}}f=f.return}JS(function(){var $=w,oe=tf(C),le=[];e:{var ie=Bw.get(g);if(ie!==void 0){var Ae=mf,be=g;switch(g){case"keypress":if(cI(C)===0)break e;case"keydown":case"keyup":Ae=AM;break;case"focusin":be="focus",Ae=pf;break;case"focusout":be="blur",Ae=pf;break;case"beforeblur":case"afterblur":Ae=pf;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=tw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=rM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=hM;break;case yw:case Zw:case vw:Ae=oM;break;case Gw:Ae=bM;break;case"scroll":Ae=tM;break;case"wheel":Ae=ZM;break;case"copy":case"cut":case"paste":Ae=lM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=rw}var Ze=(s&4)!==0,Kt=!Ze&&g==="scroll",Q=Ze?ie!==null?ie+"Capture":null:ie;Ze=[];for(var U=$,_;U!==null;){_=U;var ce=_.stateNode;if(_.tag===5&&ce!==null&&(_=ce,Q!==null&&(ce=Is(U,Q),ce!=null&&Ze.push(Rs(U,ce,_)))),Kt)break;U=U.return}0<Ze.length&&(ie=new Ae(ie,be,null,C,oe),le.push({event:ie,listeners:Ze}))}}if(!(s&7)){e:{if(ie=g==="mouseover"||g==="pointerover",Ae=g==="mouseout"||g==="pointerout",ie&&C!==ef&&(be=C.relatedTarget||C.fromElement)&&(co(be)||be[Fa]))break e;if((Ae||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,Ae?(be=C.relatedTarget||C.toElement,Ae=$,be=be?co(be):null,be!==null&&(Kt=so(be),be!==Kt||be.tag!==5&&be.tag!==6)&&(be=null)):(Ae=null,be=$),Ae!==be)){if(Ze=tw,ce="onMouseLeave",Q="onMouseEnter",U="mouse",(g==="pointerout"||g==="pointerover")&&(Ze=rw,ce="onPointerLeave",Q="onPointerEnter",U="pointer"),Kt=Ae==null?ie:hg(Ae),_=be==null?ie:hg(be),ie=new Ze(ce,U+"leave",Ae,C,oe),ie.target=Kt,ie.relatedTarget=_,ce=null,co(oe)===$&&(Ze=new Ze(Q,U+"enter",be,C,oe),Ze.target=_,Ze.relatedTarget=Kt,ce=Ze),Kt=ce,Ae&&be)t:{for(Ze=Ae,Q=be,U=0,_=Ze;_;_=mg(_))U++;for(_=0,ce=Q;ce;ce=mg(ce))_++;for(;0<U-_;)Ze=mg(Ze),U--;for(;0<_-U;)Q=mg(Q),_--;for(;U--;){if(Ze===Q||Q!==null&&Ze===Q.alternate)break t;Ze=mg(Ze),Q=mg(Q)}Ze=null}else Ze=null;Ae!==null&&Vw(le,ie,Ae,Ze,!1),be!==null&&Kt!==null&&Vw(le,Kt,be,Ze,!0)}}e:{if(ie=$?hg($):window,Ae=ie.nodeName&&ie.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&ie.type==="file")var ve=kM;else if(sw(ie))if(uw)ve=XM;else{ve=RM;var Se=VM}else(Ae=ie.nodeName)&&Ae.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(ve=xM);if(ve&&(ve=ve(g,$))){cw(le,ve,C,oe);break e}Se&&Se(g,ie,$),g==="focusout"&&(Se=ie._wrapperState)&&Se.controlled&&ie.type==="number"&&aa(ie,"number",ie.value)}switch(Se=$?hg($):window,g){case"focusin":(sw(Se)||Se.contentEditable==="true")&&(Cg=Se,Bf=$,Ws=null);break;case"focusout":Ws=Bf=Cg=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,pw(le,C,oe);break;case"selectionchange":if(NM)break;case"keydown":case"keyup":pw(le,C,oe)}var we;if(yf)e:{switch(g){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else dg?gw(g,C)&&(Re="onCompositionEnd"):g==="keydown"&&C.keyCode===229&&(Re="onCompositionStart");Re&&(aw&&C.locale!=="ko"&&(dg||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&dg&&(we=$S()):(vi=oe,Af="value"in vi?vi.value:vi.textContent,dg=!0)),Se=fI($,Re),0<Se.length&&(Re=new nw(Re,g,null,C,oe),le.push({event:Re,listeners:Se}),we?Re.data=we:(we=lw(C),we!==null&&(Re.data=we)))),(we=GM?BM(g,C):SM(g,C))&&($=fI($,"onBeforeInput"),0<$.length&&(oe=new nw("onBeforeInput","beforeinput",null,C,oe),le.push({event:oe,listeners:$}),oe.data=we))}Ww(le,s)})}function Rs(g,s,C){return{instance:g,listener:s,currentTarget:C}}function fI(g,s){for(var C=s+"Capture",f=[];g!==null;){var Z=g,w=Z.stateNode;Z.tag===5&&w!==null&&(Z=w,w=Is(g,C),w!=null&&f.unshift(Rs(g,w,Z)),w=Is(g,s),w!=null&&f.push(Rs(g,w,Z))),g=g.return}return f}function mg(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function Vw(g,s,C,f,Z){for(var w=s._reactName,J=[];C!==null&&C!==f;){var K=C,j=K.alternate,$=K.stateNode;if(j!==null&&j===f)break;K.tag===5&&$!==null&&(K=$,Z?(j=Is(C,w),j!=null&&J.unshift(Rs(C,j,K))):Z||(j=Is(C,w),j!=null&&J.push(Rs(C,j,K)))),C=C.return}J.length!==0&&g.push({event:s,listeners:J})}var EM=/\r\n?/g,MM=/\u0000|\uFFFD/g;function Rw(g){return(typeof g=="string"?g:""+g).replace(EM,`
`).replace(MM,"")}function hI(g,s,C){if(s=Rw(s),Rw(g)!==s&&C)throw Error(n(425))}function pI(){}var xf=null,Xf=null;function Jf(g,s){return g==="textarea"||g==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yf=typeof setTimeout=="function"?setTimeout:void 0,DM=typeof clearTimeout=="function"?clearTimeout:void 0,xw=typeof Promise=="function"?Promise:void 0,TM=typeof queueMicrotask=="function"?queueMicrotask:typeof xw<"u"?function(g){return xw.resolve(null).then(g).catch(jM)}:Yf;function jM(g){setTimeout(function(){throw g})}function Nf(g,s){var C=s,f=0;do{var Z=C.nextSibling;if(g.removeChild(C),Z&&Z.nodeType===8)if(C=Z.data,C==="/$"){if(f===0){g.removeChild(Z),ys(s);return}f--}else C!=="$"&&C!=="$?"&&C!=="$!"||f++;C=Z}while(C);ys(s)}function Bi(g){for(;g!=null;g=g.nextSibling){var s=g.nodeType;if(s===1||s===3)break;if(s===8){if(s=g.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return g}function Xw(g){g=g.previousSibling;for(var s=0;g;){if(g.nodeType===8){var C=g.data;if(C==="$"||C==="$!"||C==="$?"){if(s===0)return g;s--}else C==="/$"&&s++}g=g.previousSibling}return null}var fg=Math.random().toString(36).slice(2),ga="__reactFiber$"+fg,xs="__reactProps$"+fg,Fa="__reactContainer$"+fg,Hf="__reactEvents$"+fg,LM="__reactListeners$"+fg,zM="__reactHandles$"+fg;function co(g){var s=g[ga];if(s)return s;for(var C=g.parentNode;C;){if(s=C[Fa]||C[ga]){if(C=s.alternate,s.child!==null||C!==null&&C.child!==null)for(g=Xw(g);g!==null;){if(C=g[ga])return C;g=Xw(g)}return s}g=C,C=g.parentNode}return null}function Xs(g){return g=g[ga]||g[Fa],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function hg(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(n(33))}function bI(g){return g[xs]||null}var Ff=[],pg=-1;function Si(g){return{current:g}}function yt(g){0>pg||(g.current=Ff[pg],Ff[pg]=null,pg--)}function ft(g,s){pg++,Ff[pg]=g.current,g.current=s}var wi={},fn=Si(wi),Nn=Si(!1),uo=wi;function bg(g,s){var C=g.type.contextTypes;if(!C)return wi;var f=g.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var Z={},w;for(w in C)Z[w]=s[w];return f&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=s,g.__reactInternalMemoizedMaskedChildContext=Z),Z}function Hn(g){return g=g.childContextTypes,g!=null}function yI(){yt(Nn),yt(fn)}function Jw(g,s,C){if(fn.current!==wi)throw Error(n(168));ft(fn,s),ft(Nn,C)}function Yw(g,s,C){var f=g.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return C;f=f.getChildContext();for(var Z in f)if(!(Z in s))throw Error(n(108,Te(g)||"Unknown",Z));return ee({},C,f)}function ZI(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||wi,uo=fn.current,ft(fn,g),ft(Nn,Nn.current),!0}function Nw(g,s,C){var f=g.stateNode;if(!f)throw Error(n(169));C?(g=Yw(g,s,uo),f.__reactInternalMemoizedMergedChildContext=g,yt(Nn),yt(fn),ft(fn,g)):yt(Nn),ft(Nn,C)}var Ka=null,vI=!1,Kf=!1;function Hw(g){Ka===null?Ka=[g]:Ka.push(g)}function UM(g){vI=!0,Hw(g)}function Wi(){if(!Kf&&Ka!==null){Kf=!0;var g=0,s=at;try{var C=Ka;for(at=1;g<C.length;g++){var f=C[g];do f=f(!0);while(f!==null)}Ka=null,vI=!1}catch(Z){throw Ka!==null&&(Ka=Ka.slice(g+1)),KS(gf,Wi),Z}finally{at=s,Kf=!1}}return null}var yg=[],Zg=0,GI=null,BI=0,Cr=[],Ar=0,Io=null,Ea=1,Ma="";function Co(g,s){yg[Zg++]=BI,yg[Zg++]=GI,GI=g,BI=s}function Fw(g,s,C){Cr[Ar++]=Ea,Cr[Ar++]=Ma,Cr[Ar++]=Io,Io=g;var f=Ea;g=Ma;var Z=32-Yr(f)-1;f&=~(1<<Z),C+=1;var w=32-Yr(s)+Z;if(30<w){var J=Z-Z%5;w=(f&(1<<J)-1).toString(32),f>>=J,Z-=J,Ea=1<<32-Yr(s)+Z|C<<Z|f,Ma=w+g}else Ea=1<<w|C<<Z|f,Ma=g}function Ef(g){g.return!==null&&(Co(g,1),Fw(g,1,0))}function Mf(g){for(;g===GI;)GI=yg[--Zg],yg[Zg]=null,BI=yg[--Zg],yg[Zg]=null;for(;g===Io;)Io=Cr[--Ar],Cr[Ar]=null,Ma=Cr[--Ar],Cr[Ar]=null,Ea=Cr[--Ar],Cr[Ar]=null}var Qn=null,_n=null,Gt=!1,Hr=null;function Kw(g,s){var C=pr(5,null,null,0);C.elementType="DELETED",C.stateNode=s,C.return=g,s=g.deletions,s===null?(g.deletions=[C],g.flags|=16):s.push(C)}function Ew(g,s){switch(g.tag){case 5:var C=g.type;return s=s.nodeType!==1||C.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(g.stateNode=s,Qn=g,_n=Bi(s.firstChild),!0):!1;case 6:return s=g.pendingProps===""||s.nodeType!==3?null:s,s!==null?(g.stateNode=s,Qn=g,_n=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(C=Io!==null?{id:Ea,overflow:Ma}:null,g.memoizedState={dehydrated:s,treeContext:C,retryLane:1073741824},C=pr(18,null,null,0),C.stateNode=s,C.return=g,g.child=C,Qn=g,_n=null,!0):!1;default:return!1}}function Df(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Tf(g){if(Gt){var s=_n;if(s){var C=s;if(!Ew(g,s)){if(Df(g))throw Error(n(418));s=Bi(C.nextSibling);var f=Qn;s&&Ew(g,s)?Kw(f,C):(g.flags=g.flags&-4097|2,Gt=!1,Qn=g)}}else{if(Df(g))throw Error(n(418));g.flags=g.flags&-4097|2,Gt=!1,Qn=g}}}function Mw(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Qn=g}function SI(g){if(g!==Qn)return!1;if(!Gt)return Mw(g),Gt=!0,!1;var s;if((s=g.tag!==3)&&!(s=g.tag!==5)&&(s=g.type,s=s!=="head"&&s!=="body"&&!Jf(g.type,g.memoizedProps)),s&&(s=_n)){if(Df(g))throw Dw(),Error(n(418));for(;s;)Kw(g,s),s=Bi(s.nextSibling)}if(Mw(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));e:{for(g=g.nextSibling,s=0;g;){if(g.nodeType===8){var C=g.data;if(C==="/$"){if(s===0){_n=Bi(g.nextSibling);break e}s--}else C!=="$"&&C!=="$!"&&C!=="$?"||s++}g=g.nextSibling}_n=null}}else _n=Qn?Bi(g.stateNode.nextSibling):null;return!0}function Dw(){for(var g=_n;g;)g=Bi(g.nextSibling)}function vg(){_n=Qn=null,Gt=!1}function jf(g){Hr===null?Hr=[g]:Hr.push(g)}var PM=R.ReactCurrentBatchConfig;function Js(g,s,C){if(g=C.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(n(309));var f=C.stateNode}if(!f)throw Error(n(147,g));var Z=f,w=""+g;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===w?s.ref:(s=function(J){var K=Z.refs;J===null?delete K[w]:K[w]=J},s._stringRef=w,s)}if(typeof g!="string")throw Error(n(284));if(!C._owner)throw Error(n(290,g))}return g}function wI(g,s){throw g=Object.prototype.toString.call(s),Error(n(31,g==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":g))}function Tw(g){var s=g._init;return s(g._payload)}function jw(g){function s(Q,U){if(g){var _=Q.deletions;_===null?(Q.deletions=[U],Q.flags|=16):_.push(U)}}function C(Q,U){if(!g)return null;for(;U!==null;)s(Q,U),U=U.sibling;return null}function f(Q,U){for(Q=new Map;U!==null;)U.key!==null?Q.set(U.key,U):Q.set(U.index,U),U=U.sibling;return Q}function Z(Q,U){return Q=Ni(Q,U),Q.index=0,Q.sibling=null,Q}function w(Q,U,_){return Q.index=_,g?(_=Q.alternate,_!==null?(_=_.index,_<U?(Q.flags|=2,U):_):(Q.flags|=2,U)):(Q.flags|=1048576,U)}function J(Q){return g&&Q.alternate===null&&(Q.flags|=2),Q}function K(Q,U,_,ce){return U===null||U.tag!==6?(U=Yh(_,Q.mode,ce),U.return=Q,U):(U=Z(U,_),U.return=Q,U)}function j(Q,U,_,ce){var ve=_.type;return ve===W?oe(Q,U,_.props.children,ce,_.key):U!==null&&(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===z&&Tw(ve)===U.type)?(ce=Z(U,_.props),ce.ref=Js(Q,U,_),ce.return=Q,ce):(ce=_I(_.type,_.key,_.props,null,Q.mode,ce),ce.ref=Js(Q,U,_),ce.return=Q,ce)}function $(Q,U,_,ce){return U===null||U.tag!==4||U.stateNode.containerInfo!==_.containerInfo||U.stateNode.implementation!==_.implementation?(U=Nh(_,Q.mode,ce),U.return=Q,U):(U=Z(U,_.children||[]),U.return=Q,U)}function oe(Q,U,_,ce,ve){return U===null||U.tag!==7?(U=Zo(_,Q.mode,ce,ve),U.return=Q,U):(U=Z(U,_),U.return=Q,U)}function le(Q,U,_){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Yh(""+U,Q.mode,_),U.return=Q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case B:return _=_I(U.type,U.key,U.props,null,Q.mode,_),_.ref=Js(Q,null,U),_.return=Q,_;case V:return U=Nh(U,Q.mode,_),U.return=Q,U;case z:var ce=U._init;return le(Q,ce(U._payload),_)}if(ia(U)||q(U))return U=Zo(U,Q.mode,_,null),U.return=Q,U;wI(Q,U)}return null}function ie(Q,U,_,ce){var ve=U!==null?U.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return ve!==null?null:K(Q,U,""+_,ce);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case B:return _.key===ve?j(Q,U,_,ce):null;case V:return _.key===ve?$(Q,U,_,ce):null;case z:return ve=_._init,ie(Q,U,ve(_._payload),ce)}if(ia(_)||q(_))return ve!==null?null:oe(Q,U,_,ce,null);wI(Q,_)}return null}function Ae(Q,U,_,ce,ve){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Q=Q.get(_)||null,K(U,Q,""+ce,ve);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case B:return Q=Q.get(ce.key===null?_:ce.key)||null,j(U,Q,ce,ve);case V:return Q=Q.get(ce.key===null?_:ce.key)||null,$(U,Q,ce,ve);case z:var Se=ce._init;return Ae(Q,U,_,Se(ce._payload),ve)}if(ia(ce)||q(ce))return Q=Q.get(_)||null,oe(U,Q,ce,ve,null);wI(U,ce)}return null}function be(Q,U,_,ce){for(var ve=null,Se=null,we=U,Re=U=0,an=null;we!==null&&Re<_.length;Re++){we.index>Re?(an=we,we=null):an=we.sibling;var Pe=ie(Q,we,_[Re],ce);if(Pe===null){we===null&&(we=an);break}g&&we&&Pe.alternate===null&&s(Q,we),U=w(Pe,U,Re),Se===null?ve=Pe:Se.sibling=Pe,Se=Pe,we=an}if(Re===_.length)return C(Q,we),Gt&&Co(Q,Re),ve;if(we===null){for(;Re<_.length;Re++)we=le(Q,_[Re],ce),we!==null&&(U=w(we,U,Re),Se===null?ve=we:Se.sibling=we,Se=we);return Gt&&Co(Q,Re),ve}for(we=f(Q,we);Re<_.length;Re++)an=Ae(we,Q,Re,_[Re],ce),an!==null&&(g&&an.alternate!==null&&we.delete(an.key===null?Re:an.key),U=w(an,U,Re),Se===null?ve=an:Se.sibling=an,Se=an);return g&&we.forEach(function(Hi){return s(Q,Hi)}),Gt&&Co(Q,Re),ve}function Ze(Q,U,_,ce){var ve=q(_);if(typeof ve!="function")throw Error(n(150));if(_=ve.call(_),_==null)throw Error(n(151));for(var Se=ve=null,we=U,Re=U=0,an=null,Pe=_.next();we!==null&&!Pe.done;Re++,Pe=_.next()){we.index>Re?(an=we,we=null):an=we.sibling;var Hi=ie(Q,we,Pe.value,ce);if(Hi===null){we===null&&(we=an);break}g&&we&&Hi.alternate===null&&s(Q,we),U=w(Hi,U,Re),Se===null?ve=Hi:Se.sibling=Hi,Se=Hi,we=an}if(Pe.done)return C(Q,we),Gt&&Co(Q,Re),ve;if(we===null){for(;!Pe.done;Re++,Pe=_.next())Pe=le(Q,Pe.value,ce),Pe!==null&&(U=w(Pe,U,Re),Se===null?ve=Pe:Se.sibling=Pe,Se=Pe);return Gt&&Co(Q,Re),ve}for(we=f(Q,we);!Pe.done;Re++,Pe=_.next())Pe=Ae(we,Q,Re,Pe.value,ce),Pe!==null&&(g&&Pe.alternate!==null&&we.delete(Pe.key===null?Re:Pe.key),U=w(Pe,U,Re),Se===null?ve=Pe:Se.sibling=Pe,Se=Pe);return g&&we.forEach(function(S3){return s(Q,S3)}),Gt&&Co(Q,Re),ve}function Kt(Q,U,_,ce){if(typeof _=="object"&&_!==null&&_.type===W&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case B:e:{for(var ve=_.key,Se=U;Se!==null;){if(Se.key===ve){if(ve=_.type,ve===W){if(Se.tag===7){C(Q,Se.sibling),U=Z(Se,_.props.children),U.return=Q,Q=U;break e}}else if(Se.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===z&&Tw(ve)===Se.type){C(Q,Se.sibling),U=Z(Se,_.props),U.ref=Js(Q,Se,_),U.return=Q,Q=U;break e}C(Q,Se);break}else s(Q,Se);Se=Se.sibling}_.type===W?(U=Zo(_.props.children,Q.mode,ce,_.key),U.return=Q,Q=U):(ce=_I(_.type,_.key,_.props,null,Q.mode,ce),ce.ref=Js(Q,U,_),ce.return=Q,Q=ce)}return J(Q);case V:e:{for(Se=_.key;U!==null;){if(U.key===Se)if(U.tag===4&&U.stateNode.containerInfo===_.containerInfo&&U.stateNode.implementation===_.implementation){C(Q,U.sibling),U=Z(U,_.children||[]),U.return=Q,Q=U;break e}else{C(Q,U);break}else s(Q,U);U=U.sibling}U=Nh(_,Q.mode,ce),U.return=Q,Q=U}return J(Q);case z:return Se=_._init,Kt(Q,U,Se(_._payload),ce)}if(ia(_))return be(Q,U,_,ce);if(q(_))return Ze(Q,U,_,ce);wI(Q,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,U!==null&&U.tag===6?(C(Q,U.sibling),U=Z(U,_),U.return=Q,Q=U):(C(Q,U),U=Yh(_,Q.mode,ce),U.return=Q,Q=U),J(Q)):C(Q,U)}return Kt}var Gg=jw(!0),Lw=jw(!1),WI=Si(null),kI=null,Bg=null,Lf=null;function zf(){Lf=Bg=kI=null}function Uf(g){var s=WI.current;yt(WI),g._currentValue=s}function Pf(g,s,C){for(;g!==null;){var f=g.alternate;if((g.childLanes&s)!==s?(g.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),g===C)break;g=g.return}}function Sg(g,s){kI=g,Lf=Bg=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&s&&(Fn=!0),g.firstContext=null)}function mr(g){var s=g._currentValue;if(Lf!==g)if(g={context:g,memoizedValue:s,next:null},Bg===null){if(kI===null)throw Error(n(308));Bg=g,kI.dependencies={lanes:0,firstContext:g}}else Bg=Bg.next=g;return s}var Ao=null;function Of(g){Ao===null?Ao=[g]:Ao.push(g)}function zw(g,s,C,f){var Z=s.interleaved;return Z===null?(C.next=C,Of(s)):(C.next=Z.next,Z.next=C),s.interleaved=C,Da(g,f)}function Da(g,s){g.lanes|=s;var C=g.alternate;for(C!==null&&(C.lanes|=s),C=g,g=g.return;g!==null;)g.childLanes|=s,C=g.alternate,C!==null&&(C.childLanes|=s),C=g,g=g.return;return C.tag===3?C.stateNode:null}var ki=!1;function Qf(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uw(g,s){g=g.updateQueue,s.updateQueue===g&&(s.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function Ta(g,s){return{eventTime:g,lane:s,tag:0,payload:null,callback:null,next:null}}function Vi(g,s,C){var f=g.updateQueue;if(f===null)return null;if(f=f.shared,ze&2){var Z=f.pending;return Z===null?s.next=s:(s.next=Z.next,Z.next=s),f.pending=s,Da(g,C)}return Z=f.interleaved,Z===null?(s.next=s,Of(f)):(s.next=Z.next,Z.next=s),f.interleaved=s,Da(g,C)}function VI(g,s,C){if(s=s.updateQueue,s!==null&&(s=s.shared,(C&4194240)!==0)){var f=s.lanes;f&=g.pendingLanes,C|=f,s.lanes=C,cf(g,C)}}function Pw(g,s){var C=g.updateQueue,f=g.alternate;if(f!==null&&(f=f.updateQueue,C===f)){var Z=null,w=null;if(C=C.firstBaseUpdate,C!==null){do{var J={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};w===null?Z=w=J:w=w.next=J,C=C.next}while(C!==null);w===null?Z=w=s:w=w.next=s}else Z=w=s;C={baseState:f.baseState,firstBaseUpdate:Z,lastBaseUpdate:w,shared:f.shared,effects:f.effects},g.updateQueue=C;return}g=C.lastBaseUpdate,g===null?C.firstBaseUpdate=s:g.next=s,C.lastBaseUpdate=s}function RI(g,s,C,f){var Z=g.updateQueue;ki=!1;var w=Z.firstBaseUpdate,J=Z.lastBaseUpdate,K=Z.shared.pending;if(K!==null){Z.shared.pending=null;var j=K,$=j.next;j.next=null,J===null?w=$:J.next=$,J=j;var oe=g.alternate;oe!==null&&(oe=oe.updateQueue,K=oe.lastBaseUpdate,K!==J&&(K===null?oe.firstBaseUpdate=$:K.next=$,oe.lastBaseUpdate=j))}if(w!==null){var le=Z.baseState;J=0,oe=$=j=null,K=w;do{var ie=K.lane,Ae=K.eventTime;if((f&ie)===ie){oe!==null&&(oe=oe.next={eventTime:Ae,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var be=g,Ze=K;switch(ie=s,Ae=C,Ze.tag){case 1:if(be=Ze.payload,typeof be=="function"){le=be.call(Ae,le,ie);break e}le=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ze.payload,ie=typeof be=="function"?be.call(Ae,le,ie):be,ie==null)break e;le=ee({},le,ie);break e;case 2:ki=!0}}K.callback!==null&&K.lane!==0&&(g.flags|=64,ie=Z.effects,ie===null?Z.effects=[K]:ie.push(K))}else Ae={eventTime:Ae,lane:ie,tag:K.tag,payload:K.payload,callback:K.callback,next:null},oe===null?($=oe=Ae,j=le):oe=oe.next=Ae,J|=ie;if(K=K.next,K===null){if(K=Z.shared.pending,K===null)break;ie=K,K=ie.next,ie.next=null,Z.lastBaseUpdate=ie,Z.shared.pending=null}}while(!0);if(oe===null&&(j=le),Z.baseState=j,Z.firstBaseUpdate=$,Z.lastBaseUpdate=oe,s=Z.shared.interleaved,s!==null){Z=s;do J|=Z.lane,Z=Z.next;while(Z!==s)}else w===null&&(Z.shared.lanes=0);ho|=J,g.lanes=J,g.memoizedState=le}}function Ow(g,s,C){if(g=s.effects,s.effects=null,g!==null)for(s=0;s<g.length;s++){var f=g[s],Z=f.callback;if(Z!==null){if(f.callback=null,f=C,typeof Z!="function")throw Error(n(191,Z));Z.call(f)}}}var Ys={},la=Si(Ys),Ns=Si(Ys),Hs=Si(Ys);function mo(g){if(g===Ys)throw Error(n(174));return g}function _f(g,s){switch(ft(Hs,s),ft(Ns,g),ft(la,Ys),g=s.nodeType,g){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:_m(null,"");break;default:g=g===8?s.parentNode:s,s=g.namespaceURI||null,g=g.tagName,s=_m(s,g)}yt(la),ft(la,s)}function wg(){yt(la),yt(Ns),yt(Hs)}function Qw(g){mo(Hs.current);var s=mo(la.current),C=_m(s,g.type);s!==C&&(ft(Ns,g),ft(la,C))}function qf(g){Ns.current===g&&(yt(la),yt(Ns))}var Wt=Si(0);function xI(g){for(var s=g;s!==null;){if(s.tag===13){var C=s.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===g)break;for(;s.sibling===null;){if(s.return===null||s.return===g)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $f=[];function eh(){for(var g=0;g<$f.length;g++)$f[g]._workInProgressVersionPrimary=null;$f.length=0}var XI=R.ReactCurrentDispatcher,th=R.ReactCurrentBatchConfig,fo=0,kt=null,Qt=null,nn=null,JI=!1,Fs=!1,Ks=0,OM=0;function hn(){throw Error(n(321))}function nh(g,s){if(s===null)return!1;for(var C=0;C<s.length&&C<g.length;C++)if(!Nr(g[C],s[C]))return!1;return!0}function rh(g,s,C,f,Z,w){if(fo=w,kt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,XI.current=g===null||g.memoizedState===null?$M:e3,g=C(f,Z),Fs){w=0;do{if(Fs=!1,Ks=0,25<=w)throw Error(n(301));w+=1,nn=Qt=null,s.updateQueue=null,XI.current=t3,g=C(f,Z)}while(Fs)}if(XI.current=HI,s=Qt!==null&&Qt.next!==null,fo=0,nn=Qt=kt=null,JI=!1,s)throw Error(n(300));return g}function ah(){var g=Ks!==0;return Ks=0,g}function sa(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?kt.memoizedState=nn=g:nn=nn.next=g,nn}function fr(){if(Qt===null){var g=kt.alternate;g=g!==null?g.memoizedState:null}else g=Qt.next;var s=nn===null?kt.memoizedState:nn.next;if(s!==null)nn=s,Qt=g;else{if(g===null)throw Error(n(310));Qt=g,g={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},nn===null?kt.memoizedState=nn=g:nn=nn.next=g}return nn}function Es(g,s){return typeof s=="function"?s(g):s}function ih(g){var s=fr(),C=s.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=g;var f=Qt,Z=f.baseQueue,w=C.pending;if(w!==null){if(Z!==null){var J=Z.next;Z.next=w.next,w.next=J}f.baseQueue=Z=w,C.pending=null}if(Z!==null){w=Z.next,f=f.baseState;var K=J=null,j=null,$=w;do{var oe=$.lane;if((fo&oe)===oe)j!==null&&(j=j.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),f=$.hasEagerState?$.eagerState:g(f,$.action);else{var le={lane:oe,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};j===null?(K=j=le,J=f):j=j.next=le,kt.lanes|=oe,ho|=oe}$=$.next}while($!==null&&$!==w);j===null?J=f:j.next=K,Nr(f,s.memoizedState)||(Fn=!0),s.memoizedState=f,s.baseState=J,s.baseQueue=j,C.lastRenderedState=f}if(g=C.interleaved,g!==null){Z=g;do w=Z.lane,kt.lanes|=w,ho|=w,Z=Z.next;while(Z!==g)}else Z===null&&(C.lanes=0);return[s.memoizedState,C.dispatch]}function oh(g){var s=fr(),C=s.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=g;var f=C.dispatch,Z=C.pending,w=s.memoizedState;if(Z!==null){C.pending=null;var J=Z=Z.next;do w=g(w,J.action),J=J.next;while(J!==Z);Nr(w,s.memoizedState)||(Fn=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),C.lastRenderedState=w}return[w,f]}function _w(){}function qw(g,s){var C=kt,f=fr(),Z=s(),w=!Nr(f.memoizedState,Z);if(w&&(f.memoizedState=Z,Fn=!0),f=f.queue,gh(tW.bind(null,C,f,g),[g]),f.getSnapshot!==s||w||nn!==null&&nn.memoizedState.tag&1){if(C.flags|=2048,Ms(9,eW.bind(null,C,f,Z,s),void 0,null),rn===null)throw Error(n(349));fo&30||$w(C,s,Z)}return Z}function $w(g,s,C){g.flags|=16384,g={getSnapshot:s,value:C},s=kt.updateQueue,s===null?(s={lastEffect:null,stores:null},kt.updateQueue=s,s.stores=[g]):(C=s.stores,C===null?s.stores=[g]:C.push(g))}function eW(g,s,C,f){s.value=C,s.getSnapshot=f,nW(s)&&rW(g)}function tW(g,s,C){return C(function(){nW(s)&&rW(g)})}function nW(g){var s=g.getSnapshot;g=g.value;try{var C=s();return!Nr(g,C)}catch{return!0}}function rW(g){var s=Da(g,1);s!==null&&Mr(s,g,1,-1)}function aW(g){var s=sa();return typeof g=="function"&&(g=g()),s.memoizedState=s.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:g},s.queue=g,g=g.dispatch=qM.bind(null,kt,g),[s.memoizedState,g]}function Ms(g,s,C,f){return g={tag:g,create:s,destroy:C,deps:f,next:null},s=kt.updateQueue,s===null?(s={lastEffect:null,stores:null},kt.updateQueue=s,s.lastEffect=g.next=g):(C=s.lastEffect,C===null?s.lastEffect=g.next=g:(f=C.next,C.next=g,g.next=f,s.lastEffect=g)),g}function iW(){return fr().memoizedState}function YI(g,s,C,f){var Z=sa();kt.flags|=g,Z.memoizedState=Ms(1|s,C,void 0,f===void 0?null:f)}function NI(g,s,C,f){var Z=fr();f=f===void 0?null:f;var w=void 0;if(Qt!==null){var J=Qt.memoizedState;if(w=J.destroy,f!==null&&nh(f,J.deps)){Z.memoizedState=Ms(s,C,w,f);return}}kt.flags|=g,Z.memoizedState=Ms(1|s,C,w,f)}function oW(g,s){return YI(8390656,8,g,s)}function gh(g,s){return NI(2048,8,g,s)}function gW(g,s){return NI(4,2,g,s)}function lW(g,s){return NI(4,4,g,s)}function sW(g,s){if(typeof s=="function")return g=g(),s(g),function(){s(null)};if(s!=null)return g=g(),s.current=g,function(){s.current=null}}function cW(g,s,C){return C=C!=null?C.concat([g]):null,NI(4,4,sW.bind(null,s,g),C)}function lh(){}function uW(g,s){var C=fr();s=s===void 0?null:s;var f=C.memoizedState;return f!==null&&s!==null&&nh(s,f[1])?f[0]:(C.memoizedState=[g,s],g)}function IW(g,s){var C=fr();s=s===void 0?null:s;var f=C.memoizedState;return f!==null&&s!==null&&nh(s,f[1])?f[0]:(g=g(),C.memoizedState=[g,s],g)}function dW(g,s,C){return fo&21?(Nr(C,s)||(C=TS(),kt.lanes|=C,ho|=C,g.baseState=!0),s):(g.baseState&&(g.baseState=!1,Fn=!0),g.memoizedState=C)}function QM(g,s){var C=at;at=C!==0&&4>C?C:4,g(!0);var f=th.transition;th.transition={};try{g(!1),s()}finally{at=C,th.transition=f}}function CW(){return fr().memoizedState}function _M(g,s,C){var f=Ji(g);if(C={lane:f,action:C,hasEagerState:!1,eagerState:null,next:null},AW(g))mW(s,C);else if(C=zw(g,s,C,f),C!==null){var Z=kn();Mr(C,g,f,Z),fW(C,s,f)}}function qM(g,s,C){var f=Ji(g),Z={lane:f,action:C,hasEagerState:!1,eagerState:null,next:null};if(AW(g))mW(s,Z);else{var w=g.alternate;if(g.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var J=s.lastRenderedState,K=w(J,C);if(Z.hasEagerState=!0,Z.eagerState=K,Nr(K,J)){var j=s.interleaved;j===null?(Z.next=Z,Of(s)):(Z.next=j.next,j.next=Z),s.interleaved=Z;return}}catch{}finally{}C=zw(g,s,Z,f),C!==null&&(Z=kn(),Mr(C,g,f,Z),fW(C,s,f))}}function AW(g){var s=g.alternate;return g===kt||s!==null&&s===kt}function mW(g,s){Fs=JI=!0;var C=g.pending;C===null?s.next=s:(s.next=C.next,C.next=s),g.pending=s}function fW(g,s,C){if(C&4194240){var f=s.lanes;f&=g.pendingLanes,C|=f,s.lanes=C,cf(g,C)}}var HI={readContext:mr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},$M={readContext:mr,useCallback:function(g,s){return sa().memoizedState=[g,s===void 0?null:s],g},useContext:mr,useEffect:oW,useImperativeHandle:function(g,s,C){return C=C!=null?C.concat([g]):null,YI(4194308,4,sW.bind(null,s,g),C)},useLayoutEffect:function(g,s){return YI(4194308,4,g,s)},useInsertionEffect:function(g,s){return YI(4,2,g,s)},useMemo:function(g,s){var C=sa();return s=s===void 0?null:s,g=g(),C.memoizedState=[g,s],g},useReducer:function(g,s,C){var f=sa();return s=C!==void 0?C(s):s,f.memoizedState=f.baseState=s,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:s},f.queue=g,g=g.dispatch=_M.bind(null,kt,g),[f.memoizedState,g]},useRef:function(g){var s=sa();return g={current:g},s.memoizedState=g},useState:aW,useDebugValue:lh,useDeferredValue:function(g){return sa().memoizedState=g},useTransition:function(){var g=aW(!1),s=g[0];return g=QM.bind(null,g[1]),sa().memoizedState=g,[s,g]},useMutableSource:function(){},useSyncExternalStore:function(g,s,C){var f=kt,Z=sa();if(Gt){if(C===void 0)throw Error(n(407));C=C()}else{if(C=s(),rn===null)throw Error(n(349));fo&30||$w(f,s,C)}Z.memoizedState=C;var w={value:C,getSnapshot:s};return Z.queue=w,oW(tW.bind(null,f,w,g),[g]),f.flags|=2048,Ms(9,eW.bind(null,f,w,C,s),void 0,null),C},useId:function(){var g=sa(),s=rn.identifierPrefix;if(Gt){var C=Ma,f=Ea;C=(f&~(1<<32-Yr(f)-1)).toString(32)+C,s=":"+s+"R"+C,C=Ks++,0<C&&(s+="H"+C.toString(32)),s+=":"}else C=OM++,s=":"+s+"r"+C.toString(32)+":";return g.memoizedState=s},unstable_isNewReconciler:!1},e3={readContext:mr,useCallback:uW,useContext:mr,useEffect:gh,useImperativeHandle:cW,useInsertionEffect:gW,useLayoutEffect:lW,useMemo:IW,useReducer:ih,useRef:iW,useState:function(){return ih(Es)},useDebugValue:lh,useDeferredValue:function(g){var s=fr();return dW(s,Qt.memoizedState,g)},useTransition:function(){var g=ih(Es)[0],s=fr().memoizedState;return[g,s]},useMutableSource:_w,useSyncExternalStore:qw,useId:CW,unstable_isNewReconciler:!1},t3={readContext:mr,useCallback:uW,useContext:mr,useEffect:gh,useImperativeHandle:cW,useInsertionEffect:gW,useLayoutEffect:lW,useMemo:IW,useReducer:oh,useRef:iW,useState:function(){return oh(Es)},useDebugValue:lh,useDeferredValue:function(g){var s=fr();return Qt===null?s.memoizedState=g:dW(s,Qt.memoizedState,g)},useTransition:function(){var g=oh(Es)[0],s=fr().memoizedState;return[g,s]},useMutableSource:_w,useSyncExternalStore:qw,useId:CW,unstable_isNewReconciler:!1};function Fr(g,s){if(g&&g.defaultProps){s=ee({},s),g=g.defaultProps;for(var C in g)s[C]===void 0&&(s[C]=g[C]);return s}return s}function sh(g,s,C,f){s=g.memoizedState,C=C(f,s),C=C==null?s:ee({},s,C),g.memoizedState=C,g.lanes===0&&(g.updateQueue.baseState=C)}var FI={isMounted:function(g){return(g=g._reactInternals)?so(g)===g:!1},enqueueSetState:function(g,s,C){g=g._reactInternals;var f=kn(),Z=Ji(g),w=Ta(f,Z);w.payload=s,C!=null&&(w.callback=C),s=Vi(g,w,Z),s!==null&&(Mr(s,g,Z,f),VI(s,g,Z))},enqueueReplaceState:function(g,s,C){g=g._reactInternals;var f=kn(),Z=Ji(g),w=Ta(f,Z);w.tag=1,w.payload=s,C!=null&&(w.callback=C),s=Vi(g,w,Z),s!==null&&(Mr(s,g,Z,f),VI(s,g,Z))},enqueueForceUpdate:function(g,s){g=g._reactInternals;var C=kn(),f=Ji(g),Z=Ta(C,f);Z.tag=2,s!=null&&(Z.callback=s),s=Vi(g,Z,f),s!==null&&(Mr(s,g,f,C),VI(s,g,f))}};function hW(g,s,C,f,Z,w,J){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(f,w,J):s.prototype&&s.prototype.isPureReactComponent?!ws(C,f)||!ws(Z,w):!0}function pW(g,s,C){var f=!1,Z=wi,w=s.contextType;return typeof w=="object"&&w!==null?w=mr(w):(Z=Hn(s)?uo:fn.current,f=s.contextTypes,w=(f=f!=null)?bg(g,Z):wi),s=new s(C,w),g.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=FI,g.stateNode=s,s._reactInternals=g,f&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=Z,g.__reactInternalMemoizedMaskedChildContext=w),s}function bW(g,s,C,f){g=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(C,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(C,f),s.state!==g&&FI.enqueueReplaceState(s,s.state,null)}function ch(g,s,C,f){var Z=g.stateNode;Z.props=C,Z.state=g.memoizedState,Z.refs={},Qf(g);var w=s.contextType;typeof w=="object"&&w!==null?Z.context=mr(w):(w=Hn(s)?uo:fn.current,Z.context=bg(g,w)),Z.state=g.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(sh(g,s,w,C),Z.state=g.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(s=Z.state,typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount(),s!==Z.state&&FI.enqueueReplaceState(Z,Z.state,null),RI(g,C,Z,f),Z.state=g.memoizedState),typeof Z.componentDidMount=="function"&&(g.flags|=4194308)}function Wg(g,s){try{var C="",f=s;do C+=Be(f),f=f.return;while(f);var Z=C}catch(w){Z=`
Error generating stack: `+w.message+`
`+w.stack}return{value:g,source:s,stack:Z,digest:null}}function uh(g,s,C){return{value:g,source:null,stack:C??null,digest:s??null}}function Ih(g,s){try{console.error(s.value)}catch(C){setTimeout(function(){throw C})}}var n3=typeof WeakMap=="function"?WeakMap:Map;function yW(g,s,C){C=Ta(-1,C),C.tag=3,C.payload={element:null};var f=s.value;return C.callback=function(){LI||(LI=!0,wh=f),Ih(g,s)},C}function ZW(g,s,C){C=Ta(-1,C),C.tag=3;var f=g.type.getDerivedStateFromError;if(typeof f=="function"){var Z=s.value;C.payload=function(){return f(Z)},C.callback=function(){Ih(g,s)}}var w=g.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(C.callback=function(){Ih(g,s),typeof f!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var J=s.stack;this.componentDidCatch(s.value,{componentStack:J!==null?J:""})}),C}function vW(g,s,C){var f=g.pingCache;if(f===null){f=g.pingCache=new n3;var Z=new Set;f.set(s,Z)}else Z=f.get(s),Z===void 0&&(Z=new Set,f.set(s,Z));Z.has(C)||(Z.add(C),g=m3.bind(null,g,s,C),s.then(g,g))}function GW(g){do{var s;if((s=g.tag===13)&&(s=g.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return g;g=g.return}while(g!==null);return null}function BW(g,s,C,f,Z){return g.mode&1?(g.flags|=65536,g.lanes=Z,g):(g===s?g.flags|=65536:(g.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(s=Ta(-1,1),s.tag=2,Vi(C,s,1))),C.lanes|=1),g)}var r3=R.ReactCurrentOwner,Fn=!1;function Wn(g,s,C,f){s.child=g===null?Lw(s,null,C,f):Gg(s,g.child,C,f)}function SW(g,s,C,f,Z){C=C.render;var w=s.ref;return Sg(s,Z),f=rh(g,s,C,f,w,Z),C=ah(),g!==null&&!Fn?(s.updateQueue=g.updateQueue,s.flags&=-2053,g.lanes&=~Z,ja(g,s,Z)):(Gt&&C&&Ef(s),s.flags|=1,Wn(g,s,f,Z),s.child)}function wW(g,s,C,f,Z){if(g===null){var w=C.type;return typeof w=="function"&&!Jh(w)&&w.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(s.tag=15,s.type=w,WW(g,s,w,f,Z)):(g=_I(C.type,null,f,s,s.mode,Z),g.ref=s.ref,g.return=s,s.child=g)}if(w=g.child,!(g.lanes&Z)){var J=w.memoizedProps;if(C=C.compare,C=C!==null?C:ws,C(J,f)&&g.ref===s.ref)return ja(g,s,Z)}return s.flags|=1,g=Ni(w,f),g.ref=s.ref,g.return=s,s.child=g}function WW(g,s,C,f,Z){if(g!==null){var w=g.memoizedProps;if(ws(w,f)&&g.ref===s.ref)if(Fn=!1,s.pendingProps=f=w,(g.lanes&Z)!==0)g.flags&131072&&(Fn=!0);else return s.lanes=g.lanes,ja(g,s,Z)}return dh(g,s,C,f,Z)}function kW(g,s,C){var f=s.pendingProps,Z=f.children,w=g!==null?g.memoizedState:null;if(f.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Vg,qn),qn|=C;else{if(!(C&1073741824))return g=w!==null?w.baseLanes|C:C,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:g,cachePool:null,transitions:null},s.updateQueue=null,ft(Vg,qn),qn|=g,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:C,ft(Vg,qn),qn|=f}else w!==null?(f=w.baseLanes|C,s.memoizedState=null):f=C,ft(Vg,qn),qn|=f;return Wn(g,s,Z,C),s.child}function VW(g,s){var C=s.ref;(g===null&&C!==null||g!==null&&g.ref!==C)&&(s.flags|=512,s.flags|=2097152)}function dh(g,s,C,f,Z){var w=Hn(C)?uo:fn.current;return w=bg(s,w),Sg(s,Z),C=rh(g,s,C,f,w,Z),f=ah(),g!==null&&!Fn?(s.updateQueue=g.updateQueue,s.flags&=-2053,g.lanes&=~Z,ja(g,s,Z)):(Gt&&f&&Ef(s),s.flags|=1,Wn(g,s,C,Z),s.child)}function RW(g,s,C,f,Z){if(Hn(C)){var w=!0;ZI(s)}else w=!1;if(Sg(s,Z),s.stateNode===null)EI(g,s),pW(s,C,f),ch(s,C,f,Z),f=!0;else if(g===null){var J=s.stateNode,K=s.memoizedProps;J.props=K;var j=J.context,$=C.contextType;typeof $=="object"&&$!==null?$=mr($):($=Hn(C)?uo:fn.current,$=bg(s,$));var oe=C.getDerivedStateFromProps,le=typeof oe=="function"||typeof J.getSnapshotBeforeUpdate=="function";le||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(K!==f||j!==$)&&bW(s,J,f,$),ki=!1;var ie=s.memoizedState;J.state=ie,RI(s,f,J,Z),j=s.memoizedState,K!==f||ie!==j||Nn.current||ki?(typeof oe=="function"&&(sh(s,C,oe,f),j=s.memoizedState),(K=ki||hW(s,C,K,f,ie,j,$))?(le||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(s.flags|=4194308)):(typeof J.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=j),J.props=f,J.state=j,J.context=$,f=K):(typeof J.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{J=s.stateNode,Uw(g,s),K=s.memoizedProps,$=s.type===s.elementType?K:Fr(s.type,K),J.props=$,le=s.pendingProps,ie=J.context,j=C.contextType,typeof j=="object"&&j!==null?j=mr(j):(j=Hn(C)?uo:fn.current,j=bg(s,j));var Ae=C.getDerivedStateFromProps;(oe=typeof Ae=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(K!==le||ie!==j)&&bW(s,J,f,j),ki=!1,ie=s.memoizedState,J.state=ie,RI(s,f,J,Z);var be=s.memoizedState;K!==le||ie!==be||Nn.current||ki?(typeof Ae=="function"&&(sh(s,C,Ae,f),be=s.memoizedState),($=ki||hW(s,C,$,f,ie,be,j)||!1)?(oe||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(f,be,j),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(f,be,j)),typeof J.componentDidUpdate=="function"&&(s.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof J.componentDidUpdate!="function"||K===g.memoizedProps&&ie===g.memoizedState||(s.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||K===g.memoizedProps&&ie===g.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=be),J.props=f,J.state=be,J.context=j,f=$):(typeof J.componentDidUpdate!="function"||K===g.memoizedProps&&ie===g.memoizedState||(s.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||K===g.memoizedProps&&ie===g.memoizedState||(s.flags|=1024),f=!1)}return Ch(g,s,C,f,w,Z)}function Ch(g,s,C,f,Z,w){VW(g,s);var J=(s.flags&128)!==0;if(!f&&!J)return Z&&Nw(s,C,!1),ja(g,s,w);f=s.stateNode,r3.current=s;var K=J&&typeof C.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,g!==null&&J?(s.child=Gg(s,g.child,null,w),s.child=Gg(s,null,K,w)):Wn(g,s,K,w),s.memoizedState=f.state,Z&&Nw(s,C,!0),s.child}function xW(g){var s=g.stateNode;s.pendingContext?Jw(g,s.pendingContext,s.pendingContext!==s.context):s.context&&Jw(g,s.context,!1),_f(g,s.containerInfo)}function XW(g,s,C,f,Z){return vg(),jf(Z),s.flags|=256,Wn(g,s,C,f),s.child}var Ah={dehydrated:null,treeContext:null,retryLane:0};function mh(g){return{baseLanes:g,cachePool:null,transitions:null}}function JW(g,s,C){var f=s.pendingProps,Z=Wt.current,w=!1,J=(s.flags&128)!==0,K;if((K=J)||(K=g!==null&&g.memoizedState===null?!1:(Z&2)!==0),K?(w=!0,s.flags&=-129):(g===null||g.memoizedState!==null)&&(Z|=1),ft(Wt,Z&1),g===null)return Tf(s),g=s.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(s.mode&1?g.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(J=f.children,g=f.fallback,w?(f=s.mode,w=s.child,J={mode:"hidden",children:J},!(f&1)&&w!==null?(w.childLanes=0,w.pendingProps=J):w=qI(J,f,0,null),g=Zo(g,f,C,null),w.return=s,g.return=s,w.sibling=g,s.child=w,s.child.memoizedState=mh(C),s.memoizedState=Ah,g):fh(s,J));if(Z=g.memoizedState,Z!==null&&(K=Z.dehydrated,K!==null))return a3(g,s,J,f,K,Z,C);if(w){w=f.fallback,J=s.mode,Z=g.child,K=Z.sibling;var j={mode:"hidden",children:f.children};return!(J&1)&&s.child!==Z?(f=s.child,f.childLanes=0,f.pendingProps=j,s.deletions=null):(f=Ni(Z,j),f.subtreeFlags=Z.subtreeFlags&14680064),K!==null?w=Ni(K,w):(w=Zo(w,J,C,null),w.flags|=2),w.return=s,f.return=s,f.sibling=w,s.child=f,f=w,w=s.child,J=g.child.memoizedState,J=J===null?mh(C):{baseLanes:J.baseLanes|C,cachePool:null,transitions:J.transitions},w.memoizedState=J,w.childLanes=g.childLanes&~C,s.memoizedState=Ah,f}return w=g.child,g=w.sibling,f=Ni(w,{mode:"visible",children:f.children}),!(s.mode&1)&&(f.lanes=C),f.return=s,f.sibling=null,g!==null&&(C=s.deletions,C===null?(s.deletions=[g],s.flags|=16):C.push(g)),s.child=f,s.memoizedState=null,f}function fh(g,s){return s=qI({mode:"visible",children:s},g.mode,0,null),s.return=g,g.child=s}function KI(g,s,C,f){return f!==null&&jf(f),Gg(s,g.child,null,C),g=fh(s,s.pendingProps.children),g.flags|=2,s.memoizedState=null,g}function a3(g,s,C,f,Z,w,J){if(C)return s.flags&256?(s.flags&=-257,f=uh(Error(n(422))),KI(g,s,J,f)):s.memoizedState!==null?(s.child=g.child,s.flags|=128,null):(w=f.fallback,Z=s.mode,f=qI({mode:"visible",children:f.children},Z,0,null),w=Zo(w,Z,J,null),w.flags|=2,f.return=s,w.return=s,f.sibling=w,s.child=f,s.mode&1&&Gg(s,g.child,null,J),s.child.memoizedState=mh(J),s.memoizedState=Ah,w);if(!(s.mode&1))return KI(g,s,J,null);if(Z.data==="$!"){if(f=Z.nextSibling&&Z.nextSibling.dataset,f)var K=f.dgst;return f=K,w=Error(n(419)),f=uh(w,f,void 0),KI(g,s,J,f)}if(K=(J&g.childLanes)!==0,Fn||K){if(f=rn,f!==null){switch(J&-J){case 4:Z=2;break;case 16:Z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Z=32;break;case 536870912:Z=268435456;break;default:Z=0}Z=Z&(f.suspendedLanes|J)?0:Z,Z!==0&&Z!==w.retryLane&&(w.retryLane=Z,Da(g,Z),Mr(f,g,Z,-1))}return Xh(),f=uh(Error(n(421))),KI(g,s,J,f)}return Z.data==="$?"?(s.flags|=128,s.child=g.child,s=f3.bind(null,g),Z._reactRetry=s,null):(g=w.treeContext,_n=Bi(Z.nextSibling),Qn=s,Gt=!0,Hr=null,g!==null&&(Cr[Ar++]=Ea,Cr[Ar++]=Ma,Cr[Ar++]=Io,Ea=g.id,Ma=g.overflow,Io=s),s=fh(s,f.children),s.flags|=4096,s)}function YW(g,s,C){g.lanes|=s;var f=g.alternate;f!==null&&(f.lanes|=s),Pf(g.return,s,C)}function hh(g,s,C,f,Z){var w=g.memoizedState;w===null?g.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:C,tailMode:Z}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=C,w.tailMode=Z)}function NW(g,s,C){var f=s.pendingProps,Z=f.revealOrder,w=f.tail;if(Wn(g,s,f.children,C),f=Wt.current,f&2)f=f&1|2,s.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=s.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&YW(g,C,s);else if(g.tag===19)YW(g,C,s);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}f&=1}if(ft(Wt,f),!(s.mode&1))s.memoizedState=null;else switch(Z){case"forwards":for(C=s.child,Z=null;C!==null;)g=C.alternate,g!==null&&xI(g)===null&&(Z=C),C=C.sibling;C=Z,C===null?(Z=s.child,s.child=null):(Z=C.sibling,C.sibling=null),hh(s,!1,Z,C,w);break;case"backwards":for(C=null,Z=s.child,s.child=null;Z!==null;){if(g=Z.alternate,g!==null&&xI(g)===null){s.child=Z;break}g=Z.sibling,Z.sibling=C,C=Z,Z=g}hh(s,!0,C,null,w);break;case"together":hh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function EI(g,s){!(s.mode&1)&&g!==null&&(g.alternate=null,s.alternate=null,s.flags|=2)}function ja(g,s,C){if(g!==null&&(s.dependencies=g.dependencies),ho|=s.lanes,!(C&s.childLanes))return null;if(g!==null&&s.child!==g.child)throw Error(n(153));if(s.child!==null){for(g=s.child,C=Ni(g,g.pendingProps),s.child=C,C.return=s;g.sibling!==null;)g=g.sibling,C=C.sibling=Ni(g,g.pendingProps),C.return=s;C.sibling=null}return s.child}function i3(g,s,C){switch(s.tag){case 3:xW(s),vg();break;case 5:Qw(s);break;case 1:Hn(s.type)&&ZI(s);break;case 4:_f(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,Z=s.memoizedProps.value;ft(WI,f._currentValue),f._currentValue=Z;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(ft(Wt,Wt.current&1),s.flags|=128,null):C&s.child.childLanes?JW(g,s,C):(ft(Wt,Wt.current&1),g=ja(g,s,C),g!==null?g.sibling:null);ft(Wt,Wt.current&1);break;case 19:if(f=(C&s.childLanes)!==0,g.flags&128){if(f)return NW(g,s,C);s.flags|=128}if(Z=s.memoizedState,Z!==null&&(Z.rendering=null,Z.tail=null,Z.lastEffect=null),ft(Wt,Wt.current),f)break;return null;case 22:case 23:return s.lanes=0,kW(g,s,C)}return ja(g,s,C)}var HW,ph,FW,KW;HW=function(g,s){for(var C=s.child;C!==null;){if(C.tag===5||C.tag===6)g.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===s)break;for(;C.sibling===null;){if(C.return===null||C.return===s)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},ph=function(){},FW=function(g,s,C,f){var Z=g.memoizedProps;if(Z!==f){g=s.stateNode,mo(la.current);var w=null;switch(C){case"input":Z=Ee(g,Z),f=Ee(g,f),w=[];break;case"select":Z=ee({},Z,{value:void 0}),f=ee({},f,{value:void 0}),w=[];break;case"textarea":Z=Jr(g,Z),f=Jr(g,f),w=[];break;default:typeof Z.onClick!="function"&&typeof f.onClick=="function"&&(g.onclick=pI)}qm(C,f);var J;C=null;for($ in Z)if(!f.hasOwnProperty($)&&Z.hasOwnProperty($)&&Z[$]!=null)if($==="style"){var K=Z[$];for(J in K)K.hasOwnProperty(J)&&(C||(C={}),C[J]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(a.hasOwnProperty($)?w||(w=[]):(w=w||[]).push($,null));for($ in f){var j=f[$];if(K=Z!=null?Z[$]:void 0,f.hasOwnProperty($)&&j!==K&&(j!=null||K!=null))if($==="style")if(K){for(J in K)!K.hasOwnProperty(J)||j&&j.hasOwnProperty(J)||(C||(C={}),C[J]="");for(J in j)j.hasOwnProperty(J)&&K[J]!==j[J]&&(C||(C={}),C[J]=j[J])}else C||(w||(w=[]),w.push($,C)),C=j;else $==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,K=K?K.__html:void 0,j!=null&&K!==j&&(w=w||[]).push($,j)):$==="children"?typeof j!="string"&&typeof j!="number"||(w=w||[]).push($,""+j):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(a.hasOwnProperty($)?(j!=null&&$==="onScroll"&&bt("scroll",g),w||K===j||(w=[])):(w=w||[]).push($,j))}C&&(w=w||[]).push("style",C);var $=w;(s.updateQueue=$)&&(s.flags|=4)}},KW=function(g,s,C,f){C!==f&&(s.flags|=4)};function Ds(g,s){if(!Gt)switch(g.tailMode){case"hidden":s=g.tail;for(var C=null;s!==null;)s.alternate!==null&&(C=s),s=s.sibling;C===null?g.tail=null:C.sibling=null;break;case"collapsed":C=g.tail;for(var f=null;C!==null;)C.alternate!==null&&(f=C),C=C.sibling;f===null?s||g.tail===null?g.tail=null:g.tail.sibling=null:f.sibling=null}}function pn(g){var s=g.alternate!==null&&g.alternate.child===g.child,C=0,f=0;if(s)for(var Z=g.child;Z!==null;)C|=Z.lanes|Z.childLanes,f|=Z.subtreeFlags&14680064,f|=Z.flags&14680064,Z.return=g,Z=Z.sibling;else for(Z=g.child;Z!==null;)C|=Z.lanes|Z.childLanes,f|=Z.subtreeFlags,f|=Z.flags,Z.return=g,Z=Z.sibling;return g.subtreeFlags|=f,g.childLanes=C,s}function o3(g,s,C){var f=s.pendingProps;switch(Mf(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(s),null;case 1:return Hn(s.type)&&yI(),pn(s),null;case 3:return f=s.stateNode,wg(),yt(Nn),yt(fn),eh(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(g===null||g.child===null)&&(SI(s)?s.flags|=4:g===null||g.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Hr!==null&&(Vh(Hr),Hr=null))),ph(g,s),pn(s),null;case 5:qf(s);var Z=mo(Hs.current);if(C=s.type,g!==null&&s.stateNode!=null)FW(g,s,C,f,Z),g.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(n(166));return pn(s),null}if(g=mo(la.current),SI(s)){f=s.stateNode,C=s.type;var w=s.memoizedProps;switch(f[ga]=s,f[xs]=w,g=(s.mode&1)!==0,C){case"dialog":bt("cancel",f),bt("close",f);break;case"iframe":case"object":case"embed":bt("load",f);break;case"video":case"audio":for(Z=0;Z<ks.length;Z++)bt(ks[Z],f);break;case"source":bt("error",f);break;case"img":case"image":case"link":bt("error",f),bt("load",f);break;case"details":bt("toggle",f);break;case"input":Rt(f,w),bt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},bt("invalid",f);break;case"textarea":lg(f,w),bt("invalid",f)}qm(C,w),Z=null;for(var J in w)if(w.hasOwnProperty(J)){var K=w[J];J==="children"?typeof K=="string"?f.textContent!==K&&(w.suppressHydrationWarning!==!0&&hI(f.textContent,K,g),Z=["children",K]):typeof K=="number"&&f.textContent!==""+K&&(w.suppressHydrationWarning!==!0&&hI(f.textContent,K,g),Z=["children",""+K]):a.hasOwnProperty(J)&&K!=null&&J==="onScroll"&&bt("scroll",f)}switch(C){case"input":Je(f),Xr(f,w,!0);break;case"textarea":Je(f),ss(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=pI)}f=Z,s.updateQueue=f,f!==null&&(s.flags|=4)}else{J=Z.nodeType===9?Z:Z.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=BS(C)),g==="http://www.w3.org/1999/xhtml"?C==="script"?(g=J.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof f.is=="string"?g=J.createElement(C,{is:f.is}):(g=J.createElement(C),C==="select"&&(J=g,f.multiple?J.multiple=!0:f.size&&(J.size=f.size))):g=J.createElementNS(g,C),g[ga]=s,g[xs]=f,HW(g,s,!1,!1),s.stateNode=g;e:{switch(J=$m(C,f),C){case"dialog":bt("cancel",g),bt("close",g),Z=f;break;case"iframe":case"object":case"embed":bt("load",g),Z=f;break;case"video":case"audio":for(Z=0;Z<ks.length;Z++)bt(ks[Z],g);Z=f;break;case"source":bt("error",g),Z=f;break;case"img":case"image":case"link":bt("error",g),bt("load",g),Z=f;break;case"details":bt("toggle",g),Z=f;break;case"input":Rt(g,f),Z=Ee(g,f),bt("invalid",g);break;case"option":Z=f;break;case"select":g._wrapperState={wasMultiple:!!f.multiple},Z=ee({},f,{value:void 0}),bt("invalid",g);break;case"textarea":lg(g,f),Z=Jr(g,f),bt("invalid",g);break;default:Z=f}qm(C,Z),K=Z;for(w in K)if(K.hasOwnProperty(w)){var j=K[w];w==="style"?WS(g,j):w==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&SS(g,j)):w==="children"?typeof j=="string"?(C!=="textarea"||j!=="")&&cs(g,j):typeof j=="number"&&cs(g,""+j):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(a.hasOwnProperty(w)?j!=null&&w==="onScroll"&&bt("scroll",g):j!=null&&S(g,w,j,J))}switch(C){case"input":Je(g),Xr(g,f,!1);break;case"textarea":Je(g),ss(g);break;case"option":f.value!=null&&g.setAttribute("value",""+Xe(f.value));break;case"select":g.multiple=!!f.multiple,w=f.value,w!=null?Yn(g,!!f.multiple,w,!1):f.defaultValue!=null&&Yn(g,!!f.multiple,f.defaultValue,!0);break;default:typeof Z.onClick=="function"&&(g.onclick=pI)}switch(C){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return pn(s),null;case 6:if(g&&s.stateNode!=null)KW(g,s,g.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(n(166));if(C=mo(Hs.current),mo(la.current),SI(s)){if(f=s.stateNode,C=s.memoizedProps,f[ga]=s,(w=f.nodeValue!==C)&&(g=Qn,g!==null))switch(g.tag){case 3:hI(f.nodeValue,C,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&hI(f.nodeValue,C,(g.mode&1)!==0)}w&&(s.flags|=4)}else f=(C.nodeType===9?C:C.ownerDocument).createTextNode(f),f[ga]=s,s.stateNode=f}return pn(s),null;case 13:if(yt(Wt),f=s.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(Gt&&_n!==null&&s.mode&1&&!(s.flags&128))Dw(),vg(),s.flags|=98560,w=!1;else if(w=SI(s),f!==null&&f.dehydrated!==null){if(g===null){if(!w)throw Error(n(318));if(w=s.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[ga]=s}else vg(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;pn(s),w=!1}else Hr!==null&&(Vh(Hr),Hr=null),w=!0;if(!w)return s.flags&65536?s:null}return s.flags&128?(s.lanes=C,s):(f=f!==null,f!==(g!==null&&g.memoizedState!==null)&&f&&(s.child.flags|=8192,s.mode&1&&(g===null||Wt.current&1?_t===0&&(_t=3):Xh())),s.updateQueue!==null&&(s.flags|=4),pn(s),null);case 4:return wg(),ph(g,s),g===null&&Vs(s.stateNode.containerInfo),pn(s),null;case 10:return Uf(s.type._context),pn(s),null;case 17:return Hn(s.type)&&yI(),pn(s),null;case 19:if(yt(Wt),w=s.memoizedState,w===null)return pn(s),null;if(f=(s.flags&128)!==0,J=w.rendering,J===null)if(f)Ds(w,!1);else{if(_t!==0||g!==null&&g.flags&128)for(g=s.child;g!==null;){if(J=xI(g),J!==null){for(s.flags|=128,Ds(w,!1),f=J.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=C,C=s.child;C!==null;)w=C,g=f,w.flags&=14680066,J=w.alternate,J===null?(w.childLanes=0,w.lanes=g,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=J.childLanes,w.lanes=J.lanes,w.child=J.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=J.memoizedProps,w.memoizedState=J.memoizedState,w.updateQueue=J.updateQueue,w.type=J.type,g=J.dependencies,w.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),C=C.sibling;return ft(Wt,Wt.current&1|2),s.child}g=g.sibling}w.tail!==null&&Ft()>Rg&&(s.flags|=128,f=!0,Ds(w,!1),s.lanes=4194304)}else{if(!f)if(g=xI(J),g!==null){if(s.flags|=128,f=!0,C=g.updateQueue,C!==null&&(s.updateQueue=C,s.flags|=4),Ds(w,!0),w.tail===null&&w.tailMode==="hidden"&&!J.alternate&&!Gt)return pn(s),null}else 2*Ft()-w.renderingStartTime>Rg&&C!==1073741824&&(s.flags|=128,f=!0,Ds(w,!1),s.lanes=4194304);w.isBackwards?(J.sibling=s.child,s.child=J):(C=w.last,C!==null?C.sibling=J:s.child=J,w.last=J)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=Ft(),s.sibling=null,C=Wt.current,ft(Wt,f?C&1|2:C&1),s):(pn(s),null);case 22:case 23:return xh(),f=s.memoizedState!==null,g!==null&&g.memoizedState!==null!==f&&(s.flags|=8192),f&&s.mode&1?qn&1073741824&&(pn(s),s.subtreeFlags&6&&(s.flags|=8192)):pn(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function g3(g,s){switch(Mf(s),s.tag){case 1:return Hn(s.type)&&yI(),g=s.flags,g&65536?(s.flags=g&-65537|128,s):null;case 3:return wg(),yt(Nn),yt(fn),eh(),g=s.flags,g&65536&&!(g&128)?(s.flags=g&-65537|128,s):null;case 5:return qf(s),null;case 13:if(yt(Wt),g=s.memoizedState,g!==null&&g.dehydrated!==null){if(s.alternate===null)throw Error(n(340));vg()}return g=s.flags,g&65536?(s.flags=g&-65537|128,s):null;case 19:return yt(Wt),null;case 4:return wg(),null;case 10:return Uf(s.type._context),null;case 22:case 23:return xh(),null;case 24:return null;default:return null}}var MI=!1,bn=!1,l3=typeof WeakSet=="function"?WeakSet:Set,he=null;function kg(g,s){var C=g.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(f){Xt(g,s,f)}else C.current=null}function bh(g,s,C){try{C()}catch(f){Xt(g,s,f)}}var EW=!1;function s3(g,s){if(xf=gI,g=hw(),Gf(g)){if("selectionStart"in g)var C={start:g.selectionStart,end:g.selectionEnd};else e:{C=(C=g.ownerDocument)&&C.defaultView||window;var f=C.getSelection&&C.getSelection();if(f&&f.rangeCount!==0){C=f.anchorNode;var Z=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{C.nodeType,w.nodeType}catch{C=null;break e}var J=0,K=-1,j=-1,$=0,oe=0,le=g,ie=null;t:for(;;){for(var Ae;le!==C||Z!==0&&le.nodeType!==3||(K=J+Z),le!==w||f!==0&&le.nodeType!==3||(j=J+f),le.nodeType===3&&(J+=le.nodeValue.length),(Ae=le.firstChild)!==null;)ie=le,le=Ae;for(;;){if(le===g)break t;if(ie===C&&++$===Z&&(K=J),ie===w&&++oe===f&&(j=J),(Ae=le.nextSibling)!==null)break;le=ie,ie=le.parentNode}le=Ae}C=K===-1||j===-1?null:{start:K,end:j}}else C=null}C=C||{start:0,end:0}}else C=null;for(Xf={focusedElem:g,selectionRange:C},gI=!1,he=s;he!==null;)if(s=he,g=s.child,(s.subtreeFlags&1028)!==0&&g!==null)g.return=s,he=g;else for(;he!==null;){s=he;try{var be=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var Ze=be.memoizedProps,Kt=be.memoizedState,Q=s.stateNode,U=Q.getSnapshotBeforeUpdate(s.elementType===s.type?Ze:Fr(s.type,Ze),Kt);Q.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var _=s.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ce){Xt(s,s.return,ce)}if(g=s.sibling,g!==null){g.return=s.return,he=g;break}he=s.return}return be=EW,EW=!1,be}function Ts(g,s,C){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var Z=f=f.next;do{if((Z.tag&g)===g){var w=Z.destroy;Z.destroy=void 0,w!==void 0&&bh(s,C,w)}Z=Z.next}while(Z!==f)}}function DI(g,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var C=s=s.next;do{if((C.tag&g)===g){var f=C.create;C.destroy=f()}C=C.next}while(C!==s)}}function yh(g){var s=g.ref;if(s!==null){var C=g.stateNode;switch(g.tag){case 5:g=C;break;default:g=C}typeof s=="function"?s(g):s.current=g}}function MW(g){var s=g.alternate;s!==null&&(g.alternate=null,MW(s)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(s=g.stateNode,s!==null&&(delete s[ga],delete s[xs],delete s[Hf],delete s[LM],delete s[zM])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function DW(g){return g.tag===5||g.tag===3||g.tag===4}function TW(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||DW(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Zh(g,s,C){var f=g.tag;if(f===5||f===6)g=g.stateNode,s?C.nodeType===8?C.parentNode.insertBefore(g,s):C.insertBefore(g,s):(C.nodeType===8?(s=C.parentNode,s.insertBefore(g,C)):(s=C,s.appendChild(g)),C=C._reactRootContainer,C!=null||s.onclick!==null||(s.onclick=pI));else if(f!==4&&(g=g.child,g!==null))for(Zh(g,s,C),g=g.sibling;g!==null;)Zh(g,s,C),g=g.sibling}function vh(g,s,C){var f=g.tag;if(f===5||f===6)g=g.stateNode,s?C.insertBefore(g,s):C.appendChild(g);else if(f!==4&&(g=g.child,g!==null))for(vh(g,s,C),g=g.sibling;g!==null;)vh(g,s,C),g=g.sibling}var In=null,Kr=!1;function Ri(g,s,C){for(C=C.child;C!==null;)jW(g,s,C),C=C.sibling}function jW(g,s,C){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(tI,C)}catch{}switch(C.tag){case 5:bn||kg(C,s);case 6:var f=In,Z=Kr;In=null,Ri(g,s,C),In=f,Kr=Z,In!==null&&(Kr?(g=In,C=C.stateNode,g.nodeType===8?g.parentNode.removeChild(C):g.removeChild(C)):In.removeChild(C.stateNode));break;case 18:In!==null&&(Kr?(g=In,C=C.stateNode,g.nodeType===8?Nf(g.parentNode,C):g.nodeType===1&&Nf(g,C),ys(g)):Nf(In,C.stateNode));break;case 4:f=In,Z=Kr,In=C.stateNode.containerInfo,Kr=!0,Ri(g,s,C),In=f,Kr=Z;break;case 0:case 11:case 14:case 15:if(!bn&&(f=C.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){Z=f=f.next;do{var w=Z,J=w.destroy;w=w.tag,J!==void 0&&(w&2||w&4)&&bh(C,s,J),Z=Z.next}while(Z!==f)}Ri(g,s,C);break;case 1:if(!bn&&(kg(C,s),f=C.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=C.memoizedProps,f.state=C.memoizedState,f.componentWillUnmount()}catch(K){Xt(C,s,K)}Ri(g,s,C);break;case 21:Ri(g,s,C);break;case 22:C.mode&1?(bn=(f=bn)||C.memoizedState!==null,Ri(g,s,C),bn=f):Ri(g,s,C);break;default:Ri(g,s,C)}}function LW(g){var s=g.updateQueue;if(s!==null){g.updateQueue=null;var C=g.stateNode;C===null&&(C=g.stateNode=new l3),s.forEach(function(f){var Z=h3.bind(null,g,f);C.has(f)||(C.add(f),f.then(Z,Z))})}}function Er(g,s){var C=s.deletions;if(C!==null)for(var f=0;f<C.length;f++){var Z=C[f];try{var w=g,J=s,K=J;e:for(;K!==null;){switch(K.tag){case 5:In=K.stateNode,Kr=!1;break e;case 3:In=K.stateNode.containerInfo,Kr=!0;break e;case 4:In=K.stateNode.containerInfo,Kr=!0;break e}K=K.return}if(In===null)throw Error(n(160));jW(w,J,Z),In=null,Kr=!1;var j=Z.alternate;j!==null&&(j.return=null),Z.return=null}catch($){Xt(Z,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)zW(s,g),s=s.sibling}function zW(g,s){var C=g.alternate,f=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(Er(s,g),ca(g),f&4){try{Ts(3,g,g.return),DI(3,g)}catch(Ze){Xt(g,g.return,Ze)}try{Ts(5,g,g.return)}catch(Ze){Xt(g,g.return,Ze)}}break;case 1:Er(s,g),ca(g),f&512&&C!==null&&kg(C,C.return);break;case 5:if(Er(s,g),ca(g),f&512&&C!==null&&kg(C,C.return),g.flags&32){var Z=g.stateNode;try{cs(Z,"")}catch(Ze){Xt(g,g.return,Ze)}}if(f&4&&(Z=g.stateNode,Z!=null)){var w=g.memoizedProps,J=C!==null?C.memoizedProps:w,K=g.type,j=g.updateQueue;if(g.updateQueue=null,j!==null)try{K==="input"&&w.type==="radio"&&w.name!=null&&xt(Z,w),$m(K,J);var $=$m(K,w);for(J=0;J<j.length;J+=2){var oe=j[J],le=j[J+1];oe==="style"?WS(Z,le):oe==="dangerouslySetInnerHTML"?SS(Z,le):oe==="children"?cs(Z,le):S(Z,oe,le,$)}switch(K){case"input":tn(Z,w);break;case"textarea":ls(Z,w);break;case"select":var ie=Z._wrapperState.wasMultiple;Z._wrapperState.wasMultiple=!!w.multiple;var Ae=w.value;Ae!=null?Yn(Z,!!w.multiple,Ae,!1):ie!==!!w.multiple&&(w.defaultValue!=null?Yn(Z,!!w.multiple,w.defaultValue,!0):Yn(Z,!!w.multiple,w.multiple?[]:"",!1))}Z[xs]=w}catch(Ze){Xt(g,g.return,Ze)}}break;case 6:if(Er(s,g),ca(g),f&4){if(g.stateNode===null)throw Error(n(162));Z=g.stateNode,w=g.memoizedProps;try{Z.nodeValue=w}catch(Ze){Xt(g,g.return,Ze)}}break;case 3:if(Er(s,g),ca(g),f&4&&C!==null&&C.memoizedState.isDehydrated)try{ys(s.containerInfo)}catch(Ze){Xt(g,g.return,Ze)}break;case 4:Er(s,g),ca(g);break;case 13:Er(s,g),ca(g),Z=g.child,Z.flags&8192&&(w=Z.memoizedState!==null,Z.stateNode.isHidden=w,!w||Z.alternate!==null&&Z.alternate.memoizedState!==null||(Sh=Ft())),f&4&&LW(g);break;case 22:if(oe=C!==null&&C.memoizedState!==null,g.mode&1?(bn=($=bn)||oe,Er(s,g),bn=$):Er(s,g),ca(g),f&8192){if($=g.memoizedState!==null,(g.stateNode.isHidden=$)&&!oe&&g.mode&1)for(he=g,oe=g.child;oe!==null;){for(le=he=oe;he!==null;){switch(ie=he,Ae=ie.child,ie.tag){case 0:case 11:case 14:case 15:Ts(4,ie,ie.return);break;case 1:kg(ie,ie.return);var be=ie.stateNode;if(typeof be.componentWillUnmount=="function"){f=ie,C=ie.return;try{s=f,be.props=s.memoizedProps,be.state=s.memoizedState,be.componentWillUnmount()}catch(Ze){Xt(f,C,Ze)}}break;case 5:kg(ie,ie.return);break;case 22:if(ie.memoizedState!==null){OW(le);continue}}Ae!==null?(Ae.return=ie,he=Ae):OW(le)}oe=oe.sibling}e:for(oe=null,le=g;;){if(le.tag===5){if(oe===null){oe=le;try{Z=le.stateNode,$?(w=Z.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(K=le.stateNode,j=le.memoizedProps.style,J=j!=null&&j.hasOwnProperty("display")?j.display:null,K.style.display=wS("display",J))}catch(Ze){Xt(g,g.return,Ze)}}}else if(le.tag===6){if(oe===null)try{le.stateNode.nodeValue=$?"":le.memoizedProps}catch(Ze){Xt(g,g.return,Ze)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===g)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===g)break e;for(;le.sibling===null;){if(le.return===null||le.return===g)break e;oe===le&&(oe=null),le=le.return}oe===le&&(oe=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Er(s,g),ca(g),f&4&&LW(g);break;case 21:break;default:Er(s,g),ca(g)}}function ca(g){var s=g.flags;if(s&2){try{e:{for(var C=g.return;C!==null;){if(DW(C)){var f=C;break e}C=C.return}throw Error(n(160))}switch(f.tag){case 5:var Z=f.stateNode;f.flags&32&&(cs(Z,""),f.flags&=-33);var w=TW(g);vh(g,w,Z);break;case 3:case 4:var J=f.stateNode.containerInfo,K=TW(g);Zh(g,K,J);break;default:throw Error(n(161))}}catch(j){Xt(g,g.return,j)}g.flags&=-3}s&4096&&(g.flags&=-4097)}function c3(g,s,C){he=g,UW(g)}function UW(g,s,C){for(var f=(g.mode&1)!==0;he!==null;){var Z=he,w=Z.child;if(Z.tag===22&&f){var J=Z.memoizedState!==null||MI;if(!J){var K=Z.alternate,j=K!==null&&K.memoizedState!==null||bn;K=MI;var $=bn;if(MI=J,(bn=j)&&!$)for(he=Z;he!==null;)J=he,j=J.child,J.tag===22&&J.memoizedState!==null?QW(Z):j!==null?(j.return=J,he=j):QW(Z);for(;w!==null;)he=w,UW(w),w=w.sibling;he=Z,MI=K,bn=$}PW(g)}else Z.subtreeFlags&8772&&w!==null?(w.return=Z,he=w):PW(g)}}function PW(g){for(;he!==null;){var s=he;if(s.flags&8772){var C=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:bn||DI(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!bn)if(C===null)f.componentDidMount();else{var Z=s.elementType===s.type?C.memoizedProps:Fr(s.type,C.memoizedProps);f.componentDidUpdate(Z,C.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=s.updateQueue;w!==null&&Ow(s,w,f);break;case 3:var J=s.updateQueue;if(J!==null){if(C=null,s.child!==null)switch(s.child.tag){case 5:C=s.child.stateNode;break;case 1:C=s.child.stateNode}Ow(s,J,C)}break;case 5:var K=s.stateNode;if(C===null&&s.flags&4){C=K;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&C.focus();break;case"img":j.src&&(C.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var oe=$.memoizedState;if(oe!==null){var le=oe.dehydrated;le!==null&&ys(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}bn||s.flags&512&&yh(s)}catch(ie){Xt(s,s.return,ie)}}if(s===g){he=null;break}if(C=s.sibling,C!==null){C.return=s.return,he=C;break}he=s.return}}function OW(g){for(;he!==null;){var s=he;if(s===g){he=null;break}var C=s.sibling;if(C!==null){C.return=s.return,he=C;break}he=s.return}}function QW(g){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var C=s.return;try{DI(4,s)}catch(j){Xt(s,C,j)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var Z=s.return;try{f.componentDidMount()}catch(j){Xt(s,Z,j)}}var w=s.return;try{yh(s)}catch(j){Xt(s,w,j)}break;case 5:var J=s.return;try{yh(s)}catch(j){Xt(s,J,j)}}}catch(j){Xt(s,s.return,j)}if(s===g){he=null;break}var K=s.sibling;if(K!==null){K.return=s.return,he=K;break}he=s.return}}var u3=Math.ceil,TI=R.ReactCurrentDispatcher,Gh=R.ReactCurrentOwner,hr=R.ReactCurrentBatchConfig,ze=0,rn=null,zt=null,dn=0,qn=0,Vg=Si(0),_t=0,js=null,ho=0,jI=0,Bh=0,Ls=null,Kn=null,Sh=0,Rg=1/0,La=null,LI=!1,wh=null,xi=null,zI=!1,Xi=null,UI=0,zs=0,Wh=null,PI=-1,OI=0;function kn(){return ze&6?Ft():PI!==-1?PI:PI=Ft()}function Ji(g){return g.mode&1?ze&2&&dn!==0?dn&-dn:PM.transition!==null?(OI===0&&(OI=TS()),OI):(g=at,g!==0||(g=window.event,g=g===void 0?16:qS(g.type)),g):1}function Mr(g,s,C,f){if(50<zs)throw zs=0,Wh=null,Error(n(185));ms(g,C,f),(!(ze&2)||g!==rn)&&(g===rn&&(!(ze&2)&&(jI|=C),_t===4&&Yi(g,dn)),En(g,f),C===1&&ze===0&&!(s.mode&1)&&(Rg=Ft()+500,vI&&Wi()))}function En(g,s){var C=g.callbackNode;PE(g,s);var f=aI(g,g===rn?dn:0);if(f===0)C!==null&&ES(C),g.callbackNode=null,g.callbackPriority=0;else if(s=f&-f,g.callbackPriority!==s){if(C!=null&&ES(C),s===1)g.tag===0?UM(qW.bind(null,g)):Hw(qW.bind(null,g)),TM(function(){!(ze&6)&&Wi()}),C=null;else{switch(jS(f)){case 1:C=gf;break;case 4:C=MS;break;case 16:C=eI;break;case 536870912:C=DS;break;default:C=eI}C=ok(C,_W.bind(null,g))}g.callbackPriority=s,g.callbackNode=C}}function _W(g,s){if(PI=-1,OI=0,ze&6)throw Error(n(327));var C=g.callbackNode;if(xg()&&g.callbackNode!==C)return null;var f=aI(g,g===rn?dn:0);if(f===0)return null;if(f&30||f&g.expiredLanes||s)s=QI(g,f);else{s=f;var Z=ze;ze|=2;var w=ek();(rn!==g||dn!==s)&&(La=null,Rg=Ft()+500,bo(g,s));do try{C3();break}catch(K){$W(g,K)}while(!0);zf(),TI.current=w,ze=Z,zt!==null?s=0:(rn=null,dn=0,s=_t)}if(s!==0){if(s===2&&(Z=lf(g),Z!==0&&(f=Z,s=kh(g,Z))),s===1)throw C=js,bo(g,0),Yi(g,f),En(g,Ft()),C;if(s===6)Yi(g,f);else{if(Z=g.current.alternate,!(f&30)&&!I3(Z)&&(s=QI(g,f),s===2&&(w=lf(g),w!==0&&(f=w,s=kh(g,w))),s===1))throw C=js,bo(g,0),Yi(g,f),En(g,Ft()),C;switch(g.finishedWork=Z,g.finishedLanes=f,s){case 0:case 1:throw Error(n(345));case 2:yo(g,Kn,La);break;case 3:if(Yi(g,f),(f&130023424)===f&&(s=Sh+500-Ft(),10<s)){if(aI(g,0)!==0)break;if(Z=g.suspendedLanes,(Z&f)!==f){kn(),g.pingedLanes|=g.suspendedLanes&Z;break}g.timeoutHandle=Yf(yo.bind(null,g,Kn,La),s);break}yo(g,Kn,La);break;case 4:if(Yi(g,f),(f&4194240)===f)break;for(s=g.eventTimes,Z=-1;0<f;){var J=31-Yr(f);w=1<<J,J=s[J],J>Z&&(Z=J),f&=~w}if(f=Z,f=Ft()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*u3(f/1960))-f,10<f){g.timeoutHandle=Yf(yo.bind(null,g,Kn,La),f);break}yo(g,Kn,La);break;case 5:yo(g,Kn,La);break;default:throw Error(n(329))}}}return En(g,Ft()),g.callbackNode===C?_W.bind(null,g):null}function kh(g,s){var C=Ls;return g.current.memoizedState.isDehydrated&&(bo(g,s).flags|=256),g=QI(g,s),g!==2&&(s=Kn,Kn=C,s!==null&&Vh(s)),g}function Vh(g){Kn===null?Kn=g:Kn.push.apply(Kn,g)}function I3(g){for(var s=g;;){if(s.flags&16384){var C=s.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var f=0;f<C.length;f++){var Z=C[f],w=Z.getSnapshot;Z=Z.value;try{if(!Nr(w(),Z))return!1}catch{return!1}}}if(C=s.child,s.subtreeFlags&16384&&C!==null)C.return=s,s=C;else{if(s===g)break;for(;s.sibling===null;){if(s.return===null||s.return===g)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Yi(g,s){for(s&=~Bh,s&=~jI,g.suspendedLanes|=s,g.pingedLanes&=~s,g=g.expirationTimes;0<s;){var C=31-Yr(s),f=1<<C;g[C]=-1,s&=~f}}function qW(g){if(ze&6)throw Error(n(327));xg();var s=aI(g,0);if(!(s&1))return En(g,Ft()),null;var C=QI(g,s);if(g.tag!==0&&C===2){var f=lf(g);f!==0&&(s=f,C=kh(g,f))}if(C===1)throw C=js,bo(g,0),Yi(g,s),En(g,Ft()),C;if(C===6)throw Error(n(345));return g.finishedWork=g.current.alternate,g.finishedLanes=s,yo(g,Kn,La),En(g,Ft()),null}function Rh(g,s){var C=ze;ze|=1;try{return g(s)}finally{ze=C,ze===0&&(Rg=Ft()+500,vI&&Wi())}}function po(g){Xi!==null&&Xi.tag===0&&!(ze&6)&&xg();var s=ze;ze|=1;var C=hr.transition,f=at;try{if(hr.transition=null,at=1,g)return g()}finally{at=f,hr.transition=C,ze=s,!(ze&6)&&Wi()}}function xh(){qn=Vg.current,yt(Vg)}function bo(g,s){g.finishedWork=null,g.finishedLanes=0;var C=g.timeoutHandle;if(C!==-1&&(g.timeoutHandle=-1,DM(C)),zt!==null)for(C=zt.return;C!==null;){var f=C;switch(Mf(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&yI();break;case 3:wg(),yt(Nn),yt(fn),eh();break;case 5:qf(f);break;case 4:wg();break;case 13:yt(Wt);break;case 19:yt(Wt);break;case 10:Uf(f.type._context);break;case 22:case 23:xh()}C=C.return}if(rn=g,zt=g=Ni(g.current,null),dn=qn=s,_t=0,js=null,Bh=jI=ho=0,Kn=Ls=null,Ao!==null){for(s=0;s<Ao.length;s++)if(C=Ao[s],f=C.interleaved,f!==null){C.interleaved=null;var Z=f.next,w=C.pending;if(w!==null){var J=w.next;w.next=Z,f.next=J}C.pending=f}Ao=null}return g}function $W(g,s){do{var C=zt;try{if(zf(),XI.current=HI,JI){for(var f=kt.memoizedState;f!==null;){var Z=f.queue;Z!==null&&(Z.pending=null),f=f.next}JI=!1}if(fo=0,nn=Qt=kt=null,Fs=!1,Ks=0,Gh.current=null,C===null||C.return===null){_t=1,js=s,zt=null;break}e:{var w=g,J=C.return,K=C,j=s;if(s=dn,K.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var $=j,oe=K,le=oe.tag;if(!(oe.mode&1)&&(le===0||le===11||le===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var Ae=GW(J);if(Ae!==null){Ae.flags&=-257,BW(Ae,J,K,w,s),Ae.mode&1&&vW(w,$,s),s=Ae,j=$;var be=s.updateQueue;if(be===null){var Ze=new Set;Ze.add(j),s.updateQueue=Ze}else be.add(j);break e}else{if(!(s&1)){vW(w,$,s),Xh();break e}j=Error(n(426))}}else if(Gt&&K.mode&1){var Kt=GW(J);if(Kt!==null){!(Kt.flags&65536)&&(Kt.flags|=256),BW(Kt,J,K,w,s),jf(Wg(j,K));break e}}w=j=Wg(j,K),_t!==4&&(_t=2),Ls===null?Ls=[w]:Ls.push(w),w=J;do{switch(w.tag){case 3:w.flags|=65536,s&=-s,w.lanes|=s;var Q=yW(w,j,s);Pw(w,Q);break e;case 1:K=j;var U=w.type,_=w.stateNode;if(!(w.flags&128)&&(typeof U.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(xi===null||!xi.has(_)))){w.flags|=65536,s&=-s,w.lanes|=s;var ce=ZW(w,K,s);Pw(w,ce);break e}}w=w.return}while(w!==null)}nk(C)}catch(ve){s=ve,zt===C&&C!==null&&(zt=C=C.return);continue}break}while(!0)}function ek(){var g=TI.current;return TI.current=HI,g===null?HI:g}function Xh(){(_t===0||_t===3||_t===2)&&(_t=4),rn===null||!(ho&268435455)&&!(jI&268435455)||Yi(rn,dn)}function QI(g,s){var C=ze;ze|=2;var f=ek();(rn!==g||dn!==s)&&(La=null,bo(g,s));do try{d3();break}catch(Z){$W(g,Z)}while(!0);if(zf(),ze=C,TI.current=f,zt!==null)throw Error(n(261));return rn=null,dn=0,_t}function d3(){for(;zt!==null;)tk(zt)}function C3(){for(;zt!==null&&!KE();)tk(zt)}function tk(g){var s=ik(g.alternate,g,qn);g.memoizedProps=g.pendingProps,s===null?nk(g):zt=s,Gh.current=null}function nk(g){var s=g;do{var C=s.alternate;if(g=s.return,s.flags&32768){if(C=g3(C,s),C!==null){C.flags&=32767,zt=C;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{_t=6,zt=null;return}}else if(C=o3(C,s,qn),C!==null){zt=C;return}if(s=s.sibling,s!==null){zt=s;return}zt=s=g}while(s!==null);_t===0&&(_t=5)}function yo(g,s,C){var f=at,Z=hr.transition;try{hr.transition=null,at=1,A3(g,s,C,f)}finally{hr.transition=Z,at=f}return null}function A3(g,s,C,f){do xg();while(Xi!==null);if(ze&6)throw Error(n(327));C=g.finishedWork;var Z=g.finishedLanes;if(C===null)return null;if(g.finishedWork=null,g.finishedLanes=0,C===g.current)throw Error(n(177));g.callbackNode=null,g.callbackPriority=0;var w=C.lanes|C.childLanes;if(OE(g,w),g===rn&&(zt=rn=null,dn=0),!(C.subtreeFlags&2064)&&!(C.flags&2064)||zI||(zI=!0,ok(eI,function(){return xg(),null})),w=(C.flags&15990)!==0,C.subtreeFlags&15990||w){w=hr.transition,hr.transition=null;var J=at;at=1;var K=ze;ze|=4,Gh.current=null,s3(g,C),zW(C,g),YM(Xf),gI=!!xf,Xf=xf=null,g.current=C,c3(C),EE(),ze=K,at=J,hr.transition=w}else g.current=C;if(zI&&(zI=!1,Xi=g,UI=Z),w=g.pendingLanes,w===0&&(xi=null),TE(C.stateNode),En(g,Ft()),s!==null)for(f=g.onRecoverableError,C=0;C<s.length;C++)Z=s[C],f(Z.value,{componentStack:Z.stack,digest:Z.digest});if(LI)throw LI=!1,g=wh,wh=null,g;return UI&1&&g.tag!==0&&xg(),w=g.pendingLanes,w&1?g===Wh?zs++:(zs=0,Wh=g):zs=0,Wi(),null}function xg(){if(Xi!==null){var g=jS(UI),s=hr.transition,C=at;try{if(hr.transition=null,at=16>g?16:g,Xi===null)var f=!1;else{if(g=Xi,Xi=null,UI=0,ze&6)throw Error(n(331));var Z=ze;for(ze|=4,he=g.current;he!==null;){var w=he,J=w.child;if(he.flags&16){var K=w.deletions;if(K!==null){for(var j=0;j<K.length;j++){var $=K[j];for(he=$;he!==null;){var oe=he;switch(oe.tag){case 0:case 11:case 15:Ts(8,oe,w)}var le=oe.child;if(le!==null)le.return=oe,he=le;else for(;he!==null;){oe=he;var ie=oe.sibling,Ae=oe.return;if(MW(oe),oe===$){he=null;break}if(ie!==null){ie.return=Ae,he=ie;break}he=Ae}}}var be=w.alternate;if(be!==null){var Ze=be.child;if(Ze!==null){be.child=null;do{var Kt=Ze.sibling;Ze.sibling=null,Ze=Kt}while(Ze!==null)}}he=w}}if(w.subtreeFlags&2064&&J!==null)J.return=w,he=J;else e:for(;he!==null;){if(w=he,w.flags&2048)switch(w.tag){case 0:case 11:case 15:Ts(9,w,w.return)}var Q=w.sibling;if(Q!==null){Q.return=w.return,he=Q;break e}he=w.return}}var U=g.current;for(he=U;he!==null;){J=he;var _=J.child;if(J.subtreeFlags&2064&&_!==null)_.return=J,he=_;else e:for(J=U;he!==null;){if(K=he,K.flags&2048)try{switch(K.tag){case 0:case 11:case 15:DI(9,K)}}catch(ve){Xt(K,K.return,ve)}if(K===J){he=null;break e}var ce=K.sibling;if(ce!==null){ce.return=K.return,he=ce;break e}he=K.return}}if(ze=Z,Wi(),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(tI,g)}catch{}f=!0}return f}finally{at=C,hr.transition=s}}return!1}function rk(g,s,C){s=Wg(C,s),s=yW(g,s,1),g=Vi(g,s,1),s=kn(),g!==null&&(ms(g,1,s),En(g,s))}function Xt(g,s,C){if(g.tag===3)rk(g,g,C);else for(;s!==null;){if(s.tag===3){rk(s,g,C);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(xi===null||!xi.has(f))){g=Wg(C,g),g=ZW(s,g,1),s=Vi(s,g,1),g=kn(),s!==null&&(ms(s,1,g),En(s,g));break}}s=s.return}}function m3(g,s,C){var f=g.pingCache;f!==null&&f.delete(s),s=kn(),g.pingedLanes|=g.suspendedLanes&C,rn===g&&(dn&C)===C&&(_t===4||_t===3&&(dn&130023424)===dn&&500>Ft()-Sh?bo(g,0):Bh|=C),En(g,s)}function ak(g,s){s===0&&(g.mode&1?(s=rI,rI<<=1,!(rI&130023424)&&(rI=4194304)):s=1);var C=kn();g=Da(g,s),g!==null&&(ms(g,s,C),En(g,C))}function f3(g){var s=g.memoizedState,C=0;s!==null&&(C=s.retryLane),ak(g,C)}function h3(g,s){var C=0;switch(g.tag){case 13:var f=g.stateNode,Z=g.memoizedState;Z!==null&&(C=Z.retryLane);break;case 19:f=g.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(s),ak(g,C)}var ik;ik=function(g,s,C){if(g!==null)if(g.memoizedProps!==s.pendingProps||Nn.current)Fn=!0;else{if(!(g.lanes&C)&&!(s.flags&128))return Fn=!1,i3(g,s,C);Fn=!!(g.flags&131072)}else Fn=!1,Gt&&s.flags&1048576&&Fw(s,BI,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;EI(g,s),g=s.pendingProps;var Z=bg(s,fn.current);Sg(s,C),Z=rh(null,s,f,g,Z,C);var w=ah();return s.flags|=1,typeof Z=="object"&&Z!==null&&typeof Z.render=="function"&&Z.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Hn(f)?(w=!0,ZI(s)):w=!1,s.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null,Qf(s),Z.updater=FI,s.stateNode=Z,Z._reactInternals=s,ch(s,f,g,C),s=Ch(null,s,f,!0,w,C)):(s.tag=0,Gt&&w&&Ef(s),Wn(null,s,Z,C),s=s.child),s;case 16:f=s.elementType;e:{switch(EI(g,s),g=s.pendingProps,Z=f._init,f=Z(f._payload),s.type=f,Z=s.tag=b3(f),g=Fr(f,g),Z){case 0:s=dh(null,s,f,g,C);break e;case 1:s=RW(null,s,f,g,C);break e;case 11:s=SW(null,s,f,g,C);break e;case 14:s=wW(null,s,f,Fr(f.type,g),C);break e}throw Error(n(306,f,""))}return s;case 0:return f=s.type,Z=s.pendingProps,Z=s.elementType===f?Z:Fr(f,Z),dh(g,s,f,Z,C);case 1:return f=s.type,Z=s.pendingProps,Z=s.elementType===f?Z:Fr(f,Z),RW(g,s,f,Z,C);case 3:e:{if(xW(s),g===null)throw Error(n(387));f=s.pendingProps,w=s.memoizedState,Z=w.element,Uw(g,s),RI(s,f,null,C);var J=s.memoizedState;if(f=J.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:J.cache,pendingSuspenseBoundaries:J.pendingSuspenseBoundaries,transitions:J.transitions},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){Z=Wg(Error(n(423)),s),s=XW(g,s,f,C,Z);break e}else if(f!==Z){Z=Wg(Error(n(424)),s),s=XW(g,s,f,C,Z);break e}else for(_n=Bi(s.stateNode.containerInfo.firstChild),Qn=s,Gt=!0,Hr=null,C=Lw(s,null,f,C),s.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(vg(),f===Z){s=ja(g,s,C);break e}Wn(g,s,f,C)}s=s.child}return s;case 5:return Qw(s),g===null&&Tf(s),f=s.type,Z=s.pendingProps,w=g!==null?g.memoizedProps:null,J=Z.children,Jf(f,Z)?J=null:w!==null&&Jf(f,w)&&(s.flags|=32),VW(g,s),Wn(g,s,J,C),s.child;case 6:return g===null&&Tf(s),null;case 13:return JW(g,s,C);case 4:return _f(s,s.stateNode.containerInfo),f=s.pendingProps,g===null?s.child=Gg(s,null,f,C):Wn(g,s,f,C),s.child;case 11:return f=s.type,Z=s.pendingProps,Z=s.elementType===f?Z:Fr(f,Z),SW(g,s,f,Z,C);case 7:return Wn(g,s,s.pendingProps,C),s.child;case 8:return Wn(g,s,s.pendingProps.children,C),s.child;case 12:return Wn(g,s,s.pendingProps.children,C),s.child;case 10:e:{if(f=s.type._context,Z=s.pendingProps,w=s.memoizedProps,J=Z.value,ft(WI,f._currentValue),f._currentValue=J,w!==null)if(Nr(w.value,J)){if(w.children===Z.children&&!Nn.current){s=ja(g,s,C);break e}}else for(w=s.child,w!==null&&(w.return=s);w!==null;){var K=w.dependencies;if(K!==null){J=w.child;for(var j=K.firstContext;j!==null;){if(j.context===f){if(w.tag===1){j=Ta(-1,C&-C),j.tag=2;var $=w.updateQueue;if($!==null){$=$.shared;var oe=$.pending;oe===null?j.next=j:(j.next=oe.next,oe.next=j),$.pending=j}}w.lanes|=C,j=w.alternate,j!==null&&(j.lanes|=C),Pf(w.return,C,s),K.lanes|=C;break}j=j.next}}else if(w.tag===10)J=w.type===s.type?null:w.child;else if(w.tag===18){if(J=w.return,J===null)throw Error(n(341));J.lanes|=C,K=J.alternate,K!==null&&(K.lanes|=C),Pf(J,C,s),J=w.sibling}else J=w.child;if(J!==null)J.return=w;else for(J=w;J!==null;){if(J===s){J=null;break}if(w=J.sibling,w!==null){w.return=J.return,J=w;break}J=J.return}w=J}Wn(g,s,Z.children,C),s=s.child}return s;case 9:return Z=s.type,f=s.pendingProps.children,Sg(s,C),Z=mr(Z),f=f(Z),s.flags|=1,Wn(g,s,f,C),s.child;case 14:return f=s.type,Z=Fr(f,s.pendingProps),Z=Fr(f.type,Z),wW(g,s,f,Z,C);case 15:return WW(g,s,s.type,s.pendingProps,C);case 17:return f=s.type,Z=s.pendingProps,Z=s.elementType===f?Z:Fr(f,Z),EI(g,s),s.tag=1,Hn(f)?(g=!0,ZI(s)):g=!1,Sg(s,C),pW(s,f,Z),ch(s,f,Z,C),Ch(null,s,f,!0,g,C);case 19:return NW(g,s,C);case 22:return kW(g,s,C)}throw Error(n(156,s.tag))};function ok(g,s){return KS(g,s)}function p3(g,s,C,f){this.tag=g,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(g,s,C,f){return new p3(g,s,C,f)}function Jh(g){return g=g.prototype,!(!g||!g.isReactComponent)}function b3(g){if(typeof g=="function")return Jh(g)?1:0;if(g!=null){if(g=g.$$typeof,g===F)return 11;if(g===T)return 14}return 2}function Ni(g,s){var C=g.alternate;return C===null?(C=pr(g.tag,s,g.key,g.mode),C.elementType=g.elementType,C.type=g.type,C.stateNode=g.stateNode,C.alternate=g,g.alternate=C):(C.pendingProps=s,C.type=g.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=g.flags&14680064,C.childLanes=g.childLanes,C.lanes=g.lanes,C.child=g.child,C.memoizedProps=g.memoizedProps,C.memoizedState=g.memoizedState,C.updateQueue=g.updateQueue,s=g.dependencies,C.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},C.sibling=g.sibling,C.index=g.index,C.ref=g.ref,C}function _I(g,s,C,f,Z,w){var J=2;if(f=g,typeof g=="function")Jh(g)&&(J=1);else if(typeof g=="string")J=5;else e:switch(g){case W:return Zo(C.children,Z,w,s);case X:J=8,Z|=8;break;case N:return g=pr(12,C,s,Z|2),g.elementType=N,g.lanes=w,g;case E:return g=pr(13,C,s,Z),g.elementType=E,g.lanes=w,g;case M:return g=pr(19,C,s,Z),g.elementType=M,g.lanes=w,g;case P:return qI(C,Z,w,s);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case x:J=10;break e;case Y:J=9;break e;case F:J=11;break e;case T:J=14;break e;case z:J=16,f=null;break e}throw Error(n(130,g==null?g:typeof g,""))}return s=pr(J,C,s,Z),s.elementType=g,s.type=f,s.lanes=w,s}function Zo(g,s,C,f){return g=pr(7,g,f,s),g.lanes=C,g}function qI(g,s,C,f){return g=pr(22,g,f,s),g.elementType=P,g.lanes=C,g.stateNode={isHidden:!1},g}function Yh(g,s,C){return g=pr(6,g,null,s),g.lanes=C,g}function Nh(g,s,C){return s=pr(4,g.children!==null?g.children:[],g.key,s),s.lanes=C,s.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},s}function y3(g,s,C,f,Z){this.tag=s,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sf(0),this.expirationTimes=sf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sf(0),this.identifierPrefix=f,this.onRecoverableError=Z,this.mutableSourceEagerHydrationData=null}function Hh(g,s,C,f,Z,w,J,K,j){return g=new y3(g,s,C,K,j),s===1?(s=1,w===!0&&(s|=8)):s=0,w=pr(3,null,null,s),g.current=w,w.stateNode=g,w.memoizedState={element:f,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qf(w),g}function Z3(g,s,C){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:f==null?null:""+f,children:g,containerInfo:s,implementation:C}}function gk(g){if(!g)return wi;g=g._reactInternals;e:{if(so(g)!==g||g.tag!==1)throw Error(n(170));var s=g;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Hn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(g.tag===1){var C=g.type;if(Hn(C))return Yw(g,C,s)}return s}function lk(g,s,C,f,Z,w,J,K,j){return g=Hh(C,f,!0,g,Z,w,J,K,j),g.context=gk(null),C=g.current,f=kn(),Z=Ji(C),w=Ta(f,Z),w.callback=s??null,Vi(C,w,Z),g.current.lanes=Z,ms(g,Z,f),En(g,f),g}function $I(g,s,C,f){var Z=s.current,w=kn(),J=Ji(Z);return C=gk(C),s.context===null?s.context=C:s.pendingContext=C,s=Ta(w,J),s.payload={element:g},f=f===void 0?null:f,f!==null&&(s.callback=f),g=Vi(Z,s,J),g!==null&&(Mr(g,Z,J,w),VI(g,Z,J)),J}function ed(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function sk(g,s){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var C=g.retryLane;g.retryLane=C!==0&&C<s?C:s}}function Fh(g,s){sk(g,s),(g=g.alternate)&&sk(g,s)}var ck=typeof reportError=="function"?reportError:function(g){console.error(g)};function Kh(g){this._internalRoot=g}td.prototype.render=Kh.prototype.render=function(g){var s=this._internalRoot;if(s===null)throw Error(n(409));$I(g,s,null,null)},td.prototype.unmount=Kh.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var s=g.containerInfo;po(function(){$I(null,g,null,null)}),s[Fa]=null}};function td(g){this._internalRoot=g}td.prototype.unstable_scheduleHydration=function(g){if(g){var s=US();g={blockedOn:null,target:g,priority:s};for(var C=0;C<Zi.length&&s!==0&&s<Zi[C].priority;C++);Zi.splice(C,0,g),C===0&&QS(g)}};function Eh(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function nd(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function uk(){}function v3(g,s,C,f,Z){if(Z){if(typeof f=="function"){var w=f;f=function(){var $=ed(J);w.call($)}}var J=lk(s,f,g,0,null,!1,!1,"",uk);return g._reactRootContainer=J,g[Fa]=J.current,Vs(g.nodeType===8?g.parentNode:g),po(),J}for(;Z=g.lastChild;)g.removeChild(Z);if(typeof f=="function"){var K=f;f=function(){var $=ed(j);K.call($)}}var j=Hh(g,0,!1,null,null,!1,!1,"",uk);return g._reactRootContainer=j,g[Fa]=j.current,Vs(g.nodeType===8?g.parentNode:g),po(function(){$I(s,j,C,f)}),j}function rd(g,s,C,f,Z){var w=C._reactRootContainer;if(w){var J=w;if(typeof Z=="function"){var K=Z;Z=function(){var j=ed(J);K.call(j)}}$I(s,J,g,Z)}else J=v3(C,s,g,Z,f);return ed(J)}LS=function(g){switch(g.tag){case 3:var s=g.stateNode;if(s.current.memoizedState.isDehydrated){var C=As(s.pendingLanes);C!==0&&(cf(s,C|1),En(s,Ft()),!(ze&6)&&(Rg=Ft()+500,Wi()))}break;case 13:po(function(){var f=Da(g,1);if(f!==null){var Z=kn();Mr(f,g,1,Z)}}),Fh(g,1)}},uf=function(g){if(g.tag===13){var s=Da(g,134217728);if(s!==null){var C=kn();Mr(s,g,134217728,C)}Fh(g,134217728)}},zS=function(g){if(g.tag===13){var s=Ji(g),C=Da(g,s);if(C!==null){var f=kn();Mr(C,g,s,f)}Fh(g,s)}},US=function(){return at},PS=function(g,s){var C=at;try{return at=g,s()}finally{at=C}},nf=function(g,s,C){switch(s){case"input":if(tn(g,C),s=C.name,C.type==="radio"&&s!=null){for(C=g;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<C.length;s++){var f=C[s];if(f!==g&&f.form===g.form){var Z=bI(f);if(!Z)throw Error(n(90));ge(f),tn(f,Z)}}}break;case"textarea":ls(g,C);break;case"select":s=C.value,s!=null&&Yn(g,!!C.multiple,s,!1)}},xS=Rh,XS=po;var G3={usingClientEntryPoint:!1,Events:[Xs,hg,bI,VS,RS,Rh]},Us={findFiberByHostInstance:co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B3={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=HS(g),g===null?null:g.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{tI=ad.inject(B3),oa=ad}catch{}}return Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G3,Mn.createPortal=function(g,s){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eh(s))throw Error(n(200));return Z3(g,s,null,C)},Mn.createRoot=function(g,s){if(!Eh(g))throw Error(n(299));var C=!1,f="",Z=ck;return s!=null&&(s.unstable_strictMode===!0&&(C=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(Z=s.onRecoverableError)),s=Hh(g,1,!1,null,null,C,!1,f,Z),g[Fa]=s.current,Vs(g.nodeType===8?g.parentNode:g),new Kh(s)},Mn.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var s=g._reactInternals;if(s===void 0)throw typeof g.render=="function"?Error(n(188)):(g=Object.keys(g).join(","),Error(n(268,g)));return g=HS(s),g=g===null?null:g.stateNode,g},Mn.flushSync=function(g){return po(g)},Mn.hydrate=function(g,s,C){if(!nd(s))throw Error(n(200));return rd(null,g,s,!0,C)},Mn.hydrateRoot=function(g,s,C){if(!Eh(g))throw Error(n(405));var f=C!=null&&C.hydratedSources||null,Z=!1,w="",J=ck;if(C!=null&&(C.unstable_strictMode===!0&&(Z=!0),C.identifierPrefix!==void 0&&(w=C.identifierPrefix),C.onRecoverableError!==void 0&&(J=C.onRecoverableError)),s=lk(s,null,g,1,C??null,Z,!1,w,J),g[Fa]=s.current,Vs(g),f)for(g=0;g<f.length;g++)C=f[g],Z=C._getVersion,Z=Z(C._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[C,Z]:s.mutableSourceEagerHydrationData.push(C,Z);return new td(s)},Mn.render=function(g,s,C){if(!nd(s))throw Error(n(200));return rd(null,g,s,!1,C)},Mn.unmountComponentAtNode=function(g){if(!nd(g))throw Error(n(40));return g._reactRootContainer?(po(function(){rd(null,null,g,!1,function(){g._reactRootContainer=null,g[Fa]=null})}),!0):!1},Mn.unstable_batchedUpdates=Rh,Mn.unstable_renderSubtreeIntoContainer=function(g,s,C,f){if(!nd(C))throw Error(n(200));if(g==null||g._reactInternals===void 0)throw Error(n(38));return rd(g,s,C,!1,f)},Mn.version="18.3.1-next-f1338f8080-20240426",Mn}var pk;function uN(){if(pk)return Th.exports;pk=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Th.exports=Y3(),Th.exports}var bk;function N3(){if(bk)return od;bk=1;var e=uN();return od.createRoot=e.createRoot,od.hydrateRoot=e.hydrateRoot,od}var H3=N3(),Os={},yk;function F3(){if(yk)return Os;yk=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.parse=o,Os.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,i=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function o(m,p){const h=new i,b=m.length;if(b<2)return h;const y=(p==null?void 0:p.decode)||I;let v=0;do{const G=m.indexOf("=",v);if(G===-1)break;const S=m.indexOf(";",v),R=S===-1?b:S;if(G>R){v=m.lastIndexOf(";",G-1)+1;continue}const B=l(m,v,G),V=c(m,G,B),W=m.slice(B,V);if(h[W]===void 0){let X=l(m,G+1,R),N=c(m,R,X);const x=y(m.slice(X,N));h[W]=x}v=R+1}while(v<b);return h}function l(m,p,h){do{const b=m.charCodeAt(p);if(b!==32&&b!==9)return p}while(++p<h);return h}function c(m,p,h){for(;p>h;){const b=m.charCodeAt(--p);if(b!==32&&b!==9)return p+1}return h}function u(m,p,h){const b=(h==null?void 0:h.encode)||encodeURIComponent;if(!e.test(m))throw new TypeError(`argument name is invalid: ${m}`);const y=b(p);if(!t.test(y))throw new TypeError(`argument val is invalid: ${p}`);let v=m+"="+y;if(!h)return v;if(h.maxAge!==void 0){if(!Number.isInteger(h.maxAge))throw new TypeError(`option maxAge is invalid: ${h.maxAge}`);v+="; Max-Age="+h.maxAge}if(h.domain){if(!n.test(h.domain))throw new TypeError(`option domain is invalid: ${h.domain}`);v+="; Domain="+h.domain}if(h.path){if(!r.test(h.path))throw new TypeError(`option path is invalid: ${h.path}`);v+="; Path="+h.path}if(h.expires){if(!d(h.expires)||!Number.isFinite(h.expires.valueOf()))throw new TypeError(`option expires is invalid: ${h.expires}`);v+="; Expires="+h.expires.toUTCString()}if(h.httpOnly&&(v+="; HttpOnly"),h.secure&&(v+="; Secure"),h.partitioned&&(v+="; Partitioned"),h.priority)switch(typeof h.priority=="string"?h.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${h.priority}`)}if(h.sameSite)switch(typeof h.sameSite=="string"?h.sameSite.toLowerCase():h.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${h.sameSite}`)}return v}function I(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function d(m){return a.call(m)==="[object Date]"}return Os}F3();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zk="popstate";function K3(e={}){function t(r,a){let{pathname:i,search:o,hash:l}=r.location;return bZ("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:kc(a)}return M3(t,n,null,e)}function wt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _r(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function E3(){return Math.random().toString(36).substring(2,10)}function vk(e,t){return{usr:e.state,key:e.key,idx:t}}function bZ(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Tl(t):t,state:n,key:t&&t.key||r||E3()}}function kc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Tl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function M3(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l="POP",c=null,u=I();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function I(){return(o.state||{idx:null}).idx}function d(){l="POP";let y=I(),v=y==null?null:y-u;u=y,c&&c({action:l,location:b.location,delta:v})}function m(y,v){l="PUSH";let G=bZ(b.location,y,v);u=I()+1;let S=vk(G,u),R=b.createHref(G);try{o.pushState(S,"",R)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;a.location.assign(R)}i&&c&&c({action:l,location:b.location,delta:1})}function p(y,v){l="REPLACE";let G=bZ(b.location,y,v);u=I();let S=vk(G,u),R=b.createHref(G);o.replaceState(S,"",R),i&&c&&c({action:l,location:b.location,delta:0})}function h(y){let v=a.location.origin!=="null"?a.location.origin:a.location.href,G=typeof y=="string"?y:kc(y);return G=G.replace(/ $/,"%20"),wt(v,`No window.location.(origin|href) available to create URL for href: ${G}`),new URL(G,v)}let b={get action(){return l},get location(){return e(a,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Zk,d),c=y,()=>{a.removeEventListener(Zk,d),c=null}},createHref(y){return t(a,y)},createURL:h,encodeLocation(y){let v=h(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(y){return o.go(y)}};return b}function IN(e,t,n="/"){return D3(e,t,n,!1)}function D3(e,t,n,r){let a=typeof t=="string"?Tl(t):t,i=qi(a.pathname||"/",n);if(i==null)return null;let o=dN(e);T3(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=eD(i);l=q3(o[c],u,r)}return l}function dN(e,t=[],n=[],r=""){let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(wt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let u=$a([r,c.relativePath]),I=n.concat(c);i.children&&i.children.length>0&&(wt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),dN(i.children,t,I,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Q3(u,i.index),routesMeta:I})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of CN(i.path))a(i,o,c)}),t}function CN(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=CN(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function T3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:_3(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var j3=/^:[\w-]+$/,L3=3,z3=2,U3=1,P3=10,O3=-2,Gk=e=>e==="*";function Q3(e,t){let n=e.split("/"),r=n.length;return n.some(Gk)&&(r+=O3),t&&(r+=z3),n.filter(a=>!Gk(a)).reduce((a,i)=>a+(j3.test(i)?L3:i===""?U3:P3),r)}function _3(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function q3(e,t,n=!1){let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,I=i==="/"?t:t.slice(i.length)||"/",d=Od({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},I),m=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Od({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},I)),!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:$a([i,d.pathname]),pathnameBase:aD($a([i,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(i=$a([i,d.pathnameBase]))}return o}function Od(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=$3(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,{paramName:I,isOptional:d},m)=>{if(I==="*"){let h=l[m]||"";o=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const p=l[m];return d&&!p?u[I]=void 0:u[I]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function $3(e,t=!1,n=!0){_r(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function eD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _r(!1,`The URL path "${e}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function qi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function tD(e,t="/"){let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Tl(e):e;return{pathname:n?n.startsWith("/")?n:nD(n,t):t,search:iD(r),hash:oD(a)}}function nD(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function zh(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rD(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function IG(e){let t=rD(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function dG(e,t,n,r=!1){let a;typeof e=="string"?a=Tl(e):(a={...e},wt(!a.pathname||!a.pathname.includes("?"),zh("?","pathname","search",a)),wt(!a.pathname||!a.pathname.includes("#"),zh("#","pathname","hash",a)),wt(!a.search||!a.search.includes("#"),zh("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;a.pathname=m.join("/")}l=d>=0?t[d]:"/"}let c=tD(a,l),u=o&&o!=="/"&&o.endsWith("/"),I=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||I)&&(c.pathname+="/"),c}var $a=e=>e.join("/").replace(/\/\/+/g,"/"),aD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,oD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function gD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var AN=["POST","PUT","PATCH","DELETE"];new Set(AN);var lD=["GET",...AN];new Set(lD);var jl=k.createContext(null);jl.displayName="DataRouter";var BA=k.createContext(null);BA.displayName="DataRouterState";var mN=k.createContext({isTransitioning:!1});mN.displayName="ViewTransition";var sD=k.createContext(new Map);sD.displayName="Fetchers";var cD=k.createContext(null);cD.displayName="Await";var $r=k.createContext(null);$r.displayName="Navigation";var Zu=k.createContext(null);Zu.displayName="Location";var Ja=k.createContext({outlet:null,matches:[],isDataRoute:!1});Ja.displayName="Route";var CG=k.createContext(null);CG.displayName="RouteError";function uD(e,{relative:t}={}){wt(Ll(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext($r),{hash:a,pathname:i,search:o}=vu(e,{relative:t}),l=i;return n!=="/"&&(l=i==="/"?n:$a([n,i])),r.createHref({pathname:l,search:o,hash:a})}function Ll(){return k.useContext(Zu)!=null}function ea(){return wt(Ll(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Zu).location}var fN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hN(e){k.useContext($r).static||k.useLayoutEffect(e)}function Ya(){let{isDataRoute:e}=k.useContext(Ja);return e?GD():ID()}function ID(){wt(Ll(),"useNavigate() may be used only in the context of a <Router> component.");let e=k.useContext(jl),{basename:t,navigator:n}=k.useContext($r),{matches:r}=k.useContext(Ja),{pathname:a}=ea(),i=JSON.stringify(IG(r)),o=k.useRef(!1);return hN(()=>{o.current=!0}),k.useCallback((c,u={})=>{if(_r(o.current,fN),!o.current)return;if(typeof c=="number"){n.go(c);return}let I=dG(c,JSON.parse(i),a,u.relative==="path");e==null&&t!=="/"&&(I.pathname=I.pathname==="/"?t:$a([t,I.pathname])),(u.replace?n.replace:n.push)(I,u.state,u)},[t,n,i,a,e])}k.createContext(null);function vu(e,{relative:t}={}){let{matches:n}=k.useContext(Ja),{pathname:r}=ea(),a=JSON.stringify(IG(n));return k.useMemo(()=>dG(e,JSON.parse(a),r,t==="path"),[e,a,r,t])}function dD(e,t){return pN(e,t)}function pN(e,t,n,r){var v;wt(Ll(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=k.useContext($r),{matches:i}=k.useContext(Ja),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",I=o&&o.route;{let G=I&&I.path||"";bN(c,!I||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let d=ea(),m;if(t){let G=typeof t=="string"?Tl(t):t;wt(u==="/"||((v=G.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${G.pathname}" was given in the \`location\` prop.`),m=G}else m=d;let p=m.pathname||"/",h=p;if(u!=="/"){let G=u.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(G.length).join("/")}let b=IN(e,{pathname:h});_r(I||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),_r(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=hD(b&&b.map(G=>Object.assign({},G,{params:Object.assign({},l,G.params),pathname:$a([u,a.encodeLocation?a.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?u:$a([u,a.encodeLocation?a.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),i,n,r);return t&&y?k.createElement(Zu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},y):y}function CD(){let e=vD(),t=gD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:i},"ErrorBoundary")," or"," ",k.createElement("code",{style:i},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:a},n):null,o)}var AD=k.createElement(CD,null),mD=class extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(Ja.Provider,{value:this.props.routeContext},k.createElement(CG.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fD({routeContext:e,match:t,children:n}){let r=k.useContext(jl);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(Ja.Provider,{value:e},n)}function hD(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=n==null?void 0:n.errors;if(i!=null){let c=a.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);wt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:I,errors:d}=n,m=u.route.loader&&!I.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||m){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,I)=>{let d,m=!1,p=null,h=null;n&&(d=i&&u.route.id?i[u.route.id]:void 0,p=u.route.errorElement||AD,o&&(l<0&&I===0?(bN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,h=null):l===I&&(m=!0,h=u.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,I+1)),y=()=>{let v;return d?v=p:m?v=h:u.route.Component?v=k.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=c,k.createElement(fD,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:v})};return n&&(u.route.ErrorBoundary||u.route.errorElement||I===0)?k.createElement(mD,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}function AG(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pD(e){let t=k.useContext(jl);return wt(t,AG(e)),t}function bD(e){let t=k.useContext(BA);return wt(t,AG(e)),t}function yD(e){let t=k.useContext(Ja);return wt(t,AG(e)),t}function mG(e){let t=yD(e),n=t.matches[t.matches.length-1];return wt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ZD(){return mG("useRouteId")}function vD(){var r;let e=k.useContext(CG),t=bD("useRouteError"),n=mG("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function GD(){let{router:e}=pD("useNavigate"),t=mG("useNavigate"),n=k.useRef(!1);return hN(()=>{n.current=!0}),k.useCallback(async(a,i={})=>{_r(n.current,fN),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var Bk={};function bN(e,t,n){!t&&!Bk[e]&&(Bk[e]=!0,_r(!1,n))}k.memo(BD);function BD({routes:e,future:t,state:n}){return pN(e,void 0,n,t)}function Cc({to:e,replace:t,state:n,relative:r}){wt(Ll(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=k.useContext($r);_r(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=k.useContext(Ja),{pathname:o}=ea(),l=Ya(),c=dG(e,IG(i),o,r==="path"),u=JSON.stringify(c);return k.useEffect(()=>{l(JSON.parse(u),{replace:t,state:n,relative:r})},[l,u,r,t,n]),null}function yn(e){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function SD({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:i=!1}){wt(!Ll(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof n=="string"&&(n=Tl(n));let{pathname:c="/",search:u="",hash:I="",state:d=null,key:m="default"}=n,p=k.useMemo(()=>{let h=qi(c,o);return h==null?null:{location:{pathname:h,search:u,hash:I,state:d,key:m},navigationType:r}},[o,c,u,I,d,m,r]);return _r(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${I}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:k.createElement($r.Provider,{value:l},k.createElement(Zu.Provider,{children:t,value:p}))}function wD({children:e,location:t}){return dD(yZ(e),t)}function yZ(e,t=[]){let n=[];return k.Children.forEach(e,(r,a)=>{if(!k.isValidElement(r))return;let i=[...t,a];if(r.type===k.Fragment){n.push.apply(n,yZ(r.props.children,i));return}wt(r.type===yn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=yZ(r.props.children,i)),n.push(o)}),n}var Jd="get",Yd="application/x-www-form-urlencoded";function SA(e){return e!=null&&typeof e.tagName=="string"}function WD(e){return SA(e)&&e.tagName.toLowerCase()==="button"}function kD(e){return SA(e)&&e.tagName.toLowerCase()==="form"}function VD(e){return SA(e)&&e.tagName.toLowerCase()==="input"}function RD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xD(e,t){return e.button===0&&(!t||t==="_self")&&!RD(e)}var gd=null;function XD(){if(gd===null)try{new FormData(document.createElement("form"),0),gd=!1}catch{gd=!0}return gd}var JD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Uh(e){return e!=null&&!JD.has(e)?(_r(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yd}"`),null):e}function YD(e,t){let n,r,a,i,o;if(kD(e)){let l=e.getAttribute("action");r=l?qi(l,t):null,n=e.getAttribute("method")||Jd,a=Uh(e.getAttribute("enctype"))||Yd,i=new FormData(e)}else if(WD(e)||VD(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(r=c?qi(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||Jd,a=Uh(e.getAttribute("formenctype"))||Uh(l.getAttribute("enctype"))||Yd,i=new FormData(l,e),!XD()){let{name:u,type:I,value:d}=e;if(I==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,d)}}else{if(SA(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Jd,r=null,a=Yd,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:i,body:o}}function fG(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function ND(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HD(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function FD(e,t,n){let r=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await ND(i,n);return o.links?o.links():[]}return[]}));return DD(r.flat(1).filter(HD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Sk(e,t,n,r,a,i){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var I;return n[u].pathname!==c.pathname||((I=n[u].route.path)==null?void 0:I.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{var d;let I=r.routes[c.route.id];if(!I||!I.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function KD(e,t){return ED(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let a=[r.module];return r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function ED(e){return[...new Set(e)]}function MD(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function DD(e,t){let n=new Set;return new Set(t),e.reduce((r,a)=>{let i=JSON.stringify(MD(a));return n.has(i)||(n.add(i),r.push({key:i,link:a})),r},[])}function TD(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function jD(){let e=k.useContext(jl);return fG(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function LD(){let e=k.useContext(BA);return fG(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var hG=k.createContext(void 0);hG.displayName="FrameworkContext";function yN(){let e=k.useContext(hG);return fG(e,"You must render this element inside a <HydratedRouter> element"),e}function zD(e,t){let n=k.useContext(hG),[r,a]=k.useState(!1),[i,o]=k.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:I,onTouchStart:d}=t,m=k.useRef(null);k.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let b=v=>{v.forEach(G=>{o(G.isIntersecting)})},y=new IntersectionObserver(b,{threshold:.5});return m.current&&y.observe(m.current),()=>{y.disconnect()}}},[e]),k.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let p=()=>{a(!0)},h=()=>{a(!1),o(!1)};return n?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Qs(l,p),onBlur:Qs(c,h),onMouseEnter:Qs(u,p),onMouseLeave:Qs(I,h),onTouchStart:Qs(d,p)}]:[!1,m,{}]}function Qs(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function UD({page:e,...t}){let{router:n}=jD(),r=k.useMemo(()=>IN(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?k.createElement(OD,{page:e,matches:r,...t}):null}function PD(e){let{manifest:t,routeModules:n}=yN(),[r,a]=k.useState([]);return k.useEffect(()=>{let i=!1;return FD(e,t,n).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,n]),r}function OD({page:e,matches:t,...n}){let r=ea(),{manifest:a,routeModules:i}=yN(),{loaderData:o,matches:l}=LD(),c=k.useMemo(()=>Sk(e,t,l,a,r,"data"),[e,t,l,a,r]),u=k.useMemo(()=>Sk(e,t,l,a,r,"assets"),[e,t,l,a,r]),I=k.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let p=new Set,h=!1;if(t.forEach(y=>{var G;let v=a.routes[y.route.id];!v||!v.hasLoader||(!c.some(S=>S.route.id===y.route.id)&&y.route.id in o&&((G=i[y.route.id])!=null&&G.shouldRevalidate)||v.hasClientLoader?h=!0:p.add(y.route.id))}),p.size===0)return[];let b=TD(e);return h&&p.size>0&&b.searchParams.set("_routes",t.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[o,r,a,c,t,e,i]),d=k.useMemo(()=>KD(u,a),[u,a]),m=PD(u);return k.createElement(k.Fragment,null,I.map(p=>k.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),d.map(p=>k.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),m.map(({key:p,link:h})=>k.createElement("link",{key:p,...h})))}function QD(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var ZN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZN&&(window.__reactRouterVersion="7.1.1")}catch{}function _D({basename:e,children:t,window:n}){let r=k.useRef();r.current==null&&(r.current=K3({window:n,v5Compat:!0}));let a=r.current,[i,o]=k.useState({action:a.action,location:a.location}),l=k.useCallback(c=>{k.startTransition(()=>o(c))},[o]);return k.useLayoutEffect(()=>a.listen(l),[a,l]),k.createElement(SD,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var vN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,To=k.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:I,viewTransition:d,...m},p){let{basename:h}=k.useContext($r),b=typeof u=="string"&&vN.test(u),y,v=!1;if(typeof u=="string"&&b&&(y=u,ZN))try{let N=new URL(window.location.href),x=u.startsWith("//")?new URL(N.protocol+u):new URL(u),Y=qi(x.pathname,h);x.origin===N.origin&&Y!=null?u=Y+x.search+x.hash:v=!0}catch{_r(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=uD(u,{relative:a}),[S,R,B]=zD(r,m),V=tT(u,{replace:o,state:l,target:c,preventScrollReset:I,relative:a,viewTransition:d});function W(N){t&&t(N),N.defaultPrevented||V(N)}let X=k.createElement("a",{...m,...B,href:y||G,onClick:v||i?t:W,ref:QD(p,R),target:c,"data-discover":!b&&n==="render"?"true":void 0});return S&&!b?k.createElement(k.Fragment,null,X,k.createElement(UD,{page:G})):X});To.displayName="Link";var qD=k.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...u},I){let d=vu(o,{relative:u.relative}),m=ea(),p=k.useContext(BA),{navigator:h,basename:b}=k.useContext($r),y=p!=null&&oT(d)&&l===!0,v=h.encodeLocation?h.encodeLocation(d).pathname:d.pathname,G=m.pathname,S=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(G=G.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&b&&(S=qi(S,b)||S);const R=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let B=G===v||!a&&G.startsWith(v)&&G.charAt(R)==="/",V=S!=null&&(S===v||!a&&S.startsWith(v)&&S.charAt(v.length)==="/"),W={isActive:B,isPending:V,isTransitioning:y},X=B?t:void 0,N;typeof r=="function"?N=r(W):N=[r,B?"active":null,V?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let x=typeof i=="function"?i(W):i;return k.createElement(To,{...u,"aria-current":X,className:N,ref:I,style:x,to:o,viewTransition:l},typeof c=="function"?c(W):c)});qD.displayName="NavLink";var $D=k.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:i,method:o=Jd,action:l,onSubmit:c,relative:u,preventScrollReset:I,viewTransition:d,...m},p)=>{let h=aT(),b=iT(l,{relative:u}),y=o.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&vN.test(l),G=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let R=S.nativeEvent.submitter,B=(R==null?void 0:R.getAttribute("formmethod"))||o;h(R||S.currentTarget,{fetcherKey:t,method:B,navigate:n,replace:a,state:i,relative:u,preventScrollReset:I,viewTransition:d})};return k.createElement("form",{ref:p,method:y,action:b,onSubmit:r?c:G,...m,"data-discover":!v&&e==="render"?"true":void 0})});$D.displayName="Form";function eT(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GN(e){let t=k.useContext(jl);return wt(t,eT(e)),t}function tT(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:i,viewTransition:o}={}){let l=Ya(),c=ea(),u=vu(e,{relative:i});return k.useCallback(I=>{if(xD(I,t)){I.preventDefault();let d=n!==void 0?n:kc(c)===kc(u);l(e,{replace:d,state:r,preventScrollReset:a,relative:i,viewTransition:o})}},[c,l,u,n,r,t,e,a,i,o])}var nT=0,rT=()=>`__${String(++nT)}__`;function aT(){let{router:e}=GN("useSubmit"),{basename:t}=k.useContext($r),n=ZD();return k.useCallback(async(r,a={})=>{let{action:i,method:o,encType:l,formData:c,body:u}=YD(r,t);if(a.navigate===!1){let I=a.fetcherKey||rT();await e.fetch(I,n,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function iT(e,{relative:t}={}){let{basename:n}=k.useContext($r),r=k.useContext(Ja);wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...vu(e||".",{relative:t})},o=ea();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(I=>I==="")){l.delete("index"),c.filter(d=>d).forEach(d=>l.append("index",d));let I=l.toString();i.search=I?`?${I}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:$a([n,i.pathname])),kc(i)}function oT(e,t={}){let n=k.useContext(mN);wt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=GN("useViewTransitionState"),a=vu(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=qi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=qi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Od(a.pathname,o)!=null||Od(a.pathname,i)!=null}new TextEncoder;var BN=uN();const gT=ut(BN);function SN(e,t){return function(){return e.apply(t,arguments)}}const{toString:lT}=Object.prototype,{getPrototypeOf:pG}=Object,wA=(e=>t=>{const n=lT.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ta=e=>(e=e.toLowerCase(),t=>wA(t)===e),WA=e=>t=>typeof t===e,{isArray:zl}=Array,Vc=WA("undefined");function sT(e){return e!==null&&!Vc(e)&&e.constructor!==null&&!Vc(e.constructor)&&ir(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const wN=ta("ArrayBuffer");function cT(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&wN(e.buffer),t}const uT=WA("string"),ir=WA("function"),WN=WA("number"),kA=e=>e!==null&&typeof e=="object",IT=e=>e===!0||e===!1,Nd=e=>{if(wA(e)!=="object")return!1;const t=pG(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},dT=ta("Date"),CT=ta("File"),AT=ta("Blob"),mT=ta("FileList"),fT=e=>kA(e)&&ir(e.pipe),hT=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ir(e.append)&&((t=wA(e))==="formdata"||t==="object"&&ir(e.toString)&&e.toString()==="[object FormData]"))},pT=ta("URLSearchParams"),[bT,yT,ZT,vT]=["ReadableStream","Request","Response","Headers"].map(ta),GT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gu(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,a;if(typeof e!="object"&&(e=[e]),zl(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(r=0;r<o;r++)l=i[r],t.call(null,e[l],l,e)}}function kN(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,a;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const ko=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,VN=e=>!Vc(e)&&e!==ko;function ZZ(){const{caseless:e}=VN(this)&&this||{},t={},n=(r,a)=>{const i=e&&kN(t,a)||a;Nd(t[i])&&Nd(r)?t[i]=ZZ(t[i],r):Nd(r)?t[i]=ZZ({},r):zl(r)?t[i]=r.slice():t[i]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Gu(arguments[r],n);return t}const BT=(e,t,n,{allOwnKeys:r}={})=>(Gu(t,(a,i)=>{n&&ir(a)?e[i]=SN(a,n):e[i]=a},{allOwnKeys:r}),e),ST=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),wT=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},WT=(e,t,n,r)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!r||r(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&pG(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kT=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},VT=e=>{if(!e)return null;if(zl(e))return e;let t=e.length;if(!WN(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},RT=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&pG(Uint8Array)),xT=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=r.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},XT=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},JT=ta("HTMLFormElement"),YT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),wk=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),NT=ta("RegExp"),RN=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Gu(n,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(r[i]=o||a)}),Object.defineProperties(e,r)},HT=e=>{RN(e,(t,n)=>{if(ir(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ir(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},FT=(e,t)=>{const n={},r=a=>{a.forEach(i=>{n[i]=!0})};return zl(e)?r(e):r(String(e).split(t)),n},KT=()=>{},ET=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Ph="abcdefghijklmnopqrstuvwxyz",Wk="0123456789",xN={DIGIT:Wk,ALPHA:Ph,ALPHA_DIGIT:Ph+Ph.toUpperCase()+Wk},MT=(e=16,t=xN.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function DT(e){return!!(e&&ir(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const TT=e=>{const t=new Array(10),n=(r,a)=>{if(kA(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[a]=r;const i=zl(r)?[]:{};return Gu(r,(o,l)=>{const c=n(o,a+1);!Vc(c)&&(i[l]=c)}),t[a]=void 0,i}}return r};return n(e,0)},jT=ta("AsyncFunction"),LT=e=>e&&(kA(e)||ir(e))&&ir(e.then)&&ir(e.catch),XN=((e,t)=>e?setImmediate:t?((n,r)=>(ko.addEventListener("message",({source:a,data:i})=>{a===ko&&i===n&&r.length&&r.shift()()},!1),a=>{r.push(a),ko.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ir(ko.postMessage)),zT=typeof queueMicrotask<"u"?queueMicrotask.bind(ko):typeof process<"u"&&process.nextTick||XN,ne={isArray:zl,isArrayBuffer:wN,isBuffer:sT,isFormData:hT,isArrayBufferView:cT,isString:uT,isNumber:WN,isBoolean:IT,isObject:kA,isPlainObject:Nd,isReadableStream:bT,isRequest:yT,isResponse:ZT,isHeaders:vT,isUndefined:Vc,isDate:dT,isFile:CT,isBlob:AT,isRegExp:NT,isFunction:ir,isStream:fT,isURLSearchParams:pT,isTypedArray:RT,isFileList:mT,forEach:Gu,merge:ZZ,extend:BT,trim:GT,stripBOM:ST,inherits:wT,toFlatObject:WT,kindOf:wA,kindOfTest:ta,endsWith:kT,toArray:VT,forEachEntry:xT,matchAll:XT,isHTMLForm:JT,hasOwnProperty:wk,hasOwnProp:wk,reduceDescriptors:RN,freezeMethods:HT,toObjectSet:FT,toCamelCase:YT,noop:KT,toFiniteNumber:ET,findKey:kN,global:ko,isContextDefined:VN,ALPHABET:xN,generateString:MT,isSpecCompliantForm:DT,toJSONObject:TT,isAsyncFn:jT,isThenable:LT,setImmediate:XN,asap:zT};function Ne(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}ne.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ne.toJSONObject(this.config),code:this.code,status:this.status}}});const JN=Ne.prototype,YN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{YN[e]={value:e}});Object.defineProperties(Ne,YN);Object.defineProperty(JN,"isAxiosError",{value:!0});Ne.from=(e,t,n,r,a,i)=>{const o=Object.create(JN);return ne.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Ne.call(o,e.message,t,n,r,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const UT=null;function vZ(e){return ne.isPlainObject(e)||ne.isArray(e)}function NN(e){return ne.endsWith(e,"[]")?e.slice(0,-2):e}function kk(e,t,n){return e?e.concat(t).map(function(a,i){return a=NN(a),!n&&i?"["+a+"]":a}).join(n?".":""):t}function PT(e){return ne.isArray(e)&&!e.some(vZ)}const OT=ne.toFlatObject(ne,{},null,function(t){return/^is[A-Z]/.test(t)});function VA(e,t,n){if(!ne.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ne.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,y){return!ne.isUndefined(y[b])});const r=n.metaTokens,a=n.visitor||I,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ne.isSpecCompliantForm(t);if(!ne.isFunction(a))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(ne.isDate(h))return h.toISOString();if(!c&&ne.isBlob(h))throw new Ne("Blob is not supported. Use a Buffer instead.");return ne.isArrayBuffer(h)||ne.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function I(h,b,y){let v=h;if(h&&!y&&typeof h=="object"){if(ne.endsWith(b,"{}"))b=r?b:b.slice(0,-2),h=JSON.stringify(h);else if(ne.isArray(h)&&PT(h)||(ne.isFileList(h)||ne.endsWith(b,"[]"))&&(v=ne.toArray(h)))return b=NN(b),v.forEach(function(S,R){!(ne.isUndefined(S)||S===null)&&t.append(o===!0?kk([b],R,i):o===null?b:b+"[]",u(S))}),!1}return vZ(h)?!0:(t.append(kk(y,b,i),u(h)),!1)}const d=[],m=Object.assign(OT,{defaultVisitor:I,convertValue:u,isVisitable:vZ});function p(h,b){if(!ne.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+b.join("."));d.push(h),ne.forEach(h,function(v,G){(!(ne.isUndefined(v)||v===null)&&a.call(t,v,ne.isString(G)?G.trim():G,b,m))===!0&&p(v,b?b.concat(G):[G])}),d.pop()}}if(!ne.isObject(e))throw new TypeError("data must be an object");return p(e),t}function Vk(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function bG(e,t){this._pairs=[],e&&VA(e,this,t)}const HN=bG.prototype;HN.append=function(t,n){this._pairs.push([t,n])};HN.toString=function(t){const n=t?function(r){return t.call(this,r,Vk)}:Vk;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function QT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function FN(e,t,n){if(!t)return e;const r=n&&n.encode||QT;ne.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let i;if(a?i=a(t,n):i=ne.isURLSearchParams(t)?t.toString():new bG(t,n).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Rk{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ne.forEach(this.handlers,function(r){r!==null&&t(r)})}}const KN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_T=typeof URLSearchParams<"u"?URLSearchParams:bG,qT=typeof FormData<"u"?FormData:null,$T=typeof Blob<"u"?Blob:null,ej={isBrowser:!0,classes:{URLSearchParams:_T,FormData:qT,Blob:$T},protocols:["http","https","file","blob","url","data"]},yG=typeof window<"u"&&typeof document<"u",GZ=typeof navigator=="object"&&navigator||void 0,tj=yG&&(!GZ||["ReactNative","NativeScript","NS"].indexOf(GZ.product)<0),nj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rj=yG&&window.location.href||"http://localhost",aj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yG,hasStandardBrowserEnv:tj,hasStandardBrowserWebWorkerEnv:nj,navigator:GZ,origin:rj},Symbol.toStringTag,{value:"Module"})),Sn={...aj,...ej};function ij(e,t){return VA(e,new Sn.classes.URLSearchParams,Object.assign({visitor:function(n,r,a,i){return Sn.isNode&&ne.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function oj(e){return ne.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function gj(e){const t={},n=Object.keys(e);let r;const a=n.length;let i;for(r=0;r<a;r++)i=n[r],t[i]=e[i];return t}function EN(e){function t(n,r,a,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&ne.isArray(a)?a.length:o,c?(ne.hasOwnProp(a,o)?a[o]=[a[o],r]:a[o]=r,!l):((!a[o]||!ne.isObject(a[o]))&&(a[o]=[]),t(n,r,a[o],i)&&ne.isArray(a[o])&&(a[o]=gj(a[o])),!l)}if(ne.isFormData(e)&&ne.isFunction(e.entries)){const n={};return ne.forEachEntry(e,(r,a)=>{t(oj(r),a,n,0)}),n}return null}function lj(e,t,n){if(ne.isString(e))try{return(t||JSON.parse)(e),ne.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(e)}const Bu={transitional:KN,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,i=ne.isObject(t);if(i&&ne.isHTMLForm(t)&&(t=new FormData(t)),ne.isFormData(t))return a?JSON.stringify(EN(t)):t;if(ne.isArrayBuffer(t)||ne.isBuffer(t)||ne.isStream(t)||ne.isFile(t)||ne.isBlob(t)||ne.isReadableStream(t))return t;if(ne.isArrayBufferView(t))return t.buffer;if(ne.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ij(t,this.formSerializer).toString();if((l=ne.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return VA(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(n.setContentType("application/json",!1),lj(t)):t}],transformResponse:[function(t){const n=this.transitional||Bu.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(ne.isResponse(t)||ne.isReadableStream(t))return t;if(t&&ne.isString(t)&&(r&&!this.responseType||a)){const o=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?Ne.from(l,Ne.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Sn.classes.FormData,Blob:Sn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ne.forEach(["delete","get","head","post","put","patch"],e=>{Bu.headers[e]={}});const sj=ne.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cj=e=>{const t={};let n,r,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),n=o.substring(0,a).trim().toLowerCase(),r=o.substring(a+1).trim(),!(!n||t[n]&&sj[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},xk=Symbol("internals");function _s(e){return e&&String(e).trim().toLowerCase()}function Hd(e){return e===!1||e==null?e:ne.isArray(e)?e.map(Hd):String(e)}function uj(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Ij=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Oh(e,t,n,r,a){if(ne.isFunction(r))return r.call(this,t,n);if(a&&(t=n),!!ne.isString(t)){if(ne.isString(r))return t.indexOf(r)!==-1;if(ne.isRegExp(r))return r.test(t)}}function dj(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Cj(e,t){const n=ne.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(a,i,o){return this[r].call(this,t,a,i,o)},configurable:!0})})}class Tn{constructor(t){t&&this.set(t)}set(t,n,r){const a=this;function i(l,c,u){const I=_s(c);if(!I)throw new Error("header name must be a non-empty string");const d=ne.findKey(a,I);(!d||a[d]===void 0||u===!0||u===void 0&&a[d]!==!1)&&(a[d||c]=Hd(l))}const o=(l,c)=>ne.forEach(l,(u,I)=>i(u,I,c));if(ne.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(ne.isString(t)&&(t=t.trim())&&!Ij(t))o(cj(t),n);else if(ne.isHeaders(t))for(const[l,c]of t.entries())i(c,l,r);else t!=null&&i(n,t,r);return this}get(t,n){if(t=_s(t),t){const r=ne.findKey(this,t);if(r){const a=this[r];if(!n)return a;if(n===!0)return uj(a);if(ne.isFunction(n))return n.call(this,a,r);if(ne.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=_s(t),t){const r=ne.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Oh(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let a=!1;function i(o){if(o=_s(o),o){const l=ne.findKey(r,o);l&&(!n||Oh(r,r[l],l,n))&&(delete r[l],a=!0)}}return ne.isArray(t)?t.forEach(i):i(t),a}clear(t){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const i=n[r];(!t||Oh(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const n=this,r={};return ne.forEach(this,(a,i)=>{const o=ne.findKey(r,i);if(o){n[o]=Hd(a),delete n[i];return}const l=t?dj(i):String(i).trim();l!==i&&delete n[i],n[l]=Hd(a),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ne.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=t&&ne.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(a=>r.set(a)),r}static accessor(t){const r=(this[xk]=this[xk]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=_s(o);r[l]||(Cj(a,o),r[l]=!0)}return ne.isArray(t)?t.forEach(i):i(t),this}}Tn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ne.reduceDescriptors(Tn.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});ne.freezeMethods(Tn);function Qh(e,t){const n=this||Bu,r=t||n,a=Tn.from(r.headers);let i=r.data;return ne.forEach(e,function(l){i=l.call(n,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function MN(e){return!!(e&&e.__CANCEL__)}function Ul(e,t,n){Ne.call(this,e??"canceled",Ne.ERR_CANCELED,t,n),this.name="CanceledError"}ne.inherits(Ul,Ne,{__CANCEL__:!0});function DN(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Ne("Request failed with status code "+n.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Aj(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function mj(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),I=r[i];o||(o=u),n[a]=c,r[a]=u;let d=i,m=0;for(;d!==a;)m+=n[d++],d=d%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),u-o<t)return;const p=I&&u-I;return p?Math.round(m*1e3/p):void 0}}function fj(e,t){let n=0,r=1e3/t,a,i;const o=(u,I=Date.now())=>{n=I,a=null,i&&(clearTimeout(i),i=null),e.apply(null,u)};return[(...u)=>{const I=Date.now(),d=I-n;d>=r?o(u,I):(a=u,i||(i=setTimeout(()=>{i=null,o(a)},r-d)))},()=>a&&o(a)]}const Qd=(e,t,n=3)=>{let r=0;const a=mj(50,250);return fj(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-r,u=a(c),I=o<=l;r=o;const d={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&I?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(d)},n)},Xk=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Jk=e=>(...t)=>ne.asap(()=>e(...t)),hj=Sn.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Sn.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Sn.origin),Sn.navigator&&/(msie|trident)/i.test(Sn.navigator.userAgent)):()=>!0,pj=Sn.hasStandardBrowserEnv?{write(e,t,n,r,a,i){const o=[e+"="+encodeURIComponent(t)];ne.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ne.isString(r)&&o.push("path="+r),ne.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bj(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function yj(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function TN(e,t){return e&&!bj(t)?yj(e,t):t}const Yk=e=>e instanceof Tn?{...e}:e;function jo(e,t){t=t||{};const n={};function r(u,I,d,m){return ne.isPlainObject(u)&&ne.isPlainObject(I)?ne.merge.call({caseless:m},u,I):ne.isPlainObject(I)?ne.merge({},I):ne.isArray(I)?I.slice():I}function a(u,I,d,m){if(ne.isUndefined(I)){if(!ne.isUndefined(u))return r(void 0,u,d,m)}else return r(u,I,d,m)}function i(u,I){if(!ne.isUndefined(I))return r(void 0,I)}function o(u,I){if(ne.isUndefined(I)){if(!ne.isUndefined(u))return r(void 0,u)}else return r(void 0,I)}function l(u,I,d){if(d in t)return r(u,I);if(d in e)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,I,d)=>a(Yk(u),Yk(I),d,!0)};return ne.forEach(Object.keys(Object.assign({},e,t)),function(I){const d=c[I]||a,m=d(e[I],t[I],I);ne.isUndefined(m)&&d!==l||(n[I]=m)}),n}const jN=e=>{const t=jo({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=Tn.from(o),t.url=FN(TN(t.baseURL,t.url),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(ne.isFormData(n)){if(Sn.hasStandardBrowserEnv||Sn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...I]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...I].join("; "))}}if(Sn.hasStandardBrowserEnv&&(r&&ne.isFunction(r)&&(r=r(t)),r||r!==!1&&hj(t.url))){const u=a&&i&&pj.read(i);u&&o.set(a,u)}return t},Zj=typeof XMLHttpRequest<"u",vj=Zj&&function(e){return new Promise(function(n,r){const a=jN(e);let i=a.data;const o=Tn.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,I,d,m,p,h;function b(){p&&p(),h&&h(),a.cancelToken&&a.cancelToken.unsubscribe(I),a.signal&&a.signal.removeEventListener("abort",I)}let y=new XMLHttpRequest;y.open(a.method.toUpperCase(),a.url,!0),y.timeout=a.timeout;function v(){if(!y)return;const S=Tn.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),B={data:!l||l==="text"||l==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:S,config:e,request:y};DN(function(W){n(W),b()},function(W){r(W),b()},B),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(r(new Ne("Request aborted",Ne.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new Ne("Network Error",Ne.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let R=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const B=a.transitional||KN;a.timeoutErrorMessage&&(R=a.timeoutErrorMessage),r(new Ne(R,B.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,e,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&ne.forEach(o.toJSON(),function(R,B){y.setRequestHeader(B,R)}),ne.isUndefined(a.withCredentials)||(y.withCredentials=!!a.withCredentials),l&&l!=="json"&&(y.responseType=a.responseType),u&&([m,h]=Qd(u,!0),y.addEventListener("progress",m)),c&&y.upload&&([d,p]=Qd(c),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",p)),(a.cancelToken||a.signal)&&(I=S=>{y&&(r(!S||S.type?new Ul(null,e,y):S),y.abort(),y=null)},a.cancelToken&&a.cancelToken.subscribe(I),a.signal&&(a.signal.aborted?I():a.signal.addEventListener("abort",I)));const G=Aj(a.url);if(G&&Sn.protocols.indexOf(G)===-1){r(new Ne("Unsupported protocol "+G+":",Ne.ERR_BAD_REQUEST,e));return}y.send(i||null)})},Gj=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,a;const i=function(u){if(!a){a=!0,l();const I=u instanceof Error?u:this.reason;r.abort(I instanceof Ne?I:new Ul(I instanceof Error?I.message:I))}};let o=t&&setTimeout(()=>{o=null,i(new Ne(`timeout ${t} of ms exceeded`,Ne.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>ne.asap(l),c}},Bj=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,a;for(;r<n;)a=r+t,yield e.slice(r,a),r=a},Sj=async function*(e,t){for await(const n of wj(e))yield*Bj(n,t)},wj=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Nk=(e,t,n,r)=>{const a=Sj(e,t);let i=0,o,l=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:I}=await a.next();if(u){l(),c.close();return}let d=I.byteLength;if(n){let m=i+=d;n(m)}c.enqueue(new Uint8Array(I))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},RA=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",LN=RA&&typeof ReadableStream=="function",Wj=RA&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),zN=(e,...t)=>{try{return!!e(...t)}catch{return!1}},kj=LN&&zN(()=>{let e=!1;const t=new Request(Sn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Hk=64*1024,BZ=LN&&zN(()=>ne.isReadableStream(new Response("").body)),_d={stream:BZ&&(e=>e.body)};RA&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!_d[t]&&(_d[t]=ne.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Ne(`Response type '${t}' is not supported`,Ne.ERR_NOT_SUPPORT,r)})})})(new Response);const Vj=async e=>{if(e==null)return 0;if(ne.isBlob(e))return e.size;if(ne.isSpecCompliantForm(e))return(await new Request(Sn.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ne.isArrayBufferView(e)||ne.isArrayBuffer(e))return e.byteLength;if(ne.isURLSearchParams(e)&&(e=e+""),ne.isString(e))return(await Wj(e)).byteLength},Rj=async(e,t)=>{const n=ne.toFiniteNumber(e.getContentLength());return n??Vj(t)},xj=RA&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:I,withCredentials:d="same-origin",fetchOptions:m}=jN(e);u=u?(u+"").toLowerCase():"text";let p=Gj([a,i&&i.toAbortSignal()],o),h;const b=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(c&&kj&&n!=="get"&&n!=="head"&&(y=await Rj(I,r))!==0){let B=new Request(t,{method:"POST",body:r,duplex:"half"}),V;if(ne.isFormData(r)&&(V=B.headers.get("content-type"))&&I.setContentType(V),B.body){const[W,X]=Xk(y,Qd(Jk(c)));r=Nk(B.body,Hk,W,X)}}ne.isString(d)||(d=d?"include":"omit");const v="credentials"in Request.prototype;h=new Request(t,{...m,signal:p,method:n.toUpperCase(),headers:I.normalize().toJSON(),body:r,duplex:"half",credentials:v?d:void 0});let G=await fetch(h);const S=BZ&&(u==="stream"||u==="response");if(BZ&&(l||S&&b)){const B={};["status","statusText","headers"].forEach(N=>{B[N]=G[N]});const V=ne.toFiniteNumber(G.headers.get("content-length")),[W,X]=l&&Xk(V,Qd(Jk(l),!0))||[];G=new Response(Nk(G.body,Hk,W,()=>{X&&X(),b&&b()}),B)}u=u||"text";let R=await _d[ne.findKey(_d,u)||"text"](G,e);return!S&&b&&b(),await new Promise((B,V)=>{DN(B,V,{data:R,headers:Tn.from(G.headers),status:G.status,statusText:G.statusText,config:e,request:h})})}catch(v){throw b&&b(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,e,h),{cause:v.cause||v}):Ne.from(v,v&&v.code,e,h)}}),SZ={http:UT,xhr:vj,fetch:xj};ne.forEach(SZ,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Fk=e=>`- ${e}`,Xj=e=>ne.isFunction(e)||e===null||e===!1,UN={getAdapter:e=>{e=ne.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let i=0;i<t;i++){n=e[i];let o;if(r=n,!Xj(n)&&(r=SZ[(o=String(n)).toLowerCase()],r===void 0))throw new Ne(`Unknown adapter '${o}'`);if(r)break;a[o||"#"+i]=r}if(!r){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(Fk).join(`
`):" "+Fk(i[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:SZ};function _h(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ul(null,e)}function Kk(e){return _h(e),e.headers=Tn.from(e.headers),e.data=Qh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),UN.getAdapter(e.adapter||Bu.adapter)(e).then(function(r){return _h(e),r.data=Qh.call(e,e.transformResponse,r),r.headers=Tn.from(r.headers),r},function(r){return MN(r)||(_h(e),r&&r.response&&(r.response.data=Qh.call(e,e.transformResponse,r.response),r.response.headers=Tn.from(r.response.headers))),Promise.reject(r)})}const PN="1.7.9",xA={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{xA[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Ek={};xA.transitional=function(t,n,r){function a(i,o){return"[Axios v"+PN+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,l)=>{if(t===!1)throw new Ne(a(o," has been removed"+(n?" in "+n:"")),Ne.ERR_DEPRECATED);return n&&!Ek[o]&&(Ek[o]=!0,console.warn(a(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};xA.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Jj(e,t,n){if(typeof e!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const i=r[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new Ne("option "+i+" must be "+c,Ne.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ne("Unknown option "+i,Ne.ERR_BAD_OPTION)}}const Fd={assertOptions:Jj,validators:xA},ua=Fd.validators;class Yo{constructor(t){this.defaults=t,this.interceptors={request:new Rk,response:new Rk}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=jo(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:i}=n;r!==void 0&&Fd.assertOptions(r,{silentJSONParsing:ua.transitional(ua.boolean),forcedJSONParsing:ua.transitional(ua.boolean),clarifyTimeoutError:ua.transitional(ua.boolean)},!1),a!=null&&(ne.isFunction(a)?n.paramsSerializer={serialize:a}:Fd.assertOptions(a,{encode:ua.function,serialize:ua.function},!0)),Fd.assertOptions(n,{baseUrl:ua.spelling("baseURL"),withXsrfToken:ua.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&ne.merge(i.common,i[n.method]);i&&ne.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),n.headers=Tn.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let I,d=0,m;if(!c){const h=[Kk.bind(this),void 0];for(h.unshift.apply(h,l),h.push.apply(h,u),m=h.length,I=Promise.resolve(n);d<m;)I=I.then(h[d++],h[d++]);return I}m=l.length;let p=n;for(d=0;d<m;){const h=l[d++],b=l[d++];try{p=h(p)}catch(y){b.call(this,y);break}}try{I=Kk.call(this,p)}catch(h){return Promise.reject(h)}for(d=0,m=u.length;d<m;)I=I.then(u[d++],u[d++]);return I}getUri(t){t=jo(this.defaults,t);const n=TN(t.baseURL,t.url);return FN(n,t.params,t.paramsSerializer)}}ne.forEach(["delete","get","head","options"],function(t){Yo.prototype[t]=function(n,r){return this.request(jo(r||{},{method:t,url:n,data:(r||{}).data}))}});ne.forEach(["post","put","patch"],function(t){function n(r){return function(i,o,l){return this.request(jo(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Yo.prototype[t]=n(),Yo.prototype[t+"Form"]=n(!0)});class ZG{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(a=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](a);r._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{r.subscribe(l),i=l}).then(a);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,l){r.reason||(r.reason=new Ul(i,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new ZG(function(a){t=a}),cancel:t}}}function Yj(e){return function(n){return e.apply(null,n)}}function Nj(e){return ne.isObject(e)&&e.isAxiosError===!0}const wZ={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(wZ).forEach(([e,t])=>{wZ[t]=e});function ON(e){const t=new Yo(e),n=SN(Yo.prototype.request,t);return ne.extend(n,Yo.prototype,t,{allOwnKeys:!0}),ne.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return ON(jo(e,a))},n}const Ie=ON(Bu);Ie.Axios=Yo;Ie.CanceledError=Ul;Ie.CancelToken=ZG;Ie.isCancel=MN;Ie.VERSION=PN;Ie.toFormData=VA;Ie.AxiosError=Ne;Ie.Cancel=Ie.CanceledError;Ie.all=function(t){return Promise.all(t)};Ie.spread=Yj;Ie.isAxiosError=Nj;Ie.mergeConfig=jo;Ie.AxiosHeaders=Tn;Ie.formToJSON=e=>EN(ne.isHTMLForm(e)?new FormData(e):e);Ie.getAdapter=UN.getAdapter;Ie.HttpStatusCode=wZ;Ie.default=Ie;const QN=k.createContext(null),Fi="http://localhost:3000",Hj=({children:e})=>{const[t,n]=k.useState(null),[r,a]=k.useState(!0),i=async()=>{var d;try{const m=localStorage.getItem("token");if(!m)return;const p=(t==null?void 0:t.role)==="admin"?"/api/admin/profile":"/api/user/profile",h=await Ie.get(`${Fi}${p}`,{headers:{Authorization:`Bearer ${m}`}});if(h.data.success){const b=h.data.data.profile||h.data.data;if(b.photo_profile){const y=b.photo_profile.split("/").pop();b.photo_profile=`${Fi}/uploads/profiles/${y}`}return b.role=(t==null?void 0:t.role)||b.role,localStorage.setItem("user",JSON.stringify(b)),n(b),h.data}}catch(m){throw console.error("Error refreshing profile:",m),((d=m.response)==null?void 0:d.data)||{message:"Profile refresh error"}}},o=async(d,m)=>{var p;try{const h=await Ie.post(`${Fi}/api/auth/login`,{email:d,password:m});if(h.data.success){const{token:b}=h.data;localStorage.setItem("token",b),Ie.defaults.headers.common.Authorization=`Bearer ${b}`;const y=h.data.user.role==="admin"?"/api/admin/profile":"/api/user/profile",v=await Ie.get(`${Fi}${y}`,{headers:{Authorization:`Bearer ${b}`}});if(v.data.success){const G={...v.data.data.profile||v.data.data,role:h.data.user.role};if(G.photo_profile){const S=G.photo_profile.split("/").pop();G.photo_profile=`${Fi}/uploads/profiles/${S}`}return n(G),localStorage.setItem("user",JSON.stringify(G)),{success:!0,user:G}}}throw new Error(h.data.message||"Login failed")}catch(h){throw console.error("Login error:",h),((p=h.response)==null?void 0:p.data)||{message:"Login error"}}},l=async d=>{var m;try{const p=localStorage.getItem("token");if(!p)throw new Error("Token not found");const h=(t==null?void 0:t.role)==="admin"?"/api/admin/profile":"/api/user/profile",b=await Ie.put(`${Fi}${h}`,d,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"multipart/form-data"}});if(b.data.success){const y={...b.data.data.profile||b.data.data,role:t.role};return y.photo_profile&&!y.photo_profile.startsWith("http")&&(y.photo_profile=`${Fi}/uploads/profiles/${y.photo_profile}`),n(y),localStorage.setItem("user",JSON.stringify(y)),b.data}throw new Error(b.data.message||"Update failed")}catch(p){throw console.error("Error updating profile:",p),((m=p.response)==null?void 0:m.data)||{message:"Update profile error"}}},c=async d=>{var m;try{const p=localStorage.getItem("token");if(!p)throw new Error("Token not found");const b=(t==null?void 0:t.role)==="admin"?"/api/admin/profile/password":"/api/user/profile/password";return(await Ie.put(`${Fi}${b}`,d,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}})).data}catch(p){throw((m=p.response)==null?void 0:m.data)||{message:"Update password error"}}},u=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),delete Ie.defaults.headers.common.Authorization,n(null)};k.useEffect(()=>{(async()=>{try{a(!0);const m=localStorage.getItem("token"),p=localStorage.getItem("user");if(m&&p){Ie.defaults.headers.common.Authorization=`Bearer ${m}`;const h=JSON.parse(p);n(h),await i()}}catch(m){console.error("Auth initialization error:",m),u()}finally{a(!1)}})()},[]),k.useEffect(()=>{const d=Ie.interceptors.response.use(m=>m,m=>{var p;return((p=m.response)==null?void 0:p.status)===401&&u(),Promise.reject(m)});return()=>{Ie.interceptors.response.eject(d)}},[]);const I={user:t,loading:r,login:o,logout:u,updateProfile:l,updatePassword:c,refreshProfile:i};return A.jsx(QN.Provider,{value:I,children:!r&&e})},ln=()=>{const e=k.useContext(QN);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Dr=({children:e,allowedRoles:t})=>{const{user:n,loading:r}=ln(),a=ea();return r?A.jsx("div",{children:"Loading..."}):n?t&&!t.includes(n.role)?n.role==="admin"?A.jsx(Cc,{to:"/dashboard",replace:!0}):n.role==="mahasiswa"?A.jsx(Cc,{to:"/dashboardUser",replace:!0}):A.jsx(Cc,{to:"/login",replace:!0}):e:A.jsx(Cc,{to:"/login",state:{from:a},replace:!0})};function vG(){return A.jsxs("div",{className:"justify-start gap-[14px] items-center flex px-5 py-5",children:[A.jsx("img",{className:"w-[75px] h-full relative",src:"images/sig.svg"}),A.jsx("img",{className:"w-[44px] h-full relative",src:"images/semenPadangLogo.svg"})]})}var _N={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Mk=H.createContext&&H.createContext(_N),Fj=["attr","size","title"];function Kj(e,t){if(e==null)return{};var n=Ej(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ej(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function qd(){return qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qd.apply(this,arguments)}function Dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(n),!0).forEach(function(r){Mj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mj(e,t,n){return t=Dj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dj(e){var t=Tj(e,"string");return typeof t=="symbol"?t:t+""}function Tj(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qN(e){return e&&e.map((t,n)=>H.createElement(t.tag,$d({key:n},t.attr),qN(t.child)))}function $N(e){return t=>H.createElement(jj,qd({attr:$d({},e.attr)},t),qN(e.child))}function jj(e){var t=n=>{var{attr:r,size:a,title:i}=e,o=Kj(e,Fj),l=a||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),H.createElement("svg",qd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:$d($d({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&H.createElement("title",null,i),e.children)};return Mk!==void 0?H.createElement(Mk.Consumer,null,n=>t(n)):t(_N)}function Lj(e){return $N({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},child:[]}]})(e)}function zj(e){return $N({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"16",r:"1"},child:[]},{tag:"rect",attr:{x:"3",y:"10",width:"18",height:"12",rx:"2"},child:[]},{tag:"path",attr:{d:"M7 10V7a5 5 0 0 1 10 0v3"},child:[]}]})(e)}const Uj=()=>{const e=Ya(),{login:t}=ln(),[n,r]=k.useState(!1),[a,i]=k.useState(""),[o,l]=k.useState({email:"",password:""}),c=I=>{l({...o,[I.target.name]:I.target.value}),a&&i("")},u=async I=>{I.preventDefault(),i("");try{r(!0),await t(o.email,o.password);const d=JSON.parse(localStorage.getItem("user"));d.role==="admin"?e("/dashboard"):d.role==="mahasiswa"&&e("/dashboardUser")}catch(d){i(d.message||"Terjadi kesalahan saat login")}finally{r(!1)}};return A.jsx("div",{className:"w-full max-w-md",children:A.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a&&A.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:a}),A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center",children:A.jsx(Lj,{className:"h-5 w-5 text-gray-400"})}),A.jsx("input",{type:"email",name:"email",placeholder:"Email",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-red-500",value:o.email,onChange:c,required:!0})]}),A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center",children:A.jsx(zj,{className:"h-5 w-5 text-gray-400"})}),A.jsx("input",{type:"password",name:"password",placeholder:"Password",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-red-500",value:o.password,onChange:c,required:!0})]}),A.jsxs("div",{className:"flex flex-col gap-4",children:[A.jsx("button",{type:"submit",disabled:n,className:"w-full bg-black text-white py-2 px-4 rounded-md hover:bg-gray-800 transition duration-300 disabled:opacity-50",children:n?"Masuk...":"Masuk"}),A.jsx(To,{to:"/scan",className:"w-full bg-white text-black border border-black py-2 px-4 rounded-md hover:bg-gray-100 transition duration-300 text-center",children:"Scan QR Code"})]}),A.jsx("div",{className:"text-center",children:A.jsx(To,{to:"/register",className:"text-red-500 hover:underline text-sm",children:"Belum punya akun? Daftar"})})]})})};function GG(){return A.jsx("div",{className:"absolute bottom-0 w-full h-1/2 bg-cover bg-center",children:A.jsx("img",{src:"images/bg.svg",alt:"Background",className:"w-full h-full object-cover"})})}function WZ(){return WZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WZ.apply(this,arguments)}var Pj={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(e){},onComplete:function(e){},preStringTyped:function(e,t){},onStringTyped:function(e,t){},onLastStringBackspaced:function(e){},onTypingPaused:function(e,t){},onTypingResumed:function(e,t){},onReset:function(e){},onStop:function(e,t){},onStart:function(e,t){},onDestroy:function(e){}},Oj=new(function(){function e(){}var t=e.prototype;return t.load=function(n,r,a){if(n.el=typeof a=="string"?document.querySelector(a):a,n.options=WZ({},Pj,r),n.isInput=n.el.tagName.toLowerCase()==="input",n.attr=n.options.attr,n.bindInputFocusEvents=n.options.bindInputFocusEvents,n.showCursor=!n.isInput&&n.options.showCursor,n.cursorChar=n.options.cursorChar,n.cursorBlinking=!0,n.elContent=n.attr?n.el.getAttribute(n.attr):n.el.textContent,n.contentType=n.options.contentType,n.typeSpeed=n.options.typeSpeed,n.startDelay=n.options.startDelay,n.backSpeed=n.options.backSpeed,n.smartBackspace=n.options.smartBackspace,n.backDelay=n.options.backDelay,n.fadeOut=n.options.fadeOut,n.fadeOutClass=n.options.fadeOutClass,n.fadeOutDelay=n.options.fadeOutDelay,n.isPaused=!1,n.strings=n.options.strings.map(function(u){return u.trim()}),n.stringsElement=typeof n.options.stringsElement=="string"?document.querySelector(n.options.stringsElement):n.options.stringsElement,n.stringsElement){n.strings=[],n.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var i=Array.prototype.slice.apply(n.stringsElement.children),o=i.length;if(o)for(var l=0;l<o;l+=1)n.strings.push(i[l].innerHTML.trim())}for(var c in n.strPos=0,n.currentElContent=this.getCurrentElContent(n),n.currentElContent&&n.currentElContent.length>0&&(n.strPos=n.currentElContent.length-1,n.strings.unshift(n.currentElContent)),n.sequence=[],n.strings)n.sequence[c]=c;n.arrayPos=0,n.stopNum=0,n.loop=n.options.loop,n.loopCount=n.options.loopCount,n.curLoop=0,n.shuffle=n.options.shuffle,n.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},n.typingComplete=!1,n.autoInsertCss=n.options.autoInsertCss,n.autoInsertCss&&(this.appendCursorAnimationCss(n),this.appendFadeOutAnimationCss(n))},t.getCurrentElContent=function(n){return n.attr?n.el.getAttribute(n.attr):n.isInput?n.el.value:n.contentType==="html"?n.el.innerHTML:n.el.textContent},t.appendCursorAnimationCss=function(n){var r="data-typed-js-cursor-css";if(n.showCursor&&!document.querySelector("["+r+"]")){var a=document.createElement("style");a.setAttribute(r,"true"),a.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(a)}},t.appendFadeOutAnimationCss=function(n){var r="data-typed-fadeout-js-css";if(n.fadeOut&&!document.querySelector("["+r+"]")){var a=document.createElement("style");a.setAttribute(r,"true"),a.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(a)}},e}()),Tk=new(function(){function e(){}var t=e.prototype;return t.typeHtmlChars=function(n,r,a){if(a.contentType!=="html")return r;var i=n.substring(r).charAt(0);if(i==="<"||i==="&"){var o;for(o=i==="<"?">":";";n.substring(r+1).charAt(0)!==o&&!(1+ ++r>n.length););r++}return r},t.backSpaceHtmlChars=function(n,r,a){if(a.contentType!=="html")return r;var i=n.substring(r).charAt(0);if(i===">"||i===";"){var o;for(o=i===">"?"<":"&";n.substring(r-1).charAt(0)!==o&&!(--r<0););r--}return r},e}()),Qj=function(){function e(n,r){Oj.load(this,r,n),this.begin()}var t=e.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(n){n===void 0&&(n=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,n&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var n=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){n.strPos===0?n.typewrite(n.strings[n.sequence[n.arrayPos]],n.strPos):n.backspace(n.strings[n.sequence[n.arrayPos]],n.strPos)},this.startDelay)},t.typewrite=function(n,r){var a=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var i=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){r=Tk.typeHtmlChars(n,r,a);var l=0,c=n.substring(r);if(c.charAt(0)==="^"&&/^\^\d+/.test(c)){var u=1;u+=(c=/\d+/.exec(c)[0]).length,l=parseInt(c),a.temporaryPause=!0,a.options.onTypingPaused(a.arrayPos,a),n=n.substring(0,r)+n.substring(r+u),a.toggleBlinking(!0)}if(c.charAt(0)==="`"){for(;n.substring(r+o).charAt(0)!=="`"&&(o++,!(r+o>n.length)););var I=n.substring(0,r),d=n.substring(I.length+1,r+o),m=n.substring(r+o+1);n=I+d+m,o--}a.timeout=setTimeout(function(){a.toggleBlinking(!1),r>=n.length?a.doneTyping(n,r):a.keepTyping(n,r,o),a.temporaryPause&&(a.temporaryPause=!1,a.options.onTypingResumed(a.arrayPos,a))},l)},i):this.setPauseStatus(n,r,!0)},t.keepTyping=function(n,r,a){r===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var i=n.substring(0,r+=a);this.replaceText(i),this.typewrite(n,r)},t.doneTyping=function(n,r){var a=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){a.backspace(n,r)},this.backDelay))},t.backspace=function(n,r){var a=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var i=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){r=Tk.backSpaceHtmlChars(n,r,a);var o=n.substring(0,r);if(a.replaceText(o),a.smartBackspace){var l=a.strings[a.arrayPos+1];a.stopNum=l&&o===l.substring(0,r)?r:0}r>a.stopNum?(r--,a.backspace(n,r)):r<=a.stopNum&&(a.arrayPos++,a.arrayPos===a.strings.length?(a.arrayPos=0,a.options.onLastStringBackspaced(),a.shuffleStringsIfNeeded(),a.begin()):a.typewrite(a.strings[a.sequence[a.arrayPos]],r))},i)}else this.setPauseStatus(n,r,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(n,r,a){this.pause.typewrite=a,this.pause.curString=n,this.pause.curStrPos=r},t.toggleBlinking=function(n){this.cursor&&(this.pause.status||this.cursorBlinking!==n&&(this.cursorBlinking=n,n?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(n){return Math.round(Math.random()*n/2)+n},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},t.initFadeOut=function(){var n=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){n.arrayPos++,n.replaceText(""),n.strings.length>n.arrayPos?n.typewrite(n.strings[n.sequence[n.arrayPos]],0):(n.typewrite(n.strings[0],0),n.arrayPos=0)},this.fadeOutDelay)},t.replaceText=function(n){this.attr?this.el.setAttribute(this.attr,n):this.isInput?this.el.value=n:this.contentType==="html"?this.el.innerHTML=n:this.el.textContent=n},t.bindFocusEvents=function(){var n=this;this.isInput&&(this.el.addEventListener("focus",function(r){n.stop()}),this.el.addEventListener("blur",function(r){n.el.value&&n.el.value.length!==0||n.start()}))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},e}();const _j=k.memo(({style:e,className:t,typedRef:n,parseRef:r,stopped:a,children:i,startWhenVisible:o,...l})=>{const c=k.useRef(null),u=k.useMemo(()=>{var d;return[...Object.values(l).filter(m=>typeof m=="boolean"||typeof m=="number"||typeof m=="string"),(d=l.strings)==null?void 0:d.join(",")]},[l]);k.useEffect(()=>{const d=r&&r(c)||c.current,m=new Qj(d,{...l});if((a||o)&&(m==null||m.stop()),o){const p=new IntersectionObserver(([h])=>{h.isIntersecting&&(m==null||m.start(),p.disconnect())});p.observe(d)}return n&&m&&n(m),()=>{m.destroy()}},u);const I=i?H.cloneElement(i,{ref:c}):H.createElement("span",{style:e,ref:c});return H.createElement("span",{style:e,className:t,"data-testid":"react-typed"},I)});function eH(){return A.jsx(_j,{className:"hover:animate-pulse text-5xl font-bold text-red-500 mb-8",strings:["SISTEM ABSENSI MAGANG","SEMEN PADANG"],typeSpeed:100,backSpeed:100,loop:!0})}function qj(){return A.jsxs("div",{className:"h-screen bg-white relative overflow-hidden",children:[A.jsx(vG,{}),A.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center px-4",children:[A.jsx(eH,{}),A.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[A.jsx("h2",{className:"text-2xl text-red-500 font-bold  text-center mb-8",children:"Selamat datang"}),A.jsx(Uj,{})]})]}),A.jsx(GG,{})]})}function $j(){return A.jsx(qj,{})}/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tH=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},c)=>k.createElement("svg",{ref:c,...tL,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:tH("lucide",a),...l},[...o.map(([u,I])=>k.createElement(u,I)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=(e,t)=>{const n=k.forwardRef(({className:r,...a},i)=>k.createElement(nL,{ref:i,iconNode:t,className:tH(`lucide-${eL(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],nH=rt("AlignJustify",rL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],iL=rt("ArrowUpDown",aL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],gL=rt("BookOpen",oL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],sL=rt("CalendarClock",lL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Lo=rt("Calendar",cL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],rH=rt("Camera",uL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],eC=rt("Check",IL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],aH=rt("ChevronDown",dL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],AL=rt("ChevronLeft",CL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fL=rt("ChevronRight",mL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rc=rt("CircleAlert",hL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],BG=rt("CircleCheckBig",pL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],tC=rt("CircleUser",bL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ZL=rt("CircleX",yL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ol=rt("Clock",vL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],gl=rt("Download",GL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],SL=rt("FileCheck",BL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],iH=rt("FileText",wL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],kL=rt("File",WL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m15 13-3 3-3-3",key:"6j2sf0"}]],RL=rt("FolderDown",VL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ll=rt("LoaderCircle",xL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],oH=rt("LogOut",XL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],YL=rt("MapPin",JL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],gH=rt("Pen",NL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],FL=rt("Plus",HL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],SG=rt("Search",KL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ML=rt("Trash2",EL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TL=rt("TriangleAlert",DL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],LL=rt("Upload",jL);/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ro=rt("X",zL);/*!
* sweetalert2 v11.15.10
* Released under the MIT License.
*/function lH(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function UL(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jk(e,t){return e.get(lH(e,t))}function PL(e,t,n){UL(e,t),t.set(e,n)}function OL(e,t,n){return e.set(lH(e,t),n),n}const QL=100,We={},_L=()=>{We.previousActiveElement instanceof HTMLElement?(We.previousActiveElement.focus(),We.previousActiveElement=null):document.body&&document.body.focus()},qL=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;We.restoreFocusTimeout=setTimeout(()=>{_L(),t()},QL),window.scrollTo(n,r)}),sH="swal2-",$L=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],te=$L.reduce((e,t)=>(e[t]=sH+t,e),{}),ez=["success","warning","info","question","error"],nC=ez.reduce((e,t)=>(e[t]=sH+t,e),{}),cH="SweetAlert2:",wG=e=>e.charAt(0).toUpperCase()+e.slice(1),zn=e=>{console.warn(`${cH} ${typeof e=="object"?e.join(" "):e}`)},tg=e=>{console.error(`${cH} ${e}`)},Lk=[],tz=e=>{Lk.includes(e)||(Lk.push(e),zn(e))},uH=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;tz(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},XA=e=>typeof e=="function"?e():e,WG=e=>e&&typeof e.toPromise=="function",Su=e=>WG(e)?e.toPromise():Promise.resolve(e),kG=e=>e&&Promise.resolve(e)===e,Un=()=>document.body.querySelector(`.${te.container}`),wu=e=>{const t=Un();return t?t.querySelector(e):null},ur=e=>wu(`.${e}`),Oe=()=>ur(te.popup),Pl=()=>ur(te.icon),nz=()=>ur(te["icon-content"]),IH=()=>ur(te.title),VG=()=>ur(te["html-container"]),dH=()=>ur(te.image),RG=()=>ur(te["progress-steps"]),JA=()=>ur(te["validation-message"]),Ra=()=>wu(`.${te.actions} .${te.confirm}`),Ol=()=>wu(`.${te.actions} .${te.cancel}`),ng=()=>wu(`.${te.actions} .${te.deny}`),rz=()=>ur(te["input-label"]),Ql=()=>wu(`.${te.loader}`),Wu=()=>ur(te.actions),CH=()=>ur(te.footer),YA=()=>ur(te["timer-progress-bar"]),xG=()=>ur(te.close),az=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,XG=()=>{const e=Oe();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((i,o)=>{const l=parseInt(i.getAttribute("tabindex")||"0"),c=parseInt(o.getAttribute("tabindex")||"0");return l>c?1:l<c?-1:0}),r=e.querySelectorAll(az),a=Array.from(r).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(a))].filter(i=>jn(i))},JG=()=>ei(document.body,te.shown)&&!ei(document.body,te["toast-shown"])&&!ei(document.body,te["no-backdrop"]),NA=()=>{const e=Oe();return e?ei(e,te.toast):!1},iz=()=>{const e=Oe();return e?e.hasAttribute("data-loading"):!1},Ir=(e,t)=>{if(e.textContent="",t){const r=new DOMParser().parseFromString(t,"text/html"),a=r.querySelector("head");a&&Array.from(a.childNodes).forEach(o=>{e.appendChild(o)});const i=r.querySelector("body");i&&Array.from(i.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?e.appendChild(o.cloneNode(!0)):e.appendChild(o)})}},ei=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},oz=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(te).includes(n)&&!Object.values(nC).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},sr=(e,t,n)=>{if(oz(e,t),!t.customClass)return;const r=t.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){zn(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}Le(e,r)}},HA=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${te.popup} > .${te[t]}`);case"checkbox":return e.querySelector(`.${te.popup} > .${te.checkbox} input`);case"radio":return e.querySelector(`.${te.popup} > .${te.radio} input:checked`)||e.querySelector(`.${te.popup} > .${te.radio} input:first-child`);case"range":return e.querySelector(`.${te.popup} > .${te.range} input`);default:return e.querySelector(`.${te.popup} > .${te.input}`)}},AH=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},mH=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(r=>{Array.isArray(e)?e.forEach(a=>{n?a.classList.add(r):a.classList.remove(r)}):n?e.classList.add(r):e.classList.remove(r)}))},Le=(e,t)=>{mH(e,t,!0)},Wr=(e,t)=>{mH(e,t,!1)},ji=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const a=n[r];if(a instanceof HTMLElement&&ei(a,t))return a}},No=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},gn=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},wn=e=>{e&&(e.style.display="none")},YG=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{ku(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},zk=(e,t,n,r)=>{const a=e.querySelector(t);a&&a.style.setProperty(n,r)},ku=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?gn(e,n):wn(e)},jn=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),gz=()=>!jn(Ra())&&!jn(ng())&&!jn(Ol()),Uk=e=>e.scrollHeight>e.clientHeight,fH=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},NG=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=YA();n&&jn(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},lz=()=>{const e=YA();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),r=t/n*100;e.style.width=`${r}%`},sz=()=>typeof window>"u"||typeof document>"u",cz=`
 <div aria-labelledby="${te.title}" aria-describedby="${te["html-container"]}" class="${te.popup}" tabindex="-1">
   <button type="button" class="${te.close}"></button>
   <ul class="${te["progress-steps"]}"></ul>
   <div class="${te.icon}"></div>
   <img class="${te.image}" />
   <h2 class="${te.title}" id="${te.title}"></h2>
   <div class="${te["html-container"]}" id="${te["html-container"]}"></div>
   <input class="${te.input}" id="${te.input}" />
   <input type="file" class="${te.file}" />
   <div class="${te.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${te.select}" id="${te.select}"></select>
   <div class="${te.radio}"></div>
   <label class="${te.checkbox}">
     <input type="checkbox" id="${te.checkbox}" />
     <span class="${te.label}"></span>
   </label>
   <textarea class="${te.textarea}" id="${te.textarea}"></textarea>
   <div class="${te["validation-message"]}" id="${te["validation-message"]}"></div>
   <div class="${te.actions}">
     <div class="${te.loader}"></div>
     <button type="button" class="${te.confirm}"></button>
     <button type="button" class="${te.deny}"></button>
     <button type="button" class="${te.cancel}"></button>
   </div>
   <div class="${te.footer}"></div>
   <div class="${te["timer-progress-bar-container"]}">
     <div class="${te["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),uz=()=>{const e=Un();return e?(e.remove(),Wr([document.documentElement,document.body],[te["no-backdrop"],te["toast-shown"],te["has-column"]]),!0):!1},vo=()=>{We.currentInstance.resetValidationMessage()},Iz=()=>{const e=Oe(),t=ji(e,te.input),n=ji(e,te.file),r=e.querySelector(`.${te.range} input`),a=e.querySelector(`.${te.range} output`),i=ji(e,te.select),o=e.querySelector(`.${te.checkbox} input`),l=ji(e,te.textarea);t.oninput=vo,n.onchange=vo,i.onchange=vo,o.onchange=vo,l.oninput=vo,r.oninput=()=>{vo(),a.value=r.value},r.onchange=()=>{vo(),a.value=r.value}},dz=e=>typeof e=="string"?document.querySelector(e):e,Cz=e=>{const t=Oe();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},Az=e=>{window.getComputedStyle(e).direction==="rtl"&&Le(Un(),te.rtl)},mz=e=>{const t=uz();if(sz()){tg("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=te.container,t&&Le(n,te["no-transition"]),Ir(n,cz);const r=dz(e.target);r.appendChild(n),Cz(e),Az(r),Iz()},HG=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?fz(e,t):e&&Ir(t,e)},fz=(e,t)=>{e.jquery?hz(t,e):Ir(t,e.toString())},hz=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},pz=(e,t)=>{const n=Wu(),r=Ql();!n||!r||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?wn(n):gn(n),sr(n,t,"actions"),bz(n,r,t),Ir(r,t.loaderHtml||""),sr(r,t,"loader"))};function bz(e,t,n){const r=Ra(),a=ng(),i=Ol();!r||!a||!i||(qh(r,"confirm",n),qh(a,"deny",n),qh(i,"cancel",n),yz(r,a,i,n),n.reverseButtons&&(n.toast?(e.insertBefore(i,r),e.insertBefore(a,r)):(e.insertBefore(i,t),e.insertBefore(a,t),e.insertBefore(r,t))))}function yz(e,t,n,r){if(!r.buttonsStyling){Wr([e,t,n],te.styled);return}Le([e,t,n],te.styled),r.confirmButtonColor&&(e.style.backgroundColor=r.confirmButtonColor,Le(e,te["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,Le(t,te["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,Le(n,te["default-outline"]))}function qh(e,t,n){const r=wG(t);ku(e,n[`show${r}Button`],"inline-block"),Ir(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=te[t],sr(e,n,`${t}Button`)}const Zz=(e,t)=>{const n=xG();n&&(Ir(n,t.closeButtonHtml||""),sr(n,t,"closeButton"),ku(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},vz=(e,t)=>{const n=Un();n&&(Gz(n,t.backdrop),Bz(n,t.position),Sz(n,t.grow),sr(n,t,"container"))};function Gz(e,t){typeof t=="string"?e.style.background=t:t||Le([document.documentElement,document.body],te["no-backdrop"])}function Bz(e,t){t&&(t in te?Le(e,te[t]):(zn('The "position" parameter is not valid, defaulting to "center"'),Le(e,te.center)))}function Sz(e,t){t&&Le(e,te[`grow-${t}`])}var pt={innerParams:new WeakMap,domCache:new WeakMap};const wz=["input","file","range","select","radio","checkbox","textarea"],Wz=(e,t)=>{const n=Oe();if(!n)return;const r=pt.innerParams.get(e),a=!r||t.input!==r.input;wz.forEach(i=>{const o=ji(n,te[i]);o&&(Rz(i,t.inputAttributes),o.className=te[i],a&&wn(o))}),t.input&&(a&&kz(t),xz(t))},kz=e=>{if(!e.input)return;if(!Et[e.input]){tg(`Unexpected type of input! Expected ${Object.keys(Et).join(" | ")}, got "${e.input}"`);return}const t=hH(e.input);if(!t)return;const n=Et[e.input](t,e);gn(t),e.inputAutoFocus&&setTimeout(()=>{AH(n)})},Vz=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},Rz=(e,t)=>{const n=Oe();if(!n)return;const r=HA(n,e);if(r){Vz(r);for(const a in t)r.setAttribute(a,t[a])}},xz=e=>{if(!e.input)return;const t=hH(e.input);t&&sr(t,e,"input")},FG=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Vu=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),a=te["input-label"];r.setAttribute("for",e.id),r.className=a,typeof n.customClass=="object"&&Le(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},hH=e=>{const t=Oe();if(t)return ji(t,te[e]||te.input)},rC=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:kG(t)||zn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Et={};Et.text=Et.email=Et.password=Et.number=Et.tel=Et.url=Et.search=Et.date=Et["datetime-local"]=Et.time=Et.week=Et.month=(e,t)=>(rC(e,t.inputValue),Vu(e,e,t),FG(e,t),e.type=t.input,e);Et.file=(e,t)=>(Vu(e,e,t),FG(e,t),e);Et.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return rC(n,t.inputValue),n.type=t.input,rC(r,t.inputValue),Vu(n,e,t),e};Et.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");Ir(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Vu(e,e,t),e};Et.radio=e=>(e.textContent="",e);Et.checkbox=(e,t)=>{const n=HA(Oe(),"checkbox");n.value="1",n.checked=!!t.inputValue;const r=e.querySelector("span");return Ir(r,t.inputPlaceholder||t.inputLabel),n};Et.textarea=(e,t)=>{rC(e,t.inputValue),FG(e,t),Vu(e,e,t);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(Oe()).width),a=()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+n(e);i>r?Oe().style.width=`${i}px`:No(Oe(),"width",t.width)};new MutationObserver(a).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const Xz=(e,t)=>{const n=VG();n&&(YG(n),sr(n,t,"htmlContainer"),t.html?(HG(t.html,n),gn(n,"block")):t.text?(n.textContent=t.text,gn(n,"block")):wn(n),Wz(e,t))},Jz=(e,t)=>{const n=CH();n&&(YG(n),ku(n,t.footer,"block"),t.footer&&HG(t.footer,n),sr(n,t,"footer"))},Yz=(e,t)=>{const n=pt.innerParams.get(e),r=Pl();if(r){if(n&&t.icon===n.icon){Ok(r,t),Pk(r,t);return}if(!t.icon&&!t.iconHtml){wn(r);return}if(t.icon&&Object.keys(nC).indexOf(t.icon)===-1){tg(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),wn(r);return}gn(r),Ok(r,t),Pk(r,t),Le(r,t.showClass&&t.showClass.icon)}},Pk=(e,t)=>{for(const[n,r]of Object.entries(nC))t.icon!==n&&Wr(e,r);Le(e,t.icon&&nC[t.icon]),Kz(e,t),Nz(),sr(e,t,"icon")},Nz=()=>{const e=Oe();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},Hz=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Fz=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Ok=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=Qk(t.iconHtml):t.icon==="success"?(r=Hz,n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?r=Fz:t.icon&&(r=Qk({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&Ir(e,r)},Kz=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])zk(e,n,"background-color",t.iconColor);zk(e,".swal2-success-ring","border-color",t.iconColor)}},Qk=e=>`<div class="${te["icon-content"]}">${e}</div>`,Ez=(e,t)=>{const n=dH();if(n){if(!t.imageUrl){wn(n);return}gn(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),No(n,"width",t.imageWidth),No(n,"height",t.imageHeight),n.className=te.image,sr(n,t,"image")}};let KG=!1,pH=0,bH=0,yH=0,ZH=0;const Mz=e=>{e.addEventListener("mousedown",aC),document.body.addEventListener("mousemove",iC),e.addEventListener("mouseup",oC),e.addEventListener("touchstart",aC),document.body.addEventListener("touchmove",iC),e.addEventListener("touchend",oC)},Dz=e=>{e.removeEventListener("mousedown",aC),document.body.removeEventListener("mousemove",iC),e.removeEventListener("mouseup",oC),e.removeEventListener("touchstart",aC),document.body.removeEventListener("touchmove",iC),e.removeEventListener("touchend",oC)},aC=e=>{const t=Oe();if(e.target===t||Pl().contains(e.target)){KG=!0;const n=vH(e);pH=n.clientX,bH=n.clientY,yH=parseInt(t.style.insetInlineStart)||0,ZH=parseInt(t.style.insetBlockStart)||0,Le(t,"swal2-dragging")}},iC=e=>{const t=Oe();if(KG){let{clientX:n,clientY:r}=vH(e);t.style.insetInlineStart=`${yH+(n-pH)}px`,t.style.insetBlockStart=`${ZH+(r-bH)}px`}},oC=()=>{const e=Oe();KG=!1,Wr(e,"swal2-dragging")},vH=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},Tz=(e,t)=>{const n=Un(),r=Oe();if(!(!n||!r)){if(t.toast){No(n,"width",t.width),r.style.width="100%";const a=Ql();a&&r.insertBefore(a,Pl())}else No(r,"width",t.width);No(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),wn(JA()),jz(r,t),t.draggable&&!t.toast?(Le(r,te.draggable),Mz(r)):(Wr(r,te.draggable),Dz(r))}},jz=(e,t)=>{const n=t.showClass||{};e.className=`${te.popup} ${jn(e)?n.popup:""}`,t.toast?(Le([document.documentElement,document.body],te["toast-shown"]),Le(e,te.toast)):Le(e,te.modal),sr(e,t,"popup"),typeof t.customClass=="string"&&Le(e,t.customClass),t.icon&&Le(e,te[`icon-${t.icon}`])},Lz=(e,t)=>{const n=RG();if(!n)return;const{progressSteps:r,currentProgressStep:a}=t;if(!r||r.length===0||a===void 0){wn(n);return}gn(n),n.textContent="",a>=r.length&&zn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((i,o)=>{const l=zz(i);if(n.appendChild(l),o===a&&Le(l,te["active-progress-step"]),o!==r.length-1){const c=Uz(t);n.appendChild(c)}})},zz=e=>{const t=document.createElement("li");return Le(t,te["progress-step"]),Ir(t,e),t},Uz=e=>{const t=document.createElement("li");return Le(t,te["progress-step-line"]),e.progressStepsDistance&&No(t,"width",e.progressStepsDistance),t},Pz=(e,t)=>{const n=IH();n&&(YG(n),ku(n,t.title||t.titleText,"block"),t.title&&HG(t.title,n),t.titleText&&(n.innerText=t.titleText),sr(n,t,"title"))},GH=(e,t)=>{Tz(e,t),vz(e,t),Lz(e,t),Yz(e,t),Ez(e,t),Pz(e,t),Zz(e,t),Xz(e,t),pz(e,t),Jz(e,t);const n=Oe();typeof t.didRender=="function"&&n&&t.didRender(n),We.eventEmitter.emit("didRender",n)},Oz=()=>jn(Oe()),BH=()=>{var e;return(e=Ra())===null||e===void 0?void 0:e.click()},Qz=()=>{var e;return(e=ng())===null||e===void 0?void 0:e.click()},_z=()=>{var e;return(e=Ol())===null||e===void 0?void 0:e.click()},_l=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),SH=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},qz=(e,t,n)=>{SH(e),t.toast||(e.keydownHandler=r=>eU(t,r,n),e.keydownTarget=t.keydownListenerCapture?window:Oe(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},kZ=(e,t)=>{var n;const r=XG();if(r.length){e=e+t,e===r.length?e=0:e===-1&&(e=r.length-1),r[e].focus();return}(n=Oe())===null||n===void 0||n.focus()},wH=["ArrowRight","ArrowDown"],$z=["ArrowLeft","ArrowUp"],eU=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?tU(t,e):t.key==="Tab"?nU(t):[...wH,...$z].includes(t.key)?rU(t.key):t.key==="Escape"&&aU(t,e,n)))},tU=(e,t)=>{if(!XA(t.allowEnterKey))return;const n=HA(Oe(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;BH(),e.preventDefault()}},nU=e=>{const t=e.target,n=XG();let r=-1;for(let a=0;a<n.length;a++)if(t===n[a]){r=a;break}e.shiftKey?kZ(r,-1):kZ(r,1),e.stopPropagation(),e.preventDefault()},rU=e=>{const t=Wu(),n=Ra(),r=ng(),a=Ol();if(!t||!n||!r||!a)return;const i=[n,r,a];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const o=wH.includes(e)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let c=0;c<t.children.length;c++){if(l=l[o],!l)return;if(l instanceof HTMLButtonElement&&jn(l))break}l instanceof HTMLButtonElement&&l.focus()}},aU=(e,t,n)=>{XA(t.allowEscapeKey)&&(e.preventDefault(),n(_l.esc))};var sl={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const iU=()=>{const e=Un();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},WH=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},kH=typeof window<"u"&&!!window.GestureEvent,oU=()=>{if(kH&&!ei(document.body,te.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,Le(document.body,te.iosfix),gU()}},gU=()=>{const e=Un();if(!e)return;let t;e.ontouchstart=n=>{t=lU(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},lU=e=>{const t=e.target,n=Un(),r=VG();return!n||!r||sU(e)||cU(e)?!1:t===n||!Uk(n)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Uk(r)&&r.contains(t))},sU=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",cU=e=>e.touches&&e.touches.length>1,uU=()=>{if(ei(document.body,te.iosfix)){const e=parseInt(document.body.style.top,10);Wr(document.body,te.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},IU=()=>{const e=document.createElement("div");e.className=te["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Og=null;const dU=e=>{Og===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(Og=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Og+IU()}px`)},CU=()=>{Og!==null&&(document.body.style.paddingRight=`${Og}px`,Og=null)};function VH(e,t,n,r){NA()?_k(e,r):(qL(n).then(()=>_k(e,r)),SH(We)),kH?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),JG()&&(CU(),uU(),WH()),AU()}function AU(){Wr([document.documentElement,document.body],[te.shown,te["height-auto"],te["no-backdrop"],te["toast-shown"]])}function Li(e){e=fU(e);const t=sl.swalPromiseResolve.get(this),n=mU(this);this.isAwaitingPromise?e.isDismissed||(Ru(this),t(e)):n&&t(e)}const mU=e=>{const t=Oe();if(!t)return!1;const n=pt.innerParams.get(e);if(!n||ei(t,n.hideClass.popup))return!1;Wr(t,n.showClass.popup),Le(t,n.hideClass.popup);const r=Un();return Wr(r,n.showClass.backdrop),Le(r,n.hideClass.backdrop),hU(e,t,n),!0};function RH(e){const t=sl.swalPromiseReject.get(this);Ru(this),t&&t(e)}const Ru=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,pt.innerParams.get(e)||e._destroy())},fU=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),hU=(e,t,n)=>{var r;const a=Un(),i=fH(t);typeof n.willClose=="function"&&n.willClose(t),(r=We.eventEmitter)===null||r===void 0||r.emit("willClose",t),i?pU(e,t,a,n.returnFocus,n.didClose):VH(e,a,n.returnFocus,n.didClose)},pU=(e,t,n,r,a)=>{We.swalCloseEventFinishedCallback=VH.bind(null,e,n,r,a);const i=function(o){if(o.target===t){var l;(l=We.swalCloseEventFinishedCallback)===null||l===void 0||l.call(We),delete We.swalCloseEventFinishedCallback,t.removeEventListener("animationend",i),t.removeEventListener("transitionend",i)}};t.addEventListener("animationend",i),t.addEventListener("transitionend",i)},_k=(e,t)=>{setTimeout(()=>{var n;typeof t=="function"&&t.bind(e.params)(),(n=We.eventEmitter)===null||n===void 0||n.emit("didClose"),e._destroy&&e._destroy()})},cl=e=>{let t=Oe();if(t||new Ye,t=Oe(),!t)return;const n=Ql();NA()?wn(Pl()):bU(t,e),gn(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},bU=(e,t)=>{const n=Wu(),r=Ql();!n||!r||(!t&&jn(Ra())&&(t=Ra()),gn(n),t&&(wn(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),Le([e,n],te.loading))},yU=(e,t)=>{t.input==="select"||t.input==="radio"?SU(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&(WG(t.inputValue)||kG(t.inputValue))&&(cl(Ra()),wU(e,t))},ZU=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return vU(n);case"radio":return GU(n);case"file":return BU(n);default:return t.inputAutoTrim?n.value.trim():n.value}},vU=e=>e.checked?1:0,GU=e=>e.checked?e.value:null,BU=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,SU=(e,t)=>{const n=Oe();if(!n)return;const r=a=>{t.input==="select"?WU(n,gC(a),t):t.input==="radio"&&kU(n,gC(a),t)};WG(t.inputOptions)||kG(t.inputOptions)?(cl(Ra()),Su(t.inputOptions).then(a=>{e.hideLoading(),r(a)})):typeof t.inputOptions=="object"?r(t.inputOptions):tg(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},wU=(e,t)=>{const n=e.getInput();n&&(wn(n),Su(t.inputValue).then(r=>{n.value=t.input==="number"?`${parseFloat(r)||0}`:`${r}`,gn(n),n.focus(),e.hideLoading()}).catch(r=>{tg(`Error in inputValue promise: ${r}`),n.value="",gn(n),n.focus(),e.hideLoading()}))};function WU(e,t,n){const r=ji(e,te.select);if(!r)return;const a=(i,o,l)=>{const c=document.createElement("option");c.value=l,Ir(c,o),c.selected=xH(l,n.inputValue),i.appendChild(c)};t.forEach(i=>{const o=i[0],l=i[1];if(Array.isArray(l)){const c=document.createElement("optgroup");c.label=o,c.disabled=!1,r.appendChild(c),l.forEach(u=>a(c,u[1],u[0]))}else a(r,l,o)}),r.focus()}function kU(e,t,n){const r=ji(e,te.radio);if(!r)return;t.forEach(i=>{const o=i[0],l=i[1],c=document.createElement("input"),u=document.createElement("label");c.type="radio",c.name=te.radio,c.value=o,xH(o,n.inputValue)&&(c.checked=!0);const I=document.createElement("span");Ir(I,l),I.className=te.label,u.appendChild(c),u.appendChild(I),r.appendChild(u)});const a=r.querySelectorAll("input");a.length&&a[0].focus()}const gC=e=>{const t=[];return e instanceof Map?e.forEach((n,r)=>{let a=n;typeof a=="object"&&(a=gC(a)),t.push([r,a])}):Object.keys(e).forEach(n=>{let r=e[n];typeof r=="object"&&(r=gC(r)),t.push([n,r])}),t},xH=(e,t)=>!!t&&t.toString()===e.toString(),VU=e=>{const t=pt.innerParams.get(e);e.disableButtons(),t.input?XH(e,"confirm"):MG(e,!0)},RU=e=>{const t=pt.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?XH(e,"deny"):EG(e,!1)},xU=(e,t)=>{e.disableButtons(),t(_l.cancel)},XH=(e,t)=>{const n=pt.innerParams.get(e);if(!n.input){tg(`The "input" parameter is needed to be set when using returnInputValueOn${wG(t)}`);return}const r=e.getInput(),a=ZU(e,n);n.inputValidator?XU(e,a,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):t==="deny"?EG(e,a):MG(e,a)},XU=(e,t,n)=>{const r=pt.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>Su(r.inputValidator(t,r.validationMessage))).then(i=>{e.enableButtons(),e.enableInput(),i?e.showValidationMessage(i):n==="deny"?EG(e,t):MG(e,t)})},EG=(e,t)=>{const n=pt.innerParams.get(e||void 0);n.showLoaderOnDeny&&cl(ng()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>Su(n.preDeny(t,n.validationMessage))).then(a=>{a===!1?(e.hideLoading(),Ru(e)):e.close({isDenied:!0,value:typeof a>"u"?t:a})}).catch(a=>JH(e||void 0,a))):e.close({isDenied:!0,value:t})},qk=(e,t)=>{e.close({isConfirmed:!0,value:t})},JH=(e,t)=>{e.rejectPromise(t)},MG=(e,t)=>{const n=pt.innerParams.get(e||void 0);n.showLoaderOnConfirm&&cl(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>Su(n.preConfirm(t,n.validationMessage))).then(a=>{jn(JA())||a===!1?(e.hideLoading(),Ru(e)):qk(e,typeof a>"u"?t:a)}).catch(a=>JH(e||void 0,a))):qk(e,t)};function lC(){const e=pt.innerParams.get(this);if(!e)return;const t=pt.domCache.get(this);wn(t.loader),NA()?e.icon&&gn(Pl()):JU(t),Wr([t.popup,t.actions],te.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const JU=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?gn(t[0],"inline-block"):gz()&&wn(e.actions)};function YH(){const e=pt.innerParams.get(this),t=pt.domCache.get(this);return t?HA(t.popup,e.input):null}function NH(e,t,n){const r=pt.domCache.get(e);t.forEach(a=>{r[a].disabled=n})}function HH(e,t){const n=Oe();if(!(!n||!e))if(e.type==="radio"){const r=n.querySelectorAll(`[name="${te.radio}"]`);for(let a=0;a<r.length;a++)r[a].disabled=t}else e.disabled=t}function FH(){NH(this,["confirmButton","denyButton","cancelButton"],!1)}function KH(){NH(this,["confirmButton","denyButton","cancelButton"],!0)}function EH(){HH(this.getInput(),!1)}function MH(){HH(this.getInput(),!0)}function DH(e){const t=pt.domCache.get(this),n=pt.innerParams.get(this);Ir(t.validationMessage,e),t.validationMessage.className=te["validation-message"],n.customClass&&n.customClass.validationMessage&&Le(t.validationMessage,n.customClass.validationMessage),gn(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",te["validation-message"]),AH(r),Le(r,te.inputerror))}function TH(){const e=pt.domCache.get(this);e.validationMessage&&wn(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Wr(t,te.inputerror))}const Qg={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},YU=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],NU={allowEnterKey:void 0},HU=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],jH=e=>Object.prototype.hasOwnProperty.call(Qg,e),LH=e=>YU.indexOf(e)!==-1,zH=e=>NU[e],FU=e=>{jH(e)||zn(`Unknown parameter "${e}"`)},KU=e=>{HU.includes(e)&&zn(`The parameter "${e}" is incompatible with toasts`)},EU=e=>{const t=zH(e);t&&uH(e,t)},MU=e=>{e.backdrop===!1&&e.allowOutsideClick&&zn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)FU(t),e.toast&&KU(t),EU(t)};function UH(e){const t=Oe(),n=pt.innerParams.get(this);if(!t||ei(t,n.hideClass.popup)){zn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const r=DU(e),a=Object.assign({},n,r);GH(this,a),pt.innerParams.set(this,a),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const DU=e=>{const t={};return Object.keys(e).forEach(n=>{LH(n)?t[n]=e[n]:zn(`Invalid parameter to update: ${n}`)}),t};function PH(){const e=pt.domCache.get(this),t=pt.innerParams.get(this);if(!t){OH(this);return}e.popup&&We.swalCloseEventFinishedCallback&&(We.swalCloseEventFinishedCallback(),delete We.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),We.eventEmitter.emit("didDestroy"),TU(this)}const TU=e=>{OH(e),delete e.params,delete We.keydownHandler,delete We.keydownTarget,delete We.currentInstance},OH=e=>{e.isAwaitingPromise?($h(pt,e),e.isAwaitingPromise=!0):($h(sl,e),$h(pt,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},$h=(e,t)=>{for(const n in e)e[n].delete(t)};var jU=Object.freeze({__proto__:null,_destroy:PH,close:Li,closeModal:Li,closePopup:Li,closeToast:Li,disableButtons:KH,disableInput:MH,disableLoading:lC,enableButtons:FH,enableInput:EH,getInput:YH,handleAwaitingPromise:Ru,hideLoading:lC,rejectPromise:RH,resetValidationMessage:TH,showValidationMessage:DH,update:UH});const LU=(e,t,n)=>{e.toast?zU(e,t,n):(PU(t),OU(t),QU(e,t,n))},zU=(e,t,n)=>{t.popup.onclick=()=>{e&&(UU(e)||e.timer||e.input)||n(_l.close)}},UU=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let sC=!1;const PU=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(sC=!0)}}},OU=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(sC=!0)}}},QU=(e,t,n)=>{t.container.onclick=r=>{if(sC){sC=!1;return}r.target===t.container&&XA(e.allowOutsideClick)&&n(_l.backdrop)}},_U=e=>typeof e=="object"&&e.jquery,$k=e=>e instanceof Element||_U(e),qU=e=>{const t={};return typeof e[0]=="object"&&!$k(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,r)=>{const a=e[r];typeof a=="string"||$k(a)?t[n]=a:a!==void 0&&tg(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof a}`)}),t};function $U(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)}function eP(e){class t extends this{_main(r,a){return super._main(r,Object.assign({},e,a))}}return t}const tP=()=>We.timeout&&We.timeout.getTimerLeft(),QH=()=>{if(We.timeout)return lz(),We.timeout.stop()},_H=()=>{if(We.timeout){const e=We.timeout.start();return NG(e),e}},nP=()=>{const e=We.timeout;return e&&(e.running?QH():_H())},rP=e=>{if(We.timeout){const t=We.timeout.increase(e);return NG(t,!0),t}},aP=()=>!!(We.timeout&&We.timeout.isRunning());let eV=!1;const VZ={};function iP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";VZ[e]=this,eV||(document.body.addEventListener("click",oP),eV=!0)}const oP=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in VZ){const r=t.getAttribute(n);if(r){VZ[n].fire({template:r});return}}};let gP=class{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const r=this._getHandlersByEventName(t);r.includes(n)||r.push(n)}once(t,n){var r=this;const a=function(){r.removeListener(t,a);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];n.apply(r,o)};this.on(t,a)}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this._getHandlersByEventName(t).forEach(i=>{try{i.apply(this,r)}catch(o){console.error(o)}})}removeListener(t,n){const r=this._getHandlersByEventName(t),a=r.indexOf(n);a>-1&&r.splice(a,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}};We.eventEmitter=new gP;const lP=(e,t)=>{We.eventEmitter.on(e,t)},sP=(e,t)=>{We.eventEmitter.once(e,t)},cP=(e,t)=>{if(!e){We.eventEmitter.reset();return}t?We.eventEmitter.removeListener(e,t):We.eventEmitter.removeAllListeners(e)};var uP=Object.freeze({__proto__:null,argsToParams:qU,bindClickHandler:iP,clickCancel:_z,clickConfirm:BH,clickDeny:Qz,enableLoading:cl,fire:$U,getActions:Wu,getCancelButton:Ol,getCloseButton:xG,getConfirmButton:Ra,getContainer:Un,getDenyButton:ng,getFocusableElements:XG,getFooter:CH,getHtmlContainer:VG,getIcon:Pl,getIconContent:nz,getImage:dH,getInputLabel:rz,getLoader:Ql,getPopup:Oe,getProgressSteps:RG,getTimerLeft:tP,getTimerProgressBar:YA,getTitle:IH,getValidationMessage:JA,increaseTimer:rP,isDeprecatedParameter:zH,isLoading:iz,isTimerRunning:aP,isUpdatableParameter:LH,isValidParameter:jH,isVisible:Oz,mixin:eP,off:cP,on:lP,once:sP,resumeTimer:_H,showLoading:cl,stopTimer:QH,toggleTimer:nP});class IP{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const qH=["swal-title","swal-html","swal-footer"],dP=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return yP(n),Object.assign(CP(n),AP(n),mP(n),fP(n),hP(n),pP(n),bP(n,qH))},CP=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(r=>{zo(r,["name","value"]);const a=r.getAttribute("name"),i=r.getAttribute("value");!a||!i||(typeof Qg[a]=="boolean"?t[a]=i!=="false":typeof Qg[a]=="object"?t[a]=JSON.parse(i):t[a]=i)}),t},AP=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(r=>{const a=r.getAttribute("name"),i=r.getAttribute("value");!a||!i||(t[a]=new Function(`return ${i}`)())}),t},mP=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(r=>{zo(r,["type","color","aria-label"]);const a=r.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(t[`${a}ButtonText`]=r.innerHTML,t[`show${wG(a)}Button`]=!0,r.hasAttribute("color")&&(t[`${a}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(t[`${a}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),t},fP=e=>{const t={},n=e.querySelector("swal-image");return n&&(zo(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},hP=e=>{const t={},n=e.querySelector("swal-icon");return n&&(zo(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},pP=e=>{const t={},n=e.querySelector("swal-input");n&&(zo(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach(a=>{zo(a,["value"]);const i=a.getAttribute("value");if(!i)return;const o=a.innerHTML;t.inputOptions[i]=o})),t},bP=(e,t)=>{const n={};for(const r in t){const a=t[r],i=e.querySelector(a);i&&(zo(i,[]),n[a.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},yP=e=>{const t=qH.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const r=n.tagName.toLowerCase();t.includes(r)||zn(`Unrecognized element <${r}>`)})},zo=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&zn([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},$H=10,ZP=e=>{const t=Un(),n=Oe();typeof e.willOpen=="function"&&e.willOpen(n),We.eventEmitter.emit("willOpen",n);const a=window.getComputedStyle(document.body).overflowY;BP(t,n,e),setTimeout(()=>{vP(t,n)},$H),JG()&&(GP(t,e.scrollbarPadding,a),iU()),!NA()&&!We.previousActiveElement&&(We.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),We.eventEmitter.emit("didOpen",n),Wr(t,te["no-transition"])},cC=e=>{const t=Oe();if(e.target!==t)return;const n=Un();t.removeEventListener("animationend",cC),t.removeEventListener("transitionend",cC),n.style.overflowY="auto"},vP=(e,t)=>{fH(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",cC),t.addEventListener("transitionend",cC)):e.style.overflowY="auto"},GP=(e,t,n)=>{oU(),t&&n!=="hidden"&&dU(n),setTimeout(()=>{e.scrollTop=0})},BP=(e,t,n)=>{Le(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),gn(t,"grid"),setTimeout(()=>{Le(t,n.showClass.popup),t.style.removeProperty("opacity")},$H)):gn(t,"grid"),Le([document.documentElement,document.body],te.shown),n.heightAuto&&n.backdrop&&!n.toast&&Le([document.documentElement,document.body],te["height-auto"])};var tV={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function SP(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=tV.email),e.input==="url"&&(e.inputValidator=tV.url))}function wP(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(zn('Target parameter is not valid, defaulting to "body"'),e.target="body")}function WP(e){SP(e),e.showLoaderOnConfirm&&!e.preConfirm&&zn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),wP(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),mz(e)}let da;var ld=new WeakMap;class jt{constructor(){if(PL(this,ld,void 0),typeof window>"u")return;da=this;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const a=Object.freeze(this.constructor.argsToParams(n));this.params=a,this.isAwaitingPromise=!1,OL(ld,this,this._main(da.params))}_main(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(MU(Object.assign({},n,t)),We.currentInstance){const i=sl.swalPromiseResolve.get(We.currentInstance),{isAwaitingPromise:o}=We.currentInstance;We.currentInstance._destroy(),o||i({isDismissed:!0}),JG()&&WH()}We.currentInstance=da;const r=VP(t,n);WP(r),Object.freeze(r),We.timeout&&(We.timeout.stop(),delete We.timeout),clearTimeout(We.restoreFocusTimeout);const a=RP(da);return GH(da,r),pt.innerParams.set(da,r),kP(da,a,r)}then(t){return jk(ld,this).then(t)}finally(t){return jk(ld,this).finally(t)}}const kP=(e,t,n)=>new Promise((r,a)=>{const i=o=>{e.close({isDismissed:!0,dismiss:o})};sl.swalPromiseResolve.set(e,r),sl.swalPromiseReject.set(e,a),t.confirmButton.onclick=()=>{VU(e)},t.denyButton.onclick=()=>{RU(e)},t.cancelButton.onclick=()=>{xU(e,i)},t.closeButton.onclick=()=>{i(_l.close)},LU(n,t,i),qz(We,n,i),yU(e,n),ZP(n),xP(We,n,i),XP(t,n),setTimeout(()=>{t.container.scrollTop=0})}),VP=(e,t)=>{const n=dP(e),r=Object.assign({},Qg,t,n,e);return r.showClass=Object.assign({},Qg.showClass,r.showClass),r.hideClass=Object.assign({},Qg.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},RP=e=>{const t={popup:Oe(),container:Un(),actions:Wu(),confirmButton:Ra(),denyButton:ng(),cancelButton:Ol(),loader:Ql(),closeButton:xG(),validationMessage:JA(),progressSteps:RG()};return pt.domCache.set(e,t),t},xP=(e,t,n)=>{const r=YA();wn(r),t.timer&&(e.timeout=new IP(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(gn(r),sr(r,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&NG(t.timer)})))},XP=(e,t)=>{if(!t.toast){if(!XA(t.allowEnterKey)){uH("allowEnterKey"),NP();return}JP(e)||YP(e,t)||kZ(-1,1)}},JP=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&jn(n))return n.focus(),!0;return!1},YP=(e,t)=>t.focusDeny&&jn(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&jn(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&jn(e.confirmButton)?(e.confirmButton.focus(),!0):!1,NP=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}jt.prototype.disableButtons=KH;jt.prototype.enableButtons=FH;jt.prototype.getInput=YH;jt.prototype.disableInput=MH;jt.prototype.enableInput=EH;jt.prototype.hideLoading=lC;jt.prototype.disableLoading=lC;jt.prototype.showValidationMessage=DH;jt.prototype.resetValidationMessage=TH;jt.prototype.close=Li;jt.prototype.closePopup=Li;jt.prototype.closeModal=Li;jt.prototype.closeToast=Li;jt.prototype.rejectPromise=RH;jt.prototype.update=UH;jt.prototype._destroy=PH;Object.assign(jt,uP);Object.keys(jU).forEach(e=>{jt[e]=function(){return da&&da[e]?da[e](...arguments):null}});jt.DismissReason=_l;jt.version="11.15.10";const Ye=jt;Ye.default=Ye;typeof document<"u"&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}}(document,'body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');function HP(e){const{children:t,variant:n="",onClick:r=()=>{},type:a="Button"}=e;return A.jsx("button",{type:a,className:`flex px-4 ${n} py-2 text-white justify-center rounded-md duration-500`,onClick:()=>r(),children:t})}function eF(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=eF(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ve(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=eF(e))&&(r&&(r+=" "),r+=t);return r}function me(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function gt(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Qr(e,t){const n=me(e);return isNaN(t)?gt(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function qr(e,t){const n=me(e);if(isNaN(t))return gt(e,NaN);if(!t)return n;const r=n.getDate(),a=gt(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const i=a.getDate();return r>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}function DG(e,t){const n=+me(e);return gt(e,n+t)}const tF=6048e5,FP=864e5,FA=6e4,KA=36e5,KP=1e3;function EP(e,t){return DG(e,t*KA)}let MP={};function rg(){return MP}function si(e,t){var l,c,u,I;const n=rg(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((I=(u=n.locale)==null?void 0:u.options)==null?void 0:I.weekStartsOn)??0,a=me(e),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function ul(e){return si(e,{weekStartsOn:1})}function nF(e){const t=me(e),n=t.getFullYear(),r=gt(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=ul(r),i=gt(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=ul(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Uo(e){const t=me(e);return t.setHours(0,0,0,0),t}function uC(e){const t=me(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Il(e,t){const n=Uo(e),r=Uo(t),a=+n-uC(n),i=+r-uC(r);return Math.round((a-i)/FP)}function DP(e){const t=nF(e),n=gt(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),ul(n)}function RZ(e,t){return DG(e,t*FA)}function TG(e,t){const n=t*3;return qr(e,n)}function TP(e,t){return DG(e,t*1e3)}function IC(e,t){const n=t*7;return Qr(e,n)}function ti(e,t){return qr(e,t*12)}function nV(e){let t;return e.forEach(function(n){const r=me(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function rV(e){let t;return e.forEach(n=>{const r=me(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function jP(e,t){const n=Uo(e),r=Uo(t);return+n==+r}function ni(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function dC(e){if(!ni(e)&&typeof e!="number")return!1;const t=me(e);return!isNaN(Number(t))}function CC(e,t){const n=me(e),r=me(t),a=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return a*12+i}function Ho(e){const t=me(e);return Math.trunc(t.getMonth()/3)+1}function AC(e,t){const n=me(e),r=me(t),a=n.getFullYear()-r.getFullYear(),i=Ho(n)-Ho(r);return a*4+i}function mC(e,t){const n=me(e),r=me(t);return n.getFullYear()-r.getFullYear()}function LP(e,t){const n=me(e),r=me(t),a=aV(n,r),i=Math.abs(Il(n,r));n.setDate(n.getDate()-a*i);const o=+(aV(n,r)===-a),l=a*(i-o);return l===0?0:l}function aV(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function rF(e){const t=me(e);return t.setHours(23,59,59,999),t}function aF(e){const t=me(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function xZ(e){const t=me(e),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}function iF(e){const t=me(e);return t.setDate(1),t.setHours(0,0,0,0),t}function oF(e){const t=me(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function EA(e){const t=me(e),n=gt(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function zP(e,t){var l,c;const n=rg(),r=n.weekStartsOn??((c=(l=n.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,a=me(e),i=a.getDay(),o=(i<r?-7:0)+6-(i-r);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}const UP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},PP=(e,t,n)=>{let r;const a=UP[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ep(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const OP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_P={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qP={date:ep({formats:OP,defaultWidth:"full"}),time:ep({formats:QP,defaultWidth:"full"}),dateTime:ep({formats:_P,defaultWidth:"full"})},$P={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},eO=(e,t,n,r)=>$P[e];function qs(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const tO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},aO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},iO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gO=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},lO={ordinalNumber:gO,era:qs({values:tO,defaultWidth:"wide"}),quarter:qs({values:nO,defaultWidth:"wide",argumentCallback:e=>e-1}),month:qs({values:rO,defaultWidth:"wide"}),day:qs({values:aO,defaultWidth:"wide"}),dayPeriod:qs({values:iO,defaultWidth:"wide",formattingValues:oO,defaultFormattingWidth:"wide"})};function $s(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?cO(l,d=>d.test(o)):sO(l,d=>d.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const I=t.slice(o.length);return{value:u,rest:I}}}function sO(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function cO(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function uO(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const IO=/^(\d+)(th|st|nd|rd)?/i,dO=/\d+/i,CO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},AO={any:[/^b/i,/^(a|c)/i]},mO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fO={any:[/1/i,/2/i,/3/i,/4/i]},hO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},bO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ZO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},GO={ordinalNumber:uO({matchPattern:IO,parsePattern:dO,valueCallback:e=>parseInt(e,10)}),era:$s({matchPatterns:CO,defaultMatchWidth:"wide",parsePatterns:AO,defaultParseWidth:"any"}),quarter:$s({matchPatterns:mO,defaultMatchWidth:"wide",parsePatterns:fO,defaultParseWidth:"any",valueCallback:e=>e+1}),month:$s({matchPatterns:hO,defaultMatchWidth:"wide",parsePatterns:pO,defaultParseWidth:"any"}),day:$s({matchPatterns:bO,defaultMatchWidth:"wide",parsePatterns:yO,defaultParseWidth:"any"}),dayPeriod:$s({matchPatterns:ZO,defaultMatchWidth:"any",parsePatterns:vO,defaultParseWidth:"any"})},gF={code:"en-US",formatDistance:PP,formatLong:qP,formatRelative:eO,localize:lO,match:GO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function BO(e){const t=me(e);return Il(t,EA(t))+1}function jG(e){const t=me(e),n=+ul(t)-+DP(t);return Math.round(n/tF)+1}function LG(e,t){var I,d,m,p;const n=me(e),r=n.getFullYear(),a=rg(),i=(t==null?void 0:t.firstWeekContainsDate)??((d=(I=t==null?void 0:t.locale)==null?void 0:I.options)==null?void 0:d.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(m=a.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=gt(e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=si(o,t),c=gt(e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=si(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function SO(e,t){var l,c,u,I;const n=rg(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((I=(u=n.locale)==null?void 0:u.options)==null?void 0:I.firstWeekContainsDate)??1,a=LG(e,t),i=gt(e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),si(i,t)}function lF(e,t){const n=me(e),r=+si(n,t)-+SO(n,t);return Math.round(r/tF)+1}function it(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ki={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return it(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):it(n+1,2)},d(e,t){return it(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return it(e.getHours()%12||12,t.length)},H(e,t){return it(e.getHours(),t.length)},m(e,t){return it(e.getMinutes(),t.length)},s(e,t){return it(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return it(a,t.length)}},Xg={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iV={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Ki.y(e,t)},Y:function(e,t,n,r){const a=LG(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return it(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):it(i,t.length)},R:function(e,t){const n=nF(e);return it(n,t.length)},u:function(e,t){const n=e.getFullYear();return it(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return it(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return it(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ki.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return it(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=lF(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):it(a,t.length)},I:function(e,t,n){const r=jG(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):it(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ki.d(e,t)},D:function(e,t,n){const r=BO(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):it(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return it(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return it(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return it(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Xg.noon:r===0?a=Xg.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Xg.evening:r>=12?a=Xg.afternoon:r>=4?a=Xg.morning:a=Xg.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ki.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ki.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):it(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):it(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ki.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ki.s(e,t)},S:function(e,t){return Ki.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return gV(r);case"XXXX":case"XX":return Bo(r);case"XXXXX":case"XXX":default:return Bo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return gV(r);case"xxxx":case"xx":return Bo(r);case"xxxxx":case"xxx":default:return Bo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+oV(r,":");case"OOOO":default:return"GMT"+Bo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+oV(r,":");case"zzzz":default:return"GMT"+Bo(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return it(r,t.length)},T:function(e,t,n){const r=e.getTime();return it(r,t.length)}};function oV(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+it(i,2)}function gV(e,t){return e%60===0?(e>0?"-":"+")+it(Math.abs(e)/60,2):Bo(e,t)}function Bo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=it(Math.trunc(r/60),2),i=it(r%60,2);return n+a+t+i}const lV=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},sF=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},wO=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return lV(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",lV(r,t)).replace("{{time}}",sF(a,t))},fC={p:sF,P:wO},WO=/^D+$/,kO=/^Y+$/,VO=["D","DD","YY","YYYY"];function cF(e){return WO.test(e)}function uF(e){return kO.test(e)}function XZ(e,t,n){const r=RO(e,t,n);if(console.warn(r),VO.includes(e))throw new RangeError(r)}function RO(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,XO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,JO=/^'([^]*?)'?$/,YO=/''/g,NO=/[a-zA-Z]/;function sV(e,t,n){var I,d,m,p,h,b,y,v;const r=rg(),a=(n==null?void 0:n.locale)??r.locale??gF,i=(n==null?void 0:n.firstWeekContainsDate)??((d=(I=n==null?void 0:n.locale)==null?void 0:I.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((b=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((v=(y=r.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,l=me(e);if(!dC(l))throw new RangeError("Invalid time value");let c=t.match(XO).map(G=>{const S=G[0];if(S==="p"||S==="P"){const R=fC[S];return R(G,a.formatLong)}return G}).join("").match(xO).map(G=>{if(G==="''")return{isToken:!1,value:"'"};const S=G[0];if(S==="'")return{isToken:!1,value:HO(G)};if(iV[S])return{isToken:!0,value:G};if(S.match(NO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:G}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(G=>{if(!G.isToken)return G.value;const S=G.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&uF(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&cF(S))&&XZ(S,t,String(e));const R=iV[S[0]];return R(l,S,a.localize,u)}).join("")}function HO(e){const t=e.match(JO);return t?t[1].replace(YO,"'"):e}function cV(e){return me(e).getDate()}function FO(e){return me(e).getDay()}function KO(e){const t=me(e),n=t.getFullYear(),r=t.getMonth(),a=gt(e,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function EO(){return Object.assign({},rg())}function Ba(e){return me(e).getHours()}function MO(e){let n=me(e).getDay();return n===0&&(n=7),n}function Sa(e){return me(e).getMinutes()}function xn(e){return me(e).getMonth()}function ri(e){return me(e).getSeconds()}function JZ(e){return me(e).getTime()}function Ke(e){return me(e).getFullYear()}function $i(e,t){const n=me(e),r=me(t);return n.getTime()>r.getTime()}function Po(e,t){const n=me(e),r=me(t);return+n<+r}function DO(e,t){const n=me(e),r=me(t);return+n==+r}function TO(e,t){const n=t instanceof Date?gt(t,0):new t(0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}const jO=10;class IF{constructor(){fe(this,"subPriority",0)}validate(t,n){return!0}}class LO extends IF{constructor(t,n,r,a,i){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=a,i&&(this.subPriority=i)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class zO extends IF{constructor(){super(...arguments);fe(this,"priority",jO);fe(this,"subPriority",-1)}set(n,r){return r.timestampIsSet?n:gt(n,TO(n,Date))}}class $e{run(t,n,r,a){const i=this.parse(t,n,r,a);return i?{setter:new LO(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,n,r){return!0}}class UO extends $e{constructor(){super(...arguments);fe(this,"priority",140);fe(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,a){switch(r){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"})||a.era(n,{width:"narrow"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})||a.era(n,{width:"abbreviated"})||a.era(n,{width:"narrow"})}}set(n,r,a){return r.era=a,n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}}const Dt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},pa={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Tt(e,t){return e&&{value:t(e.value),rest:e.rest}}function Vt(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function ba(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(a*KA+i*FA+o*KP),rest:t.slice(n[0].length)}}function dF(e){return Vt(Dt.anyDigitsSigned,e)}function Ht(e,t){switch(e){case 1:return Vt(Dt.singleDigit,t);case 2:return Vt(Dt.twoDigits,t);case 3:return Vt(Dt.threeDigits,t);case 4:return Vt(Dt.fourDigits,t);default:return Vt(new RegExp("^\\d{1,"+e+"}"),t)}}function hC(e,t){switch(e){case 1:return Vt(Dt.singleDigitSigned,t);case 2:return Vt(Dt.twoDigitsSigned,t);case 3:return Vt(Dt.threeDigitsSigned,t);case 4:return Vt(Dt.fourDigitsSigned,t);default:return Vt(new RegExp("^-?\\d{1,"+e+"}"),t)}}function zG(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function CF(e,t){const n=t>0,r=n?t:1-t;let a;if(r<=50)a=e||100;else{const i=r+50,o=Math.trunc(i/100)*100,l=e>=i%100;a=e+o-(l?100:0)}return n?a:1-a}function AF(e){return e%400===0||e%4===0&&e%100!==0}class PO extends $e{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,a){const i=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Tt(Ht(4,n),i);case"yo":return Tt(a.ordinalNumber(n,{unit:"year"}),i);default:return Tt(Ht(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,a){const i=n.getFullYear();if(a.isTwoDigitYear){const l=CF(a.year,i);return n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?a.year:1-a.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class OO extends $e{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,a){const i=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Tt(Ht(4,n),i);case"Yo":return Tt(a.ordinalNumber(n,{unit:"year"}),i);default:return Tt(Ht(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,a,i){const o=LG(n,i);if(a.isTwoDigitYear){const c=CF(a.year,o);return n.setFullYear(c,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),si(n,i)}const l=!("era"in r)||r.era===1?a.year:1-a.year;return n.setFullYear(l,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),si(n,i)}}class QO extends $e{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return hC(r==="R"?4:r.length,n)}set(n,r,a){const i=gt(n,0);return i.setFullYear(a,0,4),i.setHours(0,0,0,0),ul(i)}}class _O extends $e{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return hC(r==="u"?4:r.length,n)}set(n,r,a){return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}}class qO extends $e{constructor(){super(...arguments);fe(this,"priority",120);fe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"Q":case"QQ":return Ht(r.length,n);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"})||a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})||a.quarter(n,{width:"abbreviated",context:"formatting"})||a.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,a){return n.setMonth((a-1)*3,1),n.setHours(0,0,0,0),n}}class $O extends $e{constructor(){super(...arguments);fe(this,"priority",120);fe(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"q":case"qq":return Ht(r.length,n);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"})||a.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})||a.quarter(n,{width:"abbreviated",context:"standalone"})||a.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,a){return n.setMonth((a-1)*3,1),n.setHours(0,0,0,0),n}}class eQ extends $e{constructor(){super(...arguments);fe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);fe(this,"priority",110)}parse(n,r,a){const i=o=>o-1;switch(r){case"M":return Tt(Vt(Dt.month,n),i);case"MM":return Tt(Ht(2,n),i);case"Mo":return Tt(a.ordinalNumber(n,{unit:"month"}),i);case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"})||a.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})||a.month(n,{width:"abbreviated",context:"formatting"})||a.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,a){return n.setMonth(a,1),n.setHours(0,0,0,0),n}}class tQ extends $e{constructor(){super(...arguments);fe(this,"priority",110);fe(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,a){const i=o=>o-1;switch(r){case"L":return Tt(Vt(Dt.month,n),i);case"LL":return Tt(Ht(2,n),i);case"Lo":return Tt(a.ordinalNumber(n,{unit:"month"}),i);case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"})||a.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})||a.month(n,{width:"abbreviated",context:"standalone"})||a.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,a){return n.setMonth(a,1),n.setHours(0,0,0,0),n}}function nQ(e,t,n){const r=me(e),a=lF(r,n)-t;return r.setDate(r.getDate()-a*7),r}class rQ extends $e{constructor(){super(...arguments);fe(this,"priority",100);fe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,a){switch(r){case"w":return Vt(Dt.week,n);case"wo":return a.ordinalNumber(n,{unit:"week"});default:return Ht(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,a,i){return si(nQ(n,a,i),i)}}function aQ(e,t){const n=me(e),r=jG(n)-t;return n.setDate(n.getDate()-r*7),n}class iQ extends $e{constructor(){super(...arguments);fe(this,"priority",100);fe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,a){switch(r){case"I":return Vt(Dt.week,n);case"Io":return a.ordinalNumber(n,{unit:"week"});default:return Ht(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,a){return ul(aQ(n,a))}}const oQ=[31,28,31,30,31,30,31,31,30,31,30,31],gQ=[31,29,31,30,31,30,31,31,30,31,30,31];class lQ extends $e{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"subPriority",1);fe(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"d":return Vt(Dt.date,n);case"do":return a.ordinalNumber(n,{unit:"date"});default:return Ht(r.length,n)}}validate(n,r){const a=n.getFullYear(),i=AF(a),o=n.getMonth();return i?r>=1&&r<=gQ[o]:r>=1&&r<=oQ[o]}set(n,r,a){return n.setDate(a),n.setHours(0,0,0,0),n}}class sQ extends $e{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"subpriority",1);fe(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,a){switch(r){case"D":case"DD":return Vt(Dt.dayOfYear,n);case"Do":return a.ordinalNumber(n,{unit:"date"});default:return Ht(r.length,n)}}validate(n,r){const a=n.getFullYear();return AF(a)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,a){return n.setMonth(0,a),n.setHours(0,0,0,0),n}}function UG(e,t,n){var d,m,p,h;const r=rg(),a=(n==null?void 0:n.weekStartsOn)??((m=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((h=(p=r.locale)==null?void 0:p.options)==null?void 0:h.weekStartsOn)??0,i=me(e),o=i.getDay(),c=(t%7+7)%7,u=7-a,I=t<0||t>6?t-(o+u)%7:(c+u)%7-(o+u)%7;return Qr(i,I)}class cQ extends $e{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})||a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,a,i){return n=UG(n,a,i),n.setHours(0,0,0,0),n}}class uQ extends $e{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,a,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return Tt(Ht(r.length,n),o);case"eo":return Tt(a.ordinalNumber(n,{unit:"day"}),o);case"eee":return a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})||a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,a,i){return n=UG(n,a,i),n.setHours(0,0,0,0),n}}class IQ extends $e{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,a,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return Tt(Ht(r.length,n),o);case"co":return Tt(a.ordinalNumber(n,{unit:"day"}),o);case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"})||a.day(n,{width:"short",context:"standalone"})||a.day(n,{width:"narrow",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"})||a.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})||a.day(n,{width:"abbreviated",context:"standalone"})||a.day(n,{width:"short",context:"standalone"})||a.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,a,i){return n=UG(n,a,i),n.setHours(0,0,0,0),n}}function dQ(e,t){const n=me(e),r=MO(n),a=t-r;return Qr(n,a)}class CQ extends $e{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,a){const i=o=>o===0?7:o;switch(r){case"i":case"ii":return Ht(r.length,n);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return Tt(a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"}),i);case"iiiii":return Tt(a.day(n,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Tt(a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Tt(a.day(n,{width:"wide",context:"formatting"})||a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"}),i)}}validate(n,r){return r>=1&&r<=7}set(n,r,a){return n=dQ(n,a),n.setHours(0,0,0,0),n}}class AQ extends $e{constructor(){super(...arguments);fe(this,"priority",80);fe(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,a){switch(r){case"a":case"aa":case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})||a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,a){return n.setHours(zG(a),0,0,0),n}}class mQ extends $e{constructor(){super(...arguments);fe(this,"priority",80);fe(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,a){switch(r){case"b":case"bb":case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})||a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,a){return n.setHours(zG(a),0,0,0),n}}class fQ extends $e{constructor(){super(...arguments);fe(this,"priority",80);fe(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,a){switch(r){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})||a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,a){return n.setHours(zG(a),0,0,0),n}}class hQ extends $e{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,a){switch(r){case"h":return Vt(Dt.hour12h,n);case"ho":return a.ordinalNumber(n,{unit:"hour"});default:return Ht(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,a){const i=n.getHours()>=12;return i&&a<12?n.setHours(a+12,0,0,0):!i&&a===12?n.setHours(0,0,0,0):n.setHours(a,0,0,0),n}}class pQ extends $e{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,a){switch(r){case"H":return Vt(Dt.hour23h,n);case"Ho":return a.ordinalNumber(n,{unit:"hour"});default:return Ht(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,a){return n.setHours(a,0,0,0),n}}class bQ extends $e{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,a){switch(r){case"K":return Vt(Dt.hour11h,n);case"Ko":return a.ordinalNumber(n,{unit:"hour"});default:return Ht(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,a){return n.getHours()>=12&&a<12?n.setHours(a+12,0,0,0):n.setHours(a,0,0,0),n}}class yQ extends $e{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,a){switch(r){case"k":return Vt(Dt.hour24h,n);case"ko":return a.ordinalNumber(n,{unit:"hour"});default:return Ht(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,a){const i=a<=24?a%24:a;return n.setHours(i,0,0,0),n}}class ZQ extends $e{constructor(){super(...arguments);fe(this,"priority",60);fe(this,"incompatibleTokens",["t","T"])}parse(n,r,a){switch(r){case"m":return Vt(Dt.minute,n);case"mo":return a.ordinalNumber(n,{unit:"minute"});default:return Ht(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,a){return n.setMinutes(a,0,0),n}}class vQ extends $e{constructor(){super(...arguments);fe(this,"priority",50);fe(this,"incompatibleTokens",["t","T"])}parse(n,r,a){switch(r){case"s":return Vt(Dt.second,n);case"so":return a.ordinalNumber(n,{unit:"second"});default:return Ht(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,a){return n.setSeconds(a,0),n}}class GQ extends $e{constructor(){super(...arguments);fe(this,"priority",30);fe(this,"incompatibleTokens",["t","T"])}parse(n,r){const a=i=>Math.trunc(i*Math.pow(10,-r.length+3));return Tt(Ht(r.length,n),a)}set(n,r,a){return n.setMilliseconds(a),n}}class BQ extends $e{constructor(){super(...arguments);fe(this,"priority",10);fe(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return ba(pa.basicOptionalMinutes,n);case"XX":return ba(pa.basic,n);case"XXXX":return ba(pa.basicOptionalSeconds,n);case"XXXXX":return ba(pa.extendedOptionalSeconds,n);case"XXX":default:return ba(pa.extended,n)}}set(n,r,a){return r.timestampIsSet?n:gt(n,n.getTime()-uC(n)-a)}}class SQ extends $e{constructor(){super(...arguments);fe(this,"priority",10);fe(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return ba(pa.basicOptionalMinutes,n);case"xx":return ba(pa.basic,n);case"xxxx":return ba(pa.basicOptionalSeconds,n);case"xxxxx":return ba(pa.extendedOptionalSeconds,n);case"xxx":default:return ba(pa.extended,n)}}set(n,r,a){return r.timestampIsSet?n:gt(n,n.getTime()-uC(n)-a)}}class wQ extends $e{constructor(){super(...arguments);fe(this,"priority",40);fe(this,"incompatibleTokens","*")}parse(n){return dF(n)}set(n,r,a){return[gt(n,a*1e3),{timestampIsSet:!0}]}}class WQ extends $e{constructor(){super(...arguments);fe(this,"priority",20);fe(this,"incompatibleTokens","*")}parse(n){return dF(n)}set(n,r,a){return[gt(n,a),{timestampIsSet:!0}]}}const kQ={G:new UO,y:new PO,Y:new OO,R:new QO,u:new _O,Q:new qO,q:new $O,M:new eQ,L:new tQ,w:new rQ,I:new iQ,d:new lQ,D:new sQ,E:new cQ,e:new uQ,c:new IQ,i:new CQ,a:new AQ,b:new mQ,B:new fQ,h:new hQ,H:new pQ,K:new bQ,k:new yQ,m:new ZQ,s:new vQ,S:new GQ,X:new BQ,x:new SQ,t:new wQ,T:new WQ},VQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,RQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xQ=/^'([^]*?)'?$/,XQ=/''/g,JQ=/\S/,YQ=/[a-zA-Z]/;function tp(e,t,n,r){var b,y,v,G,S,R,B,V;const a=EO(),i=(r==null?void 0:r.locale)??a.locale??gF,o=(r==null?void 0:r.firstWeekContainsDate)??((y=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:y.firstWeekContainsDate)??a.firstWeekContainsDate??((G=(v=a.locale)==null?void 0:v.options)==null?void 0:G.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((R=(S=r==null?void 0:r.locale)==null?void 0:S.options)==null?void 0:R.weekStartsOn)??a.weekStartsOn??((V=(B=a.locale)==null?void 0:B.options)==null?void 0:V.weekStartsOn)??0;if(t==="")return e===""?me(n):gt(n,NaN);const c={firstWeekContainsDate:o,weekStartsOn:l,locale:i},u=[new zO],I=t.match(RQ).map(W=>{const X=W[0];if(X in fC){const N=fC[X];return N(W,i.formatLong)}return W}).join("").match(VQ),d=[];for(let W of I){!(r!=null&&r.useAdditionalWeekYearTokens)&&uF(W)&&XZ(W,t,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&cF(W)&&XZ(W,t,e);const X=W[0],N=kQ[X];if(N){const{incompatibleTokens:x}=N;if(Array.isArray(x)){const F=d.find(E=>x.includes(E.token)||E.token===X);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${W}\` at the same time`)}else if(N.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${W}\` and any other token at the same time`);d.push({token:X,fullToken:W});const Y=N.run(e,W,i.match,c);if(!Y)return gt(n,NaN);u.push(Y.setter),e=Y.rest}else{if(X.match(YQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+X+"`");if(W==="''"?W="'":X==="'"&&(W=NQ(W)),e.indexOf(W)===0)e=e.slice(W.length);else return gt(n,NaN)}}if(e.length>0&&JQ.test(e))return gt(n,NaN);const m=u.map(W=>W.priority).sort((W,X)=>X-W).filter((W,X,N)=>N.indexOf(W)===X).map(W=>u.filter(X=>X.priority===W).sort((X,N)=>N.subPriority-X.subPriority)).map(W=>W[0]);let p=me(n);if(isNaN(p.getTime()))return gt(n,NaN);const h={};for(const W of m){if(!W.validate(p,c))return gt(n,NaN);const X=W.set(p,h,c);Array.isArray(X)?(p=X[0],Object.assign(h,X[1])):p=X}return gt(n,p)}function NQ(e){return e.match(xQ)[1].replace(XQ,"'")}function HQ(e,t){const n=me(e),r=me(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function FQ(e,t){const n=xZ(e),r=xZ(t);return+n==+r}function KQ(e,t){const n=me(e),r=me(t);return n.getFullYear()===r.getFullYear()}function xc(e,t){const n=+me(e),[r,a]=[+me(t.start),+me(t.end)].sort((i,o)=>i-o);return n>=r&&n<=a}function EQ(e,t){return Qr(e,-1)}function MQ(e,t){const r=LQ(e);let a;if(r.date){const c=zQ(r.date,2);a=UQ(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(r.time&&(o=PQ(r.time),isNaN(o)))return new Date(NaN);if(r.timezone){if(l=OQ(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(i+o+l)}const sd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},DQ=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,TQ=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,jQ=/^([+-])(\d{2})(?::?(\d{2}))?$/;function LQ(e){const t={},n=e.split(sd.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],sd.timeZoneDelimiter.test(t.date)&&(t.date=e.split(sd.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const a=sd.timezone.exec(r);a?(t.time=r.replace(a[1],""),t.timezone=a[1]):t.time=r}return t}function zQ(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function UQ(e,t){if(t===null)return new Date(NaN);const n=e.match(DQ);if(!n)return new Date(NaN);const r=!!n[4],a=ec(n[1]),i=ec(n[2])-1,o=ec(n[3]),l=ec(n[4]),c=ec(n[5])-1;if(r)return e4(t,l,c)?QQ(t,l,c):new Date(NaN);{const u=new Date(0);return!qQ(t,i,o)||!$Q(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}}function ec(e){return e?parseInt(e):1}function PQ(e){const t=e.match(TQ);if(!t)return NaN;const n=np(t[1]),r=np(t[2]),a=np(t[3]);return t4(n,r,a)?n*KA+r*FA+a*1e3:NaN}function np(e){return e&&parseFloat(e.replace(",","."))||0}function OQ(e){if(e==="Z")return 0;const t=e.match(jQ);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return n4(r,a)?n*(r*KA+a*FA):NaN}function QQ(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const a=r.getUTCDay()||7,i=(t-1)*7+n+1-a;return r.setUTCDate(r.getUTCDate()+i),r}const _Q=[31,null,31,30,31,30,31,31,30,31,30,31];function mF(e){return e%400===0||e%4===0&&e%100!==0}function qQ(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(_Q[t]||(mF(e)?29:28))}function $Q(e,t){return t>=1&&t<=(mF(e)?366:365)}function e4(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function t4(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function n4(e,t){return t>=0&&t<=59}function nr(e,t){const n=me(e),r=n.getFullYear(),a=n.getDate(),i=gt(e,0);i.setFullYear(r,t,15),i.setHours(0,0,0,0);const o=KO(i);return n.setMonth(t,Math.min(a,o)),n}function r4(e,t){let n=me(e);return isNaN(+n)?gt(e,NaN):(t.year!=null&&n.setFullYear(t.year),t.month!=null&&(n=nr(n,t.month)),t.date!=null&&n.setDate(t.date),t.hours!=null&&n.setHours(t.hours),t.minutes!=null&&n.setMinutes(t.minutes),t.seconds!=null&&n.setSeconds(t.seconds),t.milliseconds!=null&&n.setMilliseconds(t.milliseconds),n)}function Kd(e,t){const n=me(e);return n.setHours(t),n}function Ed(e,t){const n=me(e);return n.setMinutes(t),n}function Lg(e,t){const n=me(e),r=Math.trunc(n.getMonth()/3)+1,a=t-r;return nr(n,n.getMonth()+a*3)}function Md(e,t){const n=me(e);return n.setSeconds(t),n}function Ca(e,t){const n=me(e);return isNaN(+n)?gt(e,NaN):(n.setFullYear(t),n)}function Fo(e,t){return qr(e,-t)}function fF(e,t){return TG(e,-1)}function uV(e,t){return IC(e,-1)}function dl(e,t){return ti(e,-t)}function MA(){return typeof window<"u"}function ql(e){return hF(e)?(e.nodeName||"").toLowerCase():"#document"}function or(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Na(e){var t;return(t=(hF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function hF(e){return MA()?e instanceof Node||e instanceof or(e).Node:!1}function Xn(e){return MA()?e instanceof Element||e instanceof or(e).Element:!1}function xa(e){return MA()?e instanceof HTMLElement||e instanceof or(e).HTMLElement:!1}function IV(e){return!MA()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof or(e).ShadowRoot}function xu(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=kr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function a4(e){return["table","td","th"].includes(ql(e))}function DA(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function PG(e){const t=OG(),n=Xn(e)?kr(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function i4(e){let t=eo(e);for(;xa(t)&&!Cl(t);){if(PG(t))return t;if(DA(t))return null;t=eo(t)}return null}function OG(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Cl(e){return["html","body","#document"].includes(ql(e))}function kr(e){return or(e).getComputedStyle(e)}function TA(e){return Xn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function eo(e){if(ql(e)==="html")return e;const t=e.assignedSlot||e.parentNode||IV(e)&&e.host||Na(e);return IV(t)?t.host:t}function pF(e){const t=eo(e);return Cl(t)?e.ownerDocument?e.ownerDocument.body:e.body:xa(t)&&xu(t)?t:pF(t)}function Xc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=pF(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=or(a);if(i){const l=YZ(o);return t.concat(o,o.visualViewport||[],xu(a)?a:[],l&&n?Xc(l):[])}return t.concat(a,Xc(a,[],n))}function YZ(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Al=Math.min,Ko=Math.max,pC=Math.round,cd=Math.floor,wa=e=>({x:e,y:e}),o4={left:"right",right:"left",bottom:"top",top:"bottom"},g4={start:"end",end:"start"};function l4(e,t,n){return Ko(e,Al(t,n))}function jA(e,t){return typeof e=="function"?e(t):e}function ml(e){return e.split("-")[0]}function Xu(e){return e.split("-")[1]}function s4(e){return e==="x"?"y":"x"}function QG(e){return e==="y"?"height":"width"}function Jc(e){return["top","bottom"].includes(ml(e))?"y":"x"}function _G(e){return s4(Jc(e))}function c4(e,t,n){n===void 0&&(n=!1);const r=Xu(e),a=_G(e),i=QG(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=bC(o)),[o,bC(o)]}function u4(e){const t=bC(e);return[NZ(e),t,NZ(t)]}function NZ(e){return e.replace(/start|end/g,t=>g4[t])}function I4(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function d4(e,t,n,r){const a=Xu(e);let i=I4(ml(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(NZ)))),i}function bC(e){return e.replace(/left|right|bottom|top/g,t=>o4[t])}function C4(e){return{top:0,right:0,bottom:0,left:0,...e}}function bF(e){return typeof e!="number"?C4(e):{top:e,right:e,bottom:e,left:e}}function yC(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function dV(e,t,n){let{reference:r,floating:a}=e;const i=Jc(t),o=_G(t),l=QG(o),c=ml(t),u=i==="y",I=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,m=r[l]/2-a[l]/2;let p;switch(c){case"top":p={x:I,y:r.y-a.height};break;case"bottom":p={x:I,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-a.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Xu(t)){case"start":p[o]-=m*(n&&u?-1:1);break;case"end":p[o]+=m*(n&&u?-1:1);break}return p}const A4=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:I,y:d}=dV(u,r,c),m=r,p={},h=0;for(let b=0;b<l.length;b++){const{name:y,fn:v}=l[b],{x:G,y:S,data:R,reset:B}=await v({x:I,y:d,initialPlacement:r,placement:m,strategy:a,middlewareData:p,rects:u,platform:o,elements:{reference:e,floating:t}});I=G??I,d=S??d,p={...p,[y]:{...p[y],...R}},B&&h<=50&&(h++,typeof B=="object"&&(B.placement&&(m=B.placement),B.rects&&(u=B.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):B.rects),{x:I,y:d}=dV(u,m,c)),b=-1)}return{x:I,y:d,placement:m,strategy:a,middlewareData:p}};async function m4(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:I="viewport",elementContext:d="floating",altBoundary:m=!1,padding:p=0}=jA(t,e),h=bF(p),y=l[m?d==="floating"?"reference":"floating":d],v=yC(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:I,strategy:c})),G=d==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),R=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},B=yC(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:G,offsetParent:S,strategy:c}):G);return{top:(v.top-B.top+h.top)/R.y,bottom:(B.bottom-v.bottom+h.bottom)/R.y,left:(v.left-B.left+h.left)/R.x,right:(B.right-v.right+h.right)/R.x}}const f4=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:I=0}=jA(e,t)||{};if(u==null)return{};const d=bF(I),m={x:n,y:r},p=_G(a),h=QG(p),b=await o.getDimensions(u),y=p==="y",v=y?"top":"left",G=y?"bottom":"right",S=y?"clientHeight":"clientWidth",R=i.reference[h]+i.reference[p]-m[p]-i.floating[h],B=m[p]-i.reference[p],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let W=V?V[S]:0;(!W||!await(o.isElement==null?void 0:o.isElement(V)))&&(W=l.floating[S]||i.floating[h]);const X=R/2-B/2,N=W/2-b[h]/2-1,x=Al(d[v],N),Y=Al(d[G],N),F=x,E=W-b[h]-Y,M=W/2-b[h]/2+X,T=l4(F,M,E),z=!c.arrow&&Xu(a)!=null&&M!==T&&i.reference[h]/2-(M<F?x:Y)-b[h]/2<0,P=z?M<F?M-F:M-E:0;return{[p]:m[p]+P,data:{[p]:T,centerOffset:M-T-P,...z&&{alignmentOffset:P}},reset:z}}}),h4=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:I=!0,crossAxis:d=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:b=!0,...y}=jA(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=ml(a),G=Jc(l),S=ml(l)===l,R=await(c.isRTL==null?void 0:c.isRTL(u.floating)),B=m||(S||!b?[bC(l)]:u4(l)),V=h!=="none";!m&&V&&B.push(...d4(l,b,h,R));const W=[l,...B],X=await m4(t,y),N=[];let x=((r=i.flip)==null?void 0:r.overflows)||[];if(I&&N.push(X[v]),d){const M=c4(a,o,R);N.push(X[M[0]],X[M[1]])}if(x=[...x,{placement:a,overflows:N}],!N.every(M=>M<=0)){var Y,F;const M=(((Y=i.flip)==null?void 0:Y.index)||0)+1,T=W[M];if(T)return{data:{index:M,overflows:x},reset:{placement:T}};let z=(F=x.filter(P=>P.overflows[0]<=0).sort((P,L)=>P.overflows[1]-L.overflows[1])[0])==null?void 0:F.placement;if(!z)switch(p){case"bestFit":{var E;const P=(E=x.filter(L=>{if(V){const q=Jc(L.placement);return q===G||q==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(q=>q>0).reduce((q,ee)=>q+ee,0)]).sort((L,q)=>L[1]-q[1])[0])==null?void 0:E[0];P&&(z=P);break}case"initialPlacement":z=l;break}if(a!==z)return{reset:{placement:z}}}return{}}}};async function p4(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=ml(n),l=Xu(n),c=Jc(n)==="y",u=["left","top"].includes(o)?-1:1,I=i&&c?-1:1,d=jA(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:h}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof h=="number"&&(p=l==="end"?h*-1:h),c?{x:p*I,y:m*u}:{x:m*u,y:p*I}}const b4=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await p4(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}};function yF(e){const t=kr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=xa(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=pC(n)!==i||pC(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function qG(e){return Xn(e)?e:e.contextElement}function _g(e){const t=qG(e);if(!xa(t))return wa(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=yF(t);let o=(i?pC(n.width):n.width)/r,l=(i?pC(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const y4=wa(0);function ZF(e){const t=or(e);return!OG()||!t.visualViewport?y4:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Z4(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==or(e)?!1:t}function Oo(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=qG(e);let o=wa(1);t&&(r?Xn(r)&&(o=_g(r)):o=_g(e));const l=Z4(i,n,r)?ZF(i):wa(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,I=a.width/o.x,d=a.height/o.y;if(i){const m=or(i),p=r&&Xn(r)?or(r):r;let h=m,b=YZ(h);for(;b&&r&&p!==h;){const y=_g(b),v=b.getBoundingClientRect(),G=kr(b),S=v.left+(b.clientLeft+parseFloat(G.paddingLeft))*y.x,R=v.top+(b.clientTop+parseFloat(G.paddingTop))*y.y;c*=y.x,u*=y.y,I*=y.x,d*=y.y,c+=S,u+=R,h=or(b),b=YZ(h)}}return yC({width:I,height:d,x:c,y:u})}function $G(e,t){const n=TA(e).scrollLeft;return t?t.left+n:Oo(Na(e)).left+n}function vF(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:$G(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function v4(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Na(r),l=t?DA(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=wa(1);const I=wa(0),d=xa(r);if((d||!d&&!i)&&((ql(r)!=="body"||xu(o))&&(c=TA(r)),xa(r))){const p=Oo(r);u=_g(r),I.x=p.x+r.clientLeft,I.y=p.y+r.clientTop}const m=o&&!d&&!i?vF(o,c,!0):wa(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+I.x+m.x,y:n.y*u.y-c.scrollTop*u.y+I.y+m.y}}function G4(e){return Array.from(e.getClientRects())}function B4(e){const t=Na(e),n=TA(e),r=e.ownerDocument.body,a=Ko(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Ko(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+$G(e);const l=-n.scrollTop;return kr(r).direction==="rtl"&&(o+=Ko(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}function S4(e,t){const n=or(e),r=Na(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=OG();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function w4(e,t){const n=Oo(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=xa(e)?_g(e):wa(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function CV(e,t,n){let r;if(t==="viewport")r=S4(e,n);else if(t==="document")r=B4(Na(e));else if(Xn(t))r=w4(t,n);else{const a=ZF(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return yC(r)}function GF(e,t){const n=eo(e);return n===t||!Xn(n)||Cl(n)?!1:kr(n).position==="fixed"||GF(n,t)}function W4(e,t){const n=t.get(e);if(n)return n;let r=Xc(e,[],!1).filter(l=>Xn(l)&&ql(l)!=="body"),a=null;const i=kr(e).position==="fixed";let o=i?eo(e):e;for(;Xn(o)&&!Cl(o);){const l=kr(o),c=PG(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||xu(o)&&!c&&GF(e,o))?r=r.filter(I=>I!==o):a=l,o=eo(o)}return t.set(e,r),r}function k4(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?DA(t)?[]:W4(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,I)=>{const d=CV(t,I,a);return u.top=Ko(d.top,u.top),u.right=Al(d.right,u.right),u.bottom=Al(d.bottom,u.bottom),u.left=Ko(d.left,u.left),u},CV(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function V4(e){const{width:t,height:n}=yF(e);return{width:t,height:n}}function R4(e,t,n){const r=xa(t),a=Na(t),i=n==="fixed",o=Oo(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=wa(0);if(r||!r&&!i)if((ql(t)!=="body"||xu(a))&&(l=TA(t)),r){const m=Oo(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&(c.x=$G(a));const u=a&&!r&&!i?vF(a,l):wa(0),I=o.left+l.scrollLeft-c.x-u.x,d=o.top+l.scrollTop-c.y-u.y;return{x:I,y:d,width:o.width,height:o.height}}function rp(e){return kr(e).position==="static"}function AV(e,t){if(!xa(e)||kr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Na(e)===n&&(n=n.ownerDocument.body),n}function BF(e,t){const n=or(e);if(DA(e))return n;if(!xa(e)){let a=eo(e);for(;a&&!Cl(a);){if(Xn(a)&&!rp(a))return a;a=eo(a)}return n}let r=AV(e,t);for(;r&&a4(r)&&rp(r);)r=AV(r,t);return r&&Cl(r)&&rp(r)&&!PG(r)?n:r||i4(e)||n}const x4=async function(e){const t=this.getOffsetParent||BF,n=this.getDimensions,r=await n(e.floating);return{reference:R4(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function X4(e){return kr(e).direction==="rtl"}const J4={convertOffsetParentRelativeRectToViewportRelativeRect:v4,getDocumentElement:Na,getClippingRect:k4,getOffsetParent:BF,getElementRects:x4,getClientRects:G4,getDimensions:V4,getScale:_g,isElement:Xn,isRTL:X4};function SF(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Y4(e,t){let n=null,r;const a=Na(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:I,top:d,width:m,height:p}=u;if(l||t(),!m||!p)return;const h=cd(d),b=cd(a.clientWidth-(I+m)),y=cd(a.clientHeight-(d+p)),v=cd(I),S={rootMargin:-h+"px "+-b+"px "+-y+"px "+-v+"px",threshold:Ko(0,Al(1,c))||1};let R=!0;function B(V){const W=V[0].intersectionRatio;if(W!==c){if(!R)return o();W?o(!1,W):r=setTimeout(()=>{o(!1,1e-7)},1e3)}W===1&&!SF(u,e.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(B,{...S,root:a.ownerDocument})}catch{n=new IntersectionObserver(B,S)}n.observe(e)}return o(!0),i}function N4(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=qG(e),I=a||i?[...u?Xc(u):[],...Xc(t)]:[];I.forEach(v=>{a&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const d=u&&l?Y4(u,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(v=>{let[G]=v;G&&G.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=p)==null||S.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let h,b=c?Oo(e):null;c&&y();function y(){const v=Oo(e);b&&!SF(b,v)&&n(),b=v,h=requestAnimationFrame(y)}return n(),()=>{var v;I.forEach(G=>{a&&G.removeEventListener("scroll",n),i&&G.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(h)}}const H4=b4,F4=h4,mV=f4,K4=(e,t,n)=>{const r=new Map,a={platform:J4,...n},i={...a.platform,_c:r};return A4(e,t,{...a,platform:i})};var Dd=typeof document<"u"?k.useLayoutEffect:k.useEffect;function ZC(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!ZC(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!ZC(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function wF(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function fV(e,t){const n=wF(e);return Math.round(t*n)/n}function ap(e){const t=k.useRef(e);return Dd(()=>{t.current=e}),t}function E4(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[I,d]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=k.useState(r);ZC(m,r)||p(r);const[h,b]=k.useState(null),[y,v]=k.useState(null),G=k.useCallback(L=>{L!==V.current&&(V.current=L,b(L))},[]),S=k.useCallback(L=>{L!==W.current&&(W.current=L,v(L))},[]),R=i||h,B=o||y,V=k.useRef(null),W=k.useRef(null),X=k.useRef(I),N=c!=null,x=ap(c),Y=ap(a),F=ap(u),E=k.useCallback(()=>{if(!V.current||!W.current)return;const L={placement:t,strategy:n,middleware:m};Y.current&&(L.platform=Y.current),K4(V.current,W.current,L).then(q=>{const ee={...q,isPositioned:F.current!==!1};M.current&&!ZC(X.current,ee)&&(X.current=ee,BN.flushSync(()=>{d(ee)}))})},[m,t,n,Y,F]);Dd(()=>{u===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,d(L=>({...L,isPositioned:!1})))},[u]);const M=k.useRef(!1);Dd(()=>(M.current=!0,()=>{M.current=!1}),[]),Dd(()=>{if(R&&(V.current=R),B&&(W.current=B),R&&B){if(x.current)return x.current(R,B,E);E()}},[R,B,E,x,N]);const T=k.useMemo(()=>({reference:V,floating:W,setReference:G,setFloating:S}),[G,S]),z=k.useMemo(()=>({reference:R,floating:B}),[R,B]),P=k.useMemo(()=>{const L={position:n,left:0,top:0};if(!z.floating)return L;const q=fV(z.floating,I.x),ee=fV(z.floating,I.y);return l?{...L,transform:"translate("+q+"px, "+ee+"px)",...wF(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:ee}},[n,l,z.floating,I.x,I.y]);return k.useMemo(()=>({...I,update:E,refs:T,elements:z,floatingStyles:P}),[I,E,T,z,P])}const M4=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?mV({element:r.current,padding:a}).fn(n):{}:r?mV({element:r,padding:a}).fn(n):{}}}},D4=(e,t)=>({...H4(e),options:[e,t]}),T4=(e,t)=>({...F4(e),options:[e,t]}),j4=(e,t)=>({...M4(e),options:[e,t]}),WF={...pZ},L4=WF.useInsertionEffect,z4=L4||(e=>e());function U4(e){const t=k.useRef(()=>{});return z4(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}var vC=typeof document<"u"?k.useLayoutEffect:k.useEffect;let hV=!1,P4=0;const pV=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+P4++;function O4(){const[e,t]=k.useState(()=>hV?pV():void 0);return vC(()=>{e==null&&t(pV())},[]),k.useEffect(()=>{hV=!0},[]),e}const Q4=WF.useId,kF=Q4||O4,_4=k.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:a},middlewareData:{arrow:i,shift:o}},width:l=14,height:c=7,tipRadius:u=0,strokeWidth:I=0,staticOffset:d,stroke:m,d:p,style:{transform:h,...b}={},...y}=t,v=kF(),[G,S]=k.useState(!1);if(vC(()=>{if(!a)return;kr(a).direction==="rtl"&&S(!0)},[a]),!a)return null;const[R,B]=r.split("-"),V=R==="top"||R==="bottom";let W=d;(V&&o!=null&&o.x||!V&&o!=null&&o.y)&&(W=null);const X=I*2,N=X/2,x=l/2*(u/-8+1),Y=c/2*u/4,F=!!p,E=W&&B==="end"?"bottom":"top";let M=W&&B==="end"?"right":"left";W&&G&&(M=B==="end"?"left":"right");const T=(i==null?void 0:i.x)!=null?W||i.x:"",z=(i==null?void 0:i.y)!=null?W||i.y:"",P=p||"M0,0"+(" H"+l)+(" L"+(l-x)+","+(c-Y))+(" Q"+l/2+","+c+" "+x+","+(c-Y))+" Z",L={top:F?"rotate(180deg)":"",left:F?"rotate(90deg)":"rotate(-90deg)",bottom:F?"":"rotate(180deg)",right:F?"rotate(-90deg)":"rotate(90deg)"}[R];return A.jsxs("svg",{...y,"aria-hidden":!0,ref:n,width:F?l:l+X,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[M]:T,[E]:z,[R]:V||F?"100%":"calc(100% - "+X/2+"px)",transform:[L,h].filter(q=>!!q).join(" "),...b},children:[X>0&&A.jsx("path",{clipPath:"url(#"+v+")",fill:"none",stroke:m,strokeWidth:X+(p?0:1),d:P}),A.jsx("path",{stroke:X&&!p?y.fill:"none",d:P}),A.jsx("clipPath",{id:v,children:A.jsx("rect",{x:-N,y:N*(F?-1:1),width:l+X,height:l})})]})});function q4(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(a=>a(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(a=>a!==n))||[])}}}const $4=k.createContext(null),e_=k.createContext(null),t_=()=>{var e;return((e=k.useContext($4))==null?void 0:e.id)||null},n_=()=>k.useContext(e_);function r_(e){const{open:t=!1,onOpenChange:n,elements:r}=e,a=kF(),i=k.useRef({}),[o]=k.useState(()=>q4()),l=t_()!=null,[c,u]=k.useState(r.reference),I=U4((p,h,b)=>{i.current.openEvent=p?h:void 0,o.emit("openchange",{open:p,event:h,reason:b,nested:l}),n==null||n(p,h,b)}),d=k.useMemo(()=>({setPositionReference:u}),[]),m=k.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return k.useMemo(()=>({dataRef:i,open:t,onOpenChange:I,elements:m,events:o,floatingId:a,refs:d}),[t,I,m,o,a,d])}function a_(e){e===void 0&&(e={});const{nodeId:t}=e,n=r_({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,a=r.elements,[i,o]=k.useState(null),[l,c]=k.useState(null),I=(a==null?void 0:a.domReference)||i,d=k.useRef(null),m=n_();vC(()=>{I&&(d.current=I)},[I]);const p=E4({...e,elements:{...a,...l&&{reference:l}}}),h=k.useCallback(S=>{const R=Xn(S)?{getBoundingClientRect:()=>S.getBoundingClientRect(),contextElement:S}:S;c(R),p.refs.setReference(R)},[p.refs]),b=k.useCallback(S=>{(Xn(S)||S===null)&&(d.current=S,o(S)),(Xn(p.refs.reference.current)||p.refs.reference.current===null||S!==null&&!Xn(S))&&p.refs.setReference(S)},[p.refs]),y=k.useMemo(()=>({...p.refs,setReference:b,setPositionReference:h,domReference:d}),[p.refs,b,h]),v=k.useMemo(()=>({...p.elements,domReference:I}),[p.elements,I]),G=k.useMemo(()=>({...p,...r,refs:y,elements:v,nodeId:t}),[p,y,v,t,r]);return vC(()=>{r.dataRef.current.floatingContext=G;const S=m==null?void 0:m.nodesRef.current.find(R=>R.id===t);S&&(S.context=G)}),k.useMemo(()=>({...p,context:G,refs:y,elements:v}),[p,y,v,G])}/*!
  react-datepicker v7.6.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var HZ=function(t,n){return HZ=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},HZ(t,n)};function sn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");HZ(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ue=function(){return Ue=Object.assign||function(n){for(var r,a=1,i=arguments.length;a<i;a++){r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},Ue.apply(this,arguments)};function va(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var i_=function(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,r=e.showTime,a=r===void 0?!1:r,i=e.className,o=e.children,l=n?"Choose Time":"Choose Date".concat(a?" and Time":"");return H.createElement("div",{className:i,role:"dialog","aria-label":l,"aria-modal":"true"},o)},o_=function(e,t){var n=k.useRef(null),r=k.useRef(e);r.current=e;var a=k.useCallback(function(i){var o;n.current&&!n.current.contains(i.target)&&(t&&i.target instanceof HTMLElement&&i.target.classList.contains(t)||(o=r.current)===null||o===void 0||o.call(r,i))},[t]);return k.useEffect(function(){return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}},[a]),n},LA=function(e){var t=e.children,n=e.onClickOutside,r=e.className,a=e.containerRef,i=e.style,o=e.ignoreClass,l=o_(n,o);return H.createElement("div",{className:r,style:i,ref:function(c){l.current=c,a&&(a.current=c)}},t)},Ce;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(Ce||(Ce={}));function VF(){var e=typeof window<"u"?window:globalThis;return e}var Ju=12,g_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function lt(e){if(e==null)return new Date;var t=typeof e=="string"?MQ(e):me(e);return Pa(t)?t:new Date}function ip(e,t,n,r,a){var i,o=null,l=Eo(n)||Eo(Zc()),c=!0;if(Array.isArray(t))return t.forEach(function(I){var d=tp(e,I,new Date,{locale:l,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});r&&(c=Pa(d,a)&&e===vt(d,I,n)),Pa(d,a)&&c&&(o=d)}),o;if(o=tp(e,t,new Date,{locale:l,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),r)c=Pa(o)&&e===vt(o,t,n);else if(!Pa(o)){var u=((i=t.match(g_))!==null&&i!==void 0?i:[]).map(function(I){var d=I[0];if(d==="p"||d==="P"){var m=fC[d];return l?m(I,l.formatLong):d}return I}).join("");e.length>0&&(o=tp(e,u.slice(0,e.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),Pa(o)||(o=new Date(e))}return Pa(o)&&c?o:null}function Pa(e,t){return dC(e)&&!Po(e,t??new Date("1/1/1800"))}function vt(e,t,n){if(n==="en")return sV(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Eo(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&Zc()&&Eo(Zc())&&(r=Eo(Zc())),sV(e,t,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Zr(e,t){var n=t.dateFormat,r=t.locale,a=Array.isArray(n)&&n.length>0?n[0]:n;return e&&vt(e,a,r)||""}function l_(e,t,n){if(!e)return"";var r=Zr(e,n),a=t?Zr(t,n):"";return"".concat(r," - ").concat(a)}function s_(e,t){if(!(e!=null&&e.length))return"";var n=e[0]?Zr(e[0],t):"";if(e.length===1)return n;if(e.length===2&&e[1]){var r=Zr(e[1],t);return"".concat(n,", ").concat(r)}var a=e.length-1;return"".concat(n," (+").concat(a,")")}function op(e,t){var n=t.hour,r=n===void 0?0:n,a=t.minute,i=a===void 0?0:a,o=t.second,l=o===void 0?0:o;return Kd(Ed(Md(e,l),i),r)}function c_(e){return jG(e)}function u_(e,t){return vt(e,"ddd",t)}function Td(e){return Uo(e)}function Oi(e,t,n){var r=Eo(t||Zc());return si(e,{locale:r,weekStartsOn:n})}function ai(e){return iF(e)}function Ac(e){return EA(e)}function bV(e){return xZ(e)}function yV(){return Uo(lt())}function ZV(e){return rF(e)}function I_(e){return zP(e)}function d_(e){return aF(e)}function ma(e,t){return e&&t?KQ(e,t):!e&&!t}function Rn(e,t){return e&&t?HQ(e,t):!e&&!t}function GC(e,t){return e&&t?FQ(e,t):!e&&!t}function je(e,t){return e&&t?jP(e,t):!e&&!t}function Vo(e,t){return e&&t?DO(e,t):!e&&!t}function mc(e,t,n){var r,a=Uo(t),i=rF(n);try{r=xc(e,{start:a,end:i})}catch{r=!1}return r}function Zc(){var e=VF();return e.__localeId__}function Eo(e){if(typeof e=="string"){var t=VF();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function C_(e,t,n){return t(vt(e,"EEEE",n))}function A_(e,t){return vt(e,"EEEEEE",t)}function m_(e,t){return vt(e,"EEE",t)}function eB(e,t){return vt(nr(lt(),e),"LLLL",t)}function RF(e,t){return vt(nr(lt(),e),"LLL",t)}function f_(e,t){return vt(Lg(lt(),e),"QQQ",t)}function vr(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.maxDate,i=n.excludeDates,o=n.excludeDateIntervals,l=n.includeDates,c=n.includeDateIntervals,u=n.filterDate;return Yu(e,{minDate:r,maxDate:a})||i&&i.some(function(I){return I instanceof Date?je(e,I):je(e,I.date)})||o&&o.some(function(I){var d=I.start,m=I.end;return xc(e,{start:d,end:m})})||l&&!l.some(function(I){return je(e,I)})||c&&!c.some(function(I){var d=I.start,m=I.end;return xc(e,{start:d,end:m})})||u&&!u(lt(e))||!1}function tB(e,t){var n=t===void 0?{}:t,r=n.excludeDates,a=n.excludeDateIntervals;return a&&a.length>0?a.some(function(i){var o=i.start,l=i.end;return xc(e,{start:o,end:l})}):r&&r.some(function(i){var o;return i instanceof Date?je(e,i):je(e,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function xF(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.maxDate,i=n.excludeDates,o=n.includeDates,l=n.filterDate;return Yu(e,{minDate:r?iF(r):void 0,maxDate:a?aF(a):void 0})||(i==null?void 0:i.some(function(c){return Rn(e,c instanceof Date?c:c.date)}))||o&&!o.some(function(c){return Rn(e,c)})||l&&!l(lt(e))||!1}function ud(e,t,n,r){var a=Ke(e),i=xn(e),o=Ke(t),l=xn(t),c=Ke(r);return a===o&&a===c?i<=n&&n<=l:a<o?c===a&&i<=n||c===o&&l>=n||c<o&&c>a:!1}function h_(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.maxDate,i=n.excludeDates,o=n.includeDates;return Yu(e,{minDate:r,maxDate:a})||i&&i.some(function(l){return Rn(l instanceof Date?l:l.date,e)})||o&&!o.some(function(l){return Rn(l,e)})||!1}function Id(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.maxDate,i=n.excludeDates,o=n.includeDates,l=n.filterDate;return Yu(e,{minDate:r,maxDate:a})||(i==null?void 0:i.some(function(c){return GC(e,c instanceof Date?c:c.date)}))||o&&!o.some(function(c){return GC(e,c)})||l&&!l(lt(e))||!1}function dd(e,t,n){if(!t||!n||!dC(t)||!dC(n))return!1;var r=Ke(t),a=Ke(n);return r<=e&&a>=e}function jd(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.maxDate,i=n.excludeDates,o=n.includeDates,l=n.filterDate,c=new Date(e,0,1);return Yu(c,{minDate:r?EA(r):void 0,maxDate:a?oF(a):void 0})||(i==null?void 0:i.some(function(u){return ma(c,u instanceof Date?u:u.date)}))||o&&!o.some(function(u){return ma(c,u)})||l&&!l(lt(c))||!1}function Cd(e,t,n,r){var a=Ke(e),i=Ho(e),o=Ke(t),l=Ho(t),c=Ke(r);return a===o&&a===c?i<=n&&n<=l:a<o?c===a&&i<=n||c===o&&l>=n||c<o&&c>a:!1}function Yu(e,t){var n,r=t===void 0?{}:t,a=r.minDate,i=r.maxDate;return(n=a&&Il(e,a)<0||i&&Il(e,i)>0)!==null&&n!==void 0?n:!1}function vV(e,t){return t.some(function(n){return Ba(n)===Ba(e)&&Sa(n)===Sa(e)&&ri(n)===ri(e)})}function GV(e,t){var n=t===void 0?{}:t,r=n.excludeTimes,a=n.includeTimes,i=n.filterTime;return r&&vV(e,r)||a&&!vV(e,a)||i&&!i(e)||!1}function BV(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var a=lt();a=Kd(a,Ba(e)),a=Ed(a,Sa(e)),a=Md(a,ri(e));var i=lt();i=Kd(i,Ba(n)),i=Ed(i,Sa(n)),i=Md(i,ri(n));var o=lt();o=Kd(o,Ba(r)),o=Ed(o,Sa(r)),o=Md(o,ri(r));var l;try{l=!xc(a,{start:i,end:o})}catch{l=!1}return l}function SV(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.includeDates,i=Fo(e,1);return r&&CC(r,i)>0||a&&a.every(function(o){return CC(o,i)>0})||!1}function wV(e,t){var n=t===void 0?{}:t,r=n.maxDate,a=n.includeDates,i=qr(e,1);return r&&CC(i,r)>0||a&&a.every(function(o){return CC(i,o)>0})||!1}function p_(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.includeDates,i=EA(e),o=fF(i);return r&&AC(r,o)>0||a&&a.every(function(l){return AC(l,o)>0})||!1}function b_(e,t){var n=t===void 0?{}:t,r=n.maxDate,a=n.includeDates,i=oF(e),o=TG(i,1);return r&&AC(o,r)>0||a&&a.every(function(l){return AC(o,l)>0})||!1}function WV(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.includeDates,i=dl(e,1);return r&&mC(r,i)>0||a&&a.every(function(o){return mC(o,i)>0})||!1}function y_(e,t){var n=t===void 0?{}:t,r=n.minDate,a=n.yearItemNumber,i=a===void 0?Ju:a,o=Ac(dl(e,i)),l=zi(o,i).endPeriod,c=r&&Ke(r);return c&&c>l||!1}function kV(e,t){var n=t===void 0?{}:t,r=n.maxDate,a=n.includeDates,i=ti(e,1);return r&&mC(i,r)>0||a&&a.every(function(o){return mC(i,o)>0})||!1}function Z_(e,t){var n=t===void 0?{}:t,r=n.maxDate,a=n.yearItemNumber,i=a===void 0?Ju:a,o=ti(e,i),l=zi(o,i).startPeriod,c=r&&Ke(r);return c&&c<l||!1}function XF(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(a){return Il(a,t)>=0});return rV(r)}else return n?rV(n):t}function JF(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(a){return Il(a,t)<=0});return nV(r)}else return n?nV(n):t}function VV(e,t){var n;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var r=new Map,a=0,i=e.length;a<i;a++){var o=e[a];if(ni(o)){var l=vt(o,"MM.dd.yyyy"),c=r.get(l)||[];c.includes(t)||(c.push(t),r.set(l,c))}else if(typeof o=="object"){var u=Object.keys(o),I=(n=u[0])!==null&&n!==void 0?n:"",d=o[I];if(typeof I=="string"&&Array.isArray(d))for(var m=0,p=d.length;m<p;m++){var h=d[m];if(h){var l=vt(h,"MM.dd.yyyy"),c=r.get(l)||[];c.includes(I)||(c.push(I),r.set(l,c))}}}}return r}function v_(e,t){return e.length!==t.length?!1:e.every(function(n,r){return n===t[r]})}function G_(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(r){var a=r.date,i=r.holidayName;if(ni(a)){var o=vt(a,"MM.dd.yyyy"),l=n.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===t&&v_(l.holidayNames,[i]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?va(va([],c,!0),[i],!1):[i],n.set(o,l)}}}),n}function B_(e,t,n,r,a){for(var i=a.length,o=[],l=0;l<i;l++){var c=e,u=a[l];u&&(c=EP(c,Ba(u)),c=RZ(c,Sa(u)),c=TP(c,ri(u)));var I=RZ(e,(n+1)*r);$i(c,t)&&Po(c,I)&&u!=null&&o.push(u)}return o}function RV(e){return e<10?"0".concat(e):"".concat(e)}function zi(e,t){t===void 0&&(t=Ju);var n=Math.ceil(Ke(e)/t)*t,r=n-(t-1);return{startPeriod:r,endPeriod:n}}function S_(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function xV(e){var t=e.getSeconds(),n=e.getMilliseconds();return me(e.getTime()-t*1e3-n)}function w_(e,t){return xV(e).getTime()===xV(t).getTime()}function XV(e){if(!ni(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function JV(e,t){if(!ni(e)||!ni(t))throw new Error("Invalid date received");var n=XV(e),r=XV(t);return Po(n,r)}function YF(e){return e.key===Ce.Space}var W_=function(e){sn(t,e);function t(n){var r=e.call(this,n)||this;return r.inputRef=H.createRef(),r.onTimeChange=function(a){var i,o;r.setState({time:a});var l=r.props.date,c=l instanceof Date&&!isNaN(+l),u=c?l:new Date;if(a!=null&&a.includes(":")){var I=a.split(":"),d=I[0],m=I[1];u.setHours(Number(d)),u.setMinutes(Number(m))}(o=(i=r.props).onChange)===null||o===void 0||o.call(i,u)},r.renderTimeInput=function(){var a=r.state.time,i=r.props,o=i.date,l=i.timeString,c=i.customTimeInput;return c?k.cloneElement(c,{date:o,value:a,onChange:r.onTimeChange}):H.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var u;(u=r.inputRef.current)===null||u===void 0||u.focus()},required:!0,value:a,onChange:function(u){r.onTimeChange(u.target.value||l)}})},r.state={time:r.props.timeString},r}return t.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},t.prototype.render=function(){return H.createElement("div",{className:"react-datepicker__input-time-container"},H.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),H.createElement("div",{className:"react-datepicker-time__input-container"},H.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(k.Component),k_=function(e){sn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dayEl=k.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var a,i,o=r.key;o===Ce.Space&&(r.preventDefault(),r.key=Ce.Enter),(i=(a=n.props).handleOnKeyDown)===null||i===void 0||i.call(a,r)},n.isSameDay=function(r){return je(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var a=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(o){return n.isSameDayOrWeek(o)}):n.isSameDayOrWeek(n.props.selected),i=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!a&&n.isSameDayOrWeek(n.props.preSelection)&&!i},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),vr(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return tB(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return je(n.props.day,Oi(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&je(r,Oi(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,a=r.day,i=r.highlightDates;if(!i)return!1;var o=vt(a,"MM.dd.yyyy");return i.get(o)},n.getHolidaysClass=function(){var r,a=n.props,i=a.day,o=a.holidays;if(!o)return[void 0];var l=vt(i,"MM.dd.yyyy");return o.has(l)?[(r=o.get(l))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,a=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:mc(a,i,o)},n.isInSelectingRange=function(){var r,a=n.props,i=a.day,o=a.selectsStart,l=a.selectsEnd,c=a.selectsRange,u=a.selectsDisabledDaysInRange,I=a.startDate,d=a.endDate,m=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(o||l||c)||!m||!u&&n.isDisabled()?!1:o&&d&&(Po(m,d)||Vo(m,d))?mc(i,m,d):l&&I&&($i(m,I)||Vo(m,I))||c&&I&&!d&&($i(m,I)||Vo(m,I))?mc(i,I,m):!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var a=n.props,i=a.day,o=a.startDate,l=a.selectsStart,c=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return l?je(i,c):je(i,o)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var a=n.props,i=a.day,o=a.endDate,l=a.selectsEnd,c=a.selectsRange,u=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return l||c?je(i,u):je(i,o)},n.isRangeStart=function(){var r=n.props,a=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:je(i,a)},n.isRangeEnd=function(){var r=n.props,a=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:je(o,a)},n.isWeekend=function(){var r=FO(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===xn(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(xn(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(lt())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(a){return n.isSameDayOrWeek(a)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var a=n.props.dayClassName?n.props.dayClassName(r):void 0;return Ve("react-datepicker__day",a,"react-datepicker__day--"+u_(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,a=r.day,i=r.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,l=r.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,u=n.isDisabled()||n.isExcluded()?c:o;return"".concat(u," ").concat(vt(a,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,a=r.day,i=r.holidays,o=i===void 0?new Map:i,l=r.excludeDates,c=vt(a,"MM.dd.yyyy"),u=[];return o.has(c)&&u.push.apply(u,o.get(c).holidayNames),n.isExcluded()&&u.push(l==null?void 0:l.filter(function(I){return I instanceof Date?je(I,a):je(I==null?void 0:I.date,a)}).map(function(I){if(!(I instanceof Date))return I==null?void 0:I.message})),u.join(", ")},n.getTabIndex=function(){var r=n.props.selected,a=n.props.preSelection,i=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&je(a,r))?0:-1;return i},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(cV(n.props.day),n.props.day):cV(n.props.day)},n.render=function(){return H.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&H.createElement("span",{className:"overlay"},n.getTitle()))},n}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},t.prototype.isDayActiveElement=function(){var n,r,a;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((a=document.activeElement)===null||a===void 0?void 0:a.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(k.Component),V_=function(e){sn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.weekNumberEl=k.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var a,i,o=r.key;o===Ce.Space&&(r.preventDefault(),r.key=Ce.Enter),(i=(a=n.props).handleOnKeyDown)===null||i===void 0||i.call(a,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!je(n.props.date,n.props.selected)&&je(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||je(n.props.date,n.props.selected)&&je(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var a=!1;n.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&je(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(a=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(a=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(a=!0)),a&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},t.prototype.render=function(){var n=this.props,r=n.weekNumber,a=n.isWeekDisabled,i=n.ariaLabelPrefix,o=i===void 0?t.defaultProps.ariaLabelPrefix:i,l=n.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!a,"react-datepicker__week-number--selected":!!l&&je(this.props.date,this.props.selected)};return H.createElement("div",{ref:this.weekNumberEl,className:Ve(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},t}(k.Component),R_=function(e){sn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isDisabled=function(r){return vr(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,a){n.props.onDayClick&&n.props.onDayClick(r,a)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,a,i){for(var o,l,c,u=new Date(r),I=0;I<7;I++){var d=new Date(r);d.setDate(d.getDate()+I);var m=!n.isDisabled(d);if(m){u=d;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(u,a,i),n.props.showWeekPicker&&n.handleDayClick(u,i),((o=n.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((c=(l=n.props).setOpen)===null||c===void 0||c.call(l,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):c_(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),a=Qr(r,6),i=new Date(r);i<=a;){if(!n.isDisabled(i))return!1;i=Qr(i,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),a=[],i=n.formatWeekNumber(r);if(n.props.showWeekNumber){var o=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,i):void 0;a.push(H.createElement(V_,Ue({key:"W"},t.defaultProps,n.props,{weekNumber:i,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:o})))}return a.concat([0,1,2,3,4,5,6].map(function(l){var c=Qr(r,l);return H.createElement(k_,Ue({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:n.handleDayClick.bind(n,c),onMouseEnter:n.handleDayMouseEnter.bind(n,c)}))}))},n.startOfWeek=function(){return Oi(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!je(n.startOfWeek(),n.props.selected)&&je(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":je(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return H.createElement("div",{className:Ve(n)},this.renderDays())},t}(k.Component),tc,x_=6,qg={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},gp=(tc={},tc[qg.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},tc[qg.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},tc[qg.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},tc),Ad=1;function YV(e,t){return e?qg.FOUR_COLUMNS:t?qg.TWO_COLUMNS:qg.THREE_COLUMNS}var X_=function(e){sn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.MONTH_REFS=va([],Array(12),!0).map(function(){return k.createRef()}),n.QUARTER_REFS=va([],Array(4),!0).map(function(){return k.createRef()}),n.isDisabled=function(r){return vr(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return tB(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,a){var i,o;(o=(i=n.props).onDayClick)===null||o===void 0||o.call(i,r,a,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var a,i;(i=(a=n.props).onDayMouseEnter)===null||i===void 0||i.call(a,r)},n.handleMouseLeave=function(){var r,a;(a=(r=n.props).onMouseLeave)===null||a===void 0||a.call(r)},n.isRangeStartMonth=function(r){var a=n.props,i=a.day,o=a.startDate,l=a.endDate;return!o||!l?!1:Rn(nr(i,r),o)},n.isRangeStartQuarter=function(r){var a=n.props,i=a.day,o=a.startDate,l=a.endDate;return!o||!l?!1:GC(Lg(i,r),o)},n.isRangeEndMonth=function(r){var a=n.props,i=a.day,o=a.startDate,l=a.endDate;return!o||!l?!1:Rn(nr(i,r),l)},n.isRangeEndQuarter=function(r){var a=n.props,i=a.day,o=a.startDate,l=a.endDate;return!o||!l?!1:GC(Lg(i,r),l)},n.isInSelectingRangeMonth=function(r){var a,i=n.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,u=i.selectsRange,I=i.startDate,d=i.endDate,m=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return!(l||c||u)||!m?!1:l&&d?ud(m,d,r,o):c&&I||u&&I&&!d?ud(I,m,r,o):!1},n.isSelectingMonthRangeStart=function(r){var a;if(!n.isInSelectingRangeMonth(r))return!1;var i=n.props,o=i.day,l=i.startDate,c=i.selectsStart,u=nr(o,r),I=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return c?Rn(u,I):Rn(u,l)},n.isSelectingMonthRangeEnd=function(r){var a;if(!n.isInSelectingRangeMonth(r))return!1;var i=n.props,o=i.day,l=i.endDate,c=i.selectsEnd,u=i.selectsRange,I=nr(o,r),d=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return c||u?Rn(I,d):Rn(I,l)},n.isInSelectingRangeQuarter=function(r){var a,i=n.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,u=i.selectsRange,I=i.startDate,d=i.endDate,m=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return!(l||c||u)||!m?!1:l&&d?Cd(m,d,r,o):c&&I||u&&I&&!d?Cd(I,m,r,o):!1},n.isWeekInMonth=function(r){var a=n.props.day,i=Qr(r,6);return Rn(r,a)||Rn(i,a)},n.isCurrentMonth=function(r,a){return Ke(r)===Ke(lt())&&a===xn(lt())},n.isCurrentQuarter=function(r,a){return Ke(r)===Ke(lt())&&a===Ho(lt())},n.isSelectedMonth=function(r,a,i){return xn(i)===a&&Ke(r)===Ke(i)},n.isSelectMonthInList=function(r,a,i){return i.some(function(o){return n.isSelectedMonth(r,a,o)})},n.isSelectedQuarter=function(r,a,i){return Ho(r)===a&&Ke(r)===Ke(i)},n.renderWeeks=function(){for(var r=[],a=n.props.fixedHeight,i=0,o=!1,l=Oi(ai(n.props.day),n.props.locale,n.props.calendarStartDay),c=function(h){return n.props.showWeekPicker?Oi(h,n.props.locale,n.props.calendarStartDay):n.props.preSelection},u=function(h){return n.props.showWeekPicker?Oi(h,n.props.locale,n.props.calendarStartDay):n.props.selected},I=n.props.selected?u(n.props.selected):void 0,d=n.props.preSelection?c(n.props.preSelection):void 0;r.push(H.createElement(R_,Ue({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:i,day:l,month:xn(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:I,preSelection:d,showWeekNumber:n.props.showWeekNumbers}))),!o;){i++,l=IC(l,1);var m=a&&i>=x_,p=!a&&!n.isWeekInMonth(l);if(m||p)if(n.props.peekNextMonth)o=!0;else break}return r},n.onMonthClick=function(r,a){var i=n.isMonthDisabledForLabelDate(a),o=i.isDisabled,l=i.labelDate;o||n.handleDayClick(ai(l),r)},n.onMonthMouseEnter=function(r){var a=n.isMonthDisabledForLabelDate(r),i=a.isDisabled,o=a.labelDate;i||n.handleDayMouseEnter(ai(o))},n.handleMonthNavigation=function(r,a){var i,o,l,c;(o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,a),(c=(l=n.MONTH_REFS[r])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},n.handleKeyboardNavigation=function(r,a,i){var o,l=n.props,c=l.selected,u=l.preSelection,I=l.setPreSelection,d=l.minDate,m=l.maxDate,p=l.showFourColumnMonthYearPicker,h=l.showTwoColumnMonthYearPicker;if(u){var b=YV(p,h),y=n.getVerticalOffset(b),v=(o=gp[b])===null||o===void 0?void 0:o.grid,G=function(W,X,N){var x,Y,F=X,E=N;switch(W){case Ce.ArrowRight:F=qr(X,Ad),E=N===11?0:N+Ad;break;case Ce.ArrowLeft:F=Fo(X,Ad),E=N===0?11:N-Ad;break;case Ce.ArrowUp:F=Fo(X,y),E=!((x=v==null?void 0:v[0])===null||x===void 0)&&x.includes(N)?N+12-y:N-y;break;case Ce.ArrowDown:F=qr(X,y),E=!((Y=v==null?void 0:v[v.length-1])===null||Y===void 0)&&Y.includes(N)?N-12+y:N+y;break}return{newCalculatedDate:F,newCalculatedMonth:E}},S=function(W,X,N){for(var x=40,Y=W,F=!1,E=0,M=G(Y,X,N),T=M.newCalculatedDate,z=M.newCalculatedMonth;!F;){if(E>=x){T=X,z=N;break}if(d&&T<d){Y=Ce.ArrowRight;var P=G(Y,T,z);T=P.newCalculatedDate,z=P.newCalculatedMonth}if(m&&T>m){Y=Ce.ArrowLeft;var P=G(Y,T,z);T=P.newCalculatedDate,z=P.newCalculatedMonth}if(h_(T,n.props)){var P=G(Y,T,z);T=P.newCalculatedDate,z=P.newCalculatedMonth}else F=!0;E++}return{newCalculatedDate:T,newCalculatedMonth:z}};if(a===Ce.Enter){n.isMonthDisabled(i)||(n.onMonthClick(r,i),I==null||I(c));return}var R=S(a,u,i),B=R.newCalculatedDate,V=R.newCalculatedMonth;switch(a){case Ce.ArrowRight:case Ce.ArrowLeft:case Ce.ArrowUp:case Ce.ArrowDown:n.handleMonthNavigation(V,B);break}}},n.getVerticalOffset=function(r){var a,i;return(i=(a=gp[r])===null||a===void 0?void 0:a.verticalNavigationOffset)!==null&&i!==void 0?i:0},n.onMonthKeyDown=function(r,a){var i=n.props,o=i.disabledKeyboardNavigation,l=i.handleOnMonthKeyDown,c=r.key;c!==Ce.Tab&&r.preventDefault(),o||n.handleKeyboardNavigation(r,c,a),l&&l(r)},n.onQuarterClick=function(r,a){var i=Lg(n.props.day,a);Id(i,n.props)||n.handleDayClick(bV(i),r)},n.onQuarterMouseEnter=function(r){var a=Lg(n.props.day,r);Id(a,n.props)||n.handleDayMouseEnter(bV(a))},n.handleQuarterNavigation=function(r,a){var i,o,l,c;n.isDisabled(a)||n.isExcluded(a)||((o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,a),(c=(l=n.QUARTER_REFS[r-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},n.onQuarterKeyDown=function(r,a){var i,o,l=r.key;if(!n.props.disabledKeyboardNavigation)switch(l){case Ce.Enter:n.onQuarterClick(r,a),(o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,n.props.selected);break;case Ce.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(a===4?1:a+1,TG(n.props.preSelection,1));break;case Ce.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(a===1?4:a-1,fF(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(r){var a,i=n.props,o=i.day,l=i.minDate,c=i.maxDate,u=i.excludeDates,I=i.includeDates,d=nr(o,r);return{isDisabled:(a=(l||c||u||I)&&xF(d,n.props))!==null&&a!==void 0?a:!1,labelDate:d}},n.isMonthDisabled=function(r){var a=n.isMonthDisabledForLabelDate(r).isDisabled;return a},n.getMonthClassNames=function(r){var a=n.props,i=a.day,o=a.startDate,l=a.endDate,c=a.preSelection,u=a.monthClassName,I=u?u(nr(i,r)):void 0,d=n.getSelection();return Ve("react-datepicker__month-text","react-datepicker__month-".concat(r),I,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":d?n.isSelectMonthInList(i,r,d):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&c&&n.isSelectedMonth(i,r,c)&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":o&&l?ud(o,l,r,i):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(i,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var a=xn(n.props.preSelection),i=n.isMonthDisabledForLabelDate(a).isDisabled,o=r===a&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var a=Ho(n.props.preSelection),i=Id(n.props.day,n.props),o=r===a&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getAriaLabel=function(r){var a=n.props,i=a.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,l=a.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,u=a.day,I=a.locale,d=nr(u,r),m=n.isDisabled(d)||n.isExcluded(d)?c:o;return"".concat(m," ").concat(vt(d,"MMMM yyyy",I))},n.getQuarterClassNames=function(r){var a=n.props,i=a.day,o=a.startDate,l=a.endDate,c=a.selected,u=a.minDate,I=a.maxDate,d=a.excludeDates,m=a.includeDates,p=a.filterDate,h=a.preSelection,b=a.disabledKeyboardNavigation,y=(u||I||d||m||p)&&Id(Lg(i,r),n.props);return Ve("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":y,"react-datepicker__quarter-text--selected":c?n.isSelectedQuarter(i,r,c):void 0,"react-datepicker__quarter-text--keyboard-selected":!b&&h&&n.isSelectedQuarter(i,r,h)&&!y,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":o&&l?Cd(o,l,r,i):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r)})},n.getMonthContent=function(r){var a=n.props,i=a.showFullMonthYearPicker,o=a.renderMonthContent,l=a.locale,c=a.day,u=RF(r,l),I=eB(r,l);return o?o(r,u,I,c):i?I:u},n.getQuarterContent=function(r){var a,i=n.props,o=i.renderQuarterContent,l=i.locale,c=f_(r,l);return(a=o==null?void 0:o(r,c))!==null&&a!==void 0?a:c},n.renderMonths=function(){var r,a=n.props,i=a.showTwoColumnMonthYearPicker,o=a.showFourColumnMonthYearPicker,l=a.day,c=a.selected,u=(r=gp[YV(o,i)])===null||r===void 0?void 0:r.grid;return u==null?void 0:u.map(function(I,d){return H.createElement("div",{className:"react-datepicker__month-wrapper",key:d},I.map(function(m,p){return H.createElement("div",{ref:n.MONTH_REFS[m],key:p,onClick:function(h){n.onMonthClick(h,m)},onKeyDown:function(h){YF(h)&&(h.preventDefault(),h.key=Ce.Enter),n.onMonthKeyDown(h,m)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(m)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(m)}:void 0,tabIndex:Number(n.getTabIndex(m)),className:n.getMonthClassNames(m),"aria-disabled":n.isMonthDisabled(m),role:"option","aria-label":n.getAriaLabel(m),"aria-current":n.isCurrentMonth(l,m)?"date":void 0,"aria-selected":c?n.isSelectedMonth(l,m,c):void 0},n.getMonthContent(m))}))})},n.renderQuarters=function(){var r=n.props,a=r.day,i=r.selected,o=[1,2,3,4];return H.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(l,c){return H.createElement("div",{key:c,ref:n.QUARTER_REFS[c],role:"option",onClick:function(u){n.onQuarterClick(u,l)},onKeyDown:function(u){n.onQuarterKeyDown(u,l)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(l)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(l)}:void 0,className:n.getQuarterClassNames(l),"aria-selected":i?n.isSelectedQuarter(a,l,i):void 0,tabIndex:Number(n.getQuarterTabIndex(l)),"aria-current":n.isCurrentQuarter(a,l)?"date":void 0},n.getQuarterContent(l))}))},n.getClassNames=function(){var r=n.props,a=r.selectingDate,i=r.selectsStart,o=r.selectsEnd,l=r.showMonthYearPicker,c=r.showQuarterYearPicker,u=r.showWeekPicker;return Ve("react-datepicker__month",{"react-datepicker__month--selecting-range":a&&(i||o)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":u})},n}return t.prototype.getSelection=function(){var n=this.props,r=n.selected,a=n.selectedDates,i=n.selectsMultiple;if(i)return a;if(r)return[r]},t.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,a=n.showQuarterYearPicker,i=n.day,o=n.ariaLabelPrefix,l=o===void 0?"Month ":o,c=l?l.trim()+" ":"";return H.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(vt(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():a?this.renderQuarters():this.renderWeeks())},t}(k.Component),J_=function(e){sn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isSelectedMonth=function(r){return n.props.month===r},n.renderOptions=function(){return n.props.monthNames.map(function(r,a){return H.createElement("div",{className:n.isSelectedMonth(a)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,a),"aria-selected":n.isSelectedMonth(a)?"true":void 0},n.isSelectedMonth(a)?H.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return t.prototype.render=function(){return H.createElement(LA,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(k.Component),Y_=function(e){sn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(a,i){return H.createElement("option",{key:a,value:i},a)})},n.renderSelectMode=function(r){return H.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(a){return n.onChange(parseInt(a.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,a){return H.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},H.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),H.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},a[n.props.month]))},n.renderDropdown=function(r){return H.createElement(J_,Ue({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var a=n.state.dropdownVisible,i=[n.renderReadView(!a,r)];return a&&i.unshift(n.renderDropdown(r)),i},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return RF(i,n.props.locale)}:function(i){return eB(i,n.props.locale)}),a;switch(this.props.dropdownMode){case"scroll":a=this.renderScrollMode(r);break;case"select":a=this.renderSelectMode(r);break}return H.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},a)},t}(k.Component);function N_(e,t){for(var n=[],r=ai(e),a=ai(t);!$i(r,a);)n.push(lt(r)),r=qr(r,1);return n}var H_=function(e){sn(t,e);function t(n){var r=e.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(a){var i=JZ(a),o=ma(r.props.date,a)&&Rn(r.props.date,a);return H.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:r.onChange.bind(r,i),"aria-selected":o?"true":void 0},o?H.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",vt(a,r.props.dateFormat,r.props.locale))})},r.onChange=function(a){return r.props.onChange(a)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:N_(r.props.minDate,r.props.maxDate)},r}return t.prototype.render=function(){var n=Ve({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return H.createElement(LA,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(k.Component),F_=function(e){sn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=ai(n.props.minDate),a=ai(n.props.maxDate),i=[];!$i(r,a);){var o=JZ(r);i.push(H.createElement("option",{key:o,value:o},vt(r,n.props.dateFormat,n.props.locale))),r=qr(r,1)}return i},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return H.createElement("select",{value:JZ(ai(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var a=vt(n.props.date,n.props.dateFormat,n.props.locale);return H.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},H.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),H.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},a))},n.renderDropdown=function(){return H.createElement(H_,Ue({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,a=[n.renderReadView(!r)];return r&&a.unshift(n.renderDropdown()),a},n.onChange=function(r){n.toggleDropdown();var a=lt(r);ma(n.props.date,a)&&Rn(n.props.date,a)||n.props.onChange(a)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return H.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(k.Component),K_=function(e){sn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,a,i;n.list&&(n.list.scrollTop=(i=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((a=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&a!==void 0?a:0):n.list.clientHeight,n.centerLi))!==null&&i!==void 0?i:0)})},n.handleClick=function(r){var a,i;(n.props.minTime||n.props.maxTime)&&BV(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&GV(r,n.props)||(i=(a=n.props).onChange)===null||i===void 0||i.call(a,r)},n.isSelectedTime=function(r){return n.props.selected&&w_(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&BV(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&GV(r,n.props)},n.liClasses=function(r){var a,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(Ba(r)*3600+Sa(r)*60+ri(r))%(((a=n.props.intervals)!==null&&a!==void 0?a:t.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(r,a){var i,o;r.key===Ce.Space&&(r.preventDefault(),r.key=Ce.Enter),(r.key===Ce.ArrowUp||r.key===Ce.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===Ce.ArrowDown||r.key===Ce.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===Ce.Enter&&n.handleClick(a),(o=(i=n.props).handleOnKeyDown)===null||o===void 0||o.call(i,r)},n.renderTimes=function(){for(var r,a=[],i=typeof n.props.format=="string"?n.props.format:"p",o=(r=n.props.intervals)!==null&&r!==void 0?r:t.defaultProps.intervals,l=n.props.selected||n.props.openToDate||lt(),c=Td(l),u=n.props.injectTimes&&n.props.injectTimes.sort(function(y,v){return y.getTime()-v.getTime()}),I=60*S_(l),d=I/o,m=0;m<d;m++){var p=RZ(c,m*o);if(a.push(p),u){var h=B_(c,p,m,o,u);a=a.concat(h)}}var b=a.reduce(function(y,v){return v.getTime()<=l.getTime()?v:y},a[0]);return a.map(function(y){return H.createElement("li",{key:y.valueOf(),onClick:n.handleClick.bind(n,y),className:n.liClasses(y),ref:function(v){y===b&&(n.centerLi=v)},onKeyDown:function(v){n.handleOnKeyDown(v,y)},tabIndex:y===b?0:-1,role:"option","aria-selected":n.isSelectedTime(y)?"true":void 0,"aria-disabled":n.isDisabledTime(y)?"true":void 0},vt(y,i,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?H.createElement(H.Fragment,null):H.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},H.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var n=this,r,a=this.state.height;return H.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),H.createElement("div",{className:"react-datepicker__time"},H.createElement("div",{className:"react-datepicker__time-box"},H.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){n.list=i},style:a?{height:a}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},t}(k.Component),NV=3,E_=function(e){sn(t,e);function t(n){var r=e.call(this,n)||this;return r.YEAR_REFS=va([],Array(r.props.yearItemNumber),!0).map(function(){return k.createRef()}),r.isDisabled=function(a){return vr(a,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(a){return tB(a,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var a;return(a=r.props.selectingDate)!==null&&a!==void 0?a:r.props.preSelection},r.updateFocusOnPaginate=function(a){var i=function(){var o,l;(l=(o=r.YEAR_REFS[a])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(i)},r.handleYearClick=function(a,i){r.props.onDayClick&&r.props.onDayClick(a,i)},r.handleYearNavigation=function(a,i){var o,l,c,u,I=r.props,d=I.date,m=I.yearItemNumber;if(!(d===void 0||m===void 0)){var p=zi(d,m).startPeriod;r.isDisabled(i)||r.isExcluded(i)||((l=(o=r.props).setPreSelection)===null||l===void 0||l.call(o,i),a-p<0?r.updateFocusOnPaginate(m-(p-a)):a-p>=m?r.updateFocusOnPaginate(Math.abs(m-(a-p))):(u=(c=r.YEAR_REFS[a-p])===null||c===void 0?void 0:c.current)===null||u===void 0||u.focus())}},r.isSameDay=function(a,i){return je(a,i)},r.isCurrentYear=function(a){return a===Ke(lt())},r.isRangeStart=function(a){return r.props.startDate&&r.props.endDate&&ma(Ca(lt(),a),r.props.startDate)},r.isRangeEnd=function(a){return r.props.startDate&&r.props.endDate&&ma(Ca(lt(),a),r.props.endDate)},r.isInRange=function(a){return dd(a,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(a){var i=r.props,o=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,u=i.startDate,I=i.endDate;return!(o||l||c)||!r.selectingDate()?!1:o&&I?dd(a,r.selectingDate(),I):l&&u||c&&u&&!I?dd(a,u,r.selectingDate()):!1},r.isSelectingRangeStart=function(a){var i;if(!r.isInSelectingRange(a))return!1;var o=r.props,l=o.startDate,c=o.selectsStart,u=Ca(lt(),a);return c?ma(u,(i=r.selectingDate())!==null&&i!==void 0?i:null):ma(u,l??null)},r.isSelectingRangeEnd=function(a){var i;if(!r.isInSelectingRange(a))return!1;var o=r.props,l=o.endDate,c=o.selectsEnd,u=o.selectsRange,I=Ca(lt(),a);return c||u?ma(I,(i=r.selectingDate())!==null&&i!==void 0?i:null):ma(I,l??null)},r.isKeyboardSelected=function(a){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var i=r.props,o=i.minDate,l=i.maxDate,c=i.excludeDates,u=i.includeDates,I=i.filterDate,d=Ac(Ca(r.props.date,a)),m=(o||l||c||u||I)&&jd(a,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!je(d,Ac(r.props.selected))&&je(d,Ac(r.props.preSelection))&&!m}},r.onYearClick=function(a,i){var o=r.props.date;o!==void 0&&r.handleYearClick(Ac(Ca(o,i)),a)},r.onYearKeyDown=function(a,i){var o,l,c=a.key,u=r.props,I=u.date,d=u.yearItemNumber,m=u.handleOnKeyDown;if(c!==Ce.Tab&&a.preventDefault(),!r.props.disabledKeyboardNavigation)switch(c){case Ce.Enter:if(r.props.selected==null)break;r.onYearClick(a,i),(l=(o=r.props).setPreSelection)===null||l===void 0||l.call(o,r.props.selected);break;case Ce.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(i+1,ti(r.props.preSelection,1));break;case Ce.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(i-1,dl(r.props.preSelection,1));break;case Ce.ArrowUp:{if(I===void 0||d===void 0||r.props.preSelection==null)break;var p=zi(I,d).startPeriod,h=NV,b=i-h;if(b<p){var y=d%h;i>=p&&i<p+y?h=y:h+=y,b=i-h}r.handleYearNavigation(b,dl(r.props.preSelection,h));break}case Ce.ArrowDown:{if(I===void 0||d===void 0||r.props.preSelection==null)break;var v=zi(I,d).endPeriod,h=NV,b=i+h;if(b>v){var y=d%h;i<=v&&i>v-y?h=y:h+=y,b=i+h}r.handleYearNavigation(b,ti(r.props.preSelection,h));break}}m&&m(a)},r.getYearClassNames=function(a){var i=r.props,o=i.date,l=i.minDate,c=i.maxDate,u=i.selected,I=i.excludeDates,d=i.includeDates,m=i.filterDate,p=i.yearClassName;return Ve("react-datepicker__year-text","react-datepicker__year-".concat(a),o?p==null?void 0:p(Ca(o,a)):void 0,{"react-datepicker__year-text--selected":u?a===Ke(u):void 0,"react-datepicker__year-text--disabled":(l||c||I||d||m)&&jd(a,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(a),"react-datepicker__year-text--range-start":r.isRangeStart(a),"react-datepicker__year-text--range-end":r.isRangeEnd(a),"react-datepicker__year-text--in-range":r.isInRange(a),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(a),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(a),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(a),"react-datepicker__year-text--today":r.isCurrentYear(a)})},r.getYearTabIndex=function(a){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var i=Ke(r.props.preSelection),o=jd(a,r.props);return a===i&&!o?"0":"-1"},r.getYearContent=function(a){return r.props.renderYearContent?r.props.renderYearContent(a):a},r}return t.prototype.render=function(){var n=this,r=[],a=this.props,i=a.date,o=a.yearItemNumber,l=a.onYearMouseEnter,c=a.onYearMouseLeave;if(i===void 0)return null;for(var u=zi(i,o),I=u.startPeriod,d=u.endPeriod,m=function(b){r.push(H.createElement("div",{ref:p.YEAR_REFS[b-I],onClick:function(y){n.onYearClick(y,b)},onKeyDown:function(y){YF(y)&&(y.preventDefault(),y.key=Ce.Enter),n.onYearKeyDown(y,b)},tabIndex:Number(p.getYearTabIndex(b)),className:p.getYearClassNames(b),onMouseEnter:p.props.usePointerEvent?void 0:function(y){return l(y,b)},onPointerEnter:p.props.usePointerEvent?function(y){return l(y,b)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(y){return c(y,b)},onPointerLeave:p.props.usePointerEvent?function(y){return c(y,b)}:void 0,key:b,"aria-current":p.isCurrentYear(b)?"date":void 0},p.getYearContent(b)))},p=this,h=I;h<=d;h++)m(h);return H.createElement("div",{className:"react-datepicker__year"},H.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},t}(k.Component);function M_(e,t,n,r){for(var a=[],i=0;i<2*t+1;i++){var o=e+t-i,l=!0;n&&(l=Ke(n)<=o),r&&l&&(l=Ke(r)>=o),l&&a.push(o)}return a}var D_=function(e){sn(t,e);function t(n){var r=e.call(this,n)||this;r.renderOptions=function(){var l=r.props.year,c=r.state.yearsList.map(function(d){return H.createElement("div",{className:l===d?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:d,onClick:r.onChange.bind(r,d),"aria-selected":l===d?"true":void 0},l===d?H.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",d)}),u=r.props.minDate?Ke(r.props.minDate):null,I=r.props.maxDate?Ke(r.props.maxDate):null;return(!I||!r.state.yearsList.find(function(d){return d===I}))&&c.unshift(H.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},H.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!u||!r.state.yearsList.find(function(d){return d===u}))&&c.push(H.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},H.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},r.onChange=function(l){r.props.onChange(l)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(l){var c=r.state.yearsList.map(function(u){return u+l});r.setState({yearsList:c})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var a=n.yearDropdownItemNumber,i=n.scrollableYearDropdown,o=a||(i?10:5);return r.state={yearsList:M_(r.props.year,o,r.props.minDate,r.props.maxDate)},r.dropdownRef=k.createRef(),r}return t.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,a=r?r.find(function(i){return i.ariaSelected}):null;n.scrollTop=a&&a instanceof HTMLElement?a.offsetTop+(a.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},t.prototype.render=function(){var n=Ve({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return H.createElement(LA,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(k.Component),T_=function(e){sn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?Ke(n.props.minDate):1900,a=n.props.maxDate?Ke(n.props.maxDate):2100,i=[],o=r;o<=a;o++)i.push(H.createElement("option",{key:o,value:o},o));return i},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return H.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return H.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(a){return n.toggleDropdown(a)}},H.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),H.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return H.createElement(D_,Ue({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,a=[n.renderReadView(!r)];return r&&a.unshift(n.renderDropdown()),a},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,a){var i;(i=n.onSelect)===null||i===void 0||i.call(n,r,a),n.setOpen()},n.onSelect=function(r,a){var i,o;(o=(i=n.props).onSelect)===null||o===void 0||o.call(i,r,a)},n.setOpen=function(){var r,a;(a=(r=n.props).setOpen)===null||a===void 0||a.call(r,!0)},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return H.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(k.Component),j_=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],L_=function(e){var t=(e.className||"").split(/\s+/);return j_.some(function(n){return t.indexOf(n)>=0})},z_=function(e){sn(t,e);function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(a){r.props.onClickOutside(a)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(a){var i,o;L_(a.target)&&((o=(i=r.props).onDropdownFocus)===null||o===void 0||o.call(i,a))},r.getDateInView=function(){var a=r.props,i=a.preSelection,o=a.selected,l=a.openToDate,c=XF(r.props),u=JF(r.props),I=lt(),d=l||o||i;return d||(c&&Po(I,c)?c:u&&$i(I,u)?u:I)},r.increaseMonth=function(){r.setState(function(a){var i=a.date;return{date:qr(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(a){var i=a.date;return{date:Fo(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(a,i,o){r.props.onSelect(a,i,o),r.props.setPreSelection&&r.props.setPreSelection(a)},r.handleDayMouseEnter=function(a){r.setState({selectingDate:a}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(a)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(a,i){r.setState({selectingDate:Ca(lt(),i)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(a,i)},r.handleYearMouseLeave=function(a,i){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(a,i)},r.handleYearChange=function(a){var i,o,l,c;(o=(i=r.props).onYearChange)===null||o===void 0||o.call(i,a),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(a),(c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!0)),r.props.setPreSelection&&r.props.setPreSelection(a)},r.getEnabledPreSelectionDateForMonth=function(a){if(!vr(a,r.props))return a;for(var i=ai(a),o=d_(a),l=LP(o,i),c=null,u=0;u<=l;u++){var I=Qr(i,u);if(!vr(I,r.props)){c=I;break}}return c},r.handleMonthChange=function(a){var i,o,l,c=(i=r.getEnabledPreSelectionDateForMonth(a))!==null&&i!==void 0?i:a;r.handleCustomMonthChange(c),r.props.adjustDateOnChange&&(r.props.onSelect(c),(l=(o=r.props).setOpen)===null||l===void 0||l.call(o,!0)),r.props.setPreSelection&&r.props.setPreSelection(c)},r.handleCustomMonthChange=function(a){var i,o;(o=(i=r.props).onMonthChange)===null||o===void 0||o.call(i,a),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(a){r.handleYearChange(a),r.handleMonthChange(a)},r.changeYear=function(a){r.setState(function(i){var o=i.date;return{date:Ca(o,Number(a))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(a){r.setState(function(i){var o=i.date;return{date:nr(o,Number(a))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(a){r.setState(function(i){var o=i.date;return{date:Ca(nr(o,xn(a)),Ke(a))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(a){a===void 0&&(a=r.state.date);var i=Oi(a,r.props.locale,r.props.calendarStartDay),o=[];return r.props.showWeekNumbers&&o.push(H.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var c=Qr(i,l),u=r.formatWeekday(c,r.props.locale),I=r.props.weekDayClassName?r.props.weekDayClassName(c):void 0;return H.createElement("div",{key:l,"aria-label":vt(c,"EEEE",r.props.locale),className:Ve("react-datepicker__day-name",I)},u)}))},r.formatWeekday=function(a,i){return r.props.formatWeekDay?C_(a,r.props.formatWeekDay,i):r.props.useWeekdaysShort?m_(a,i):A_(a,i)},r.decreaseYear=function(){r.setState(function(a){var i,o=a.date;return{date:dl(o,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var a,i,o;if(!r.props.renderCustomHeader){var l=(a=r.props.monthsShown)!==null&&a!==void 0?a:t.defaultProps.monthsShown,c=r.props.showPreviousMonths?l-1:0,u=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:c,I=Fo(r.state.date,u),d;switch(!0){case r.props.showMonthYearPicker:d=WV(r.state.date,r.props);break;case r.props.showYearPicker:d=y_(r.state.date,r.props);break;case r.props.showQuarterYearPicker:d=p_(r.state.date,r.props);break;default:d=SV(I,r.props);break}if(!(!((o=r.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&d||r.props.showTimeSelectOnly)){var m=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],h=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(h=r.decreaseYear),d&&r.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),h=void 0);var b=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,y=r.props,v=y.previousMonthButtonLabel,G=v===void 0?t.defaultProps.previousMonthButtonLabel:v,S=y.previousYearButtonLabel,R=S===void 0?t.defaultProps.previousYearButtonLabel:S,B=r.props,V=B.previousMonthAriaLabel,W=V===void 0?typeof G=="string"?G:"Previous Month":V,X=B.previousYearAriaLabel,N=X===void 0?typeof R=="string"?R:"Previous Year":X;return H.createElement("button",{type:"button",className:p.join(" "),onClick:h,onKeyDown:r.props.handleOnKeyDown,"aria-label":b?N:W},H.createElement("span",{className:m.join(" ")},b?R:G))}}},r.increaseYear=function(){r.setState(function(a){var i,o=a.date;return{date:ti(o,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var a;if(!r.props.renderCustomHeader){var i;switch(!0){case r.props.showMonthYearPicker:i=kV(r.state.date,r.props);break;case r.props.showYearPicker:i=Z_(r.state.date,r.props);break;case r.props.showQuarterYearPicker:i=b_(r.state.date,r.props);break;default:i=wV(r.state.date,r.props);break}if(!(!((a=r.props.forceShowMonthNavigation)!==null&&a!==void 0?a:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&i||r.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var c=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(c=r.increaseYear),i&&r.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),c=void 0);var u=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,I=r.props,d=I.nextMonthButtonLabel,m=d===void 0?t.defaultProps.nextMonthButtonLabel:d,p=I.nextYearButtonLabel,h=p===void 0?t.defaultProps.nextYearButtonLabel:p,b=r.props,y=b.nextMonthAriaLabel,v=y===void 0?typeof m=="string"?m:"Next Month":y,G=b.nextYearAriaLabel,S=G===void 0?typeof h=="string"?h:"Next Year":G;return H.createElement("button",{type:"button",className:o.join(" "),onClick:c,onKeyDown:r.props.handleOnKeyDown,"aria-label":u?S:v},H.createElement("span",{className:l.join(" ")},u?h:m))}}},r.renderCurrentMonth=function(a){a===void 0&&(a=r.state.date);var i=["react-datepicker__current-month"];return r.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),H.createElement("h2",{className:i.join(" ")},vt(a,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(a){if(a===void 0&&(a=!1),!(!r.props.showYearDropdown||a))return H.createElement(T_,Ue({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:Ke(r.state.date)}))},r.renderMonthDropdown=function(a){if(a===void 0&&(a=!1),!(!r.props.showMonthDropdown||a))return H.createElement(Y_,Ue({},t.defaultProps,r.props,{month:xn(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(a){if(a===void 0&&(a=!1),!(!r.props.showMonthYearDropdown||a))return H.createElement(F_,Ue({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(a){r.props.onSelect(yV(),a),r.props.setPreSelection&&r.props.setPreSelection(yV())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return H.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(a){var i=a.monthDate,o=a.i;return H.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(i),H.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(o!==0),r.renderMonthYearDropdown(o!==0),r.renderYearDropdown(o!==0)),H.createElement("div",{className:"react-datepicker__day-names"},r.header(i)))},r.renderCustomHeader=function(a){var i,o,l=a.monthDate,c=a.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var u=SV(r.state.date,r.props),I=wV(r.state.date,r.props),d=WV(r.state.date,r.props),m=kV(r.state.date,r.props),p=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return H.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(o=(i=r.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,Ue(Ue({},r.state),{customHeaderCount:c,monthDate:l,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:u,nextMonthButtonDisabled:I,prevYearButtonDisabled:d,nextYearButtonDisabled:m})),p&&H.createElement("div",{className:"react-datepicker__day-names"},r.header(l)))},r.renderYearHeader=function(a){var i=a.monthDate,o=r.props,l=o.showYearPicker,c=o.yearItemNumber,u=c===void 0?t.defaultProps.yearItemNumber:c,I=zi(i,u),d=I.startPeriod,m=I.endPeriod;return H.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(d," - ").concat(m):Ke(i))},r.renderHeader=function(a){var i=a.monthDate,o=a.i,l=o===void 0?0:o,c={monthDate:i,i:l};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(c);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(c);default:return r.renderDefaultHeader(c)}},r.renderMonths=function(){var a,i;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var o=[],l=(a=r.props.monthsShown)!==null&&a!==void 0?a:t.defaultProps.monthsShown,c=r.props.showPreviousMonths?l-1:0,u=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?ti(r.state.date,c):Fo(r.state.date,c),I=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:c,d=0;d<l;++d){var m=d-I+c,p=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?ti(u,m):qr(u,m),h="month-".concat(d),b=d<l-1,y=d>0;o.push(H.createElement("div",{key:h,ref:function(v){r.monthContainer=v??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:p,i:d}),H.createElement(X_,Ue({},t.defaultProps,r.props,{ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:p,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:d,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:b,monthShowsDuplicateDaysStart:y}))))}return o}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return H.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),H.createElement(E_,Ue({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return H.createElement(K_,Ue({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var a=r.props.selected?new Date(r.props.selected):void 0,i=a&&Pa(a)&&!!r.props.selected,o=i?"".concat(RV(a.getHours()),":").concat(RV(a.getMinutes())):"";if(r.props.showTimeInput)return H.createElement(W_,Ue({},t.defaultProps,r.props,{date:a,timeString:o,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var a,i=zi(r.state.date,(a=r.props.yearItemNumber)!==null&&a!==void 0?a:t.defaultProps.yearItemNumber),o=i.startPeriod,l=i.endPeriod,c;return r.props.showYearPicker?c="".concat(o," - ").concat(l):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?c=Ke(r.state.date):c="".concat(eB(xn(r.state.date),r.props.locale)," ").concat(Ke(r.state.date)),H.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&c)},r.renderChildren=function(){if(r.props.children)return H.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=k.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Ju}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){n.setState({monthContainer:n.monthContainer})}())},t.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&(!je(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var a=!Rn(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return a&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!je(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var n=this.props.container||i_;return H.createElement(LA,{onClickOutside:this.handleClickOutside,style:{display:"contents"},containerRef:this.containerRef,ignoreClass:this.props.outsideClickIgnoreClass},H.createElement(n,{className:Ve("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))},t}(k.Component),U_=function(e){var t=e.icon,n=e.className,r=n===void 0?"":n,a=e.onClick,i="react-datepicker__calendar-icon";return typeof t=="string"?H.createElement("i",{className:"".concat(i," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:a}):H.isValidElement(t)?H.cloneElement(t,{className:"".concat(t.props.className||""," ").concat(i," ").concat(r),onClick:function(o){typeof t.props.onClick=="function"&&t.props.onClick(o),typeof a=="function"&&a(o)}}):H.createElement("svg",{className:"".concat(i," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:a},H.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},NF=function(e){sn(t,e);function t(n){var r=e.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return gT.createPortal(this.props.children,this.el)},t}(k.Component),P_="[tabindex], a, button, input, select, textarea",O_=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},HF=function(e){sn(t,e);function t(n){var r=e.call(this,n)||this;return r.getTabChildren=function(){var a;return Array.prototype.slice.call((a=r.tabLoopRef.current)===null||a===void 0?void 0:a.querySelectorAll(P_),1,-1).filter(O_)},r.handleFocusStart=function(){var a=r.getTabChildren();a&&a.length>1&&a[a.length-1].focus()},r.handleFocusEnd=function(){var a=r.getTabChildren();a&&a.length>1&&a[0].focus()},r.tabLoopRef=k.createRef(),r}return t.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:t.defaultProps.enableTabLoop)?H.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},H.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,H.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(k.Component);function Q_(e){var t=function(n){var r,a=typeof n.hidePopper=="boolean"?n.hidePopper:!0,i=k.useRef(null),o=a_(Ue({open:!a,whileElementsMounted:N4,placement:n.popperPlacement,middleware:va([T4({padding:15}),D4(10),j4({element:i})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),l=Ue(Ue({},n),{hidePopper:a,popperProps:Ue(Ue({},o),{arrowRef:i})});return H.createElement(e,Ue({},l))};return t}var __=function(e){sn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n=this.props,r=n.className,a=n.wrapperClassName,i=n.hidePopper,o=i===void 0?t.defaultProps.hidePopper:i,l=n.popperComponent,c=n.targetComponent,u=n.enableTabLoop,I=n.popperOnKeyDown,d=n.portalId,m=n.portalHost,p=n.popperProps,h=n.showArrow,b=void 0;if(!o){var y=Ve("react-datepicker-popper",r);b=H.createElement(HF,{enableTabLoop:u},H.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:y,"data-placement":p.placement,onKeyDown:I},l,h&&H.createElement(_4,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(b=k.createElement(this.props.popperContainer,{},b)),d&&!o&&(b=H.createElement(NF,{portalId:d,portalHost:m},b));var v=Ve("react-datepicker-wrapper",a);return H.createElement(H.Fragment,null,H.createElement("div",{ref:p.refs.setReference,className:v},c),b)},t}(k.Component),q_=Q_(__),HV="react-datepicker-ignore-onclickoutside";function $_(e,t){return e&&t?xn(e)!==xn(t)||Ke(e)!==Ke(t):e!==t}var lp="Date input not valid.",fl=function(e){sn(t,e);function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:lt()},r.modifyHolidays=function(){var a;return(a=r.props.holidays)===null||a===void 0?void 0:a.reduce(function(i,o){var l=new Date(o.date);return Pa(l)?va(va([],i,!0),[Ue(Ue({},o),{date:l})],!1):i},[])},r.calcInitialState=function(){var a,i=r.getPreSelection(),o=XF(r.props),l=JF(r.props),c=o&&Po(i,Td(o))?o:l&&$i(i,ZV(l))?l:i;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(a=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&a!==void 0?a:c,highlightDates:VV(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(Ue(Ue({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(Ue(Ue({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.safeFocus=function(){setTimeout(function(){var a,i;(i=(a=r.input)===null||a===void 0?void 0:a.focus)===null||i===void 0||i.call(a,{preventScroll:!0})},0)},r.safeBlur=function(){setTimeout(function(){var a,i;(i=(a=r.input)===null||a===void 0?void 0:a.blur)===null||i===void 0||i.call(a)},0)},r.setFocus=function(){r.safeFocus()},r.setBlur=function(){r.safeBlur(),r.cancelFocusInput()},r.setOpen=function(a,i){i===void 0&&(i=!1),r.setState({open:a,preSelection:a&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:sp},function(){a||r.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&r.setBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return ni(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(a){var i,o,l=r.state.wasHidden,c=l?r.state.open:!0;l&&r.resetHiddenStatus(),!r.state.preventFocus&&c&&((o=(i=r.props).onFocus)===null||o===void 0||o.call(i,a),!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(a){var i,o;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((o=(i=r.props).onBlur)===null||o===void 0||o.call(i,a)),r.setState({focused:!1})},r.handleCalendarClickOutside=function(a){var i,o;r.props.inline||r.setOpen(!1),(o=(i=r.props).onClickOutside)===null||o===void 0||o.call(i,a),r.props.withPortal&&a.preventDefault()},r.handleChange=function(){for(var a,i,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var c=o[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,o),!c||typeof c.isDefaultPrevented!="function"||c.isDefaultPrevented()))){r.setState({inputValue:(c==null?void 0:c.target)instanceof HTMLInputElement?c.target.value:null,lastPreSelectChange:e8});var u=r.props,I=u.dateFormat,d=I===void 0?t.defaultProps.dateFormat:I,m=u.strictParsing,p=m===void 0?t.defaultProps.strictParsing:m,h=u.selectsRange,b=u.startDate,y=u.endDate,v=(c==null?void 0:c.target)instanceof HTMLInputElement?c.target.value:"";if(h){var G=v.split("-",2).map(function(x){return x.trim()}),S=G[0],R=G[1],B=ip(S??"",d,r.props.locale,p),V=ip(R??"",d,r.props.locale,p),W=(b==null?void 0:b.getTime())!==(B==null?void 0:B.getTime()),X=(y==null?void 0:y.getTime())!==(V==null?void 0:V.getTime());if(!W&&!X||B&&vr(B,r.props)||V&&vr(V,r.props))return;(i=(a=r.props).onChange)===null||i===void 0||i.call(a,[B,V],c)}else{var N=ip(v,d,r.props.locale,p,r.props.minDate);r.props.showTimeSelectOnly&&r.props.selected&&N&&!je(N,r.props.selected)&&(N=r4(r.props.selected,{hours:Ba(N),minutes:Sa(N),seconds:ri(N)})),(N||!v)&&r.setSelected(N,c,!0)}}},r.handleSelect=function(a,i,o){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(i),r.setSelected(a,i,!1,o),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(a);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var l=r.props,c=l.startDate,u=l.endDate;c&&!u&&(r.props.swapRange||!JV(a,c))&&r.setOpen(!1)}},r.setSelected=function(a,i,o,l){var c,u,I=a;if(r.props.showYearPicker){if(I!==null&&jd(Ke(I),r.props))return}else if(r.props.showMonthYearPicker){if(I!==null&&xF(I,r.props))return}else if(I!==null&&vr(I,r.props))return;var d=r.props,m=d.onChange,p=d.selectsRange,h=d.startDate,b=d.endDate,y=d.selectsMultiple,v=d.selectedDates,G=d.minTime,S=d.swapRange;if(!Vo(r.props.selected,I)||r.props.allowSameDay||p||y)if(I!==null&&(r.props.selected&&(!o||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(I=op(I,{hour:Ba(r.props.selected),minute:Sa(r.props.selected),second:ri(r.props.selected)})),!o&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&G&&(I=op(I,{hour:G.getHours(),minute:G.getMinutes(),second:G.getSeconds()})),r.props.inline||r.setState({preSelection:I}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:l})),p){var R=!h&&!b,B=h&&!b,V=h&&b;R?m==null||m([I,null],i):B&&(I===null?m==null||m([null,null],i):JV(I,h)?S?m==null||m([I,h],i):m==null||m([I,null],i):m==null||m([h,I],i)),V&&(m==null||m([I,null],i))}else if(y){if(I!==null)if(!(v!=null&&v.length))m==null||m([I],i);else{var W=v.some(function(N){return je(N,I)});if(W){var X=v.filter(function(N){return!je(N,I)});m==null||m(X,i)}else m==null||m(va(va([],v,!0),[I],!1),i)}}else m==null||m(I,i);o||((u=(c=r.props).onSelect)===null||u===void 0||u.call(c,I,i),r.setState({inputValue:null}))},r.setPreSelection=function(a){var i=ni(r.props.minDate),o=ni(r.props.maxDate),l=!0;if(a){var c=Td(a);if(i&&o)l=mc(a,r.props.minDate,r.props.maxDate);else if(i){var u=Td(r.props.minDate);l=$i(a,u)||Vo(c,u)}else if(o){var I=ZV(r.props.maxDate);l=Po(a,I)||Vo(c,I)}}l&&r.setState({preSelection:a})},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(a){var i,o;if(!(r.props.selectsRange||r.props.selectsMultiple)){var l=r.props.selected?r.props.selected:r.getPreSelection(),c=r.props.selected?a:op(l,{hour:Ba(a),minute:Sa(a)});r.setState({preSelection:c}),(o=(i=r.props).onChange)===null||o===void 0||o.call(i,c),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var a,i;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(i=(a=r.props).onInputClick)===null||i===void 0||i.call(a)},r.onInputKeyDown=function(a){var i,o,l,c,u,I;(o=(i=r.props).onKeyDown)===null||o===void 0||o.call(i,a);var d=a.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(d===Ce.ArrowDown||d===Ce.ArrowUp||d===Ce.Enter)&&((l=r.onInputClick)===null||l===void 0||l.call(r));return}if(r.state.open){if(d===Ce.ArrowDown||d===Ce.ArrowUp){a.preventDefault();var m=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((c=r.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(m);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var h=lt(r.state.preSelection);d===Ce.Enter?(a.preventDefault(),a.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===sp?(r.handleSelect(h,a),!r.props.shouldCloseOnSelect&&r.setPreSelection(h)):r.setOpen(!1)):d===Ce.Escape?(a.preventDefault(),a.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):d===Ce.Tab&&r.setOpen(!1),r.inputOk()||(I=(u=r.props).onInputError)===null||I===void 0||I.call(u,{code:1,msg:lp})}},r.onPortalKeyDown=function(a){var i=a.key;i===Ce.Escape&&(a.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(a){var i,o,l,c,u,I,d=r.props,m=d.minDate,p=d.maxDate,h=d.disabledKeyboardNavigation,b=d.showWeekPicker,y=d.shouldCloseOnSelect,v=d.locale,G=d.calendarStartDay,S=d.adjustDateOnChange,R=d.inline;if((o=(i=r.props).onKeyDown)===null||o===void 0||o.call(i,a),!h){var B=a.key,V=a.shiftKey,W=lt(r.state.preSelection),X=function(T,z){var P=z;switch(T){case Ce.ArrowRight:P=b?IC(z,1):Qr(z,1);break;case Ce.ArrowLeft:P=b?uV(z):EQ(z);break;case Ce.ArrowUp:P=uV(z);break;case Ce.ArrowDown:P=IC(z,1);break;case Ce.PageUp:P=V?dl(z,1):Fo(z,1);break;case Ce.PageDown:P=V?ti(z,1):qr(z,1);break;case Ce.Home:P=Oi(z,v,G);break;case Ce.End:P=I_(z);break}return P},N=function(T,z){for(var P=40,L=T,q=!1,ee=0,D=X(T,z);!q;){if(ee>=P){D=z;break}m&&D<m&&(L=Ce.ArrowRight,D=vr(m,r.props)?X(L,D):m),p&&D>p&&(L=Ce.ArrowLeft,D=vr(p,r.props)?X(L,D):p),vr(D,r.props)?((L===Ce.PageUp||L===Ce.Home)&&(L=Ce.ArrowRight),(L===Ce.PageDown||L===Ce.End)&&(L=Ce.ArrowLeft),D=X(L,D)):q=!0,ee++}return D};if(B===Ce.Enter){a.preventDefault(),r.handleSelect(W,a),!y&&r.setPreSelection(W);return}else if(B===Ce.Escape){a.preventDefault(),r.setOpen(!1),r.inputOk()||(c=(l=r.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:lp});return}var x=null;switch(B){case Ce.ArrowLeft:case Ce.ArrowRight:case Ce.ArrowUp:case Ce.ArrowDown:case Ce.PageUp:case Ce.PageDown:case Ce.Home:case Ce.End:x=N(B,W);break}if(!x){(I=(u=r.props).onInputError)===null||I===void 0||I.call(u,{code:1,msg:lp});return}if(a.preventDefault(),r.setState({lastPreSelectChange:sp}),S&&r.setSelected(x),r.setPreSelection(x),R){var Y=xn(W),F=xn(x),E=Ke(W),M=Ke(x);Y!==F||E!==M?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(a){var i=a.key;i===Ce.Escape&&(a.preventDefault(),r.sendFocusBackToInput())},r.onClearClick=function(a){a&&a.preventDefault&&a.preventDefault(),r.sendFocusBackToInput();var i=r.props,o=i.selectsRange,l=i.onChange;o?l==null||l([null,null],a):l==null||l(null,a),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(a){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(a.target===document||a.target===document.documentElement||a.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(a)&&r.setOpen(!1)},r.renderCalendar=function(){var a,i;return!r.props.inline&&!r.isCalendarOpen()?null:H.createElement(z_,Ue({showMonthYearDropdown:void 0,ref:function(o){r.calendar=o}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(a=r.props.dateFormatCalendar)!==null&&a!==void 0?a:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:G_(r.modifyHolidays()),outsideClickIgnoreClass:HV,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(i=r.props.dropdownMode)!==null&&i!==void 0?i:t.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var a=r.props,i=a.dateFormat,o=i===void 0?t.defaultProps.dateFormat:i,l=a.locale,c=r.props.showTimeInput||r.props.showTimeSelect,u=c?"PPPPp":"PPPP",I;return r.props.selectsRange?I="Selected start date: ".concat(Zr(r.props.startDate,{dateFormat:u,locale:l}),". ").concat(r.props.endDate?"End date: "+Zr(r.props.endDate,{dateFormat:u,locale:l}):""):r.props.showTimeSelectOnly?I="Selected time: ".concat(Zr(r.props.selected,{dateFormat:o,locale:l})):r.props.showYearPicker?I="Selected year: ".concat(Zr(r.props.selected,{dateFormat:"yyyy",locale:l})):r.props.showMonthYearPicker?I="Selected month: ".concat(Zr(r.props.selected,{dateFormat:"MMMM yyyy",locale:l})):r.props.showQuarterYearPicker?I="Selected quarter: ".concat(Zr(r.props.selected,{dateFormat:"yyyy, QQQ",locale:l})):I="Selected date: ".concat(Zr(r.props.selected,{dateFormat:u,locale:l})),H.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},I)},r.renderDateInput=function(){var a,i,o,l=Ve(r.props.className,(a={},a[HV]=r.state.open,a)),c=r.props.customInput||H.createElement("input",{type:"text"}),u=r.props.customInputRef||"ref",I=r.props,d=I.dateFormat,m=d===void 0?t.defaultProps.dateFormat:d,p=I.locale,h=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?l_(r.props.startDate,r.props.endDate,{dateFormat:m,locale:p}):r.props.selectsMultiple?s_((o=r.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:m,locale:p}):Zr(r.props.selected,{dateFormat:m,locale:p});return k.cloneElement(c,(i={},i[u]=function(b){r.input=b},i.value=h,i.onBlur=r.handleBlur,i.onChange=r.handleChange,i.onClick=r.onInputClick,i.onFocus=r.handleFocus,i.onKeyDown=r.onInputKeyDown,i.id=r.props.id,i.name=r.props.name,i.form=r.props.form,i.autoFocus=r.props.autoFocus,i.placeholder=r.props.placeholderText,i.disabled=r.props.disabled,i.autoComplete=r.props.autoComplete,i.className=Ve(c.props.className,l),i.title=r.props.title,i.readOnly=r.props.readOnly,i.required=r.props.required,i.tabIndex=r.props.tabIndex,i["aria-describedby"]=r.props.ariaDescribedBy,i["aria-invalid"]=r.props.ariaInvalid,i["aria-labelledby"]=r.props.ariaLabelledBy,i["aria-required"]=r.props.ariaRequired,i))},r.renderClearButton=function(){var a=r.props,i=a.isClearable,o=a.disabled,l=a.selected,c=a.startDate,u=a.endDate,I=a.clearButtonTitle,d=a.clearButtonClassName,m=d===void 0?"":d,p=a.ariaLabelClose,h=p===void 0?"Close":p,b=a.selectedDates;return i&&(l!=null||c!=null||u!=null||b!=null&&b.length)?H.createElement("button",{type:"button",className:Ve("react-datepicker__close-icon",m,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":h,onClick:r.onClearClick,title:I,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Ju,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(n,r){var a,i,o,l;n.inline&&$_(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:VV(this.props.highlightDates)}),!r.focused&&!Vo(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((i=(a=this.props).onCalendarOpen)===null||i===void 0||i.call(a)),r.open===!0&&this.state.open===!1&&((l=(o=this.props).onCalendarClose)===null||l===void 0||l.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,a=n.icon,i=n.calendarIconClassname,o=n.calendarIconClassName,l=n.toggleCalendarOnIconClick,c=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),H.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&H.createElement(U_,Ue({icon:a,className:Ve(o,!o&&i,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?H.createElement(HF,{enableTabLoop:this.props.enableTabLoop},H.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=H.createElement(NF,Ue({portalId:this.props.portalId},this.props),r)),H.createElement("div",null,this.renderInputContainer(),r)}return H.createElement(q_,Ue({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(k.Component),e8="input",sp="navigate";function t8(){const e=Ya(),[t,n]=k.useState(!1),[r,a]=k.useState(null),[i,o]=k.useState(null),[l,c]=k.useState([]),[u,I]=k.useState({email:"",password:"",konfirmasiPassword:"",nim:"",nama:"",institusi:"",jenis_kelamin:"",alamat:"",no_telepon:"",tanggal_mulai:"",tanggal_selesai:"",admin_id:""});k.useEffect(()=>{(async()=>{try{const p=await Ie.get("http://localhost:3000/api/admin/users");p.data.success&&c(p.data.admins)}catch(p){console.error("Error fetching admin users:",p),Ye.fire({title:"Error!",text:"Gagal memuat daftar admin",icon:"error",confirmButtonColor:"#EF4444"})}})()},[]);const d=async m=>{var p,h;if(m.preventDefault(),u.password!==u.konfirmasiPassword){await Ye.fire({title:"Error!",text:"Password dan konfirmasi password tidak cocok",icon:"error",confirmButtonColor:"#EF4444"});return}if(!r||!i){await Ye.fire({title:"Error!",text:"Tanggal mulai dan selesai harus diisi",icon:"error",confirmButtonColor:"#EF4444"});return}if(!u.admin_id){await Ye.fire({title:"Error!",text:"Silakan pilih admin pembimbing",icon:"error",confirmButtonColor:"#EF4444"});return}try{n(!0);const b={...u,tanggal_mulai:r.toISOString().split("T")[0],tanggal_selesai:i.toISOString().split("T")[0]};delete b.konfirmasiPassword,(await Ie.post("http://localhost:3000/api/auth/register",b)).data.success&&(await Ye.fire({title:"Berhasil!",text:"Registrasi berhasil. Silakan login menggunakan akun Anda.",icon:"success",confirmButtonColor:"#10B981"}),e("/login"))}catch(b){console.error("Registration error:",b),await Ye.fire({title:"Gagal!",text:((h=(p=b.response)==null?void 0:p.data)==null?void 0:h.message)||"Terjadi kesalahan saat registrasi",icon:"error",confirmButtonColor:"#EF4444"})}finally{n(!1)}};return A.jsxs("form",{onSubmit:d,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Nama"}),A.jsx("input",{type:"text",className:"w-full p-2 border rounded-md shadow-sm",value:u.nama,onChange:m=>I({...u,nama:m.target.value}),required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Pembimbing Lapangan"}),A.jsxs("select",{className:"w-full p-2 border rounded-md shadow-sm bg-white",value:u.admin_id,onChange:m=>I({...u,admin_id:m.target.value}),required:!0,children:[A.jsx("option",{value:"",children:"Pilih Pembimbing Lapangan"}),l.map(m=>A.jsx("option",{value:m.id,children:m.nama},m.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"NIM"}),A.jsx("input",{type:"text",className:"w-full p-2 border rounded-md shadow-sm",value:u.nim,onChange:m=>I({...u,nim:m.target.value}),required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Email"}),A.jsx("input",{type:"email",className:"w-full p-2 border rounded-md shadow-sm",value:u.email,onChange:m=>I({...u,email:m.target.value}),required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Nomor Telepon"}),A.jsx("input",{type:"tel",className:"w-full p-2 border rounded-md shadow-sm",value:u.no_telepon,onChange:m=>I({...u,no_telepon:m.target.value}),required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Tanggal Mulai"}),A.jsxs("div",{className:"flex",children:[A.jsx(fl,{selected:r,onChange:m=>a(m),placeholderText:"mm/dd/yyyy",className:"w-full border rounded-l-md p-2 pr-44",required:!0}),A.jsx("button",{type:"button",className:"bg-gray-100 px-3 border-y border-r rounded-r-md",onClick:()=>document.querySelector(".react-datepicker__input-container input").focus(),children:A.jsx(Lo,{size:20,className:"text-gray-500"})})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Tanggal Selesai"}),A.jsxs("div",{className:"flex",children:[A.jsx(fl,{selected:i,onChange:m=>o(m),placeholderText:"mm/dd/yyyy",className:"w-full border rounded-l-md p-2 pr-44",required:!0}),A.jsx("button",{type:"button",className:"bg-gray-100 px-3 border-y border-r rounded-r-md",onClick:()=>document.querySelector(".react-datepicker__input-container input").focus(),children:A.jsx(Lo,{size:20,className:"text-gray-500"})})]})]})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Institusi"}),A.jsx("input",{type:"text",className:"w-full p-2 border rounded-md shadow-sm",value:u.institusi,onChange:m=>I({...u,institusi:m.target.value}),required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Jenis Kelamin"}),A.jsxs("select",{className:"w-full p-2 border rounded-md shadow-sm bg-white",value:u.jenis_kelamin,onChange:m=>I({...u,jenis_kelamin:m.target.value}),required:!0,children:[A.jsx("option",{value:"",children:"Pilih Jenis Kelamin"}),A.jsx("option",{value:"L",children:"Laki-laki"}),A.jsx("option",{value:"P",children:"Perempuan"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Alamat"}),A.jsx("textarea",{className:"w-full p-2 border rounded-md shadow-sm h-24",value:u.alamat,onChange:m=>I({...u,alamat:m.target.value}),required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Password"}),A.jsx("input",{type:"password",className:"w-full p-2 border rounded-md shadow-sm",value:u.password,onChange:m=>I({...u,password:m.target.value}),required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"Konfirmasi Password"}),A.jsx("input",{type:"password",className:"w-full p-2 border rounded-md shadow-sm",value:u.konfirmasiPassword,onChange:m=>I({...u,konfirmasiPassword:m.target.value}),required:!0})]})]}),A.jsxs("div",{className:"col-span-full flex justify-between items-center mt-6",children:[A.jsx(To,{to:"/login",className:"text-sm text-gray-600 hover:underline",children:"Sudah ada akun?"}),A.jsx(HP,{type:"submit",variant:"bg-black hover:bg-gray-800",disabled:t,children:t?"Mendaftar...":"Daftar"})]})]})}const n8=()=>A.jsxs("div",{className:"h-screen bg-white relative overflow-hidden",children:[A.jsx(vG,{}),A.jsxs("div",{className:"relative z-20 flex flex-col items-center justify-center px-4 h-[550px] ",children:[A.jsx(eH,{}),A.jsxs("div",{className:"max-w-4xl w-full mx-auto bg-white mb-10 rounded-lg shadow-xl p-8 pb-10 overflow-y-auto scrollbar-hide",children:[A.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-6",children:"Pendaftaran"}),A.jsx(t8,{})]})]}),A.jsx(GG,{})]});function r8(){return A.jsx(n8,{})}function BC(){return BC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BC.apply(null,arguments)}function Yc(e){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yc(e)}function a8(e,t){if(Yc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i8(e){var t=a8(e,"string");return Yc(t)=="symbol"?t:t+""}function o8(e,t,n){return(t=i8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g8(e){if(Array.isArray(e))return e}function l8(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function FV(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s8(e,t){if(e){if(typeof e=="string")return FV(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FV(e,t):void 0}}function c8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u8(e,t){return g8(e)||l8(e,t)||s8(e,t)||c8()}function I8(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function d8(e,t){if(e==null)return{};var n,r,a=I8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var FF={exports:{}},It={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cn=typeof Symbol=="function"&&Symbol.for,nB=cn?Symbol.for("react.element"):60103,rB=cn?Symbol.for("react.portal"):60106,zA=cn?Symbol.for("react.fragment"):60107,UA=cn?Symbol.for("react.strict_mode"):60108,PA=cn?Symbol.for("react.profiler"):60114,OA=cn?Symbol.for("react.provider"):60109,QA=cn?Symbol.for("react.context"):60110,aB=cn?Symbol.for("react.async_mode"):60111,_A=cn?Symbol.for("react.concurrent_mode"):60111,qA=cn?Symbol.for("react.forward_ref"):60112,$A=cn?Symbol.for("react.suspense"):60113,C8=cn?Symbol.for("react.suspense_list"):60120,em=cn?Symbol.for("react.memo"):60115,tm=cn?Symbol.for("react.lazy"):60116,A8=cn?Symbol.for("react.block"):60121,m8=cn?Symbol.for("react.fundamental"):60117,f8=cn?Symbol.for("react.responder"):60118,h8=cn?Symbol.for("react.scope"):60119;function dr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case nB:switch(e=e.type,e){case aB:case _A:case zA:case PA:case UA:case $A:return e;default:switch(e=e&&e.$$typeof,e){case QA:case qA:case tm:case em:case OA:return e;default:return t}}case rB:return t}}}function KF(e){return dr(e)===_A}It.AsyncMode=aB;It.ConcurrentMode=_A;It.ContextConsumer=QA;It.ContextProvider=OA;It.Element=nB;It.ForwardRef=qA;It.Fragment=zA;It.Lazy=tm;It.Memo=em;It.Portal=rB;It.Profiler=PA;It.StrictMode=UA;It.Suspense=$A;It.isAsyncMode=function(e){return KF(e)||dr(e)===aB};It.isConcurrentMode=KF;It.isContextConsumer=function(e){return dr(e)===QA};It.isContextProvider=function(e){return dr(e)===OA};It.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===nB};It.isForwardRef=function(e){return dr(e)===qA};It.isFragment=function(e){return dr(e)===zA};It.isLazy=function(e){return dr(e)===tm};It.isMemo=function(e){return dr(e)===em};It.isPortal=function(e){return dr(e)===rB};It.isProfiler=function(e){return dr(e)===PA};It.isStrictMode=function(e){return dr(e)===UA};It.isSuspense=function(e){return dr(e)===$A};It.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===zA||e===_A||e===PA||e===UA||e===$A||e===C8||typeof e=="object"&&e!==null&&(e.$$typeof===tm||e.$$typeof===em||e.$$typeof===OA||e.$$typeof===QA||e.$$typeof===qA||e.$$typeof===m8||e.$$typeof===f8||e.$$typeof===h8||e.$$typeof===A8)};It.typeOf=dr;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var KV=Object.getOwnPropertySymbols,p8=Object.prototype.hasOwnProperty,b8=Object.prototype.propertyIsEnumerable;function y8(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Z8(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(r.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(i){a[i]=i}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Z8();var v8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",G8=v8;Function.call.bind(Object.prototype.hasOwnProperty);var B8=G8;function EF(){}function MF(){}MF.resetWarningCache=EF;var S8=function(){function e(r,a,i,o,l,c){if(c!==B8){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:MF,resetWarningCache:EF};return n.PropTypes=n,n};FF.exports=S8();var Jg=FF.exports;function w8(e,t){var n=atob(e);return n}function W8(e,t,n){var r=w8(e),a=r.indexOf(`
`,10)+1,i=r.substring(a)+"",o=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(o)}function k8(e,t,n){var r;return function(i){return r=r||W8(e),new Worker(r,i)}}var V8=k8("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg=="),R8=["constraints","onError","onLoad","onScan","resolution","qrArea"];function EV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function MV(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EV(Object(n),!0).forEach(function(r){o8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EV(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var x8=function(){return new V8},DV=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(n){t.removeTrack(n),n.stop()}),t.getAudioTracks().forEach(function(n){t.removeTrack(n),n.stop()})):t.stop())},iB=function(t){var n=t.constraints,r=t.onError,a=t.onLoad,i=t.onScan,o=t.resolution,l=t.qrArea,c=d8(t,R8),u=k.useRef(null),I=k.useRef(null),d=k.useRef(document.createElement("canvas")),m=k.useRef(null),p=k.useRef(),h=k.useState(null),b=u8(h,2),y=b[0],v=b[1],G=k.useRef(!1),S=k.useRef();k.useEffect(function(){S.current=x8();var W=S.current;return W.onmessage=function(X){i&&i(X.data?MV(MV({},X.data),{},{canvas:d.current}):null),G.current=!1},function(){W.terminate()}},[i]);var R=JSON.stringify(l),B=k.useCallback(function(){var W=JSON.parse(R),X=S.current,N=I.current&&I.current.readyState===I.current.HAVE_ENOUGH_DATA;if(!G.current&&N){G.current=!0;var x=I.current.videoWidth,Y=I.current.videoHeight,F=x>Y?x:Y,E=Math.floor(o/F*100)/100;Y=Math.floor(E*Y),x=Math.floor(E*x),d.current.width=x,d.current.height=Y,m.current=d.current.getContext("2d"),m.current.drawImage(I.current,0,0,x,Y);var M;W&&W.length===2&&W[0]>0&&W[1]>0?M=m.current.getImageData(Math.floor((x-W[0])/2),Math.floor((Y-W[1])/2),W[0],W[1]):M=m.current.getImageData(0,0,x,Y),X.postMessage(M)}p.current=requestAnimationFrame(B)},[o,R]),V=JSON.stringify(n);return k.useEffect(function(){var W=JSON.parse(V),X=!0;return navigator.mediaDevices.getUserMedia(W).then(function(N){if(!X)DV(N);else{u.current=N;try{I.current&&(I.current.srcObject=N,I.current.setAttribute("playsinline",!0))}catch{v(window.URL.createObjectURL(N))}a&&a(),p.current=requestAnimationFrame(B)}}).catch(function(N){return X?r(N):null}),function(){cancelAnimationFrame(p.current),X=!1,DV(u.current),y&&window.URL.revokeObjectURL(y)}},[B,V,r,a,y]),k.createElement("video",BC({autoPlay:!0,playsInline:!0,src:y,ref:I},c))};iB.propTypes={constraints:Jg.object,onError:Jg.func.isRequired,onLoad:Jg.func,onScan:Jg.func.isRequired,resolution:Jg.number,qrArea:Jg.array};iB.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};const Nc={black:"#000",white:"#fff"},Yg={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ng={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Hg={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Fg={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Kg={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},nc={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},X8={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Qo(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${e}; visit ${n} for the full message.`}const J8="$$material";function Y8(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function N8(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var H8=function(){function e(n){var r=this;this._insertTag=function(a){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,i),r.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(N8(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var i=Y8(a);try{i.insertRule(r,i.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var a;return(a=r.parentNode)==null?void 0:a.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Zn="-ms-",SC="-moz-",_e="-webkit-",DF="comm",oB="rule",gB="decl",F8="@import",TF="@keyframes",K8="@layer",E8=Math.abs,nm=String.fromCharCode,M8=Object.assign;function D8(e,t){return An(e,0)^45?(((t<<2^An(e,0))<<2^An(e,1))<<2^An(e,2))<<2^An(e,3):0}function jF(e){return e.trim()}function T8(e,t){return(e=t.exec(e))?e[0]:e}function qe(e,t,n){return e.replace(t,n)}function FZ(e,t){return e.indexOf(t)}function An(e,t){return e.charCodeAt(t)|0}function Hc(e,t,n){return e.slice(t,n)}function fa(e){return e.length}function lB(e){return e.length}function md(e,t){return t.push(e),e}function j8(e,t){return e.map(t).join("")}var rm=1,hl=1,LF=0,Ln=0,Pt=0,$l="";function am(e,t,n,r,a,i,o){return{value:e,root:t,parent:n,type:r,props:a,children:i,line:rm,column:hl,length:o,return:""}}function rc(e,t){return M8(am("",null,null,"",null,null,0),e,{length:-e.length},t)}function L8(){return Pt}function z8(){return Pt=Ln>0?An($l,--Ln):0,hl--,Pt===10&&(hl=1,rm--),Pt}function gr(){return Pt=Ln<LF?An($l,Ln++):0,hl++,Pt===10&&(hl=1,rm++),Pt}function Wa(){return An($l,Ln)}function Ld(){return Ln}function Nu(e,t){return Hc($l,e,t)}function Fc(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function zF(e){return rm=hl=1,LF=fa($l=e),Ln=0,[]}function UF(e){return $l="",e}function zd(e){return jF(Nu(Ln-1,KZ(e===91?e+2:e===40?e+1:e)))}function U8(e){for(;(Pt=Wa())&&Pt<33;)gr();return Fc(e)>2||Fc(Pt)>3?"":" "}function P8(e,t){for(;--t&&gr()&&!(Pt<48||Pt>102||Pt>57&&Pt<65||Pt>70&&Pt<97););return Nu(e,Ld()+(t<6&&Wa()==32&&gr()==32))}function KZ(e){for(;gr();)switch(Pt){case e:return Ln;case 34:case 39:e!==34&&e!==39&&KZ(Pt);break;case 40:e===41&&KZ(e);break;case 92:gr();break}return Ln}function O8(e,t){for(;gr()&&e+Pt!==57;)if(e+Pt===84&&Wa()===47)break;return"/*"+Nu(t,Ln-1)+"*"+nm(e===47?e:gr())}function Q8(e){for(;!Fc(Wa());)gr();return Nu(e,Ln)}function _8(e){return UF(Ud("",null,null,null,[""],e=zF(e),0,[0],e))}function Ud(e,t,n,r,a,i,o,l,c){for(var u=0,I=0,d=o,m=0,p=0,h=0,b=1,y=1,v=1,G=0,S="",R=a,B=i,V=r,W=S;y;)switch(h=G,G=gr()){case 40:if(h!=108&&An(W,d-1)==58){FZ(W+=qe(zd(G),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:W+=zd(G);break;case 9:case 10:case 13:case 32:W+=U8(h);break;case 92:W+=P8(Ld()-1,7);continue;case 47:switch(Wa()){case 42:case 47:md(q8(O8(gr(),Ld()),t,n),c);break;default:W+="/"}break;case 123*b:l[u++]=fa(W)*v;case 125*b:case 59:case 0:switch(G){case 0:case 125:y=0;case 59+I:v==-1&&(W=qe(W,/\f/g,"")),p>0&&fa(W)-d&&md(p>32?jV(W+";",r,n,d-1):jV(qe(W," ","")+";",r,n,d-2),c);break;case 59:W+=";";default:if(md(V=TV(W,t,n,u,I,a,l,S,R=[],B=[],d),i),G===123)if(I===0)Ud(W,t,V,V,R,i,d,l,B);else switch(m===99&&An(W,3)===110?100:m){case 100:case 108:case 109:case 115:Ud(e,V,V,r&&md(TV(e,V,V,0,0,a,l,S,a,R=[],d),B),a,B,d,l,r?R:B);break;default:Ud(W,V,V,V,[""],B,0,l,B)}}u=I=p=0,b=v=1,S=W="",d=o;break;case 58:d=1+fa(W),p=h;default:if(b<1){if(G==123)--b;else if(G==125&&b++==0&&z8()==125)continue}switch(W+=nm(G),G*b){case 38:v=I>0?1:(W+="\f",-1);break;case 44:l[u++]=(fa(W)-1)*v,v=1;break;case 64:Wa()===45&&(W+=zd(gr())),m=Wa(),I=d=fa(S=W+=Q8(Ld())),G++;break;case 45:h===45&&fa(W)==2&&(b=0)}}return i}function TV(e,t,n,r,a,i,o,l,c,u,I){for(var d=a-1,m=a===0?i:[""],p=lB(m),h=0,b=0,y=0;h<r;++h)for(var v=0,G=Hc(e,d+1,d=E8(b=o[h])),S=e;v<p;++v)(S=jF(b>0?m[v]+" "+G:qe(G,/&\f/g,m[v])))&&(c[y++]=S);return am(e,t,n,a===0?oB:l,c,u,I)}function q8(e,t,n){return am(e,t,n,DF,nm(L8()),Hc(e,2,-2),0)}function jV(e,t,n,r){return am(e,t,n,gB,Hc(e,0,r),Hc(e,r+1,-1),r)}function $g(e,t){for(var n="",r=lB(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function $8(e,t,n,r){switch(e.type){case K8:if(e.children.length)break;case F8:case gB:return e.return=e.return||e.value;case DF:return"";case TF:return e.return=e.value+"{"+$g(e.children,r)+"}";case oB:e.value=e.props.join(",")}return fa(n=$g(e.children,r))?e.return=e.value+"{"+n+"}":""}function e7(e){var t=lB(e);return function(n,r,a,i){for(var o="",l=0;l<t;l++)o+=e[l](n,r,a,i)||"";return o}}function t7(e){return function(t){t.root||(t=t.return)&&e(t)}}function PF(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var n7=function(t,n,r){for(var a=0,i=0;a=i,i=Wa(),a===38&&i===12&&(n[r]=1),!Fc(i);)gr();return Nu(t,Ln)},r7=function(t,n){var r=-1,a=44;do switch(Fc(a)){case 0:a===38&&Wa()===12&&(n[r]=1),t[r]+=n7(Ln-1,n,r);break;case 2:t[r]+=zd(a);break;case 4:if(a===44){t[++r]=Wa()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=nm(a)}while(a=gr());return t},a7=function(t,n){return UF(r7(zF(t),n))},LV=new WeakMap,i7=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,a=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!LV.get(r))&&!a){LV.set(t,!0);for(var i=[],o=a7(n,i),l=r.props,c=0,u=0;c<o.length;c++)for(var I=0;I<l.length;I++,u++)t.props[u]=i[c]?o[c].replace(/&\f/g,l[I]):l[I]+" "+o[c]}}},o7=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function OF(e,t){switch(D8(e,t)){case 5103:return _e+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _e+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return _e+e+SC+e+Zn+e+e;case 6828:case 4268:return _e+e+Zn+e+e;case 6165:return _e+e+Zn+"flex-"+e+e;case 5187:return _e+e+qe(e,/(\w+).+(:[^]+)/,_e+"box-$1$2"+Zn+"flex-$1$2")+e;case 5443:return _e+e+Zn+"flex-item-"+qe(e,/flex-|-self/,"")+e;case 4675:return _e+e+Zn+"flex-line-pack"+qe(e,/align-content|flex-|-self/,"")+e;case 5548:return _e+e+Zn+qe(e,"shrink","negative")+e;case 5292:return _e+e+Zn+qe(e,"basis","preferred-size")+e;case 6060:return _e+"box-"+qe(e,"-grow","")+_e+e+Zn+qe(e,"grow","positive")+e;case 4554:return _e+qe(e,/([^-])(transform)/g,"$1"+_e+"$2")+e;case 6187:return qe(qe(qe(e,/(zoom-|grab)/,_e+"$1"),/(image-set)/,_e+"$1"),e,"")+e;case 5495:case 3959:return qe(e,/(image-set\([^]*)/,_e+"$1$`$1");case 4968:return qe(qe(e,/(.+:)(flex-)?(.*)/,_e+"box-pack:$3"+Zn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_e+e+e;case 4095:case 3583:case 4068:case 2532:return qe(e,/(.+)-inline(.+)/,_e+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(fa(e)-1-t>6)switch(An(e,t+1)){case 109:if(An(e,t+4)!==45)break;case 102:return qe(e,/(.+:)(.+)-([^]+)/,"$1"+_e+"$2-$3$1"+SC+(An(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~FZ(e,"stretch")?OF(qe(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(An(e,t+1)!==115)break;case 6444:switch(An(e,fa(e)-3-(~FZ(e,"!important")&&10))){case 107:return qe(e,":",":"+_e)+e;case 101:return qe(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+_e+(An(e,14)===45?"inline-":"")+"box$3$1"+_e+"$2$3$1"+Zn+"$2box$3")+e}break;case 5936:switch(An(e,t+11)){case 114:return _e+e+Zn+qe(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return _e+e+Zn+qe(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return _e+e+Zn+qe(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return _e+e+Zn+e+e}return e}var g7=function(t,n,r,a){if(t.length>-1&&!t.return)switch(t.type){case gB:t.return=OF(t.value,t.length);break;case TF:return $g([rc(t,{value:qe(t.value,"@","@"+_e)})],a);case oB:if(t.length)return j8(t.props,function(i){switch(T8(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return $g([rc(t,{props:[qe(i,/:(read-\w+)/,":"+SC+"$1")]})],a);case"::placeholder":return $g([rc(t,{props:[qe(i,/:(plac\w+)/,":"+_e+"input-$1")]}),rc(t,{props:[qe(i,/:(plac\w+)/,":"+SC+"$1")]}),rc(t,{props:[qe(i,/:(plac\w+)/,Zn+"input-$1")]})],a)}return""})}},l7=[g7],s7=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var y=b.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var a=t.stylisPlugins||l7,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var y=b.getAttribute("data-emotion").split(" "),v=1;v<y.length;v++)i[y[v]]=!0;l.push(b)});var c,u=[i7,o7];{var I,d=[$8,t7(function(b){I.insert(b)})],m=e7(u.concat(a,d)),p=function(y){return $g(_8(y),m)};c=function(y,v,G,S){I=G,p(y?y+"{"+v.styles+"}":v.styles),S&&(h.inserted[v.name]=!0)}}var h={key:n,sheet:new H8({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return h.sheet.hydrate(l),h},cp={exports:{}},et={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zV;function c7(){if(zV)return et;zV=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,I=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,h=e?Symbol.for("react.lazy"):60116,b=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,G=e?Symbol.for("react.scope"):60119;function S(B){if(typeof B=="object"&&B!==null){var V=B.$$typeof;switch(V){case t:switch(B=B.type,B){case c:case u:case r:case i:case a:case d:return B;default:switch(B=B&&B.$$typeof,B){case l:case I:case h:case p:case o:return B;default:return V}}case n:return V}}}function R(B){return S(B)===u}return et.AsyncMode=c,et.ConcurrentMode=u,et.ContextConsumer=l,et.ContextProvider=o,et.Element=t,et.ForwardRef=I,et.Fragment=r,et.Lazy=h,et.Memo=p,et.Portal=n,et.Profiler=i,et.StrictMode=a,et.Suspense=d,et.isAsyncMode=function(B){return R(B)||S(B)===c},et.isConcurrentMode=R,et.isContextConsumer=function(B){return S(B)===l},et.isContextProvider=function(B){return S(B)===o},et.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===t},et.isForwardRef=function(B){return S(B)===I},et.isFragment=function(B){return S(B)===r},et.isLazy=function(B){return S(B)===h},et.isMemo=function(B){return S(B)===p},et.isPortal=function(B){return S(B)===n},et.isProfiler=function(B){return S(B)===i},et.isStrictMode=function(B){return S(B)===a},et.isSuspense=function(B){return S(B)===d},et.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===r||B===u||B===i||B===a||B===d||B===m||typeof B=="object"&&B!==null&&(B.$$typeof===h||B.$$typeof===p||B.$$typeof===o||B.$$typeof===l||B.$$typeof===I||B.$$typeof===y||B.$$typeof===v||B.$$typeof===G||B.$$typeof===b)},et.typeOf=S,et}var UV;function u7(){return UV||(UV=1,cp.exports=c7()),cp.exports}var up,PV;function I7(){if(PV)return up;PV=1;var e=u7(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=r,i[e.Memo]=a;function o(h){return e.isMemo(h)?a:i[h.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,I=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,m=Object.prototype;function p(h,b,y){if(typeof b!="string"){if(m){var v=d(b);v&&v!==m&&p(h,v,y)}var G=c(b);u&&(G=G.concat(u(b)));for(var S=o(h),R=o(b),B=0;B<G.length;++B){var V=G[B];if(!n[V]&&!(y&&y[V])&&!(R&&R[V])&&!(S&&S[V])){var W=I(b,V);try{l(h,V,W)}catch{}}}}return h}return up=p,up}I7();var d7=!0;function QF(e,t,n){var r="";return n.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):a&&(r+=a+" ")}),r}var sB=function(t,n,r){var a=t.key+"-"+n.name;(r===!1||d7===!1)&&t.registered[a]===void 0&&(t.registered[a]=n.styles)},_F=function(t,n,r){sB(t,n,r);var a=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var i=n;do t.insert(n===i?"."+a:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function C7(e){for(var t=0,n,r=0,a=e.length;a>=4;++r,a-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var A7={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},m7=/[A-Z]|^ms/g,f7=/_EMO_([^_]+?)_([^]*?)_EMO_/g,qF=function(t){return t.charCodeAt(1)===45},OV=function(t){return t!=null&&typeof t!="boolean"},Ip=PF(function(e){return qF(e)?e:e.replace(m7,"-$&").toLowerCase()}),QV=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(f7,function(r,a,i){return ha={name:a,styles:i,next:ha},a})}return A7[t]!==1&&!qF(t)&&typeof n=="number"&&n!==0?n+"px":n};function Kc(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return ha={name:a.name,styles:a.styles,next:ha},a.name;var i=n;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)ha={name:o.name,styles:o.styles,next:ha},o=o.next;var l=i.styles+";";return l}return h7(e,t,n)}case"function":{if(e!==void 0){var c=ha,u=n(e);return ha=c,Kc(e,t,u)}break}}var I=n;if(t==null)return I;var d=t[I];return d!==void 0?d:I}function h7(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=Kc(e,t,n[a])+";";else for(var i in n){var o=n[i];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?r+=i+"{"+t[l]+"}":OV(l)&&(r+=Ip(i)+":"+QV(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)OV(o[c])&&(r+=Ip(i)+":"+QV(i,o[c])+";");else{var u=Kc(e,t,o);switch(i){case"animation":case"animationName":{r+=Ip(i)+":"+u+";";break}default:r+=i+"{"+u+"}"}}}return r}var _V=/label:\s*([^\s;{]+)\s*(;|$)/g,ha;function im(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,a="";ha=void 0;var i=e[0];if(i==null||i.raw===void 0)r=!1,a+=Kc(n,t,i);else{var o=i;a+=o[0]}for(var l=1;l<e.length;l++)if(a+=Kc(n,t,e[l]),r){var c=i;a+=c[l]}_V.lastIndex=0;for(var u="",I;(I=_V.exec(a))!==null;)u+="-"+I[1];var d=C7(a)+u;return{name:d,styles:a,next:ha}}var p7=function(t){return t()},b7=pZ.useInsertionEffect?pZ.useInsertionEffect:!1,$F=b7||p7,eK=k.createContext(typeof HTMLElement<"u"?s7({key:"css"}):null);eK.Provider;var tK=function(t){return k.forwardRef(function(n,r){var a=k.useContext(eK);return t(n,a,r)})},nK=k.createContext({}),cB={}.hasOwnProperty,EZ="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",y7=function(t,n){var r={};for(var a in n)cB.call(n,a)&&(r[a]=n[a]);return r[EZ]=t,r},Z7=function(t){var n=t.cache,r=t.serialized,a=t.isStringTag;return sB(n,r,a),$F(function(){return _F(n,r,a)}),null},v7=tK(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var a=e[EZ],i=[r],o="";typeof e.className=="string"?o=QF(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=im(i,void 0,k.useContext(nK));o+=t.key+"-"+l.name;var c={};for(var u in e)cB.call(e,u)&&u!=="css"&&u!==EZ&&(c[u]=e[u]);return c.className=o,n&&(c.ref=n),k.createElement(k.Fragment,null,k.createElement(Z7,{cache:t,serialized:l,isStringTag:typeof a=="string"}),k.createElement(a,c))}),G7=v7,B7=function(t,n){var r=arguments;if(n==null||!cB.call(n,"css"))return k.createElement.apply(void 0,r);var a=r.length,i=new Array(a);i[0]=G7,i[1]=y7(t,n);for(var o=2;o<a;o++)i[o]=r[o];return k.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(B7);function uB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return im(t)}function rK(){var e=uB.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var S7=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,w7=PF(function(e){return S7.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),W7=w7,k7=function(t){return t!=="theme"},qV=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?W7:k7},$V=function(t,n,r){var a;if(n){var i=n.shouldForwardProp;a=t.__emotion_forwardProp&&i?function(o){return t.__emotion_forwardProp(o)&&i(o)}:i}return typeof a!="function"&&r&&(a=t.__emotion_forwardProp),a},V7=function(t){var n=t.cache,r=t.serialized,a=t.isStringTag;return sB(n,r,a),$F(function(){return _F(n,r,a)}),null},R7=function e(t,n){var r=t.__emotion_real===t,a=r&&t.__emotion_base||t,i,o;n!==void 0&&(i=n.label,o=n.target);var l=$V(t,n,r),c=l||qV(a),u=!c("as");return function(){var I=arguments,d=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&d.push("label:"+i+";"),I[0]==null||I[0].raw===void 0)d.push.apply(d,I);else{var m=I[0];d.push(m[0]);for(var p=I.length,h=1;h<p;h++)d.push(I[h],m[h])}var b=tK(function(y,v,G){var S=u&&y.as||a,R="",B=[],V=y;if(y.theme==null){V={};for(var W in y)V[W]=y[W];V.theme=k.useContext(nK)}typeof y.className=="string"?R=QF(v.registered,B,y.className):y.className!=null&&(R=y.className+" ");var X=im(d.concat(B),v.registered,V);R+=v.key+"-"+X.name,o!==void 0&&(R+=" "+o);var N=u&&l===void 0?qV(S):c,x={};for(var Y in y)u&&Y==="as"||N(Y)&&(x[Y]=y[Y]);return x.className=R,G&&(x.ref=G),k.createElement(k.Fragment,null,k.createElement(V7,{cache:v,serialized:X,isStringTag:typeof S=="string"}),k.createElement(S,x))});return b.displayName=i!==void 0?i:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",b.defaultProps=t.defaultProps,b.__emotion_real=b,b.__emotion_base=a,b.__emotion_styles=d,b.__emotion_forwardProp=l,Object.defineProperty(b,"toString",{value:function(){return"."+o}}),b.withComponent=function(y,v){var G=e(y,BC({},n,v,{shouldForwardProp:$V(b,v,!0)}));return G.apply(void 0,d)},b}},x7=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],MZ=R7.bind(null);x7.forEach(function(e){MZ[e]=MZ(e)});var dp={exports:{}},Cp,eR;function X7(){if(eR)return Cp;eR=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Cp=e,Cp}var Ap,tR;function J7(){if(tR)return Ap;tR=1;var e=X7();function t(){}function n(){}return n.resetWarningCache=t,Ap=function(){function r(o,l,c,u,I,d){if(d!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function a(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},Ap}var nR;function Y7(){return nR||(nR=1,dp.exports=J7()()),dp.exports}var N7=Y7();const tt=ut(N7);/**
 * @mui/styled-engine v6.4.0
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function H7(e,t){return MZ(e,t)}function F7(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const rR=[];function aR(e){return rR[0]=e,im(rR)}var mp={exports:{}},st={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iR;function K7(){if(iR)return st;iR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),p=Symbol.for("react.client.reference");function h(b){if(typeof b=="object"&&b!==null){var y=b.$$typeof;switch(y){case e:switch(b=b.type,b){case n:case a:case r:case c:case u:return b;default:switch(b=b&&b.$$typeof,b){case o:case l:case d:case I:return b;case i:return b;default:return y}}case t:return y}}}return st.ContextConsumer=i,st.ContextProvider=o,st.Element=e,st.ForwardRef=l,st.Fragment=n,st.Lazy=d,st.Memo=I,st.Portal=t,st.Profiler=a,st.StrictMode=r,st.Suspense=c,st.SuspenseList=u,st.isContextConsumer=function(b){return h(b)===i},st.isContextProvider=function(b){return h(b)===o},st.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},st.isForwardRef=function(b){return h(b)===l},st.isFragment=function(b){return h(b)===n},st.isLazy=function(b){return h(b)===d},st.isMemo=function(b){return h(b)===I},st.isPortal=function(b){return h(b)===t},st.isProfiler=function(b){return h(b)===a},st.isStrictMode=function(b){return h(b)===r},st.isSuspense=function(b){return h(b)===c},st.isSuspenseList=function(b){return h(b)===u},st.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===a||b===r||b===c||b===u||b===m||typeof b=="object"&&b!==null&&(b.$$typeof===d||b.$$typeof===I||b.$$typeof===o||b.$$typeof===i||b.$$typeof===l||b.$$typeof===p||b.getModuleId!==void 0)},st.typeOf=h,st}var oR;function E7(){return oR||(oR=1,mp.exports=K7()),mp.exports}var aK=E7();function Oa(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function iK(e){if(k.isValidElement(e)||aK.isValidElementType(e)||!Oa(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=iK(e[n])}),t}function lr(e,t,n={clone:!0}){const r=n.clone?{...e}:e;return Oa(e)&&Oa(t)&&Object.keys(t).forEach(a=>{k.isValidElement(t[a])||aK.isValidElementType(t[a])?r[a]=t[a]:Oa(t[a])&&Object.prototype.hasOwnProperty.call(e,a)&&Oa(e[a])?r[a]=lr(e[a],t[a],n):n.clone?r[a]=Oa(t[a])?iK(t[a]):t[a]:r[a]=t[a]}),r}const M7=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function D7(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...a}=e,i=M7(t),o=Object.keys(i);function l(m){return`@media (min-width:${typeof t[m]=="number"?t[m]:m}${n})`}function c(m){return`@media (max-width:${(typeof t[m]=="number"?t[m]:m)-r/100}${n})`}function u(m,p){const h=o.indexOf(p);return`@media (min-width:${typeof t[m]=="number"?t[m]:m}${n}) and (max-width:${(h!==-1&&typeof t[o[h]]=="number"?t[o[h]]:p)-r/100}${n})`}function I(m){return o.indexOf(m)+1<o.length?u(m,o[o.indexOf(m)+1]):l(m)}function d(m){const p=o.indexOf(m);return p===0?l(o[1]):p===o.length-1?c(o[p]):u(m,o[o.indexOf(m)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:u,only:I,not:d,unit:n,...a}}function T7(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(r=>r.startsWith("@container")).sort((r,a)=>{var o,l;const i=/min-width:\s*([0-9.]+)/;return+(((o=r.match(i))==null?void 0:o[1])||0)-+(((l=a.match(i))==null?void 0:l[1])||0)});return n.length?n.reduce((r,a)=>{const i=t[a];return delete r[a],r[a]=i,r},{...t}):t}function j7(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function L7(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,a]=n,i=Number.isNaN(+r)?r||0:+r;return e.containerQueries(a).up(i)}function z7(e){const t=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function n(i,o){i.up=(...l)=>t(e.breakpoints.up(...l),o),i.down=(...l)=>t(e.breakpoints.down(...l),o),i.between=(...l)=>t(e.breakpoints.between(...l),o),i.only=(...l)=>t(e.breakpoints.only(...l),o),i.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const r={},a=i=>(n(r,i),r);return n(a),{...e,containerQueries:a}}const U7={borderRadius:4};function vc(e,t){return t?lr(e,t,{clone:!1}):e}const om={xs:0,sm:600,md:900,lg:1200,xl:1536},gR={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${om[e]}px)`},P7={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:om[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function ci(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const i=r.breakpoints||gR;return t.reduce((o,l,c)=>(o[i.up(i.keys[c])]=n(t[c]),o),{})}if(typeof t=="object"){const i=r.breakpoints||gR;return Object.keys(t).reduce((o,l)=>{if(j7(i.keys,l)){const c=L7(r.containerQueries?r:P7,l);c&&(o[c]=n(t[l],l))}else if(Object.keys(i.values||om).includes(l)){const c=i.up(l);o[c]=n(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return n(t)}function O7(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((r,a)=>{const i=e.up(a);return r[i]={},r},{}))||{}}function Q7(e,t){return e.reduce((n,r)=>{const a=n[r];return(!a||Object.keys(a).length===0)&&delete n[r],n},t)}function pl(e){if(typeof e!="string")throw new Error(Qo(7));return e.charAt(0).toUpperCase()+e.slice(1)}function gm(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((a,i)=>a&&a[i]?a[i]:null,e);if(r!=null)return r}return t.split(".").reduce((r,a)=>r&&r[a]!=null?r[a]:null,e)}function wC(e,t,n,r=n){let a;return typeof e=="function"?a=e(n):Array.isArray(e)?a=e[n]||r:a=gm(e,n)||r,t&&(a=t(a,r,e)),a}function Lt(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:a}=e,i=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,u=gm(c,r)||{};return ci(o,l,d=>{let m=wC(u,a,d);return d===m&&typeof d=="string"&&(m=wC(u,a,`${t}${d==="default"?"":pl(d)}`,d)),n===!1?m:{[n]:m}})};return i.propTypes={},i.filterProps=[t],i}function _7(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const q7={m:"margin",p:"padding"},$7={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},lR={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},eq=_7(e=>{if(e.length>2)if(lR[e])e=lR[e];else return[e];const[t,n]=e.split(""),r=q7[t],a=$7[n]||"";return Array.isArray(a)?a.map(i=>r+i):[r+a]}),IB=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],dB=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...IB,...dB];function Hu(e,t,n,r){const a=gm(e,t,!0)??n;return typeof a=="number"||typeof a=="string"?i=>typeof i=="string"?i:typeof a=="string"?`calc(${i} * ${a})`:a*i:Array.isArray(a)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=a[o];return i>=0?l:typeof l=="number"?-l:`-${l}`}:typeof a=="function"?a:()=>{}}function CB(e){return Hu(e,"spacing",8)}function Fu(e,t){return typeof t=="string"||t==null?t:e(t)}function tq(e,t){return n=>e.reduce((r,a)=>(r[a]=Fu(t,n),r),{})}function nq(e,t,n,r){if(!t.includes(n))return null;const a=eq(n),i=tq(a,r),o=e[n];return ci(e,o,i)}function oK(e,t){const n=CB(e.theme);return Object.keys(e).map(r=>nq(e,t,r,n)).reduce(vc,{})}function Jt(e){return oK(e,IB)}Jt.propTypes={};Jt.filterProps=IB;function Yt(e){return oK(e,dB)}Yt.propTypes={};Yt.filterProps=dB;function gK(e=8,t=CB({spacing:e})){if(e.mui)return e;const n=(...r)=>(r.length===0?[1]:r).map(i=>{const o=t(i);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function lm(...e){const t=e.reduce((r,a)=>(a.filterProps.forEach(i=>{r[i]=a}),r),{}),n=r=>Object.keys(r).reduce((a,i)=>t[i]?vc(a,t[i](r)):a,{});return n.propTypes={},n.filterProps=e.reduce((r,a)=>r.concat(a.filterProps),[]),n}function Gr(e){return typeof e!="number"?e:`${e}px solid`}function Rr(e,t){return Lt({prop:e,themeKey:"borders",transform:t})}const rq=Rr("border",Gr),aq=Rr("borderTop",Gr),iq=Rr("borderRight",Gr),oq=Rr("borderBottom",Gr),gq=Rr("borderLeft",Gr),lq=Rr("borderColor"),sq=Rr("borderTopColor"),cq=Rr("borderRightColor"),uq=Rr("borderBottomColor"),Iq=Rr("borderLeftColor"),dq=Rr("outline",Gr),Cq=Rr("outlineColor"),sm=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Hu(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:Fu(t,r)});return ci(e,e.borderRadius,n)}return null};sm.propTypes={};sm.filterProps=["borderRadius"];lm(rq,aq,iq,oq,gq,lq,sq,cq,uq,Iq,sm,dq,Cq);const cm=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Hu(e.theme,"spacing",8),n=r=>({gap:Fu(t,r)});return ci(e,e.gap,n)}return null};cm.propTypes={};cm.filterProps=["gap"];const um=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Hu(e.theme,"spacing",8),n=r=>({columnGap:Fu(t,r)});return ci(e,e.columnGap,n)}return null};um.propTypes={};um.filterProps=["columnGap"];const Im=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Hu(e.theme,"spacing",8),n=r=>({rowGap:Fu(t,r)});return ci(e,e.rowGap,n)}return null};Im.propTypes={};Im.filterProps=["rowGap"];const Aq=Lt({prop:"gridColumn"}),mq=Lt({prop:"gridRow"}),fq=Lt({prop:"gridAutoFlow"}),hq=Lt({prop:"gridAutoColumns"}),pq=Lt({prop:"gridAutoRows"}),bq=Lt({prop:"gridTemplateColumns"}),yq=Lt({prop:"gridTemplateRows"}),Zq=Lt({prop:"gridTemplateAreas"}),vq=Lt({prop:"gridArea"});lm(cm,um,Im,Aq,mq,fq,hq,pq,bq,yq,Zq,vq);function el(e,t){return t==="grey"?t:e}const Gq=Lt({prop:"color",themeKey:"palette",transform:el}),Bq=Lt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:el}),Sq=Lt({prop:"backgroundColor",themeKey:"palette",transform:el});lm(Gq,Bq,Sq);function rr(e){return e<=1&&e!==0?`${e*100}%`:e}const wq=Lt({prop:"width",transform:rr}),AB=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var a,i,o,l,c;const r=((o=(i=(a=e.theme)==null?void 0:a.breakpoints)==null?void 0:i.values)==null?void 0:o[n])||om[n];return r?((c=(l=e.theme)==null?void 0:l.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:rr(n)}};return ci(e,e.maxWidth,t)}return null};AB.filterProps=["maxWidth"];const Wq=Lt({prop:"minWidth",transform:rr}),kq=Lt({prop:"height",transform:rr}),Vq=Lt({prop:"maxHeight",transform:rr}),Rq=Lt({prop:"minHeight",transform:rr});Lt({prop:"size",cssProperty:"width",transform:rr});Lt({prop:"size",cssProperty:"height",transform:rr});const xq=Lt({prop:"boxSizing"});lm(wq,AB,Wq,kq,Vq,Rq,xq);const dm={border:{themeKey:"borders",transform:Gr},borderTop:{themeKey:"borders",transform:Gr},borderRight:{themeKey:"borders",transform:Gr},borderBottom:{themeKey:"borders",transform:Gr},borderLeft:{themeKey:"borders",transform:Gr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Gr},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:sm},color:{themeKey:"palette",transform:el},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:el},backgroundColor:{themeKey:"palette",transform:el},p:{style:Yt},pt:{style:Yt},pr:{style:Yt},pb:{style:Yt},pl:{style:Yt},px:{style:Yt},py:{style:Yt},padding:{style:Yt},paddingTop:{style:Yt},paddingRight:{style:Yt},paddingBottom:{style:Yt},paddingLeft:{style:Yt},paddingX:{style:Yt},paddingY:{style:Yt},paddingInline:{style:Yt},paddingInlineStart:{style:Yt},paddingInlineEnd:{style:Yt},paddingBlock:{style:Yt},paddingBlockStart:{style:Yt},paddingBlockEnd:{style:Yt},m:{style:Jt},mt:{style:Jt},mr:{style:Jt},mb:{style:Jt},ml:{style:Jt},mx:{style:Jt},my:{style:Jt},margin:{style:Jt},marginTop:{style:Jt},marginRight:{style:Jt},marginBottom:{style:Jt},marginLeft:{style:Jt},marginX:{style:Jt},marginY:{style:Jt},marginInline:{style:Jt},marginInlineStart:{style:Jt},marginInlineEnd:{style:Jt},marginBlock:{style:Jt},marginBlockStart:{style:Jt},marginBlockEnd:{style:Jt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:cm},rowGap:{style:Im},columnGap:{style:um},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:rr},maxWidth:{style:AB},minWidth:{transform:rr},height:{transform:rr},maxHeight:{transform:rr},minHeight:{transform:rr},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Xq(...e){const t=e.reduce((r,a)=>r.concat(Object.keys(a)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function Jq(e,t){return typeof e=="function"?e(t):e}function Yq(){function e(n,r,a,i){const o={[n]:r,theme:a},l=i[n];if(!l)return{[n]:r};const{cssProperty:c=n,themeKey:u,transform:I,style:d}=l;if(r==null)return null;if(u==="typography"&&r==="inherit")return{[n]:r};const m=gm(a,u)||{};return d?d(o):ci(o,r,h=>{let b=wC(m,I,h);return h===b&&typeof h=="string"&&(b=wC(m,I,`${n}${h==="default"?"":pl(h)}`,h)),c===!1?b:{[c]:b}})}function t(n){const{sx:r,theme:a={}}=n||{};if(!r)return null;const i=a.unstable_sxConfig??dm;function o(l){let c=l;if(typeof l=="function")c=l(a);else if(typeof l!="object")return l;if(!c)return null;const u=O7(a.breakpoints),I=Object.keys(u);let d=u;return Object.keys(c).forEach(m=>{const p=Jq(c[m],a);if(p!=null)if(typeof p=="object")if(i[m])d=vc(d,e(m,p,a,i));else{const h=ci({theme:a},p,b=>({[m]:b}));Xq(h,p)?d[m]=t({sx:p,theme:a}):d=vc(d,h)}else d=vc(d,e(m,p,a,i))}),T7(a,Q7(I,d))}return Array.isArray(r)?r.map(o):o(r)}return t}const bl=Yq();bl.filterProps=["sx"];function Nq(e,t){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[e])||typeof n.getColorSchemeSelector!="function")return{};let a=n.getColorSchemeSelector(e);return a==="&"?t:((a.includes("data-")||a.includes("."))&&(a=`*:where(${a.replace(/\s*&$/,"")}) &`),{[a]:t})}return n.palette.mode===e?t:{}}function lK(e={},...t){const{breakpoints:n={},palette:r={},spacing:a,shape:i={},...o}=e,l=D7(n),c=gK(a);let u=lr({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:c,shape:{...U7,...i}},o);return u=z7(u),u.applyStyles=Nq,u=t.reduce((I,d)=>lr(I,d),u),u.unstable_sxConfig={...dm,...o==null?void 0:o.unstable_sxConfig},u.unstable_sx=function(d){return bl({sx:d,theme:this})},u}const sR=e=>e,Hq=()=>{let e=sR;return{configure(t){e=t},generate(t){return e(t)},reset(){e=sR}}},Fq=Hq(),Kq={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function sK(e,t,n="Mui"){const r=Kq[t];return r?`${n}-${r}`:`${Fq.generate(e)}-${t}`}function Eq(e,t,n="Mui"){const r={};return t.forEach(a=>{r[a]=sK(e,a,n)}),r}function cK(e){const{variants:t,...n}=e,r={variants:t,style:aR(n),isProcessed:!0};return r.style===n||t&&t.forEach(a=>{typeof a.style!="function"&&(a.style=aR(a.style))}),r}const Mq=lK();function fp(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Dq(e){return e?(t,n)=>n[e]:null}function Tq(e,t,n){e.theme=zq(e.theme)?n:e.theme[t]||e.theme}function Pd(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(r=>Pd(e,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:a,...i}=n;r=i}return uK(e,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function uK(e,t,n=[]){var a;let r;e:for(let i=0;i<t.length;i+=1){const o=t[i];if(typeof o.props=="function"){if(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),!o.props(r))continue}else for(const l in o.props)if(e[l]!==o.props[l]&&((a=e.ownerState)==null?void 0:a[l])!==o.props[l])continue e;typeof o.style=="function"?(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),n.push(o.style(r))):n.push(o.style)}return n}function jq(e={}){const{themeId:t,defaultTheme:n=Mq,rootShouldForwardProp:r=fp,slotShouldForwardProp:a=fp}=e;function i(l){Tq(l,t,n)}return(l,c={})=>{F7(l,B=>B.filter(V=>V!==bl));const{name:u,slot:I,skipVariantsResolver:d,skipSx:m,overridesResolver:p=Dq(Pq(I)),...h}=c,b=d!==void 0?d:I&&I!=="Root"&&I!=="root"||!1,y=m||!1;let v=fp;I==="Root"||I==="root"?v=r:I?v=a:Uq(l)&&(v=void 0);const G=H7(l,{shouldForwardProp:v,label:Lq(),...h}),S=B=>{if(typeof B=="function"&&B.__emotion_real!==B)return function(W){return Pd(W,B)};if(Oa(B)){const V=cK(B);return V.variants?function(X){return Pd(X,V)}:V.style}return B},R=(...B)=>{const V=[],W=B.map(S),X=[];if(V.push(i),u&&p&&X.push(function(F){var z,P;const M=(P=(z=F.theme.components)==null?void 0:z[u])==null?void 0:P.styleOverrides;if(!M)return null;const T={};for(const L in M)T[L]=Pd(F,M[L]);return p(F,T)}),u&&!b&&X.push(function(F){var T,z;const E=F.theme,M=(z=(T=E==null?void 0:E.components)==null?void 0:T[u])==null?void 0:z.variants;return M?uK(F,M):null}),y||X.push(bl),Array.isArray(W[0])){const Y=W.shift(),F=new Array(V.length).fill(""),E=new Array(X.length).fill("");let M;M=[...F,...Y,...E],M.raw=[...F,...Y.raw,...E],V.unshift(M)}const N=[...V,...W,...X],x=G(...N);return l.muiName&&(x.muiName=l.muiName),x};return G.withConfig&&(R.withConfig=G.withConfig),R}}function Lq(e,t){return void 0}function zq(e){for(const t in e)return!1;return!0}function Uq(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Pq(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function DZ(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=r;if(a==="components"||a==="slots")n[a]={...e[a],...n[a]};else if(a==="componentsProps"||a==="slotProps"){const i=e[a],o=t[a];if(!o)n[a]=i||{};else if(!i)n[a]=o;else{n[a]={...o};for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const c=l;n[a][c]=DZ(i[c],o[c])}}}else n[a]===void 0&&(n[a]=e[a])}return n}function Oq(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function mB(e,t=0,n=1){return Oq(e,t,n)}function Qq(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,a)=>a<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function to(e){if(e.type)return e;if(e.charAt(0)==="#")return to(Qq(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Qo(9,e));let r=e.substring(t+1,e.length-1),a;if(n==="color"){if(r=r.split(" "),a=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(Qo(10,a))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:n,values:r,colorSpace:a}}const _q=e=>{const t=to(e);return t.values.slice(0,3).map((n,r)=>t.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},fc=(e,t)=>{try{return _q(e)}catch{return e}};function Cm(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map((a,i)=>i<3?parseInt(a,10):a):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function IK(e){e=to(e);const{values:t}=e,n=t[0],r=t[1]/100,a=t[2]/100,i=r*Math.min(a,1-a),o=(u,I=(u+n/30)%12)=>a-i*Math.max(Math.min(I-3,9-I,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),Cm({type:l,values:c})}function TZ(e){e=to(e);let t=e.type==="hsl"||e.type==="hsla"?to(IK(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function qq(e,t){const n=TZ(e),r=TZ(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function $q(e,t){return e=to(e),t=mB(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Cm(e)}function fd(e,t,n){try{return $q(e,t)}catch{return e}}function fB(e,t){if(e=to(e),t=mB(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Cm(e)}function Ct(e,t,n){try{return fB(e,t)}catch{return e}}function hB(e,t){if(e=to(e),t=mB(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Cm(e)}function At(e,t,n){try{return hB(e,t)}catch{return e}}function e$(e,t=.15){return TZ(e)>.5?fB(e,t):hB(e,t)}function hd(e,t,n){try{return e$(e,t)}catch{return e}}function t$(e,t,n=void 0){const r={};for(const a in e){const i=e[a];let o="",l=!0;for(let c=0;c<i.length;c+=1){const u=i[c];u&&(o+=(l===!0?"":" ")+t(u),l=!1,n&&n[u]&&(o+=" "+n[u]))}r[a]=o}return r}const n$=k.createContext(void 0);function r$(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const a=t.components[n];return a.defaultProps?DZ(a.defaultProps,r):!a.styleOverrides&&!a.variants?DZ(a,r):r}function a$({props:e,name:t}){const n=k.useContext(n$);return r$({props:e,name:t,theme:{components:n}})}const cR={theme:void 0};function i$(e){let t,n;return function(a){let i=t;return(i===void 0||a.theme!==n)&&(cR.theme=a.theme,i=cK(e(cR)),t=i,n=a.theme),i}}function o$(e=""){function t(...r){if(!r.length)return"";const a=r[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${a}${t(...r.slice(1))})`:`, ${a}`}return(r,...a)=>`var(--${e?`${e}-`:""}${r}${t(...a)})`}const uR=(e,t,n,r=[])=>{let a=e;t.forEach((i,o)=>{o===t.length-1?Array.isArray(a)?a[Number(i)]=n:a&&typeof a=="object"&&(a[i]=n):a&&typeof a=="object"&&(a[i]||(a[i]=r.includes(i)?[]:{}),a=a[i])})},g$=(e,t,n)=>{function r(a,i=[],o=[]){Object.entries(a).forEach(([l,c])=>{(!n||!n([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?r(c,[...i,l],Array.isArray(c)?[...o,l]:o):t([...i,l],c,o))})}r(e)},l$=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function hp(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},a={},i={},o={};return g$(e,(l,c,u)=>{if((typeof c=="string"||typeof c=="number")&&(!r||!r(l,c))){const I=`--${n?`${n}-`:""}${l.join("-")}`,d=l$(l,c);Object.assign(a,{[I]:d}),uR(i,l,`var(${I})`,u),uR(o,l,`var(${I}, ${d})`,u)}},l=>l[0]==="vars"),{css:a,vars:i,varsWithDefaults:o}}function s$(e,t={}){const{getSelector:n=y,disableCssColorScheme:r,colorSchemeSelector:a}=t,{colorSchemes:i={},components:o,defaultColorScheme:l="light",...c}=e,{vars:u,css:I,varsWithDefaults:d}=hp(c,t);let m=d;const p={},{[l]:h,...b}=i;if(Object.entries(b||{}).forEach(([S,R])=>{const{vars:B,css:V,varsWithDefaults:W}=hp(R,t);m=lr(m,W),p[S]={css:V,vars:B}}),h){const{css:S,vars:R,varsWithDefaults:B}=hp(h,t);m=lr(m,B),p[l]={css:S,vars:R}}function y(S,R){var V,W;let B=a;if(a==="class"&&(B=".%s"),a==="data"&&(B="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(B=`[${a}="%s"]`),S){if(B==="media")return e.defaultColorScheme===S?":root":{[`@media (prefers-color-scheme: ${((W=(V=i[S])==null?void 0:V.palette)==null?void 0:W.mode)||S})`]:{":root":R}};if(B)return e.defaultColorScheme===S?`:root, ${B.replace("%s",String(S))}`:B.replace("%s",String(S))}return":root"}return{vars:m,generateThemeVars:()=>{let S={...u};return Object.entries(p).forEach(([,{vars:R}])=>{S=lr(S,R)}),S},generateStyleSheets:()=>{var X,N;const S=[],R=e.defaultColorScheme||"light";function B(x,Y){Object.keys(Y).length&&S.push(typeof x=="string"?{[x]:{...Y}}:x)}B(n(void 0,{...I}),I);const{[R]:V,...W}=p;if(V){const{css:x}=V,Y=(N=(X=i[R])==null?void 0:X.palette)==null?void 0:N.mode,F=!r&&Y?{colorScheme:Y,...x}:{...x};B(n(R,{...F}),F)}return Object.entries(W).forEach(([x,{css:Y}])=>{var M,T;const F=(T=(M=i[x])==null?void 0:M.palette)==null?void 0:T.mode,E=!r&&F?{colorScheme:F,...Y}:{...Y};B(n(x,{...E}),E)}),S}}}function c$(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}function dK(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Nc.white,default:Nc.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const u$=dK();function CK(){return{text:{primary:Nc.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Nc.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const IR=CK();function dR(e,t,n,r){const a=r.light||r,i=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=hB(e.main,a):t==="dark"&&(e.dark=fB(e.main,i)))}function I$(e="light"){return e==="dark"?{main:Hg[200],light:Hg[50],dark:Hg[400]}:{main:Hg[700],light:Hg[400],dark:Hg[800]}}function d$(e="light"){return e==="dark"?{main:Ng[200],light:Ng[50],dark:Ng[400]}:{main:Ng[500],light:Ng[300],dark:Ng[700]}}function C$(e="light"){return e==="dark"?{main:Yg[500],light:Yg[300],dark:Yg[700]}:{main:Yg[700],light:Yg[400],dark:Yg[800]}}function A$(e="light"){return e==="dark"?{main:Fg[400],light:Fg[300],dark:Fg[700]}:{main:Fg[700],light:Fg[500],dark:Fg[900]}}function m$(e="light"){return e==="dark"?{main:Kg[400],light:Kg[300],dark:Kg[700]}:{main:Kg[800],light:Kg[500],dark:Kg[900]}}function f$(e="light"){return e==="dark"?{main:nc[400],light:nc[300],dark:nc[700]}:{main:"#ed6c02",light:nc[500],dark:nc[900]}}function pB(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...a}=e,i=e.primary||I$(t),o=e.secondary||d$(t),l=e.error||C$(t),c=e.info||A$(t),u=e.success||m$(t),I=e.warning||f$(t);function d(b){return qq(b,IR.text.primary)>=n?IR.text.primary:u$.text.primary}const m=({color:b,name:y,mainShade:v=500,lightShade:G=300,darkShade:S=700})=>{if(b={...b},!b.main&&b[v]&&(b.main=b[v]),!b.hasOwnProperty("main"))throw new Error(Qo(11,y?` (${y})`:"",v));if(typeof b.main!="string")throw new Error(Qo(12,y?` (${y})`:"",JSON.stringify(b.main)));return dR(b,"light",G,r),dR(b,"dark",S,r),b.contrastText||(b.contrastText=d(b.main)),b};let p;return t==="light"?p=dK():t==="dark"&&(p=CK()),lr({common:{...Nc},mode:t,primary:m({color:i,name:"primary"}),secondary:m({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:l,name:"error"}),warning:m({color:I,name:"warning"}),info:m({color:c,name:"info"}),success:m({color:u,name:"success"}),grey:X8,contrastThreshold:n,getContrastText:d,augmentColor:m,tonalOffset:r,...p},a)}function h$(e){const t={};return Object.entries(e).forEach(r=>{const[a,i]=r;typeof i=="object"&&(t[a]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function p$(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function b$(e){return Math.round(e*1e5)/1e5}const CR={textTransform:"uppercase"},AR='"Roboto", "Helvetica", "Arial", sans-serif';function y$(e,t){const{fontFamily:n=AR,fontSize:r=14,fontWeightLight:a=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:I,...d}=typeof t=="function"?t(e):t,m=r/14,p=I||(y=>`${y/c*m}rem`),h=(y,v,G,S,R)=>({fontFamily:n,fontWeight:y,fontSize:p(v),lineHeight:G,...n===AR?{letterSpacing:`${b$(S/v)}em`}:{},...R,...u}),b={h1:h(a,96,1.167,-1.5),h2:h(a,60,1.2,-.5),h3:h(i,48,1.167,0),h4:h(i,34,1.235,.25),h5:h(i,24,1.334,0),h6:h(o,20,1.6,.15),subtitle1:h(i,16,1.75,.15),subtitle2:h(o,14,1.57,.1),body1:h(i,16,1.5,.15),body2:h(i,14,1.43,.15),button:h(o,14,1.75,.4,CR),caption:h(i,12,1.66,.4),overline:h(i,12,2.66,1,CR),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return lr({htmlFontSize:c,pxToRem:p,fontFamily:n,fontSize:r,fontWeightLight:a,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...b},d,{clone:!1})}const Z$=.2,v$=.14,G$=.12;function Bt(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Z$})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${v$})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${G$})`].join(",")}const B$=["none",Bt(0,2,1,-1,0,1,1,0,0,1,3,0),Bt(0,3,1,-2,0,2,2,0,0,1,5,0),Bt(0,3,3,-2,0,3,4,0,0,1,8,0),Bt(0,2,4,-1,0,4,5,0,0,1,10,0),Bt(0,3,5,-1,0,5,8,0,0,1,14,0),Bt(0,3,5,-1,0,6,10,0,0,1,18,0),Bt(0,4,5,-2,0,7,10,1,0,2,16,1),Bt(0,5,5,-3,0,8,10,1,0,3,14,2),Bt(0,5,6,-3,0,9,12,1,0,3,16,2),Bt(0,6,6,-3,0,10,14,1,0,4,18,3),Bt(0,6,7,-4,0,11,15,1,0,4,20,3),Bt(0,7,8,-4,0,12,17,2,0,5,22,4),Bt(0,7,8,-4,0,13,19,2,0,5,24,4),Bt(0,7,9,-4,0,14,21,2,0,5,26,4),Bt(0,8,9,-5,0,15,22,2,0,6,28,5),Bt(0,8,10,-5,0,16,24,2,0,6,30,5),Bt(0,8,11,-5,0,17,26,2,0,6,32,5),Bt(0,9,11,-5,0,18,28,2,0,7,34,6),Bt(0,9,12,-6,0,19,29,2,0,7,36,6),Bt(0,10,13,-6,0,20,31,3,0,8,38,7),Bt(0,10,13,-6,0,21,33,3,0,8,40,7),Bt(0,10,14,-6,0,22,35,3,0,8,42,7),Bt(0,11,14,-7,0,23,36,3,0,9,44,8),Bt(0,11,15,-7,0,24,38,3,0,9,46,8)],S$={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},w$={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function mR(e){return`${Math.round(e)}ms`}function W$(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function k$(e){const t={...S$,...e.easing},n={...w$,...e.duration};return{getAutoHeightDuration:W$,create:(a=["all"],i={})=>{const{duration:o=n.standard,easing:l=t.easeInOut,delay:c=0,...u}=i;return(Array.isArray(a)?a:[a]).map(I=>`${I} ${typeof o=="string"?o:mR(o)} ${l} ${typeof c=="string"?c:mR(c)}`).join(",")},...e,easing:t,duration:n}}const V$={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function R$(e){return Oa(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function AK(e={}){const t={...e};function n(r){const a=Object.entries(r);for(let i=0;i<a.length;i++){const[o,l]=a[i];!R$(l)||o.startsWith("unstable_")?delete r[o]:Oa(l)&&(r[o]={...l},n(r[o]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function jZ(e={},...t){const{breakpoints:n,mixins:r={},spacing:a,palette:i={},transitions:o={},typography:l={},shape:c,...u}=e;if(e.vars)throw new Error(Qo(20));const I=pB(i),d=lK(e);let m=lr(d,{mixins:p$(d.breakpoints,r),palette:I,shadows:B$.slice(),typography:y$(I,l),transitions:k$(o),zIndex:{...V$}});return m=lr(m,u),m=t.reduce((p,h)=>lr(p,h),m),m.unstable_sxConfig={...dm,...u==null?void 0:u.unstable_sxConfig},m.unstable_sx=function(h){return bl({sx:h,theme:this})},m.toRuntimeSource=AK,m}function x$(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const X$=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=x$(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function mK(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function fK(e){return e==="dark"?X$:[]}function J$(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...a}=e,i=pB(t);return{palette:i,opacity:{...mK(i.mode),...n},overlays:r||fK(i.mode),...a}}function Y$(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const N$=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],H$=e=>(t,n)=>{const r=e.rootSelector||":root",a=e.colorSchemeSelector;let i=a;if(a==="class"&&(i=".%s"),a==="data"&&(i="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(i=`[${a}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return N$(e.cssVarPrefix).forEach(l=>{o[l]=n[l],delete n[l]}),i==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:o}}:i?{[i.replace("%s",t)]:o,[`${r}, ${i.replace("%s",t)}`]:n}:{[r]:{...n,...o}}}if(i&&i!=="media")return`${r}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(i)return i.replace("%s",String(t))}return r};function F$(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function re(e,t,n){!e[t]&&n&&(e[t]=n)}function hc(e){return typeof e!="string"||!e.startsWith("hsl")?e:IK(e)}function za(e,t){`${t}Channel`in e||(e[`${t}Channel`]=fc(hc(e[t])))}function K$(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Ia=e=>{try{return e()}catch{}},E$=(e="mui")=>o$(e);function pp(e,t,n,r){if(!t)return;t=t===!0?{}:t;const a=r==="dark"?"dark":"light";if(!n){e[r]=J$({...t,palette:{mode:a,...t==null?void 0:t.palette}});return}const{palette:i,...o}=jZ({...n,palette:{mode:a,...t==null?void 0:t.palette}});return e[r]={...t,palette:i,opacity:{...mK(a),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||fK(a)},o}function M$(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:a=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:o=Y$,colorSchemeSelector:l=n.light&&n.dark?"media":void 0,rootSelector:c=":root",...u}=e,I=Object.keys(n)[0],d=r||(n.light&&I!=="light"?"light":I),m=E$(i),{[d]:p,light:h,dark:b,...y}=n,v={...y};let G=p;if((d==="dark"&&!("dark"in n)||d==="light"&&!("light"in n))&&(G=!0),!G)throw new Error(Qo(21,d));const S=pp(v,G,u,d);h&&!v.light&&pp(v,h,void 0,"light"),b&&!v.dark&&pp(v,b,void 0,"dark");let R={defaultColorScheme:d,...S,cssVarPrefix:i,colorSchemeSelector:l,rootSelector:c,getCssVar:m,colorSchemes:v,font:{...h$(S.typography),...S.font},spacing:K$(u.spacing)};Object.keys(R.colorSchemes).forEach(N=>{const x=R.colorSchemes[N].palette,Y=F=>{const E=F.split("-"),M=E[1],T=E[2];return m(F,x[M][T])};if(x.mode==="light"&&(re(x.common,"background","#fff"),re(x.common,"onBackground","#000")),x.mode==="dark"&&(re(x.common,"background","#000"),re(x.common,"onBackground","#fff")),F$(x,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),x.mode==="light"){re(x.Alert,"errorColor",Ct(x.error.light,.6)),re(x.Alert,"infoColor",Ct(x.info.light,.6)),re(x.Alert,"successColor",Ct(x.success.light,.6)),re(x.Alert,"warningColor",Ct(x.warning.light,.6)),re(x.Alert,"errorFilledBg",Y("palette-error-main")),re(x.Alert,"infoFilledBg",Y("palette-info-main")),re(x.Alert,"successFilledBg",Y("palette-success-main")),re(x.Alert,"warningFilledBg",Y("palette-warning-main")),re(x.Alert,"errorFilledColor",Ia(()=>x.getContrastText(x.error.main))),re(x.Alert,"infoFilledColor",Ia(()=>x.getContrastText(x.info.main))),re(x.Alert,"successFilledColor",Ia(()=>x.getContrastText(x.success.main))),re(x.Alert,"warningFilledColor",Ia(()=>x.getContrastText(x.warning.main))),re(x.Alert,"errorStandardBg",At(x.error.light,.9)),re(x.Alert,"infoStandardBg",At(x.info.light,.9)),re(x.Alert,"successStandardBg",At(x.success.light,.9)),re(x.Alert,"warningStandardBg",At(x.warning.light,.9)),re(x.Alert,"errorIconColor",Y("palette-error-main")),re(x.Alert,"infoIconColor",Y("palette-info-main")),re(x.Alert,"successIconColor",Y("palette-success-main")),re(x.Alert,"warningIconColor",Y("palette-warning-main")),re(x.AppBar,"defaultBg",Y("palette-grey-100")),re(x.Avatar,"defaultBg",Y("palette-grey-400")),re(x.Button,"inheritContainedBg",Y("palette-grey-300")),re(x.Button,"inheritContainedHoverBg",Y("palette-grey-A100")),re(x.Chip,"defaultBorder",Y("palette-grey-400")),re(x.Chip,"defaultAvatarColor",Y("palette-grey-700")),re(x.Chip,"defaultIconColor",Y("palette-grey-700")),re(x.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),re(x.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),re(x.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),re(x.LinearProgress,"primaryBg",At(x.primary.main,.62)),re(x.LinearProgress,"secondaryBg",At(x.secondary.main,.62)),re(x.LinearProgress,"errorBg",At(x.error.main,.62)),re(x.LinearProgress,"infoBg",At(x.info.main,.62)),re(x.LinearProgress,"successBg",At(x.success.main,.62)),re(x.LinearProgress,"warningBg",At(x.warning.main,.62)),re(x.Skeleton,"bg",`rgba(${Y("palette-text-primaryChannel")} / 0.11)`),re(x.Slider,"primaryTrack",At(x.primary.main,.62)),re(x.Slider,"secondaryTrack",At(x.secondary.main,.62)),re(x.Slider,"errorTrack",At(x.error.main,.62)),re(x.Slider,"infoTrack",At(x.info.main,.62)),re(x.Slider,"successTrack",At(x.success.main,.62)),re(x.Slider,"warningTrack",At(x.warning.main,.62));const F=hd(x.background.default,.8);re(x.SnackbarContent,"bg",F),re(x.SnackbarContent,"color",Ia(()=>x.getContrastText(F))),re(x.SpeedDialAction,"fabHoverBg",hd(x.background.paper,.15)),re(x.StepConnector,"border",Y("palette-grey-400")),re(x.StepContent,"border",Y("palette-grey-400")),re(x.Switch,"defaultColor",Y("palette-common-white")),re(x.Switch,"defaultDisabledColor",Y("palette-grey-100")),re(x.Switch,"primaryDisabledColor",At(x.primary.main,.62)),re(x.Switch,"secondaryDisabledColor",At(x.secondary.main,.62)),re(x.Switch,"errorDisabledColor",At(x.error.main,.62)),re(x.Switch,"infoDisabledColor",At(x.info.main,.62)),re(x.Switch,"successDisabledColor",At(x.success.main,.62)),re(x.Switch,"warningDisabledColor",At(x.warning.main,.62)),re(x.TableCell,"border",At(fd(x.divider,1),.88)),re(x.Tooltip,"bg",fd(x.grey[700],.92))}if(x.mode==="dark"){re(x.Alert,"errorColor",At(x.error.light,.6)),re(x.Alert,"infoColor",At(x.info.light,.6)),re(x.Alert,"successColor",At(x.success.light,.6)),re(x.Alert,"warningColor",At(x.warning.light,.6)),re(x.Alert,"errorFilledBg",Y("palette-error-dark")),re(x.Alert,"infoFilledBg",Y("palette-info-dark")),re(x.Alert,"successFilledBg",Y("palette-success-dark")),re(x.Alert,"warningFilledBg",Y("palette-warning-dark")),re(x.Alert,"errorFilledColor",Ia(()=>x.getContrastText(x.error.dark))),re(x.Alert,"infoFilledColor",Ia(()=>x.getContrastText(x.info.dark))),re(x.Alert,"successFilledColor",Ia(()=>x.getContrastText(x.success.dark))),re(x.Alert,"warningFilledColor",Ia(()=>x.getContrastText(x.warning.dark))),re(x.Alert,"errorStandardBg",Ct(x.error.light,.9)),re(x.Alert,"infoStandardBg",Ct(x.info.light,.9)),re(x.Alert,"successStandardBg",Ct(x.success.light,.9)),re(x.Alert,"warningStandardBg",Ct(x.warning.light,.9)),re(x.Alert,"errorIconColor",Y("palette-error-main")),re(x.Alert,"infoIconColor",Y("palette-info-main")),re(x.Alert,"successIconColor",Y("palette-success-main")),re(x.Alert,"warningIconColor",Y("palette-warning-main")),re(x.AppBar,"defaultBg",Y("palette-grey-900")),re(x.AppBar,"darkBg",Y("palette-background-paper")),re(x.AppBar,"darkColor",Y("palette-text-primary")),re(x.Avatar,"defaultBg",Y("palette-grey-600")),re(x.Button,"inheritContainedBg",Y("palette-grey-800")),re(x.Button,"inheritContainedHoverBg",Y("palette-grey-700")),re(x.Chip,"defaultBorder",Y("palette-grey-700")),re(x.Chip,"defaultAvatarColor",Y("palette-grey-300")),re(x.Chip,"defaultIconColor",Y("palette-grey-300")),re(x.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),re(x.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),re(x.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),re(x.LinearProgress,"primaryBg",Ct(x.primary.main,.5)),re(x.LinearProgress,"secondaryBg",Ct(x.secondary.main,.5)),re(x.LinearProgress,"errorBg",Ct(x.error.main,.5)),re(x.LinearProgress,"infoBg",Ct(x.info.main,.5)),re(x.LinearProgress,"successBg",Ct(x.success.main,.5)),re(x.LinearProgress,"warningBg",Ct(x.warning.main,.5)),re(x.Skeleton,"bg",`rgba(${Y("palette-text-primaryChannel")} / 0.13)`),re(x.Slider,"primaryTrack",Ct(x.primary.main,.5)),re(x.Slider,"secondaryTrack",Ct(x.secondary.main,.5)),re(x.Slider,"errorTrack",Ct(x.error.main,.5)),re(x.Slider,"infoTrack",Ct(x.info.main,.5)),re(x.Slider,"successTrack",Ct(x.success.main,.5)),re(x.Slider,"warningTrack",Ct(x.warning.main,.5));const F=hd(x.background.default,.98);re(x.SnackbarContent,"bg",F),re(x.SnackbarContent,"color",Ia(()=>x.getContrastText(F))),re(x.SpeedDialAction,"fabHoverBg",hd(x.background.paper,.15)),re(x.StepConnector,"border",Y("palette-grey-600")),re(x.StepContent,"border",Y("palette-grey-600")),re(x.Switch,"defaultColor",Y("palette-grey-300")),re(x.Switch,"defaultDisabledColor",Y("palette-grey-600")),re(x.Switch,"primaryDisabledColor",Ct(x.primary.main,.55)),re(x.Switch,"secondaryDisabledColor",Ct(x.secondary.main,.55)),re(x.Switch,"errorDisabledColor",Ct(x.error.main,.55)),re(x.Switch,"infoDisabledColor",Ct(x.info.main,.55)),re(x.Switch,"successDisabledColor",Ct(x.success.main,.55)),re(x.Switch,"warningDisabledColor",Ct(x.warning.main,.55)),re(x.TableCell,"border",Ct(fd(x.divider,1),.68)),re(x.Tooltip,"bg",fd(x.grey[700],.92))}za(x.background,"default"),za(x.background,"paper"),za(x.common,"background"),za(x.common,"onBackground"),za(x,"divider"),Object.keys(x).forEach(F=>{const E=x[F];F!=="tonalOffset"&&E&&typeof E=="object"&&(E.main&&re(x[F],"mainChannel",fc(hc(E.main))),E.light&&re(x[F],"lightChannel",fc(hc(E.light))),E.dark&&re(x[F],"darkChannel",fc(hc(E.dark))),E.contrastText&&re(x[F],"contrastTextChannel",fc(hc(E.contrastText))),F==="text"&&(za(x[F],"primary"),za(x[F],"secondary")),F==="action"&&(E.active&&za(x[F],"active"),E.selected&&za(x[F],"selected")))})}),R=t.reduce((N,x)=>lr(N,x),R);const B={prefix:i,disableCssColorScheme:a,shouldSkipGeneratingVar:o,getSelector:H$(R)},{vars:V,generateThemeVars:W,generateStyleSheets:X}=s$(R,B);return R.vars=V,Object.entries(R.colorSchemes[R.defaultColorScheme]).forEach(([N,x])=>{R[N]=x}),R.generateThemeVars=W,R.generateStyleSheets=X,R.generateSpacing=function(){return gK(u.spacing,CB(this))},R.getColorSchemeSelector=c$(l),R.spacing=R.generateSpacing(),R.shouldSkipGeneratingVar=o,R.unstable_sxConfig={...dm,...u==null?void 0:u.unstable_sxConfig},R.unstable_sx=function(x){return bl({sx:x,theme:this})},R.toRuntimeSource=AK,R}function fR(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:pB({...n===!0?{}:n.palette,mode:t})})}function D$(e={},...t){const{palette:n,cssVariables:r=!1,colorSchemes:a=n?void 0:{light:!0},defaultColorScheme:i=n==null?void 0:n.mode,...o}=e,l=i||"light",c=a==null?void 0:a[l],u={...a,...n?{[l]:{...typeof c!="boolean"&&c,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in e))return jZ(e,...t);let I=n;"palette"in e||u[l]&&(u[l]!==!0?I=u[l].palette:l==="dark"&&(I={mode:"dark"}));const d=jZ({...e,palette:I},...t);return d.defaultColorScheme=l,d.colorSchemes=u,d.palette.mode==="light"&&(d.colorSchemes.light={...u.light!==!0&&u.light,palette:d.palette},fR(d,"dark",u.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:d.palette},fR(d,"light",u.light)),d}return!n&&!("light"in u)&&l==="light"&&(u.light=!0),M$({...o,colorSchemes:u,defaultColorScheme:l,...typeof r!="boolean"&&r},...t)}const T$=D$();function j$(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const L$=e=>j$(e)&&e!=="classes",bB=jq({themeId:J8,defaultTheme:T$,rootShouldForwardProp:L$}),hK=i$;function z$(e){return a$(e)}function U$(e){return typeof e.main=="string"}function P$(e,t=[]){if(!U$(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function O$(e=[]){return([,t])=>t&&P$(t,e)}function Q$(e){return sK("MuiCircularProgress",e)}Eq("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Ei=44,LZ=rK`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,zZ=rK`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,_$=typeof LZ!="string"?uB`
        animation: ${LZ} 1.4s linear infinite;
      `:null,q$=typeof zZ!="string"?uB`
        animation: ${zZ} 1.4s ease-in-out infinite;
      `:null,$$=e=>{const{classes:t,variant:n,color:r,disableShrink:a}=e,i={root:["root",n,`color${pl(r)}`],svg:["svg"],circle:["circle",`circle${pl(n)}`,a&&"circleDisableShrink"]};return t$(i,Q$,t)},e6=bB("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${pl(n.color)}`]]}})(hK(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:_$||{animation:`${LZ} 1.4s linear infinite`}},...Object.entries(e.palette).filter(O$()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),t6=bB("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),n6=bB("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${pl(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(hK(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:q$||{animation:`${zZ} 1.4s ease-in-out infinite`}}]}))),r6=k.forwardRef(function(t,n){const r=z$({props:t,name:"MuiCircularProgress"}),{className:a,color:i="primary",disableShrink:o=!1,size:l=40,style:c,thickness:u=3.6,value:I=0,variant:d="indeterminate",...m}=r,p={...r,color:i,disableShrink:o,size:l,thickness:u,value:I,variant:d},h=$$(p),b={},y={},v={};if(d==="determinate"){const G=2*Math.PI*((Ei-u)/2);b.strokeDasharray=G.toFixed(3),v["aria-valuenow"]=Math.round(I),b.strokeDashoffset=`${((100-I)/100*G).toFixed(3)}px`,y.transform="rotate(-90deg)"}return A.jsx(e6,{className:Ve(h.root,a),style:{width:l,height:l,...y,...c},ownerState:p,ref:n,role:"progressbar",...v,...m,children:A.jsx(t6,{className:h.svg,ownerState:p,viewBox:`${Ei/2} ${Ei/2} ${Ei} ${Ei}`,children:A.jsx(n6,{className:h.circle,style:b,ownerState:p,cx:Ei,cy:Ei,r:(Ei-u)/2,fill:"none",strokeWidth:u})})})});function a6(){const[e,t]=k.useState(null),[n,r]=k.useState(!1),a=Ya(),i=async d=>{if(d&&!n&&d.text){r(!0);try{let m;try{m=d.text}catch(v){throw console.error("QR Parse error:",v),new Error("Format QR Code tidak valid")}let p;try{p=await new Promise((v,G)=>{navigator.geolocation.getCurrentPosition(v,G,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})})}catch(v){throw console.error("Location error:",v),new Error("Gagal mendapatkan lokasi. Pastikan GPS aktif.")}const h={qrData:m,latitude:p.coords.latitude,longitude:p.coords.longitude,deviceInfo:JSON.stringify({userAgent:navigator.userAgent,platform:navigator.platform})},b=await fetch("http://localhost:3000/api/absen/scan",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(h)});if(!b.ok){const v=await b.json();throw new Error(v.message||"Gagal memproses absensi")}const y=await b.json();if(y.success)t(y),await Ye.fire({title:'<div class="text-2xl font-bold mb-4">Absensi Berhasil! 🎉</div>',html:`
              <div class="bg-gray-50 p-6 rounded-lg shadow-sm">
                <div class="space-y-3">
                  <div class="flex items-center border-b border-gray-200 pb-3">
                    <div class="w-24 text-gray-600">Nama</div>
                    <div class="flex-1 font-medium">${y.data.nama}</div>
                  </div>
                  <div class="flex items-center border-b border-gray-200 pb-3">
                    <div class="w-24 text-gray-600">Waktu</div>
                    <div class="flex-1 font-medium">${y.data.waktu}</div>
                  </div>
                  <div class="flex items-center border-b border-gray-200 pb-3">
                    <div class="w-24 text-gray-600">Status</div>
                    <div class="flex-1">
                      <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">
                        ${y.data.status}
                      </span>
                    </div>
                  </div>
                  ${y.data.dalam_radius!==void 0?`
                    <div class="flex items-center">
                      <div class="w-24 text-gray-600">Lokasi</div>
                      <div class="flex-1">
                        <span class="px-3 py-1 ${y.data.dalam_radius?"bg-green-100 text-green-800":"bg-red-100 text-red-800"} rounded-full text-sm font-medium">
                          ${y.data.dalam_radius?"Dalam radius":"Di luar radius"}
                        </span>
                      </div>
                    </div>
                  `:""}
                </div>
              </div>
            `,icon:"success",showConfirmButton:!0,confirmButtonText:"Selesai",confirmButtonColor:"#10B981",allowOutsideClick:!1,customClass:{popup:"swal2-show",container:"swal2-container",title:"text-2xl font-bold mb-4"}}).then(v=>{v.isConfirmed&&l()});else throw new Error(y.message||"Gagal memproses absensi")}catch(m){await Ye.fire({title:"Gagal!",text:m.message,icon:"error",confirmButtonColor:"#EF4444"})}finally{r(!1)}}},o=async d=>{console.error("Camera error:",d),await Ye.fire({title:"Error!",text:"Gagal mengakses kamera. Pastikan kamera dalam keadaan aktif.",icon:"error",confirmButtonColor:"#EF4444"})},l=()=>{t(null),window.location.reload()},c=280,u={height:c,width:c,objectFit:"cover"},I={height:c+40,width:c+40};return A.jsxs("div",{className:"h-screen bg-white relative overflow-hidden",children:[A.jsx(vG,{}),A.jsx("div",{className:"bg-white relative overflow-hidden flex flex-col items-center justify-center",children:A.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center px-10",children:A.jsx("div",{className:"max-w-2xl w-full mx-auto justify-center bg-white mb-4 rounded-lg shadow-xl p-8 px-24 pb-10 flex flex-col items-center",children:A.jsxs("div",{className:"max-w-md w-full",children:[A.jsx("h2",{className:"text-2xl font-semibold text-center mb-8",children:"Scan QR Code Absensi"}),!e&&!n&&A.jsx("div",{className:"relative mb-8 flex items-center justify-center",children:A.jsxs("div",{className:"relative",style:I,children:[A.jsx("div",{className:"absolute inset-5",children:A.jsx(iB,{delay:300,style:u,onError:o,onScan:i,className:"rounded-lg"})}),A.jsxs("div",{className:"absolute inset-0",children:[A.jsxs("div",{className:"absolute top-0 left-0 w-10 h-10",children:[A.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-red-500"}),A.jsx("div",{className:"absolute top-0 left-0 w-2 h-full bg-red-500"})]}),A.jsxs("div",{className:"absolute top-0 right-0 w-10 h-10",children:[A.jsx("div",{className:"absolute top-0 right-0 w-full h-2 bg-red-500"}),A.jsx("div",{className:"absolute top-0 right-0 w-2 h-full bg-red-500"})]}),A.jsxs("div",{className:"absolute bottom-0 left-0 w-10 h-10",children:[A.jsx("div",{className:"absolute bottom-0 left-0 w-full h-2 bg-red-500"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-full bg-red-500"})]}),A.jsxs("div",{className:"absolute bottom-0 right-0 w-10 h-10",children:[A.jsx("div",{className:"absolute bottom-0 right-0 w-full h-2 bg-red-500"}),A.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-full bg-red-500"})]})]})]})}),n&&A.jsx("div",{className:"flex items-center justify-center mb-8",children:A.jsx(r6,{})}),A.jsx("div",{className:"text-center space-y-4",children:!e&&!n&&A.jsx("button",{className:"px-6 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",onClick:()=>a("/"),children:"Tutup"})})]})})})}),A.jsx(GG,{})]})}const i6=()=>A.jsx(a6,{});function ac(){const e=ea(),t=Ya(),[n,r]=k.useState(null),a=(o,l)=>{r(o),t(l)},i=[{id:1,name:"Dashboard",link:"/dashboard"},{id:2,name:"Internship",link:"/internship"},{id:3,name:"Absensi",link:"/absensi"},{id:4,name:"Logbook",link:"/logbook"},{id:5,name:"Laporan",link:"/laporan"}];return A.jsx("div",{className:"md:ml-6 h-full flex flex-col md:flex-row space-x-8",children:i.map(o=>A.jsx("div",{className:`${e.pathname===o.link||n===o.id?"text-red-500 border-b-2 border-red-500 ":"text-gray-500 hover:text-gray-700 duration-500"} px-3 pt-5 cursor-pointer`,onClick:()=>a(o.id,o.link),children:o.name},o.id))})}var o6={};const es=({type:e})=>{var m,p;const{user:t,logout:n}=ln(),[r,a]=k.useState(!1),[i,o]=k.useState(!1),l=k.useRef(null),c=Ya(),u=()=>{o(!i)},I=async()=>{try{await n(),c("/login")}catch(h){console.error("Logout error:",h)}},d=()=>t!=null&&t.photo_profile?t.photo_profile.startsWith("http")?t.photo_profile:`${o6.REACT_APP_API_URL||"http://localhost:3000"}/uploads/profiles/${t.photo_profile}`:null;return A.jsx("nav",{className:"bg-white z-50 fixed px-8 shadow-md w-full",children:A.jsx("div",{className:"max-w-7xl mx-auto",children:A.jsxs("div",{className:"flex justify-between h-16",children:[A.jsxs("div",{className:"flex h-full items-center",children:[A.jsx("img",{src:"images/cemenLogo.svg",alt:"Logo",className:"h-11 w-auto"}),A.jsx("div",{className:"ml-6 h-full md:flex space-x-8 hidden",children:A.jsx(hR,{type:e})})]}),A.jsxs("div",{className:"md:flex items-center hidden relative",ref:l,children:[A.jsx("button",{onClick:()=>a(!r),className:"flex items-center group hover:bg-gray-50 rounded-lg transition-all duration-150 ease-in-out",children:A.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[A.jsxs("div",{className:"flex flex-col items-end",children:[A.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900 duration-500",children:(t==null?void 0:t.nama)||"Admin"}),A.jsx("span",{className:"text-xs text-gray-500 group-hover:text-gray-700 duration-500",children:((m=t==null?void 0:t.role)==null?void 0:m.charAt(0).toUpperCase())+((p=t==null?void 0:t.role)==null?void 0:p.slice(1))||"Admin"})]}),d()?A.jsx("img",{src:d(),alt:"Profile",className:"h-9 w-9 rounded-full ring-2 ring-gray-100 duration-500 group-hover:ring-red-300 object-cover",onError:h=>{h.target.onerror=null,h.target.src=null,h.target.className="hidden",h.target.nextSibling.className="h-9 w-9 rounded-full ring-2 ring-gray-100 duration-500 group-hover:ring-red-200 bg-gray-200 flex items-center justify-center"}}):A.jsx("div",{className:"h-9 w-9 rounded-full ring-2 ring-gray-100 duration-500 group-hover:ring-red-200 bg-gray-200 flex items-center justify-center",children:A.jsx(tC,{className:"h-6 w-6 text-gray-500"})}),A.jsx(aH,{className:`h-4 w-4 text-gray-500 transition-transform duration-500 ${r?"transform rotate-180":""}`})]})}),A.jsx("div",{className:`absolute right-0 top-full mt-1 w-60 rounded-xl bg-white shadow-lg ring-1 ring-black ring-opacity-5 transform transition-all duration-500 ease-in-out ${r?"opacity-100 translate-y-0 visible":"opacity-0 -translate-y-2 invisible"}`,children:A.jsxs("div",{className:"p-2",children:[A.jsx("div",{className:"text-xs font-medium text-gray-400 px-3 py-2",children:"Account Settings"}),A.jsxs(To,{to:"/profile",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-700 hover:bg-blue-50 duration-500 transition-colors",onClick:()=>a(!1),children:[A.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-blue-50 text-blue-600",children:A.jsx(tC,{className:"h-5 w-5"})}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"font-medium",children:"Edit Profile"}),A.jsx("span",{className:"text-xs text-gray-500",children:"Manage your account"})]})]}),A.jsx("div",{className:"h-px bg-gray-100 my-2"}),A.jsxs("button",{onClick:()=>{I(),a(!1)},className:"flex items-center gap-3 w-full px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50 duration-500 transition-colors",children:[A.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-red-50 text-red-600",children:A.jsx(oH,{className:"h-5 w-5"})}),A.jsxs("div",{className:"flex flex-col items-start",children:[A.jsx("span",{className:"font-medium",children:"Log Out"}),A.jsx("span",{className:"text-xs text-red-500",children:"End your session"})]})]})]})})]}),A.jsx("div",{className:"md:hidden flex justify-between items-center w-full",children:A.jsx("div",{className:"bg-white shadow ml-auto px-[12px] py-[12px] rounded-md",children:A.jsx(nH,{onClick:u,className:"h-5 w-5 text-gray-800"})})}),A.jsx("div",{className:`absolute shadow text-end justify-end items-end cursor-pointer mr-[32px] rounded-lg top-20 right-0 bg-white z-50 flex flex-col px-5 pb-5 transition-all duration-500 ease-in-out ${i?"opacity-100 translate-y-0 visible":"opacity-0 -translate-y-2 invisible"}`,children:A.jsx(hR,{type:e})})]})})})},hR=({type:e})=>e==="dashboard"?A.jsx(ac,{}):e==="internship"?A.jsx(ac,{}):e==="absensi"?A.jsx(ac,{}):e==="logbook"?A.jsx(ac,{}):A.jsx(ac,{});function g6(){const[e,t]=k.useState({totalInternship:0,kehadiranHariIni:0,pengajuanIzin:0,logbookPending:0}),{user:n}=ln();k.useEffect(()=>{const a=async()=>{try{const i=await Ie.get("http://localhost:3000/api/absen/dashboard/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(i.data.success){const o=i.data.data;t({totalInternship:o.totalInternship,kehadiranHariIni:o.kehadiranHariIni,pengajuanIzin:o.izinHariIni,logbookPending:o.logbookPending})}}catch(i){console.error("Error fetching dashboard stats:",i)}};if((n==null?void 0:n.role)==="admin"){a();const i=setInterval(a,3e5);return()=>clearInterval(i)}},[n]);const r=[{title:"Total Internship Aktif",value:e.totalInternship,color:"text-black"},{title:"Kehadiran Hari Ini",value:e.kehadiranHariIni,color:"text-green-500"},{title:"Pengajuan Izin",value:e.pengajuanIzin,color:"text-yellow-500"},{title:"Logbook Pending",value:e.logbookPending,color:"text-yellow-500"}];return A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:r.map((a,i)=>A.jsxs("div",{className:"group bg-white p-6 rounded-lg shadow hover:scale-105 duration-500",children:[A.jsx("h3",{className:"text-gray-600 mb-2 group-hover:text-red-500 duration-500",children:a.title}),A.jsx("p",{className:`text-3xl font-bold ${a.color}`,children:a.value})]},i))})}var bp,pR;function Pn(){if(pR)return bp;pR=1;var e=Array.isArray;return bp=e,bp}var yp,bR;function pK(){if(bR)return yp;bR=1;var e=typeof id=="object"&&id&&id.Object===Object&&id;return yp=e,yp}var Zp,yR;function Ha(){if(yR)return Zp;yR=1;var e=pK(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Zp=n,Zp}var vp,ZR;function Ku(){if(ZR)return vp;ZR=1;var e=Ha(),t=e.Symbol;return vp=t,vp}var Gp,vR;function l6(){if(vR)return Gp;vR=1;var e=Ku(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,a=e?e.toStringTag:void 0;function i(o){var l=n.call(o,a),c=o[a];try{o[a]=void 0;var u=!0}catch{}var I=r.call(o);return u&&(l?o[a]=c:delete o[a]),I}return Gp=i,Gp}var Bp,GR;function s6(){if(GR)return Bp;GR=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Bp=n,Bp}var Sp,BR;function Ai(){if(BR)return Sp;BR=1;var e=Ku(),t=l6(),n=s6(),r="[object Null]",a="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?a:r:i&&i in Object(l)?t(l):n(l)}return Sp=o,Sp}var wp,SR;function mi(){if(SR)return wp;SR=1;function e(t){return t!=null&&typeof t=="object"}return wp=e,wp}var Wp,wR;function ts(){if(wR)return Wp;wR=1;var e=Ai(),t=mi(),n="[object Symbol]";function r(a){return typeof a=="symbol"||t(a)&&e(a)==n}return Wp=r,Wp}var kp,WR;function yB(){if(WR)return kp;WR=1;var e=Pn(),t=ts(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function a(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:r.test(i)||!n.test(i)||o!=null&&i in Object(o)}return kp=a,kp}var Vp,kR;function ao(){if(kR)return Vp;kR=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Vp=e,Vp}var Rp,VR;function ZB(){if(VR)return Rp;VR=1;var e=Ai(),t=ao(),n="[object AsyncFunction]",r="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==r||c==a||c==n||c==i}return Rp=o,Rp}var xp,RR;function c6(){if(RR)return xp;RR=1;var e=Ha(),t=e["__core-js_shared__"];return xp=t,xp}var Xp,xR;function u6(){if(xR)return Xp;xR=1;var e=c6(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return Xp=n,Xp}var Jp,XR;function bK(){if(XR)return Jp;XR=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Jp=n,Jp}var Yp,JR;function I6(){if(JR)return Yp;JR=1;var e=ZB(),t=u6(),n=ao(),r=bK(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,I=RegExp("^"+c.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(m){if(!n(m)||t(m))return!1;var p=e(m)?I:i;return p.test(r(m))}return Yp=d,Yp}var Np,YR;function d6(){if(YR)return Np;YR=1;function e(t,n){return t==null?void 0:t[n]}return Np=e,Np}var Hp,NR;function ag(){if(NR)return Hp;NR=1;var e=I6(),t=d6();function n(r,a){var i=t(r,a);return e(i)?i:void 0}return Hp=n,Hp}var Fp,HR;function Am(){if(HR)return Fp;HR=1;var e=ag(),t=e(Object,"create");return Fp=t,Fp}var Kp,FR;function C6(){if(FR)return Kp;FR=1;var e=Am();function t(){this.__data__=e?e(null):{},this.size=0}return Kp=t,Kp}var Ep,KR;function A6(){if(KR)return Ep;KR=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Ep=e,Ep}var Mp,ER;function m6(){if(ER)return Mp;ER=1;var e=Am(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function a(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return r.call(o,i)?o[i]:void 0}return Mp=a,Mp}var Dp,MR;function f6(){if(MR)return Dp;MR=1;var e=Am(),t=Object.prototype,n=t.hasOwnProperty;function r(a){var i=this.__data__;return e?i[a]!==void 0:n.call(i,a)}return Dp=r,Dp}var Tp,DR;function h6(){if(DR)return Tp;DR=1;var e=Am(),t="__lodash_hash_undefined__";function n(r,a){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=e&&a===void 0?t:a,this}return Tp=n,Tp}var jp,TR;function p6(){if(TR)return jp;TR=1;var e=C6(),t=A6(),n=m6(),r=f6(),a=h6();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=a,jp=i,jp}var Lp,jR;function b6(){if(jR)return Lp;jR=1;function e(){this.__data__=[],this.size=0}return Lp=e,Lp}var zp,LR;function vB(){if(LR)return zp;LR=1;function e(t,n){return t===n||t!==t&&n!==n}return zp=e,zp}var Up,zR;function mm(){if(zR)return Up;zR=1;var e=vB();function t(n,r){for(var a=n.length;a--;)if(e(n[a][0],r))return a;return-1}return Up=t,Up}var Pp,UR;function y6(){if(UR)return Pp;UR=1;var e=mm(),t=Array.prototype,n=t.splice;function r(a){var i=this.__data__,o=e(i,a);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():n.call(i,o,1),--this.size,!0}return Pp=r,Pp}var Op,PR;function Z6(){if(PR)return Op;PR=1;var e=mm();function t(n){var r=this.__data__,a=e(r,n);return a<0?void 0:r[a][1]}return Op=t,Op}var Qp,OR;function v6(){if(OR)return Qp;OR=1;var e=mm();function t(n){return e(this.__data__,n)>-1}return Qp=t,Qp}var _p,QR;function G6(){if(QR)return _p;QR=1;var e=mm();function t(n,r){var a=this.__data__,i=e(a,n);return i<0?(++this.size,a.push([n,r])):a[i][1]=r,this}return _p=t,_p}var qp,_R;function fm(){if(_R)return qp;_R=1;var e=b6(),t=y6(),n=Z6(),r=v6(),a=G6();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=a,qp=i,qp}var $p,qR;function GB(){if(qR)return $p;qR=1;var e=ag(),t=Ha(),n=e(t,"Map");return $p=n,$p}var eb,$R;function B6(){if($R)return eb;$R=1;var e=p6(),t=fm(),n=GB();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return eb=r,eb}var tb,e2;function S6(){if(e2)return tb;e2=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return tb=e,tb}var nb,t2;function hm(){if(t2)return nb;t2=1;var e=S6();function t(n,r){var a=n.__data__;return e(r)?a[typeof r=="string"?"string":"hash"]:a.map}return nb=t,nb}var rb,n2;function w6(){if(n2)return rb;n2=1;var e=hm();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return rb=t,rb}var ab,r2;function W6(){if(r2)return ab;r2=1;var e=hm();function t(n){return e(this,n).get(n)}return ab=t,ab}var ib,a2;function k6(){if(a2)return ib;a2=1;var e=hm();function t(n){return e(this,n).has(n)}return ib=t,ib}var ob,i2;function V6(){if(i2)return ob;i2=1;var e=hm();function t(n,r){var a=e(this,n),i=a.size;return a.set(n,r),this.size+=a.size==i?0:1,this}return ob=t,ob}var gb,o2;function BB(){if(o2)return gb;o2=1;var e=B6(),t=w6(),n=W6(),r=k6(),a=V6();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=a,gb=i,gb}var lb,g2;function yK(){if(g2)return lb;g2=1;var e=BB(),t="Expected a function";function n(r,a){if(typeof r!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var i=function(){var o=arguments,l=a?a.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var u=r.apply(this,o);return i.cache=c.set(l,u)||c,u};return i.cache=new(n.Cache||e),i}return n.Cache=e,lb=n,lb}var sb,l2;function R6(){if(l2)return sb;l2=1;var e=yK(),t=500;function n(r){var a=e(r,function(o){return i.size===t&&i.clear(),o}),i=a.cache;return a}return sb=n,sb}var cb,s2;function x6(){if(s2)return cb;s2=1;var e=R6(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(t,function(o,l,c,u){i.push(c?u.replace(n,"$1"):l||o)}),i});return cb=r,cb}var ub,c2;function SB(){if(c2)return ub;c2=1;function e(t,n){for(var r=-1,a=t==null?0:t.length,i=Array(a);++r<a;)i[r]=n(t[r],r,t);return i}return ub=e,ub}var Ib,u2;function X6(){if(u2)return Ib;u2=1;var e=Ku(),t=SB(),n=Pn(),r=ts(),a=e?e.prototype:void 0,i=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return Ib=o,Ib}var db,I2;function ZK(){if(I2)return db;I2=1;var e=X6();function t(n){return n==null?"":e(n)}return db=t,db}var Cb,d2;function vK(){if(d2)return Cb;d2=1;var e=Pn(),t=yB(),n=x6(),r=ZK();function a(i,o){return e(i)?i:t(i,o)?[i]:n(r(i))}return Cb=a,Cb}var Ab,C2;function pm(){if(C2)return Ab;C2=1;var e=ts();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Ab=t,Ab}var mb,A2;function wB(){if(A2)return mb;A2=1;var e=vK(),t=pm();function n(r,a){a=e(a,r);for(var i=0,o=a.length;r!=null&&i<o;)r=r[t(a[i++])];return i&&i==o?r:void 0}return mb=n,mb}var fb,m2;function GK(){if(m2)return fb;m2=1;var e=wB();function t(n,r,a){var i=n==null?void 0:e(n,r);return i===void 0?a:i}return fb=t,fb}var J6=GK();const Sr=ut(J6);var hb,f2;function Y6(){if(f2)return hb;f2=1;function e(t){return t==null}return hb=e,hb}var N6=Y6();const Me=ut(N6);var pb,h2;function H6(){if(h2)return pb;h2=1;var e=Ai(),t=Pn(),n=mi(),r="[object String]";function a(i){return typeof i=="string"||!t(i)&&n(i)&&e(i)==r}return pb=a,pb}var F6=H6();const Eu=ut(F6);var K6=ZB();const He=ut(K6);var E6=ao();const ns=ut(E6);var bb={exports:{}},nt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function M6(){if(p2)return nt;p2=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),h;h=Symbol.for("react.module.reference");function b(y){if(typeof y=="object"&&y!==null){var v=y.$$typeof;switch(v){case e:switch(y=y.type,y){case n:case a:case r:case u:case I:return y;default:switch(y=y&&y.$$typeof,y){case l:case o:case c:case m:case d:case i:return y;default:return v}}case t:return v}}}return nt.ContextConsumer=o,nt.ContextProvider=i,nt.Element=e,nt.ForwardRef=c,nt.Fragment=n,nt.Lazy=m,nt.Memo=d,nt.Portal=t,nt.Profiler=a,nt.StrictMode=r,nt.Suspense=u,nt.SuspenseList=I,nt.isAsyncMode=function(){return!1},nt.isConcurrentMode=function(){return!1},nt.isContextConsumer=function(y){return b(y)===o},nt.isContextProvider=function(y){return b(y)===i},nt.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},nt.isForwardRef=function(y){return b(y)===c},nt.isFragment=function(y){return b(y)===n},nt.isLazy=function(y){return b(y)===m},nt.isMemo=function(y){return b(y)===d},nt.isPortal=function(y){return b(y)===t},nt.isProfiler=function(y){return b(y)===a},nt.isStrictMode=function(y){return b(y)===r},nt.isSuspense=function(y){return b(y)===u},nt.isSuspenseList=function(y){return b(y)===I},nt.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===a||y===r||y===u||y===I||y===p||typeof y=="object"&&y!==null&&(y.$$typeof===m||y.$$typeof===d||y.$$typeof===i||y.$$typeof===o||y.$$typeof===c||y.$$typeof===h||y.getModuleId!==void 0)},nt.typeOf=b,nt}var b2;function D6(){return b2||(b2=1,bb.exports=M6()),bb.exports}var T6=D6(),yb,y2;function BK(){if(y2)return yb;y2=1;var e=Ai(),t=mi(),n="[object Number]";function r(a){return typeof a=="number"||t(a)&&e(a)==n}return yb=r,yb}var Zb,Z2;function j6(){if(Z2)return Zb;Z2=1;var e=BK();function t(n){return e(n)&&n!=+n}return Zb=t,Zb}var L6=j6();const Mu=ut(L6);var z6=BK();const U6=ut(z6);var Or=function(t){return t===0?0:t>0?1:-1},Ro=function(t){return Eu(t)&&t.indexOf("%")===t.length-1},de=function(t){return U6(t)&&!Mu(t)},$t=function(t){return de(t)||Eu(t)},P6=0,Du=function(t){var n=++P6;return"".concat(t||"").concat(n)},_o=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!de(t)&&!Eu(t))return r;var i;if(Ro(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Mu(i)&&(i=r),a&&i>n&&(i=n),i},Ti=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},O6=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},Ur=function(t,n){return de(t)&&de(n)?function(r){return t+r*(n-t)}:function(){return n}};function WC(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Sr(r,t))===n})}function tl(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function UZ(e){"@babel/helpers - typeof";return UZ=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UZ(e)}var Q6=["viewBox","children"],_6=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],v2=["points","pathLength"],vb={svg:Q6,polygon:v2,polyline:v2},WB=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],kC=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(k.isValidElement(t)&&(r=t.props),!ns(r))return null;var a={};return Object.keys(r).forEach(function(i){WB.includes(i)&&(a[i]=n||function(o){return r[i](r,o)})}),a},q6=function(t,n,r){return function(a){return t(n,r,a),null}},VC=function(t,n,r){if(!ns(t)||UZ(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];WB.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=q6(o,n,r))}),a},$6=["children"],eee=["children"];function G2(e,t){if(e==null)return{};var n=tee(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function PZ(e){"@babel/helpers - typeof";return PZ=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PZ(e)}var B2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ii=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},S2=null,Gb=null,kB=function e(t){if(t===S2&&Array.isArray(Gb))return Gb;var n=[];return k.Children.forEach(t,function(r){Me(r)||(T6.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),Gb=n,S2=t,n};function wr(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return ii(a)}):r=[ii(t)],kB(e).forEach(function(a){var i=Sr(a,"type.displayName")||Sr(a,"type.name");r.indexOf(i)!==-1&&n.push(a)}),n}function tr(e,t){var n=wr(e,t);return n[0]}var w2=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!de(r)||r<=0||!de(a)||a<=0)},nee=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],ree=function(t){return t&&t.type&&Eu(t.type)&&nee.indexOf(t.type)>=0},aee=function(t){return t&&PZ(t)==="object"&&"clipDot"in t},iee=function(t,n,r,a){var i,o=(i=vb==null?void 0:vb[a])!==null&&i!==void 0?i:[];return!He(t)&&(a&&o.includes(n)||_6.includes(n))||r&&WB.includes(n)},De=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(k.isValidElement(t)&&(a=t.props),!ns(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;iee((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(i[o]=a[o])}),i},OZ=function e(t,n){if(t===n)return!0;var r=k.Children.count(t);if(r!==k.Children.count(n))return!1;if(r===0)return!0;if(r===1)return W2(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var i=t[a],o=n[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!W2(i,o))return!1}return!0},W2=function(t,n){if(Me(t)&&Me(n))return!0;if(!Me(t)&&!Me(n)){var r=t.props||{},a=r.children,i=G2(r,$6),o=n.props||{},l=o.children,c=G2(o,eee);return a&&l?tl(i,c)&&OZ(a,l):!a&&!l?tl(i,c):!1}return!1},k2=function(t,n){var r=[],a={};return kB(t).forEach(function(i,o){if(ree(i))r.push(i);else if(i){var l=ii(i.type),c=n[l]||{},u=c.handler,I=c.once;if(u&&(!I||!a[l])){var d=u(i,l,o);r.push(d),a[l]=!0}}}),r},oee=function(t){var n=t&&t.type;return n&&B2[n]?B2[n]:null},gee=function(t,n){return kB(n).indexOf(t)},lee=["children","width","height","viewBox","className","style","title","desc"];function QZ(){return QZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QZ.apply(this,arguments)}function see(e,t){if(e==null)return{};var n=cee(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _Z(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=see(e,lee),I=a||{width:n,height:r,x:0,y:0},d=Ve("recharts-surface",i);return H.createElement("svg",QZ({},De(u,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(I.x," ").concat(I.y," ").concat(I.width," ").concat(I.height)}),H.createElement("title",null,l),H.createElement("desc",null,c),t)}var uee=["children","className"];function qZ(){return qZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qZ.apply(this,arguments)}function Iee(e,t){if(e==null)return{};var n=dee(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Mt=H.forwardRef(function(e,t){var n=e.children,r=e.className,a=Iee(e,uee),i=Ve("recharts-layer",r);return H.createElement("g",qZ({className:i},De(a,!0),{ref:t}),n)}),oi=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i]},Bb,V2;function Cee(){if(V2)return Bb;V2=1;function e(t,n,r){var a=-1,i=t.length;n<0&&(n=-n>i?0:i+n),r=r>i?i:r,r<0&&(r+=i),i=n>r?0:r-n>>>0,n>>>=0;for(var o=Array(i);++a<i;)o[a]=t[a+n];return o}return Bb=e,Bb}var Sb,R2;function Aee(){if(R2)return Sb;R2=1;var e=Cee();function t(n,r,a){var i=n.length;return a=a===void 0?i:a,!r&&a>=i?n:e(n,r,a)}return Sb=t,Sb}var wb,x2;function SK(){if(x2)return wb;x2=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=t+n+r,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+a+i+"]");function c(u){return l.test(u)}return wb=c,wb}var Wb,X2;function mee(){if(X2)return Wb;X2=1;function e(t){return t.split("")}return Wb=e,Wb}var kb,J2;function fee(){if(J2)return kb;J2=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=t+n+r,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",I="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",h=u+"?",b="["+i+"]?",y="(?:"+p+"(?:"+[I,d,m].join("|")+")"+b+h+")*",v=b+h+y,G="(?:"+[I+l+"?",l,d,m,o].join("|")+")",S=RegExp(c+"(?="+c+")|"+G+v,"g");function R(B){return B.match(S)||[]}return kb=R,kb}var Vb,Y2;function hee(){if(Y2)return Vb;Y2=1;var e=mee(),t=SK(),n=fee();function r(a){return t(a)?n(a):e(a)}return Vb=r,Vb}var Rb,N2;function pee(){if(N2)return Rb;N2=1;var e=Aee(),t=SK(),n=hee(),r=ZK();function a(i){return function(o){o=r(o);var l=t(o)?n(o):void 0,c=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return c[i]()+u}}return Rb=a,Rb}var xb,H2;function bee(){if(H2)return xb;H2=1;var e=pee(),t=e("toUpperCase");return xb=t,xb}var yee=bee();const bm=ut(yee);function ht(e){return function(){return e}}const wK=Math.cos,RC=Math.sin,na=Math.sqrt,xC=Math.PI,ym=2*xC,$Z=Math.PI,ev=2*$Z,So=1e-6,Zee=ev-So;function WK(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function vee(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return WK;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class Gee{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?WK:vee(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,I=o-t,d=l-n,m=I*I+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>So)if(!(Math.abs(d*c-u*I)>So)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-o,h=a-l,b=c*c+u*u,y=p*p+h*h,v=Math.sqrt(b),G=Math.sqrt(m),S=i*Math.tan(($Z-Math.acos((b+m-y)/(2*v*G)))/2),R=S/G,B=S/v;Math.abs(R-1)>So&&this._append`L${t+R*I},${n+R*d}`,this._append`A${i},${i},0,0,${+(d*p>I*h)},${this._x1=t+B*c},${this._y1=n+B*u}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,I=n+c,d=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${u},${I}`:(Math.abs(this._x1-u)>So||Math.abs(this._y1-I)>So)&&this._append`L${u},${I}`,r&&(m<0&&(m=m%ev+ev),m>Zee?this._append`A${r},${r},0,1,${d},${t-l},${n-c}A${r},${r},0,1,${d},${this._x1=u},${this._y1=I}`:m>So&&this._append`A${r},${r},0,${+(m>=$Z)},${d},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function VB(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Gee(t)}function RB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kK(e){this._context=e}kK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Zm(e){return new kK(e)}function VK(e){return e[0]}function RK(e){return e[1]}function xK(e,t){var n=ht(!0),r=null,a=Zm,i=null,o=VB(l);e=typeof e=="function"?e:e===void 0?VK:ht(e),t=typeof t=="function"?t:t===void 0?RK:ht(t);function l(c){var u,I=(c=RB(c)).length,d,m=!1,p;for(r==null&&(i=a(p=o())),u=0;u<=I;++u)!(u<I&&n(d=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(d,u,c),+t(d,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ht(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ht(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:ht(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(i=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=i=null:i=a(r=c),l):r},l}function pd(e,t,n){var r=null,a=ht(!0),i=null,o=Zm,l=null,c=VB(u);e=typeof e=="function"?e:e===void 0?VK:ht(+e),t=typeof t=="function"?t:ht(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?RK:ht(+n);function u(d){var m,p,h,b=(d=RB(d)).length,y,v=!1,G,S=new Array(b),R=new Array(b);for(i==null&&(l=o(G=c())),m=0;m<=b;++m){if(!(m<b&&a(y=d[m],m,d))===v)if(v=!v)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=m-1;h>=p;--h)l.point(S[h],R[h]);l.lineEnd(),l.areaEnd()}v&&(S[m]=+e(y,m,d),R[m]=+t(y,m,d),l.point(r?+r(y,m,d):S[m],n?+n(y,m,d):R[m]))}if(G)return l=null,G+""||null}function I(){return xK().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:ht(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:ht(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:ht(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:ht(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:ht(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:ht(+d),u):n},u.lineX0=u.lineY0=function(){return I().x(e).y(t)},u.lineY1=function(){return I().x(e).y(n)},u.lineX1=function(){return I().x(r).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:ht(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(l=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=l=null:l=o(i=d),u):i},u}class XK{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Bee(e){return new XK(e,!0)}function See(e){return new XK(e,!1)}const xB={draw(e,t){const n=na(t/xC);e.moveTo(n,0),e.arc(0,0,n,0,ym)}},wee={draw(e,t){const n=na(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},JK=na(1/3),Wee=JK*2,kee={draw(e,t){const n=na(t/Wee),r=n*JK;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Vee={draw(e,t){const n=na(t),r=-n/2;e.rect(r,r,n,n)}},Ree=.8908130915292852,YK=RC(xC/10)/RC(7*xC/10),xee=RC(ym/10)*YK,Xee=-wK(ym/10)*YK,Jee={draw(e,t){const n=na(t*Ree),r=xee*n,a=Xee*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const o=ym*i/5,l=wK(o),c=RC(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},Xb=na(3),Yee={draw(e,t){const n=-na(t/(Xb*3));e.moveTo(0,n*2),e.lineTo(-Xb*n,-n),e.lineTo(Xb*n,-n),e.closePath()}},br=-.5,yr=na(3)/2,tv=1/na(12),Nee=(tv/2+1)*3,Hee={draw(e,t){const n=na(t/Nee),r=n/2,a=n*tv,i=r,o=n*tv+n,l=-i,c=o;e.moveTo(r,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(br*r-yr*a,yr*r+br*a),e.lineTo(br*i-yr*o,yr*i+br*o),e.lineTo(br*l-yr*c,yr*l+br*c),e.lineTo(br*r+yr*a,br*a-yr*r),e.lineTo(br*i+yr*o,br*o-yr*i),e.lineTo(br*l+yr*c,br*c-yr*l),e.closePath()}};function Fee(e,t){let n=null,r=VB(a);e=typeof e=="function"?e:ht(e||xB),t=typeof t=="function"?t:ht(t===void 0?64:+t);function a(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:ht(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:ht(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function XC(){}function JC(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function NK(e){this._context=e}NK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:JC(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:JC(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kee(e){return new NK(e)}function HK(e){this._context=e}HK.prototype={areaStart:XC,areaEnd:XC,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:JC(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Eee(e){return new HK(e)}function FK(e){this._context=e}FK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:JC(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Mee(e){return new FK(e)}function KK(e){this._context=e}KK.prototype={areaStart:XC,areaEnd:XC,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Dee(e){return new KK(e)}function F2(e){return e<0?-1:1}function K2(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(i*a+o*r)/(r+a);return(F2(i)+F2(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function E2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Jb(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,a+l*t,i-l,o-l*n,i,o)}function YC(e){this._context=e}YC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jb(this,this._t0,E2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Jb(this,E2(this,n=K2(this,e,t)),n);break;default:Jb(this,this._t0,n=K2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function EK(e){this._context=new MK(e)}(EK.prototype=Object.create(YC.prototype)).point=function(e,t){YC.prototype.point.call(this,t,e)};function MK(e){this._context=e}MK.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}};function Tee(e){return new YC(e)}function jee(e){return new EK(e)}function DK(e){this._context=e}DK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=M2(e),a=M2(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function M2(e){var t,n=e.length-1,r,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Lee(e){return new DK(e)}function vm(e,t){this._context=e,this._t=t}vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function zee(e){return new vm(e,.5)}function Uee(e){return new vm(e,0)}function Pee(e){return new vm(e,1)}function yl(e,t){if((o=e.length)>1)for(var n=1,r,a,i=e[t[0]],o,l=i.length;n<o;++n)for(a=i,i=e[t[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function nv(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Oee(e,t){return e[t]}function Qee(e){const t=[];return t.key=e,t}function _ee(){var e=ht([]),t=nv,n=yl,r=Oee;function a(i){var o=Array.from(e.apply(this,arguments),Qee),l,c=o.length,u=-1,I;for(const d of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(d,o[l].key,u,i)]).data=d;for(l=0,I=RB(t(o));l<c;++l)o[I[l]].index=l;return n(o,I),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ht(Array.from(i)),a):e},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:ht(+i),a):r},a.order=function(i){return arguments.length?(t=i==null?nv:typeof i=="function"?i:ht(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??yl,a):n},a}function qee(e,t){if((r=e.length)>0){for(var n,r,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}yl(e,t)}}function $ee(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,i=r.length;n<i;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}yl(e,t)}}function ete(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,i,o;r<i;++r){for(var l=0,c=0,u=0;l<o;++l){for(var I=e[t[l]],d=I[r][1]||0,m=I[r-1][1]||0,p=(d-m)/2,h=0;h<l;++h){var b=e[t[h]],y=b[r][1]||0,v=b[r-1][1]||0;p+=y-v}c+=d,u+=p*d}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,yl(e,t)}}function Ec(e){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ec(e)}var tte=["type","size","sizeType"];function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rv.apply(this,arguments)}function D2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function T2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D2(Object(n),!0).forEach(function(r){nte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nte(e,t,n){return t=rte(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rte(e){var t=ate(e,"string");return Ec(t)=="symbol"?t:t+""}function ate(e,t){if(Ec(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ite(e,t){if(e==null)return{};var n=ote(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ote(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var TK={symbolCircle:xB,symbolCross:wee,symbolDiamond:kee,symbolSquare:Vee,symbolStar:Jee,symbolTriangle:Yee,symbolWye:Hee},gte=Math.PI/180,lte=function(t){var n="symbol".concat(bm(t));return TK[n]||xB},ste=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*gte;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},cte=function(t,n){TK["symbol".concat(bm(t))]=n},XB=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=ite(t,tte),u=T2(T2({},c),{},{type:r,size:i,sizeType:l}),I=function(){var y=lte(r),v=Fee().type(y).size(ste(i,l,r));return v()},d=u.className,m=u.cx,p=u.cy,h=De(u,!0);return m===+m&&p===+p&&i===+i?H.createElement("path",rv({},h,{className:Ve("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(p,")"),d:I()})):null};XB.registerSymbol=cte;function Zl(e){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(e)}function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},av.apply(this,arguments)}function j2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ute(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j2(Object(n),!0).forEach(function(r){Mc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ite(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LK(r.key),r)}}function Cte(e,t,n){return dte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ate(e,t,n){return t=NC(t),mte(e,jK()?Reflect.construct(t,n||[],NC(e).constructor):t.apply(e,n))}function mte(e,t){if(t&&(Zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fte(e)}function fte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jK=function(){return!!e})()}function NC(e){return NC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NC(e)}function hte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iv(e,t)}function iv(e,t){return iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},iv(e,t)}function Mc(e,t,n){return t=LK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LK(e){var t=pte(e,"string");return Zl(t)=="symbol"?t:t+""}function pte(e,t){if(Zl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tr=32,JB=function(e){function t(){return Ite(this,t),Ate(this,t,arguments)}return hte(t,e),Cte(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,i=Tr/2,o=Tr/6,l=Tr/3,c=r.inactive?a:r.color;if(r.type==="plainline")return H.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:Tr,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return H.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Tr,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return H.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Tr/8,"h").concat(Tr,"v").concat(Tr*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(H.isValidElement(r.legendIcon)){var u=ute({},r);return delete u.legendIcon,H.cloneElement(r.legendIcon,u)}return H.createElement(XB,{fill:c,cx:i,cy:i,size:Tr,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,I={x:0,y:0,width:Tr,height:Tr},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,h){var b=p.formatter||c,y=Ve(Mc(Mc({"recharts-legend-item":!0},"legend-item-".concat(h),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=He(p.value)?null:p.value;oi(!He(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var G=p.inactive?u:p.color;return H.createElement("li",av({className:y,style:d,key:"legend-item-".concat(h)},VC(r.props,p,h)),H.createElement(_Z,{width:o,height:o,viewBox:I,style:m},r.renderIcon(p)),H.createElement("span",{className:"recharts-legend-item-text",style:{color:G}},b?b(v,p,h):v))})}},{key:"render",value:function(){var r=this.props,a=r.payload,i=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return H.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(k.PureComponent);Mc(JB,"displayName","Legend");Mc(JB,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Yb,L2;function bte(){if(L2)return Yb;L2=1;var e=fm();function t(){this.__data__=new e,this.size=0}return Yb=t,Yb}var Nb,z2;function yte(){if(z2)return Nb;z2=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Nb=e,Nb}var Hb,U2;function Zte(){if(U2)return Hb;U2=1;function e(t){return this.__data__.get(t)}return Hb=e,Hb}var Fb,P2;function vte(){if(P2)return Fb;P2=1;function e(t){return this.__data__.has(t)}return Fb=e,Fb}var Kb,O2;function Gte(){if(O2)return Kb;O2=1;var e=fm(),t=GB(),n=BB(),r=200;function a(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<r-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(i,o),this.size=l.size,this}return Kb=a,Kb}var Eb,Q2;function zK(){if(Q2)return Eb;Q2=1;var e=fm(),t=bte(),n=yte(),r=Zte(),a=vte(),i=Gte();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=a,o.prototype.set=i,Eb=o,Eb}var Mb,_2;function Bte(){if(_2)return Mb;_2=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Mb=t,Mb}var Db,q2;function Ste(){if(q2)return Db;q2=1;function e(t){return this.__data__.has(t)}return Db=e,Db}var Tb,$2;function UK(){if($2)return Tb;$2=1;var e=BB(),t=Bte(),n=Ste();function r(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new e;++i<o;)this.add(a[i])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,Tb=r,Tb}var jb,ex;function PK(){if(ex)return jb;ex=1;function e(t,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(n(t[r],r,t))return!0;return!1}return jb=e,jb}var Lb,tx;function OK(){if(tx)return Lb;tx=1;function e(t,n){return t.has(n)}return Lb=e,Lb}var zb,nx;function QK(){if(nx)return zb;nx=1;var e=UK(),t=PK(),n=OK(),r=1,a=2;function i(o,l,c,u,I,d){var m=c&r,p=o.length,h=l.length;if(p!=h&&!(m&&h>p))return!1;var b=d.get(o),y=d.get(l);if(b&&y)return b==l&&y==o;var v=-1,G=!0,S=c&a?new e:void 0;for(d.set(o,l),d.set(l,o);++v<p;){var R=o[v],B=l[v];if(u)var V=m?u(B,R,v,l,o,d):u(R,B,v,o,l,d);if(V!==void 0){if(V)continue;G=!1;break}if(S){if(!t(l,function(W,X){if(!n(S,X)&&(R===W||I(R,W,c,u,d)))return S.push(X)})){G=!1;break}}else if(!(R===B||I(R,B,c,u,d))){G=!1;break}}return d.delete(o),d.delete(l),G}return zb=i,zb}var Ub,rx;function wte(){if(rx)return Ub;rx=1;var e=Ha(),t=e.Uint8Array;return Ub=t,Ub}var Pb,ax;function Wte(){if(ax)return Pb;ax=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(a,i){r[++n]=[i,a]}),r}return Pb=e,Pb}var Ob,ix;function YB(){if(ix)return Ob;ix=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(a){r[++n]=a}),r}return Ob=e,Ob}var Qb,ox;function kte(){if(ox)return Qb;ox=1;var e=Ku(),t=wte(),n=vB(),r=QK(),a=Wte(),i=YB(),o=1,l=2,c="[object Boolean]",u="[object Date]",I="[object Error]",d="[object Map]",m="[object Number]",p="[object RegExp]",h="[object Set]",b="[object String]",y="[object Symbol]",v="[object ArrayBuffer]",G="[object DataView]",S=e?e.prototype:void 0,R=S?S.valueOf:void 0;function B(V,W,X,N,x,Y,F){switch(X){case G:if(V.byteLength!=W.byteLength||V.byteOffset!=W.byteOffset)return!1;V=V.buffer,W=W.buffer;case v:return!(V.byteLength!=W.byteLength||!Y(new t(V),new t(W)));case c:case u:case m:return n(+V,+W);case I:return V.name==W.name&&V.message==W.message;case p:case b:return V==W+"";case d:var E=a;case h:var M=N&o;if(E||(E=i),V.size!=W.size&&!M)return!1;var T=F.get(V);if(T)return T==W;N|=l,F.set(V,W);var z=r(E(V),E(W),N,x,Y,F);return F.delete(V),z;case y:if(R)return R.call(V)==R.call(W)}return!1}return Qb=B,Qb}var _b,gx;function _K(){if(gx)return _b;gx=1;function e(t,n){for(var r=-1,a=n.length,i=t.length;++r<a;)t[i+r]=n[r];return t}return _b=e,_b}var qb,lx;function Vte(){if(lx)return qb;lx=1;var e=_K(),t=Pn();function n(r,a,i){var o=a(r);return t(r)?o:e(o,i(r))}return qb=n,qb}var $b,sx;function Rte(){if(sx)return $b;sx=1;function e(t,n){for(var r=-1,a=t==null?0:t.length,i=0,o=[];++r<a;){var l=t[r];n(l,r,t)&&(o[i++]=l)}return o}return $b=e,$b}var ey,cx;function xte(){if(cx)return ey;cx=1;function e(){return[]}return ey=e,ey}var ty,ux;function Xte(){if(ux)return ty;ux=1;var e=Rte(),t=xte(),n=Object.prototype,r=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),e(a(o),function(l){return r.call(o,l)}))}:t;return ty=i,ty}var ny,Ix;function Jte(){if(Ix)return ny;Ix=1;function e(t,n){for(var r=-1,a=Array(t);++r<t;)a[r]=n(r);return a}return ny=e,ny}var ry,dx;function Yte(){if(dx)return ry;dx=1;var e=Ai(),t=mi(),n="[object Arguments]";function r(a){return t(a)&&e(a)==n}return ry=r,ry}var ay,Cx;function NB(){if(Cx)return ay;Cx=1;var e=Yte(),t=mi(),n=Object.prototype,r=n.hasOwnProperty,a=n.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(o){return t(o)&&r.call(o,"callee")&&!a.call(o,"callee")};return ay=i,ay}var pc={exports:{}},iy,Ax;function Nte(){if(Ax)return iy;Ax=1;function e(){return!1}return iy=e,iy}pc.exports;var mx;function qK(){return mx||(mx=1,function(e,t){var n=Ha(),r=Nte(),a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u}(pc,pc.exports)),pc.exports}var oy,fx;function HB(){if(fx)return oy;fx=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,a){var i=typeof r;return a=a??e,!!a&&(i=="number"||i!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<a}return oy=n,oy}var gy,hx;function FB(){if(hx)return gy;hx=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return gy=t,gy}var ly,px;function Hte(){if(px)return ly;px=1;var e=Ai(),t=FB(),n=mi(),r="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",I="[object Number]",d="[object Object]",m="[object RegExp]",p="[object Set]",h="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",v="[object DataView]",G="[object Float32Array]",S="[object Float64Array]",R="[object Int8Array]",B="[object Int16Array]",V="[object Int32Array]",W="[object Uint8Array]",X="[object Uint8ClampedArray]",N="[object Uint16Array]",x="[object Uint32Array]",Y={};Y[G]=Y[S]=Y[R]=Y[B]=Y[V]=Y[W]=Y[X]=Y[N]=Y[x]=!0,Y[r]=Y[a]=Y[y]=Y[i]=Y[v]=Y[o]=Y[l]=Y[c]=Y[u]=Y[I]=Y[d]=Y[m]=Y[p]=Y[h]=Y[b]=!1;function F(E){return n(E)&&t(E.length)&&!!Y[e(E)]}return ly=F,ly}var sy,bx;function $K(){if(bx)return sy;bx=1;function e(t){return function(n){return t(n)}}return sy=e,sy}var bc={exports:{}};bc.exports;var yx;function Fte(){return yx||(yx=1,function(e,t){var n=pK(),r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l}(bc,bc.exports)),bc.exports}var cy,Zx;function e5(){if(Zx)return cy;Zx=1;var e=Hte(),t=$K(),n=Fte(),r=n&&n.isTypedArray,a=r?t(r):e;return cy=a,cy}var uy,vx;function Kte(){if(vx)return uy;vx=1;var e=Jte(),t=NB(),n=Pn(),r=qK(),a=HB(),i=e5(),o=Object.prototype,l=o.hasOwnProperty;function c(u,I){var d=n(u),m=!d&&t(u),p=!d&&!m&&r(u),h=!d&&!m&&!p&&i(u),b=d||m||p||h,y=b?e(u.length,String):[],v=y.length;for(var G in u)(I||l.call(u,G))&&!(b&&(G=="length"||p&&(G=="offset"||G=="parent")||h&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||a(G,v)))&&y.push(G);return y}return uy=c,uy}var Iy,Gx;function Ete(){if(Gx)return Iy;Gx=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,a=typeof r=="function"&&r.prototype||e;return n===a}return Iy=t,Iy}var dy,Bx;function t5(){if(Bx)return dy;Bx=1;function e(t,n){return function(r){return t(n(r))}}return dy=e,dy}var Cy,Sx;function Mte(){if(Sx)return Cy;Sx=1;var e=t5(),t=e(Object.keys,Object);return Cy=t,Cy}var Ay,wx;function Dte(){if(wx)return Ay;wx=1;var e=Ete(),t=Mte(),n=Object.prototype,r=n.hasOwnProperty;function a(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))r.call(i,l)&&l!="constructor"&&o.push(l);return o}return Ay=a,Ay}var my,Wx;function Tu(){if(Wx)return my;Wx=1;var e=ZB(),t=FB();function n(r){return r!=null&&t(r.length)&&!e(r)}return my=n,my}var fy,kx;function Gm(){if(kx)return fy;kx=1;var e=Kte(),t=Dte(),n=Tu();function r(a){return n(a)?e(a):t(a)}return fy=r,fy}var hy,Vx;function Tte(){if(Vx)return hy;Vx=1;var e=Vte(),t=Xte(),n=Gm();function r(a){return e(a,n,t)}return hy=r,hy}var py,Rx;function jte(){if(Rx)return py;Rx=1;var e=Tte(),t=1,n=Object.prototype,r=n.hasOwnProperty;function a(i,o,l,c,u,I){var d=l&t,m=e(i),p=m.length,h=e(o),b=h.length;if(p!=b&&!d)return!1;for(var y=p;y--;){var v=m[y];if(!(d?v in o:r.call(o,v)))return!1}var G=I.get(i),S=I.get(o);if(G&&S)return G==o&&S==i;var R=!0;I.set(i,o),I.set(o,i);for(var B=d;++y<p;){v=m[y];var V=i[v],W=o[v];if(c)var X=d?c(W,V,v,o,i,I):c(V,W,v,i,o,I);if(!(X===void 0?V===W||u(V,W,l,c,I):X)){R=!1;break}B||(B=v=="constructor")}if(R&&!B){var N=i.constructor,x=o.constructor;N!=x&&"constructor"in i&&"constructor"in o&&!(typeof N=="function"&&N instanceof N&&typeof x=="function"&&x instanceof x)&&(R=!1)}return I.delete(i),I.delete(o),R}return py=a,py}var by,xx;function Lte(){if(xx)return by;xx=1;var e=ag(),t=Ha(),n=e(t,"DataView");return by=n,by}var yy,Xx;function zte(){if(Xx)return yy;Xx=1;var e=ag(),t=Ha(),n=e(t,"Promise");return yy=n,yy}var Zy,Jx;function n5(){if(Jx)return Zy;Jx=1;var e=ag(),t=Ha(),n=e(t,"Set");return Zy=n,Zy}var vy,Yx;function Ute(){if(Yx)return vy;Yx=1;var e=ag(),t=Ha(),n=e(t,"WeakMap");return vy=n,vy}var Gy,Nx;function Pte(){if(Nx)return Gy;Nx=1;var e=Lte(),t=GB(),n=zte(),r=n5(),a=Ute(),i=Ai(),o=bK(),l="[object Map]",c="[object Object]",u="[object Promise]",I="[object Set]",d="[object WeakMap]",m="[object DataView]",p=o(e),h=o(t),b=o(n),y=o(r),v=o(a),G=i;return(e&&G(new e(new ArrayBuffer(1)))!=m||t&&G(new t)!=l||n&&G(n.resolve())!=u||r&&G(new r)!=I||a&&G(new a)!=d)&&(G=function(S){var R=i(S),B=R==c?S.constructor:void 0,V=B?o(B):"";if(V)switch(V){case p:return m;case h:return l;case b:return u;case y:return I;case v:return d}return R}),Gy=G,Gy}var By,Hx;function Ote(){if(Hx)return By;Hx=1;var e=zK(),t=QK(),n=kte(),r=jte(),a=Pte(),i=Pn(),o=qK(),l=e5(),c=1,u="[object Arguments]",I="[object Array]",d="[object Object]",m=Object.prototype,p=m.hasOwnProperty;function h(b,y,v,G,S,R){var B=i(b),V=i(y),W=B?I:a(b),X=V?I:a(y);W=W==u?d:W,X=X==u?d:X;var N=W==d,x=X==d,Y=W==X;if(Y&&o(b)){if(!o(y))return!1;B=!0,N=!1}if(Y&&!N)return R||(R=new e),B||l(b)?t(b,y,v,G,S,R):n(b,y,W,v,G,S,R);if(!(v&c)){var F=N&&p.call(b,"__wrapped__"),E=x&&p.call(y,"__wrapped__");if(F||E){var M=F?b.value():b,T=E?y.value():y;return R||(R=new e),S(M,T,v,G,R)}}return Y?(R||(R=new e),r(b,y,v,G,S,R)):!1}return By=h,By}var Sy,Fx;function KB(){if(Fx)return Sy;Fx=1;var e=Ote(),t=mi();function n(r,a,i,o,l){return r===a?!0:r==null||a==null||!t(r)&&!t(a)?r!==r&&a!==a:e(r,a,i,o,n,l)}return Sy=n,Sy}var wy,Kx;function Qte(){if(Kx)return wy;Kx=1;var e=zK(),t=KB(),n=1,r=2;function a(i,o,l,c){var u=l.length,I=u,d=!c;if(i==null)return!I;for(i=Object(i);u--;){var m=l[u];if(d&&m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++u<I;){m=l[u];var p=m[0],h=i[p],b=m[1];if(d&&m[2]){if(h===void 0&&!(p in i))return!1}else{var y=new e;if(c)var v=c(h,b,p,i,o,y);if(!(v===void 0?t(b,h,n|r,c,y):v))return!1}}return!0}return wy=a,wy}var Wy,Ex;function r5(){if(Ex)return Wy;Ex=1;var e=ao();function t(n){return n===n&&!e(n)}return Wy=t,Wy}var ky,Mx;function _te(){if(Mx)return ky;Mx=1;var e=r5(),t=Gm();function n(r){for(var a=t(r),i=a.length;i--;){var o=a[i],l=r[o];a[i]=[o,l,e(l)]}return a}return ky=n,ky}var Vy,Dx;function a5(){if(Dx)return Vy;Dx=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Vy=e,Vy}var Ry,Tx;function qte(){if(Tx)return Ry;Tx=1;var e=Qte(),t=_te(),n=a5();function r(a){var i=t(a);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(o){return o===a||e(o,a,i)}}return Ry=r,Ry}var xy,jx;function $te(){if(jx)return xy;jx=1;function e(t,n){return t!=null&&n in Object(t)}return xy=e,xy}var Xy,Lx;function ene(){if(Lx)return Xy;Lx=1;var e=vK(),t=NB(),n=Pn(),r=HB(),a=FB(),i=pm();function o(l,c,u){c=e(c,l);for(var I=-1,d=c.length,m=!1;++I<d;){var p=i(c[I]);if(!(m=l!=null&&u(l,p)))break;l=l[p]}return m||++I!=d?m:(d=l==null?0:l.length,!!d&&a(d)&&r(p,d)&&(n(l)||t(l)))}return Xy=o,Xy}var Jy,zx;function tne(){if(zx)return Jy;zx=1;var e=$te(),t=ene();function n(r,a){return r!=null&&t(r,a,e)}return Jy=n,Jy}var Yy,Ux;function nne(){if(Ux)return Yy;Ux=1;var e=KB(),t=GK(),n=tne(),r=yB(),a=r5(),i=a5(),o=pm(),l=1,c=2;function u(I,d){return r(I)&&a(d)?i(o(I),d):function(m){var p=t(m,I);return p===void 0&&p===d?n(m,I):e(d,p,l|c)}}return Yy=u,Yy}var Ny,Px;function rs(){if(Px)return Ny;Px=1;function e(t){return t}return Ny=e,Ny}var Hy,Ox;function rne(){if(Ox)return Hy;Ox=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Hy=e,Hy}var Fy,Qx;function ane(){if(Qx)return Fy;Qx=1;var e=wB();function t(n){return function(r){return e(r,n)}}return Fy=t,Fy}var Ky,_x;function ine(){if(_x)return Ky;_x=1;var e=rne(),t=ane(),n=yB(),r=pm();function a(i){return n(i)?e(r(i)):t(i)}return Ky=a,Ky}var Ey,qx;function io(){if(qx)return Ey;qx=1;var e=qte(),t=nne(),n=rs(),r=Pn(),a=ine();function i(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):a(o)}return Ey=i,Ey}var My,$x;function i5(){if($x)return My;$x=1;function e(t,n,r,a){for(var i=t.length,o=r+(a?1:-1);a?o--:++o<i;)if(n(t[o],o,t))return o;return-1}return My=e,My}var Dy,eX;function one(){if(eX)return Dy;eX=1;function e(t){return t!==t}return Dy=e,Dy}var Ty,tX;function gne(){if(tX)return Ty;tX=1;function e(t,n,r){for(var a=r-1,i=t.length;++a<i;)if(t[a]===n)return a;return-1}return Ty=e,Ty}var jy,nX;function lne(){if(nX)return jy;nX=1;var e=i5(),t=one(),n=gne();function r(a,i,o){return i===i?n(a,i,o):e(a,t,o)}return jy=r,jy}var Ly,rX;function sne(){if(rX)return Ly;rX=1;var e=lne();function t(n,r){var a=n==null?0:n.length;return!!a&&e(n,r,0)>-1}return Ly=t,Ly}var zy,aX;function cne(){if(aX)return zy;aX=1;function e(t,n,r){for(var a=-1,i=t==null?0:t.length;++a<i;)if(r(n,t[a]))return!0;return!1}return zy=e,zy}var Uy,iX;function une(){if(iX)return Uy;iX=1;function e(){}return Uy=e,Uy}var Py,oX;function Ine(){if(oX)return Py;oX=1;var e=n5(),t=une(),n=YB(),r=1/0,a=e&&1/n(new e([,-0]))[1]==r?function(i){return new e(i)}:t;return Py=a,Py}var Oy,gX;function dne(){if(gX)return Oy;gX=1;var e=UK(),t=sne(),n=cne(),r=OK(),a=Ine(),i=YB(),o=200;function l(c,u,I){var d=-1,m=t,p=c.length,h=!0,b=[],y=b;if(I)h=!1,m=n;else if(p>=o){var v=u?null:a(c);if(v)return i(v);h=!1,m=r,y=new e}else y=u?[]:b;e:for(;++d<p;){var G=c[d],S=u?u(G):G;if(G=I||G!==0?G:0,h&&S===S){for(var R=y.length;R--;)if(y[R]===S)continue e;u&&y.push(S),b.push(G)}else m(y,S,I)||(y!==b&&y.push(S),b.push(G))}return b}return Oy=l,Oy}var Qy,lX;function Cne(){if(lX)return Qy;lX=1;var e=io(),t=dne();function n(r,a){return r&&r.length?t(r,e(a,2)):[]}return Qy=n,Qy}var Ane=Cne();const sX=ut(Ane);function o5(e,t,n){return t===!0?sX(e,n):He(t)?sX(e,t):e}function vl(e){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(e)}var mne=["ref"];function cX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cX(Object(n),!0).forEach(function(r){Bm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cX(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l5(r.key),r)}}function hne(e,t,n){return uX(e.prototype,t),uX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pne(e,t,n){return t=HC(t),bne(e,g5()?Reflect.construct(t,n,HC(e).constructor):t.apply(e,n))}function bne(e,t){if(t&&(vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yne(e)}function yne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g5=function(){return!!e})()}function HC(e){return HC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},HC(e)}function Zne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ov(e,t)}function ov(e,t){return ov=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ov(e,t)}function Bm(e,t,n){return t=l5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l5(e){var t=vne(e,"string");return vl(t)=="symbol"?t:t+""}function vne(e,t){if(vl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gne(e,t){if(e==null)return{};var n=Bne(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Bne(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Sne(e){return e.value}function wne(e,t){if(H.isValidElement(e))return H.cloneElement(e,t);if(typeof e=="function")return H.createElement(e,t);t.ref;var n=Gne(t,mne);return H.createElement(JB,n)}var IX=1,nl=function(e){function t(){var n;fne(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=pne(this,t,[].concat(a)),Bm(n,"lastBoundingBox",{width:-1,height:-1}),n}return Zne(t,e),hne(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>IX||Math.abs(a.height-this.lastBoundingBox.height)>IX)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ua({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,I=a.chartHeight,d,m;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var h=this.getBBoxSnapshot();m={top:((I||0)-h.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ua(Ua({},d),m)}},{key:"render",value:function(){var r=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,I=a.payload,d=Ua(Ua({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return H.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){r.wrapperNode=p}},wne(i,Ua(Ua({},this.props),{},{payload:o5(I,u,Sne)})))}}],[{key:"getWithHeight",value:function(r,a){var i=Ua(Ua({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&de(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(k.PureComponent);Bm(nl,"displayName","Legend");Bm(nl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var _y,dX;function Wne(){if(dX)return _y;dX=1;var e=Ku(),t=NB(),n=Pn(),r=e?e.isConcatSpreadable:void 0;function a(i){return n(i)||t(i)||!!(r&&i&&i[r])}return _y=a,_y}var qy,CX;function s5(){if(CX)return qy;CX=1;var e=_K(),t=Wne();function n(r,a,i,o,l){var c=-1,u=r.length;for(i||(i=t),l||(l=[]);++c<u;){var I=r[c];a>0&&i(I)?a>1?n(I,a-1,i,o,l):e(l,I):o||(l[l.length]=I)}return l}return qy=n,qy}var $y,AX;function kne(){if(AX)return $y;AX=1;function e(t){return function(n,r,a){for(var i=-1,o=Object(n),l=a(n),c=l.length;c--;){var u=l[t?c:++i];if(r(o[u],u,o)===!1)break}return n}}return $y=e,$y}var e0,mX;function Vne(){if(mX)return e0;mX=1;var e=kne(),t=e();return e0=t,e0}var t0,fX;function c5(){if(fX)return t0;fX=1;var e=Vne(),t=Gm();function n(r,a){return r&&e(r,a,t)}return t0=n,t0}var n0,hX;function Rne(){if(hX)return n0;hX=1;var e=Tu();function t(n,r){return function(a,i){if(a==null)return a;if(!e(a))return n(a,i);for(var o=a.length,l=r?o:-1,c=Object(a);(r?l--:++l<o)&&i(c[l],l,c)!==!1;);return a}}return n0=t,n0}var r0,pX;function EB(){if(pX)return r0;pX=1;var e=c5(),t=Rne(),n=t(e);return r0=n,r0}var a0,bX;function u5(){if(bX)return a0;bX=1;var e=EB(),t=Tu();function n(r,a){var i=-1,o=t(r)?Array(r.length):[];return e(r,function(l,c,u){o[++i]=a(l,c,u)}),o}return a0=n,a0}var i0,yX;function xne(){if(yX)return i0;yX=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return i0=e,i0}var o0,ZX;function Xne(){if(ZX)return o0;ZX=1;var e=ts();function t(n,r){if(n!==r){var a=n!==void 0,i=n===null,o=n===n,l=e(n),c=r!==void 0,u=r===null,I=r===r,d=e(r);if(!u&&!d&&!l&&n>r||l&&c&&I&&!u&&!d||i&&c&&I||!a&&I||!o)return 1;if(!i&&!l&&!d&&n<r||d&&a&&o&&!i&&!l||u&&a&&o||!c&&o||!I)return-1}return 0}return o0=t,o0}var g0,vX;function Jne(){if(vX)return g0;vX=1;var e=Xne();function t(n,r,a){for(var i=-1,o=n.criteria,l=r.criteria,c=o.length,u=a.length;++i<c;){var I=e(o[i],l[i]);if(I){if(i>=u)return I;var d=a[i];return I*(d=="desc"?-1:1)}}return n.index-r.index}return g0=t,g0}var l0,GX;function Yne(){if(GX)return l0;GX=1;var e=SB(),t=wB(),n=io(),r=u5(),a=xne(),i=$K(),o=Jne(),l=rs(),c=Pn();function u(I,d,m){d.length?d=e(d,function(b){return c(b)?function(y){return t(y,b.length===1?b[0]:b)}:b}):d=[l];var p=-1;d=e(d,i(n));var h=r(I,function(b,y,v){var G=e(d,function(S){return S(b)});return{criteria:G,index:++p,value:b}});return a(h,function(b,y){return o(b,y,m)})}return l0=u,l0}var s0,BX;function Nne(){if(BX)return s0;BX=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return s0=e,s0}var c0,SX;function Hne(){if(SX)return c0;SX=1;var e=Nne(),t=Math.max;function n(r,a,i){return a=t(a===void 0?r.length-1:a,0),function(){for(var o=arguments,l=-1,c=t(o.length-a,0),u=Array(c);++l<c;)u[l]=o[a+l];l=-1;for(var I=Array(a+1);++l<a;)I[l]=o[l];return I[a]=i(u),e(r,this,I)}}return c0=n,c0}var u0,wX;function Fne(){if(wX)return u0;wX=1;function e(t){return function(){return t}}return u0=e,u0}var I0,WX;function I5(){if(WX)return I0;WX=1;var e=ag(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return I0=t,I0}var d0,kX;function Kne(){if(kX)return d0;kX=1;var e=Fne(),t=I5(),n=rs(),r=t?function(a,i){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return d0=r,d0}var C0,VX;function Ene(){if(VX)return C0;VX=1;var e=800,t=16,n=Date.now;function r(a){var i=0,o=0;return function(){var l=n(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return C0=r,C0}var A0,RX;function Mne(){if(RX)return A0;RX=1;var e=Kne(),t=Ene(),n=t(e);return A0=n,A0}var m0,xX;function Dne(){if(xX)return m0;xX=1;var e=rs(),t=Hne(),n=Mne();function r(a,i){return n(t(a,i,e),a+"")}return m0=r,m0}var f0,XX;function Sm(){if(XX)return f0;XX=1;var e=vB(),t=Tu(),n=HB(),r=ao();function a(i,o,l){if(!r(l))return!1;var c=typeof o;return(c=="number"?t(l)&&n(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return f0=a,f0}var h0,JX;function Tne(){if(JX)return h0;JX=1;var e=s5(),t=Yne(),n=Dne(),r=Sm(),a=n(function(i,o){if(i==null)return[];var l=o.length;return l>1&&r(i,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return h0=a,h0}var jne=Tne();const MB=ut(jne);function Dc(e){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(e)}function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gv.apply(this,arguments)}function Lne(e,t){return One(e)||Pne(e,t)||Une(e,t)||zne()}function zne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Une(e,t){if(e){if(typeof e=="string")return YX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YX(e,t)}}function YX(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pne(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function One(e){if(Array.isArray(e))return e}function NX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function p0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NX(Object(n),!0).forEach(function(r){Qne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NX(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qne(e,t,n){return t=_ne(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _ne(e){var t=qne(e,"string");return Dc(t)=="symbol"?t:t+""}function qne(e,t){if(Dc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ne(e){return Array.isArray(e)&&$t(e[0])&&$t(e[1])?e.join(" ~ "):e}var ere=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,I=t.payload,d=t.formatter,m=t.itemSorter,p=t.wrapperClassName,h=t.labelClassName,b=t.label,y=t.labelFormatter,v=t.accessibilityLayer,G=v===void 0?!1:v,S=function(){if(I&&I.length){var F={padding:0,margin:0},E=(m?MB(I,m):I).map(function(M,T){if(M.type==="none")return null;var z=p0({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),P=M.formatter||d||$ne,L=M.value,q=M.name,ee=L,D=q;if(ee!=null&&D!=null){var O=P(L,q,M,T,I);if(Array.isArray(O)){var ue=Lne(O,2);ee=ue[0],D=ue[1]}else ee=O}return H.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:z},$t(D)?H.createElement("span",{className:"recharts-tooltip-item-name"},D):null,$t(D)?H.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,H.createElement("span",{className:"recharts-tooltip-item-value"},ee),H.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return H.createElement("ul",{className:"recharts-tooltip-item-list",style:F},E)}return null},R=p0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),B=p0({margin:0},u),V=!Me(b),W=V?b:"",X=Ve("recharts-default-tooltip",p),N=Ve("recharts-tooltip-label",h);V&&y&&I!==void 0&&I!==null&&(W=y(b,I));var x=G?{role:"status","aria-live":"assertive"}:{};return H.createElement("div",gv({className:X,style:R},x),H.createElement("p",{className:N,style:B},H.isValidElement(W)?W:"".concat(W)),S())};function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function bd(e,t,n){return t=tre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tre(e){var t=nre(e,"string");return Tc(t)=="symbol"?t:t+""}function nre(e,t){if(Tc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ic="recharts-tooltip-wrapper",rre={visibility:"hidden"};function are(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Ve(ic,bd(bd(bd(bd({},"".concat(ic,"-right"),de(n)&&t&&de(t.x)&&n>=t.x),"".concat(ic,"-left"),de(n)&&t&&de(t.x)&&n<t.x),"".concat(ic,"-bottom"),de(r)&&t&&de(t.y)&&r>=t.y),"".concat(ic,"-top"),de(r)&&t&&de(t.y)&&r<t.y))}function HX(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&de(i[r]))return i[r];var I=n[r]-l-a,d=n[r]+a;if(t[r])return o[r]?I:d;if(o[r]){var m=I,p=c[r];return m<p?Math.max(d,c[r]):Math.max(I,c[r])}var h=d+l,b=c[r]+u;return h>b?Math.max(I,c[r]):Math.max(d,c[r])}function ire(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function ore(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,I,d;return o.height>0&&o.width>0&&n?(I=HX({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=HX({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=ire({translateX:I,translateY:d,useTranslate3d:l})):u=rre,{cssProperties:u,cssClasses:are({translateX:I,translateY:d,coordinate:n})}}function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function FX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function KX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FX(Object(n),!0).forEach(function(r){sv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FX(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lre(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C5(r.key),r)}}function sre(e,t,n){return lre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cre(e,t,n){return t=FC(t),ure(e,d5()?Reflect.construct(t,n,FC(e).constructor):t.apply(e,n))}function ure(e,t){if(t&&(Gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ire(e)}function Ire(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d5=function(){return!!e})()}function FC(e){return FC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},FC(e)}function dre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lv(e,t)}function lv(e,t){return lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},lv(e,t)}function sv(e,t,n){return t=C5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C5(e){var t=Cre(e,"string");return Gl(t)=="symbol"?t:t+""}function Cre(e,t){if(Gl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var EX=1,Are=function(e){function t(){var n;gre(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=cre(this,t,[].concat(a)),sv(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),sv(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,I;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(I=n.props.coordinate)===null||I===void 0?void 0:I.y)!==null&&u!==void 0?u:0}})}}),n}return dre(t,e),sre(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>EX||Math.abs(r.height-this.state.lastBoundingBox.height)>EX)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,I=a.coordinate,d=a.hasPayload,m=a.isAnimationActive,p=a.offset,h=a.position,b=a.reverseDirection,y=a.useTranslate3d,v=a.viewBox,G=a.wrapperStyle,S=ore({allowEscapeViewBox:o,coordinate:I,offsetTopLeft:p,position:h,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:v}),R=S.cssClasses,B=S.cssProperties,V=KX(KX({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},B),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},G);return H.createElement("div",{tabIndex:-1,className:R,style:V,ref:function(X){r.wrapperNode=X}},u)}}])}(k.PureComponent),mre=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},gi={isSsr:mre(),get:function(t){return gi[t]},set:function(t,n){if(typeof t=="string")gi[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){gi[a]=t[a]})}}};function Bl(e){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bl(e)}function MX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function DX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MX(Object(n),!0).forEach(function(r){DB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MX(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hre(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m5(r.key),r)}}function pre(e,t,n){return hre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bre(e,t,n){return t=KC(t),yre(e,A5()?Reflect.construct(t,n||[],KC(e).constructor):t.apply(e,n))}function yre(e,t){if(t&&(Bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zre(e)}function Zre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A5=function(){return!!e})()}function KC(e){return KC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},KC(e)}function vre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cv(e,t)}function cv(e,t){return cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},cv(e,t)}function DB(e,t,n){return t=m5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m5(e){var t=Gre(e,"string");return Bl(t)=="symbol"?t:t+""}function Gre(e,t){if(Bl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bre(e){return e.dataKey}function Sre(e,t){return H.isValidElement(e)?H.cloneElement(e,t):typeof e=="function"?H.createElement(e,t):H.createElement(ere,t)}var Aa=function(e){function t(){return fre(this,t),bre(this,t,arguments)}return vre(t,e),pre(t,[{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,I=a.coordinate,d=a.filterNull,m=a.isAnimationActive,p=a.offset,h=a.payload,b=a.payloadUniqBy,y=a.position,v=a.reverseDirection,G=a.useTranslate3d,S=a.viewBox,R=a.wrapperStyle,B=h??[];d&&B.length&&(B=o5(h.filter(function(W){return W.value!=null&&(W.hide!==!0||r.props.includeHidden)}),b,Bre));var V=B.length>0;return H.createElement(Are,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:I,hasPayload:V,offset:p,position:y,reverseDirection:v,useTranslate3d:G,viewBox:S,wrapperStyle:R},Sre(u,DX(DX({},this.props),{},{payload:B})))}}])}(k.PureComponent);DB(Aa,"displayName","Tooltip");DB(Aa,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!gi.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var b0,TX;function wre(){if(TX)return b0;TX=1;var e=Ha(),t=function(){return e.Date.now()};return b0=t,b0}var y0,jX;function Wre(){if(jX)return y0;jX=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return y0=t,y0}var Z0,LX;function kre(){if(LX)return Z0;LX=1;var e=Wre(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Z0=n,Z0}var v0,zX;function f5(){if(zX)return v0;zX=1;var e=kre(),t=ao(),n=ts(),r=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var I=typeof u.valueOf=="function"?u.valueOf():u;u=t(I)?I+"":I}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=i.test(u);return d||o.test(u)?l(u.slice(2),d?2:8):a.test(u)?r:+u}return v0=c,v0}var G0,UX;function Vre(){if(UX)return G0;UX=1;var e=ao(),t=wre(),n=f5(),r="Expected a function",a=Math.max,i=Math.min;function o(l,c,u){var I,d,m,p,h,b,y=0,v=!1,G=!1,S=!0;if(typeof l!="function")throw new TypeError(r);c=n(c)||0,e(u)&&(v=!!u.leading,G="maxWait"in u,m=G?a(n(u.maxWait)||0,c):m,S="trailing"in u?!!u.trailing:S);function R(E){var M=I,T=d;return I=d=void 0,y=E,p=l.apply(T,M),p}function B(E){return y=E,h=setTimeout(X,c),v?R(E):p}function V(E){var M=E-b,T=E-y,z=c-M;return G?i(z,m-T):z}function W(E){var M=E-b,T=E-y;return b===void 0||M>=c||M<0||G&&T>=m}function X(){var E=t();if(W(E))return N(E);h=setTimeout(X,V(E))}function N(E){return h=void 0,S&&I?R(E):(I=d=void 0,p)}function x(){h!==void 0&&clearTimeout(h),y=0,I=b=d=h=void 0}function Y(){return h===void 0?p:N(t())}function F(){var E=t(),M=W(E);if(I=arguments,d=this,b=E,M){if(h===void 0)return B(b);if(G)return clearTimeout(h),h=setTimeout(X,c),R(b)}return h===void 0&&(h=setTimeout(X,c)),p}return F.cancel=x,F.flush=Y,F}return G0=o,G0}var B0,PX;function Rre(){if(PX)return B0;PX=1;var e=Vre(),t=ao(),n="Expected a function";function r(a,i,o){var l=!0,c=!0;if(typeof a!="function")throw new TypeError(n);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(a,i,{leading:l,maxWait:i,trailing:c})}return B0=r,B0}var xre=Rre();const h5=ut(xre);function jc(e){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jc(e)}function OX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OX(Object(n),!0).forEach(function(r){Xre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OX(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xre(e,t,n){return t=Jre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jre(e){var t=Yre(e,"string");return jc(t)=="symbol"?t:t+""}function Yre(e,t){if(jc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nre(e,t){return Ere(e)||Kre(e,t)||Fre(e,t)||Hre()}function Hre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fre(e,t){if(e){if(typeof e=="string")return QX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QX(e,t)}}function QX(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kre(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Ere(e){if(Array.isArray(e))return e}var _X=k.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,I=u===void 0?0:u,d=e.minHeight,m=e.maxHeight,p=e.children,h=e.debounce,b=h===void 0?0:h,y=e.id,v=e.className,G=e.onResize,S=e.style,R=S===void 0?{}:S,B=k.useRef(null),V=k.useRef();V.current=G,k.useImperativeHandle(t,function(){return Object.defineProperty(B.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),B.current},configurable:!0})});var W=k.useState({containerWidth:a.width,containerHeight:a.height}),X=Nre(W,2),N=X[0],x=X[1],Y=k.useCallback(function(E,M){x(function(T){var z=Math.round(E),P=Math.round(M);return T.containerWidth===z&&T.containerHeight===P?T:{containerWidth:z,containerHeight:P}})},[]);k.useEffect(function(){var E=function(q){var ee,D=q[0].contentRect,O=D.width,ue=D.height;Y(O,ue),(ee=V.current)===null||ee===void 0||ee.call(V,O,ue)};b>0&&(E=h5(E,b,{trailing:!0,leading:!1}));var M=new ResizeObserver(E),T=B.current.getBoundingClientRect(),z=T.width,P=T.height;return Y(z,P),M.observe(B.current),function(){M.disconnect()}},[Y,b]);var F=k.useMemo(function(){var E=N.containerWidth,M=N.containerHeight;if(E<0||M<0)return null;oi(Ro(o)||Ro(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),oi(!n||n>0,"The aspect(%s) must be greater than zero.",n);var T=Ro(o)?E:o,z=Ro(c)?M:c;n&&n>0&&(T?z=T/n:z&&(T=z*n),m&&z>m&&(z=m)),oi(T>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,z,o,c,I,d,n);var P=!Array.isArray(p)&&ii(p.type).endsWith("Chart");return H.Children.map(p,function(L){return H.isValidElement(L)?k.cloneElement(L,yd({width:T,height:z},P?{style:yd({height:"100%",width:"100%",maxHeight:z,maxWidth:T},L.props.style)}:{})):L})},[n,p,c,m,d,I,N,o]);return H.createElement("div",{id:y?"".concat(y):void 0,className:Ve("recharts-responsive-container",v),style:yd(yd({},R),{},{width:o,height:c,minWidth:I,minHeight:d,maxHeight:m}),ref:B},F)}),p5=function(t){return null};p5.displayName="Cell";function Lc(e){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lc(e)}function qX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qX(Object(n),!0).forEach(function(r){Mre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qX(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mre(e,t,n){return t=Dre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dre(e){var t=Tre(e,"string");return Lc(t)=="symbol"?t:t+""}function Tre(e,t){if(Lc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Eg={widthCache:{},cacheCount:0},jre=2e3,Lre={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$X="recharts_measurement_span";function zre(e){var t=uv({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Gc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||gi.isSsr)return{width:0,height:0};var r=zre(n),a=JSON.stringify({text:t,copyStyle:r});if(Eg.widthCache[a])return Eg.widthCache[a];try{var i=document.getElementById($X);i||(i=document.createElement("span"),i.setAttribute("id",$X),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=uv(uv({},Lre),r);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Eg.widthCache[a]=c,++Eg.cacheCount>jre&&(Eg.cacheCount=0,Eg.widthCache={}),c}catch{return{width:0,height:0}}},Ure=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function zc(e){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zc(e)}function EC(e,t){return _re(e)||Qre(e,t)||Ore(e,t)||Pre()}function Pre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ore(e,t){if(e){if(typeof e=="string")return eJ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eJ(e,t)}}function eJ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qre(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function _re(e){if(Array.isArray(e))return e}function qre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eae(r.key),r)}}function $re(e,t,n){return tJ(e.prototype,t),tJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eae(e){var t=tae(e,"string");return zc(t)=="symbol"?t:t+""}function tae(e,t){if(zc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nJ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rJ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nae=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,rae=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,b5={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},aae=Object.keys(b5),zg="NaN";function iae(e,t){return e*b5[t]}var Zd=function(){function e(t,n){qre(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!nae.test(n)&&(this.num=NaN,this.unit=""),aae.includes(n)&&(this.num=iae(t,n),this.unit="px")}return $re(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=rae.exec(n))!==null&&r!==void 0?r:[],i=EC(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function y5(e){if(e.includes(zg))return zg;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=nJ.exec(t))!==null&&n!==void 0?n:[],a=EC(r,4),i=a[1],o=a[2],l=a[3],c=Zd.parse(i??""),u=Zd.parse(l??""),I=o==="*"?c.multiply(u):c.divide(u);if(I.isNaN())return zg;t=t.replace(nJ,I.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,m=(d=rJ.exec(t))!==null&&d!==void 0?d:[],p=EC(m,4),h=p[1],b=p[2],y=p[3],v=Zd.parse(h??""),G=Zd.parse(y??""),S=b==="+"?v.add(G):v.subtract(G);if(S.isNaN())return zg;t=t.replace(rJ,S.toString())}return t}var aJ=/\(([^()]*)\)/;function oae(e){for(var t=e;t.includes("(");){var n=aJ.exec(t),r=EC(n,2),a=r[1];t=t.replace(aJ,y5(a))}return t}function gae(e){var t=e.replace(/\s+/g,"");return t=oae(t),t=y5(t),t}function lae(e){try{return gae(e)}catch{return zg}}function S0(e){var t=lae(e.slice(5,-1));return t===zg?"":t}var sae=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],cae=["dx","dy","angle","className","breakAll"];function Iv(){return Iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iv.apply(this,arguments)}function iJ(e,t){if(e==null)return{};var n=uae(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function oJ(e,t){return Aae(e)||Cae(e,t)||dae(e,t)||Iae()}function Iae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dae(e,t){if(e){if(typeof e=="string")return gJ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gJ(e,t)}}function gJ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cae(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Aae(e){if(Array.isArray(e))return e}var Z5=/[ \f\n\r\t\v\u2028\u2029]+/,v5=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var i=[];Me(n)||(r?i=n.toString().split(""):i=n.toString().split(Z5));var o=i.map(function(c){return{word:c,width:Gc(c,a).width}}),l=r?0:Gc(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},mae=function(t,n,r,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,I=de(o),d=l,m=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce(function(z,P){var L=P.word,q=P.width,ee=z[z.length-1];if(ee&&(a==null||i||ee.width+q+r<Number(a)))ee.words.push(L),ee.width+=q+r;else{var D={words:[L],width:q};z.push(D)}return z},[])},p=m(n),h=function(T){return T.reduce(function(z,P){return z.width>P.width?z:P})};if(!I)return p;for(var b="…",y=function(T){var z=d.slice(0,T),P=v5({breakAll:u,style:c,children:z+b}).wordsWithComputedWidth,L=m(P),q=L.length>o||h(L).width>Number(a);return[q,L]},v=0,G=d.length-1,S=0,R;v<=G&&S<=d.length-1;){var B=Math.floor((v+G)/2),V=B-1,W=y(V),X=oJ(W,2),N=X[0],x=X[1],Y=y(B),F=oJ(Y,1),E=F[0];if(!N&&!E&&(v=B+1),N&&E&&(G=B-1),!N&&E){R=x;break}S++}return R||p},lJ=function(t){var n=Me(t)?[]:t.toString().split(Z5);return[{words:n}]},fae=function(t){var n=t.width,r=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!gi.isSsr){var c,u,I=v5({breakAll:o,children:a,style:i});if(I){var d=I.wordsWithComputedWidth,m=I.spaceWidth;c=d,u=m}else return lJ(a);return mae({breakAll:o,children:a,maxLines:l,style:i},c,u,n,r)}return lJ(a)},sJ="#808080",MC=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,I=t.scaleToFit,d=I===void 0?!1:I,m=t.textAnchor,p=m===void 0?"start":m,h=t.verticalAnchor,b=h===void 0?"end":h,y=t.fill,v=y===void 0?sJ:y,G=iJ(t,sae),S=k.useMemo(function(){return fae({breakAll:G.breakAll,children:G.children,maxLines:G.maxLines,scaleToFit:d,style:G.style,width:G.width})},[G.breakAll,G.children,G.maxLines,d,G.style,G.width]),R=G.dx,B=G.dy,V=G.angle,W=G.className,X=G.breakAll,N=iJ(G,cae);if(!$t(r)||!$t(i))return null;var x=r+(de(R)?R:0),Y=i+(de(B)?B:0),F;switch(b){case"start":F=S0("calc(".concat(u,")"));break;case"middle":F=S0("calc(".concat((S.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:F=S0("calc(".concat(S.length-1," * -").concat(l,")"));break}var E=[];if(d){var M=S[0].width,T=G.width;E.push("scale(".concat((de(T)?T/M:1)/M,")"))}return V&&E.push("rotate(".concat(V,", ").concat(x,", ").concat(Y,")")),E.length&&(N.transform=E.join(" ")),H.createElement("text",Iv({},De(N,!0),{x,y:Y,className:Ve("recharts-text",W),textAnchor:p,fill:v.includes("url")?sJ:v}),S.map(function(z,P){var L=z.words.join(X?"":" ");return H.createElement("tspan",{x,dy:P===0?F:l,key:"".concat(L,"-").concat(P)},L)}))};function Qi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hae(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function TB(e){let t,n,r;e.length!==2?(t=Qi,n=(l,c)=>Qi(e(l),c),r=(l,c)=>e(l)-c):(t=e===Qi||e===hae?e:pae,n=e,r=e);function a(l,c,u=0,I=l.length){if(u<I){if(t(c,c)!==0)return I;do{const d=u+I>>>1;n(l[d],c)<0?u=d+1:I=d}while(u<I)}return u}function i(l,c,u=0,I=l.length){if(u<I){if(t(c,c)!==0)return I;do{const d=u+I>>>1;n(l[d],c)<=0?u=d+1:I=d}while(u<I)}return u}function o(l,c,u=0,I=l.length){const d=a(l,c,u,I-1);return d>u&&r(l[d-1],c)>-r(l[d],c)?d-1:d}return{left:a,center:o,right:i}}function pae(){return 0}function G5(e){return e===null?NaN:+e}function*bae(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const yae=TB(Qi),ju=yae.right;TB(G5).center;class cJ extends Map{constructor(t,n=Gae){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(uJ(this,t))}has(t){return super.has(uJ(this,t))}set(t,n){return super.set(Zae(this,t),n)}delete(t){return super.delete(vae(this,t))}}function uJ({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Zae({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function vae({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Gae(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Bae(e=Qi){if(e===Qi)return B5;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function B5(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Sae=Math.sqrt(50),wae=Math.sqrt(10),Wae=Math.sqrt(2);function DC(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=Sae?10:i>=wae?5:i>=Wae?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?DC(e,t,n*2):[l,c,u]}function dv(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?DC(t,e,n):DC(e,t,n);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function Cv(e,t,n){return t=+t,e=+e,n=+n,DC(e,t,n)[2]}function Av(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?Cv(t,e,n):Cv(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function IJ(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function dJ(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function S5(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?B5:Bae(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,I=Math.log(c),d=.5*Math.exp(2*I/3),m=.5*Math.sqrt(I*d*(c-d)/c)*(u-c/2<0?-1:1),p=Math.max(n,Math.floor(t-u*d/c+m)),h=Math.min(r,Math.floor(t+(c-u)*d/c+m));S5(e,t,p,h,a)}const i=e[t];let o=n,l=r;for(oc(e,n,t),a(e[r],i)>0&&oc(e,n,r);o<l;){for(oc(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[n],i)===0?oc(e,n,l):(++l,oc(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function oc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function kae(e,t,n){if(e=Float64Array.from(bae(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return dJ(e);if(t>=1)return IJ(e);var r,a=(r-1)*t,i=Math.floor(a),o=IJ(S5(e,i).subarray(0,i+1)),l=dJ(e.subarray(i+1));return o+(l-o)*(a-i)}}function Vae(e,t,n=G5){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function Rae(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function xr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function fi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mv=Symbol("implicit");function jB(){var e=new cJ,t=[],n=[],r=mv;function a(i){let o=e.get(i);if(o===void 0){if(r!==mv)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new cJ;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return jB(t,n).unknown(r)},xr.apply(a,arguments),a}function Uc(){var e=jB().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,l=!1,c=0,u=0,I=.5;delete e.unknown;function d(){var m=t().length,p=a<r,h=p?a:r,b=p?r:a;i=(b-h)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),h+=(b-h-i*(m-c))*I,o=i*(1-c),l&&(h=Math.round(h),o=Math.round(o));var y=Rae(m).map(function(v){return h+i*v});return n(p?y.reverse():y)}return e.domain=function(m){return arguments.length?(t(m),d()):t()},e.range=function(m){return arguments.length?([r,a]=m,r=+r,a=+a,d()):[r,a]},e.rangeRound=function(m){return[r,a]=m,r=+r,a=+a,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,d()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),d()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),d()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,d()):u},e.align=function(m){return arguments.length?(I=Math.max(0,Math.min(1,m)),d()):I},e.copy=function(){return Uc(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(I)},xr.apply(d(),arguments)}function w5(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return w5(t())},e}function Bc(){return w5(Uc.apply(null,arguments).paddingInner(1))}function LB(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function W5(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Lu(){}var Pc=.7,TC=1/Pc,rl="\\s*([+-]?\\d+)\\s*",Oc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xae=/^#([0-9a-f]{3,8})$/,Xae=new RegExp(`^rgb\\(${rl},${rl},${rl}\\)$`),Jae=new RegExp(`^rgb\\(${ka},${ka},${ka}\\)$`),Yae=new RegExp(`^rgba\\(${rl},${rl},${rl},${Oc}\\)$`),Nae=new RegExp(`^rgba\\(${ka},${ka},${ka},${Oc}\\)$`),Hae=new RegExp(`^hsl\\(${Oc},${ka},${ka}\\)$`),Fae=new RegExp(`^hsla\\(${Oc},${ka},${ka},${Oc}\\)$`),CJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};LB(Lu,Qc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:AJ,formatHex:AJ,formatHex8:Kae,formatHsl:Eae,formatRgb:mJ,toString:mJ});function AJ(){return this.rgb().formatHex()}function Kae(){return this.rgb().formatHex8()}function Eae(){return k5(this).formatHsl()}function mJ(){return this.rgb().formatRgb()}function Qc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xae.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fJ(t):n===3?new Dn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?vd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?vd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xae.exec(e))?new Dn(t[1],t[2],t[3],1):(t=Jae.exec(e))?new Dn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Yae.exec(e))?vd(t[1],t[2],t[3],t[4]):(t=Nae.exec(e))?vd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Hae.exec(e))?bJ(t[1],t[2]/100,t[3]/100,1):(t=Fae.exec(e))?bJ(t[1],t[2]/100,t[3]/100,t[4]):CJ.hasOwnProperty(e)?fJ(CJ[e]):e==="transparent"?new Dn(NaN,NaN,NaN,0):null}function fJ(e){return new Dn(e>>16&255,e>>8&255,e&255,1)}function vd(e,t,n,r){return r<=0&&(e=t=n=NaN),new Dn(e,t,n,r)}function Mae(e){return e instanceof Lu||(e=Qc(e)),e?(e=e.rgb(),new Dn(e.r,e.g,e.b,e.opacity)):new Dn}function fv(e,t,n,r){return arguments.length===1?Mae(e):new Dn(e,t,n,r??1)}function Dn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}LB(Dn,fv,W5(Lu,{brighter(e){return e=e==null?TC:Math.pow(TC,e),new Dn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pc:Math.pow(Pc,e),new Dn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Dn(Mo(this.r),Mo(this.g),Mo(this.b),jC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hJ,formatHex:hJ,formatHex8:Dae,formatRgb:pJ,toString:pJ}));function hJ(){return`#${xo(this.r)}${xo(this.g)}${xo(this.b)}`}function Dae(){return`#${xo(this.r)}${xo(this.g)}${xo(this.b)}${xo((isNaN(this.opacity)?1:this.opacity)*255)}`}function pJ(){const e=jC(this.opacity);return`${e===1?"rgb(":"rgba("}${Mo(this.r)}, ${Mo(this.g)}, ${Mo(this.b)}${e===1?")":`, ${e})`}`}function jC(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xo(e){return e=Mo(e),(e<16?"0":"")+e.toString(16)}function bJ(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Pr(e,t,n,r)}function k5(e){if(e instanceof Pr)return new Pr(e.h,e.s,e.l,e.opacity);if(e instanceof Lu||(e=Qc(e)),!e)return new Pr;if(e instanceof Pr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Pr(o,l,c,e.opacity)}function Tae(e,t,n,r){return arguments.length===1?k5(e):new Pr(e,t,n,r??1)}function Pr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}LB(Pr,Tae,W5(Lu,{brighter(e){return e=e==null?TC:Math.pow(TC,e),new Pr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pc:Math.pow(Pc,e),new Pr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Dn(w0(e>=240?e-240:e+120,a,r),w0(e,a,r),w0(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Pr(yJ(this.h),Gd(this.s),Gd(this.l),jC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jC(this.opacity);return`${e===1?"hsl(":"hsla("}${yJ(this.h)}, ${Gd(this.s)*100}%, ${Gd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yJ(e){return e=(e||0)%360,e<0?e+360:e}function Gd(e){return Math.max(0,Math.min(1,e||0))}function w0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zB=e=>()=>e;function jae(e,t){return function(n){return e+n*t}}function Lae(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function zae(e){return(e=+e)==1?V5:function(t,n){return n-t?Lae(t,n,e):zB(isNaN(t)?n:t)}}function V5(e,t){var n=t-e;return n?jae(e,n):zB(isNaN(e)?t:e)}const ZJ=function e(t){var n=zae(t);function r(a,i){var o=n((a=fv(a)).r,(i=fv(i)).r),l=n(a.g,i.g),c=n(a.b,i.b),u=V5(a.opacity,i.opacity);return function(I){return a.r=o(I),a.g=l(I),a.b=c(I),a.opacity=u(I),a+""}}return r.gamma=e,r}(1);function Uae(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function Pae(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Oae(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=as(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<r;++o)i[o]=a[o](l);return i}}function Qae(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function LC(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _ae(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=as(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var hv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,W0=new RegExp(hv.source,"g");function qae(e){return function(){return e}}function $ae(e){return function(t){return e(t)+""}}function eie(e,t){var n=hv.lastIndex=W0.lastIndex=0,r,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=hv.exec(e))&&(a=W0.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:LC(r,a)})),n=W0.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?$ae(c[0].x):qae(t):(t=c.length,function(u){for(var I=0,d;I<t;++I)l[(d=c[I]).i]=d.x(u);return l.join("")})}function as(e,t){var n=typeof t,r;return t==null||n==="boolean"?zB(t):(n==="number"?LC:n==="string"?(r=Qc(t))?(t=r,ZJ):eie:t instanceof Qc?ZJ:t instanceof Date?Qae:Pae(t)?Uae:Array.isArray(t)?Oae:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_ae:LC)(e,t)}function UB(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function tie(e,t){t===void 0&&(t=e,e=as);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[l](o-l)}}function nie(e){return function(){return e}}function zC(e){return+e}var vJ=[0,1];function Jn(e){return e}function pv(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:nie(isNaN(t)?NaN:.5)}function rie(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function aie(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=pv(a,r),i=n(o,i)):(r=pv(r,a),i=n(i,o)),function(l){return i(r(l))}}function iie(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=pv(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=ju(e,l,1,r)-1;return i[c](a[c](l))}}function zu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wm(){var e=vJ,t=vJ,n=as,r,a,i,o=Jn,l,c,u;function I(){var m=Math.min(e.length,t.length);return o!==Jn&&(o=rie(e[0],e[m-1])),l=m>2?iie:aie,c=u=null,d}function d(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(r),t,n)))(r(o(m)))}return d.invert=function(m){return o(a((u||(u=l(t,e.map(r),LC)))(m)))},d.domain=function(m){return arguments.length?(e=Array.from(m,zC),I()):e.slice()},d.range=function(m){return arguments.length?(t=Array.from(m),I()):t.slice()},d.rangeRound=function(m){return t=Array.from(m),n=UB,I()},d.clamp=function(m){return arguments.length?(o=m?!0:Jn,I()):o!==Jn},d.interpolate=function(m){return arguments.length?(n=m,I()):n},d.unknown=function(m){return arguments.length?(i=m,d):i},function(m,p){return r=m,a=p,I()}}function PB(){return wm()(Jn,Jn)}function oie(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function UC(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Sl(e){return e=UC(Math.abs(e)),e?e[1]:NaN}function gie(e,t){return function(n,r){for(var a=n.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),i.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function lie(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var sie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _c(e){if(!(t=sie.exec(e)))throw new Error("invalid format: "+e);var t;return new OB({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_c.prototype=OB.prototype;function OB(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}OB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cie(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var R5;function uie(e,t){var n=UC(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(R5=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+UC(e,Math.max(0,t+i-1))[0]}function GJ(e,t){var n=UC(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const BJ={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:oie,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>GJ(e*100,t),r:GJ,s:uie,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function SJ(e){return e}var wJ=Array.prototype.map,WJ=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Iie(e){var t=e.grouping===void 0||e.thousands===void 0?SJ:gie(wJ.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?SJ:lie(wJ.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d){d=_c(d);var m=d.fill,p=d.align,h=d.sign,b=d.symbol,y=d.zero,v=d.width,G=d.comma,S=d.precision,R=d.trim,B=d.type;B==="n"?(G=!0,B="g"):BJ[B]||(S===void 0&&(S=12),R=!0,B="g"),(y||m==="0"&&p==="=")&&(y=!0,m="0",p="=");var V=b==="$"?n:b==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",W=b==="$"?r:/[%p]/.test(B)?o:"",X=BJ[B],N=/[defgprs%]/.test(B);S=S===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function x(Y){var F=V,E=W,M,T,z;if(B==="c")E=X(Y)+E,Y="";else{Y=+Y;var P=Y<0||1/Y<0;if(Y=isNaN(Y)?c:X(Math.abs(Y),S),R&&(Y=cie(Y)),P&&+Y==0&&h!=="+"&&(P=!1),F=(P?h==="("?h:l:h==="-"||h==="("?"":h)+F,E=(B==="s"?WJ[8+R5/3]:"")+E+(P&&h==="("?")":""),N){for(M=-1,T=Y.length;++M<T;)if(z=Y.charCodeAt(M),48>z||z>57){E=(z===46?a+Y.slice(M+1):Y.slice(M))+E,Y=Y.slice(0,M);break}}}G&&!y&&(Y=t(Y,1/0));var L=F.length+Y.length+E.length,q=L<v?new Array(v-L+1).join(m):"";switch(G&&y&&(Y=t(q+Y,q.length?v-E.length:1/0),q=""),p){case"<":Y=F+Y+E+q;break;case"=":Y=F+q+Y+E;break;case"^":Y=q.slice(0,L=q.length>>1)+F+Y+E+q.slice(L);break;default:Y=q+F+Y+E;break}return i(Y)}return x.toString=function(){return d+""},x}function I(d,m){var p=u((d=_c(d),d.type="f",d)),h=Math.max(-8,Math.min(8,Math.floor(Sl(m)/3)))*3,b=Math.pow(10,-h),y=WJ[8+h/3];return function(v){return p(b*v)+y}}return{format:u,formatPrefix:I}}var Bd,QB,x5;die({thousands:",",grouping:[3],currency:["$",""]});function die(e){return Bd=Iie(e),QB=Bd.format,x5=Bd.formatPrefix,Bd}function Cie(e){return Math.max(0,-Sl(Math.abs(e)))}function Aie(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sl(t)/3)))*3-Sl(Math.abs(e)))}function mie(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Sl(t)-Sl(e))+1}function X5(e,t,n,r){var a=Av(e,t,n),i;switch(r=_c(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=Aie(a,o))&&(r.precision=i),x5(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=mie(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Cie(a))&&(r.precision=i-(r.type==="%")*2);break}}return QB(r)}function oo(e){var t=e.domain;return e.ticks=function(n){var r=t();return dv(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return X5(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],l=r[i],c,u,I=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);I-- >0;){if(u=Cv(o,l,n),u===c)return r[a]=o,r[i]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function PC(){var e=PB();return e.copy=function(){return zu(e,PC())},xr.apply(e,arguments),oo(e)}function J5(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,zC),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return J5(e).unknown(t)},e=arguments.length?Array.from(e,zC):[0,1],oo(n)}function Y5(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function kJ(e){return Math.log(e)}function VJ(e){return Math.exp(e)}function fie(e){return-Math.log(-e)}function hie(e){return-Math.exp(-e)}function pie(e){return isFinite(e)?+("1e"+e):e<0?0:e}function bie(e){return e===10?pie:e===Math.E?Math.exp:t=>Math.pow(e,t)}function yie(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function RJ(e){return(t,n)=>-e(-t,n)}function _B(e){const t=e(kJ,VJ),n=t.domain;let r=10,a,i;function o(){return a=yie(r),i=bie(r),n()[0]<0?(a=RJ(a),i=RJ(i),e(fie,hie)):e(kJ,VJ),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],I=c[c.length-1];const d=I<u;d&&([u,I]=[I,u]);let m=a(u),p=a(I),h,b;const y=l==null?10:+l;let v=[];if(!(r%1)&&p-m<y){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(h=1;h<r;++h)if(b=m<0?h/i(-m):h*i(m),!(b<u)){if(b>I)break;v.push(b)}}else for(;m<=p;++m)for(h=r-1;h>=1;--h)if(b=m>0?h/i(-m):h*i(m),!(b<u)){if(b>I)break;v.push(b)}v.length*2<y&&(v=dv(u,I,y))}else v=dv(m,p,Math.min(p-m,y)).map(i);return d?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=_c(c)).precision==null&&(c.trim=!0),c=QB(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return I=>{let d=I/i(Math.round(a(I)));return d*r<r-.5&&(d*=r),d<=u?c(I):""}},t.nice=()=>n(Y5(n(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function N5(){const e=_B(wm()).domain([1,10]);return e.copy=()=>zu(e,N5()).base(e.base()),xr.apply(e,arguments),e}function xJ(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function XJ(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function qB(e){var t=1,n=e(xJ(t),XJ(t));return n.constant=function(r){return arguments.length?e(xJ(t=+r),XJ(t)):t},oo(n)}function H5(){var e=qB(wm());return e.copy=function(){return zu(e,H5()).constant(e.constant())},xr.apply(e,arguments)}function JJ(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Zie(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function vie(e){return e<0?-e*e:e*e}function $B(e){var t=e(Jn,Jn),n=1;function r(){return n===1?e(Jn,Jn):n===.5?e(Zie,vie):e(JJ(n),JJ(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},oo(t)}function eS(){var e=$B(wm());return e.copy=function(){return zu(e,eS()).exponent(e.exponent())},xr.apply(e,arguments),e}function Gie(){return eS.apply(null,arguments).exponent(.5)}function YJ(e){return Math.sign(e)*e*e}function Bie(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function F5(){var e=PB(),t=[0,1],n=!1,r;function a(i){var o=Bie(e(i));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(i){return e.invert(YJ(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,zC)).map(YJ)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return F5(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},xr.apply(a,arguments),oo(a)}function K5(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Vae(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?r:t[ju(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Qi),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return K5().domain(e).range(t).unknown(r)},xr.apply(i,arguments)}function E5(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[ju(r,c,0,n)]:i}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return E5().domain([e,t]).range(a).unknown(i)},xr.apply(oo(o),arguments)}function M5(){var e=[.5],t=[0,1],n,r=1;function a(i){return i!=null&&i<=i?t[ju(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return M5().domain(e).range(t).unknown(n)},xr.apply(a,arguments)}const k0=new Date,V0=new Date;function en(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>en(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(k0.setTime(+i),V0.setTime(+o),e(k0),e(V0),Math.floor(n(k0,V0))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const OC=en(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);OC.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?en(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):OC);OC.range;const Qa=1e3,Br=Qa*60,_a=Br*60,ui=_a*24,tS=ui*7,NJ=ui*30,R0=ui*365,Xo=en(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Qa)},(e,t)=>(t-e)/Qa,e=>e.getUTCSeconds());Xo.range;const nS=en(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qa)},(e,t)=>{e.setTime(+e+t*Br)},(e,t)=>(t-e)/Br,e=>e.getMinutes());nS.range;const rS=en(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Br)},(e,t)=>(t-e)/Br,e=>e.getUTCMinutes());rS.range;const aS=en(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qa-e.getMinutes()*Br)},(e,t)=>{e.setTime(+e+t*_a)},(e,t)=>(t-e)/_a,e=>e.getHours());aS.range;const iS=en(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_a)},(e,t)=>(t-e)/_a,e=>e.getUTCHours());iS.range;const Uu=en(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Br)/ui,e=>e.getDate()-1);Uu.range;const Wm=en(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ui,e=>e.getUTCDate()-1);Wm.range;const D5=en(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ui,e=>Math.floor(e/ui));D5.range;function ig(e){return en(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Br)/tS)}const km=ig(0),QC=ig(1),Sie=ig(2),wie=ig(3),wl=ig(4),Wie=ig(5),kie=ig(6);km.range;QC.range;Sie.range;wie.range;wl.range;Wie.range;kie.range;function og(e){return en(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/tS)}const Vm=og(0),_C=og(1),Vie=og(2),Rie=og(3),Wl=og(4),xie=og(5),Xie=og(6);Vm.range;_C.range;Vie.range;Rie.range;Wl.range;xie.range;Xie.range;const oS=en(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());oS.range;const gS=en(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gS.range;const Ii=en(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ii.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:en(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ii.range;const di=en(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());di.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:en(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});di.range;function T5(e,t,n,r,a,i){const o=[[Xo,1,Qa],[Xo,5,5*Qa],[Xo,15,15*Qa],[Xo,30,30*Qa],[i,1,Br],[i,5,5*Br],[i,15,15*Br],[i,30,30*Br],[a,1,_a],[a,3,3*_a],[a,6,6*_a],[a,12,12*_a],[r,1,ui],[r,2,2*ui],[n,1,tS],[t,1,NJ],[t,3,3*NJ],[e,1,R0]];function l(u,I,d){const m=I<u;m&&([u,I]=[I,u]);const p=d&&typeof d.range=="function"?d:c(u,I,d),h=p?p.range(u,+I+1):[];return m?h.reverse():h}function c(u,I,d){const m=Math.abs(I-u)/d,p=TB(([,,y])=>y).right(o,m);if(p===o.length)return e.every(Av(u/R0,I/R0,d));if(p===0)return OC.every(Math.max(Av(u,I,d),1));const[h,b]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return h.every(b)}return[l,c]}const[Jie,Yie]=T5(di,gS,Vm,D5,iS,rS),[Nie,Hie]=T5(Ii,oS,km,Uu,aS,nS);function x0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function X0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function gc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Fie(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=lc(a),I=sc(a),d=lc(i),m=sc(i),p=lc(o),h=sc(o),b=lc(l),y=sc(l),v=lc(c),G=sc(c),S={a:P,A:L,b:q,B:ee,c:null,d:DJ,e:DJ,f:goe,g:foe,G:poe,H:aoe,I:ioe,j:ooe,L:j5,m:loe,M:soe,p:D,q:O,Q:LJ,s:zJ,S:coe,u:uoe,U:Ioe,V:doe,w:Coe,W:Aoe,x:null,X:null,y:moe,Y:hoe,Z:boe,"%":jJ},R={a:ue,A:ye,b:Be,B:xe,c:null,d:TJ,e:TJ,f:Goe,g:Joe,G:Noe,H:yoe,I:Zoe,j:voe,L:z5,m:Boe,M:Soe,p:Te,q:Xe,Q:LJ,s:zJ,S:woe,u:Woe,U:koe,V:Voe,w:Roe,W:xoe,x:null,X:null,y:Xoe,Y:Yoe,Z:Hoe,"%":jJ},B={a:x,A:Y,b:F,B:E,c:M,d:EJ,e:EJ,f:eoe,g:KJ,G:FJ,H:MJ,I:MJ,j:Qie,L:$ie,m:Oie,M:_ie,p:N,q:Pie,Q:noe,s:roe,S:qie,u:Tie,U:jie,V:Lie,w:Die,W:zie,x:T,X:z,y:KJ,Y:FJ,Z:Uie,"%":toe};S.x=V(n,S),S.X=V(r,S),S.c=V(t,S),R.x=V(n,R),R.X=V(r,R),R.c=V(t,R);function V(se,Ge){return function(Je){var ge=[],dt=-1,Ee=0,Rt=se.length,xt,tn,Xr;for(Je instanceof Date||(Je=new Date(+Je));++dt<Rt;)se.charCodeAt(dt)===37&&(ge.push(se.slice(Ee,dt)),(tn=HJ[xt=se.charAt(++dt)])!=null?xt=se.charAt(++dt):tn=xt==="e"?" ":"0",(Xr=Ge[xt])&&(xt=Xr(Je,tn)),ge.push(xt),Ee=dt+1);return ge.push(se.slice(Ee,dt)),ge.join("")}}function W(se,Ge){return function(Je){var ge=gc(1900,void 0,1),dt=X(ge,se,Je+="",0),Ee,Rt;if(dt!=Je.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(Ge&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(Ee=X0(gc(ge.y,0,1)),Rt=Ee.getUTCDay(),Ee=Rt>4||Rt===0?_C.ceil(Ee):_C(Ee),Ee=Wm.offset(Ee,(ge.V-1)*7),ge.y=Ee.getUTCFullYear(),ge.m=Ee.getUTCMonth(),ge.d=Ee.getUTCDate()+(ge.w+6)%7):(Ee=x0(gc(ge.y,0,1)),Rt=Ee.getDay(),Ee=Rt>4||Rt===0?QC.ceil(Ee):QC(Ee),Ee=Uu.offset(Ee,(ge.V-1)*7),ge.y=Ee.getFullYear(),ge.m=Ee.getMonth(),ge.d=Ee.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),Rt="Z"in ge?X0(gc(ge.y,0,1)).getUTCDay():x0(gc(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(Rt+5)%7:ge.w+ge.U*7-(Rt+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,X0(ge)):x0(ge)}}function X(se,Ge,Je,ge){for(var dt=0,Ee=Ge.length,Rt=Je.length,xt,tn;dt<Ee;){if(ge>=Rt)return-1;if(xt=Ge.charCodeAt(dt++),xt===37){if(xt=Ge.charAt(dt++),tn=B[xt in HJ?Ge.charAt(dt++):xt],!tn||(ge=tn(se,Je,ge))<0)return-1}else if(xt!=Je.charCodeAt(ge++))return-1}return ge}function N(se,Ge,Je){var ge=u.exec(Ge.slice(Je));return ge?(se.p=I.get(ge[0].toLowerCase()),Je+ge[0].length):-1}function x(se,Ge,Je){var ge=p.exec(Ge.slice(Je));return ge?(se.w=h.get(ge[0].toLowerCase()),Je+ge[0].length):-1}function Y(se,Ge,Je){var ge=d.exec(Ge.slice(Je));return ge?(se.w=m.get(ge[0].toLowerCase()),Je+ge[0].length):-1}function F(se,Ge,Je){var ge=v.exec(Ge.slice(Je));return ge?(se.m=G.get(ge[0].toLowerCase()),Je+ge[0].length):-1}function E(se,Ge,Je){var ge=b.exec(Ge.slice(Je));return ge?(se.m=y.get(ge[0].toLowerCase()),Je+ge[0].length):-1}function M(se,Ge,Je){return X(se,t,Ge,Je)}function T(se,Ge,Je){return X(se,n,Ge,Je)}function z(se,Ge,Je){return X(se,r,Ge,Je)}function P(se){return o[se.getDay()]}function L(se){return i[se.getDay()]}function q(se){return c[se.getMonth()]}function ee(se){return l[se.getMonth()]}function D(se){return a[+(se.getHours()>=12)]}function O(se){return 1+~~(se.getMonth()/3)}function ue(se){return o[se.getUTCDay()]}function ye(se){return i[se.getUTCDay()]}function Be(se){return c[se.getUTCMonth()]}function xe(se){return l[se.getUTCMonth()]}function Te(se){return a[+(se.getUTCHours()>=12)]}function Xe(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var Ge=V(se+="",S);return Ge.toString=function(){return se},Ge},parse:function(se){var Ge=W(se+="",!1);return Ge.toString=function(){return se},Ge},utcFormat:function(se){var Ge=V(se+="",R);return Ge.toString=function(){return se},Ge},utcParse:function(se){var Ge=W(se+="",!0);return Ge.toString=function(){return se},Ge}}}var HJ={"-":"",_:" ",0:"0"},un=/^\s*\d+/,Kie=/^%/,Eie=/[\\^$*+?|[\]().{}]/g;function Qe(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function Mie(e){return e.replace(Eie,"\\$&")}function lc(e){return new RegExp("^(?:"+e.map(Mie).join("|")+")","i")}function sc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Die(e,t,n){var r=un.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Tie(e,t,n){var r=un.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function jie(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Lie(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function zie(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function FJ(e,t,n){var r=un.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function KJ(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Uie(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Pie(e,t,n){var r=un.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Oie(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function EJ(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Qie(e,t,n){var r=un.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function MJ(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _ie(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function qie(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function $ie(e,t,n){var r=un.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function eoe(e,t,n){var r=un.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function toe(e,t,n){var r=Kie.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function noe(e,t,n){var r=un.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function roe(e,t,n){var r=un.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function DJ(e,t){return Qe(e.getDate(),t,2)}function aoe(e,t){return Qe(e.getHours(),t,2)}function ioe(e,t){return Qe(e.getHours()%12||12,t,2)}function ooe(e,t){return Qe(1+Uu.count(Ii(e),e),t,3)}function j5(e,t){return Qe(e.getMilliseconds(),t,3)}function goe(e,t){return j5(e,t)+"000"}function loe(e,t){return Qe(e.getMonth()+1,t,2)}function soe(e,t){return Qe(e.getMinutes(),t,2)}function coe(e,t){return Qe(e.getSeconds(),t,2)}function uoe(e){var t=e.getDay();return t===0?7:t}function Ioe(e,t){return Qe(km.count(Ii(e)-1,e),t,2)}function L5(e){var t=e.getDay();return t>=4||t===0?wl(e):wl.ceil(e)}function doe(e,t){return e=L5(e),Qe(wl.count(Ii(e),e)+(Ii(e).getDay()===4),t,2)}function Coe(e){return e.getDay()}function Aoe(e,t){return Qe(QC.count(Ii(e)-1,e),t,2)}function moe(e,t){return Qe(e.getFullYear()%100,t,2)}function foe(e,t){return e=L5(e),Qe(e.getFullYear()%100,t,2)}function hoe(e,t){return Qe(e.getFullYear()%1e4,t,4)}function poe(e,t){var n=e.getDay();return e=n>=4||n===0?wl(e):wl.ceil(e),Qe(e.getFullYear()%1e4,t,4)}function boe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qe(t/60|0,"0",2)+Qe(t%60,"0",2)}function TJ(e,t){return Qe(e.getUTCDate(),t,2)}function yoe(e,t){return Qe(e.getUTCHours(),t,2)}function Zoe(e,t){return Qe(e.getUTCHours()%12||12,t,2)}function voe(e,t){return Qe(1+Wm.count(di(e),e),t,3)}function z5(e,t){return Qe(e.getUTCMilliseconds(),t,3)}function Goe(e,t){return z5(e,t)+"000"}function Boe(e,t){return Qe(e.getUTCMonth()+1,t,2)}function Soe(e,t){return Qe(e.getUTCMinutes(),t,2)}function woe(e,t){return Qe(e.getUTCSeconds(),t,2)}function Woe(e){var t=e.getUTCDay();return t===0?7:t}function koe(e,t){return Qe(Vm.count(di(e)-1,e),t,2)}function U5(e){var t=e.getUTCDay();return t>=4||t===0?Wl(e):Wl.ceil(e)}function Voe(e,t){return e=U5(e),Qe(Wl.count(di(e),e)+(di(e).getUTCDay()===4),t,2)}function Roe(e){return e.getUTCDay()}function xoe(e,t){return Qe(_C.count(di(e)-1,e),t,2)}function Xoe(e,t){return Qe(e.getUTCFullYear()%100,t,2)}function Joe(e,t){return e=U5(e),Qe(e.getUTCFullYear()%100,t,2)}function Yoe(e,t){return Qe(e.getUTCFullYear()%1e4,t,4)}function Noe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Wl(e):Wl.ceil(e),Qe(e.getUTCFullYear()%1e4,t,4)}function Hoe(){return"+0000"}function jJ(){return"%"}function LJ(e){return+e}function zJ(e){return Math.floor(+e/1e3)}var Mg,P5,O5;Foe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Foe(e){return Mg=Fie(e),P5=Mg.format,Mg.parse,O5=Mg.utcFormat,Mg.utcParse,Mg}function Koe(e){return new Date(e)}function Eoe(e){return e instanceof Date?+e:+new Date(+e)}function lS(e,t,n,r,a,i,o,l,c,u){var I=PB(),d=I.invert,m=I.domain,p=u(".%L"),h=u(":%S"),b=u("%I:%M"),y=u("%I %p"),v=u("%a %d"),G=u("%b %d"),S=u("%B"),R=u("%Y");function B(V){return(c(V)<V?p:l(V)<V?h:o(V)<V?b:i(V)<V?y:r(V)<V?a(V)<V?v:G:n(V)<V?S:R)(V)}return I.invert=function(V){return new Date(d(V))},I.domain=function(V){return arguments.length?m(Array.from(V,Eoe)):m().map(Koe)},I.ticks=function(V){var W=m();return e(W[0],W[W.length-1],V??10)},I.tickFormat=function(V,W){return W==null?B:u(W)},I.nice=function(V){var W=m();return(!V||typeof V.range!="function")&&(V=t(W[0],W[W.length-1],V??10)),V?m(Y5(W,V)):I},I.copy=function(){return zu(I,lS(e,t,n,r,a,i,o,l,c,u))},I}function Moe(){return xr.apply(lS(Nie,Hie,Ii,oS,km,Uu,aS,nS,Xo,P5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Doe(){return xr.apply(lS(Jie,Yie,di,gS,Vm,Wm,iS,rS,Xo,O5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Rm(){var e=0,t=1,n,r,a,i,o=Jn,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(a===0?.5:(d=(i(d)-n)*a,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=i(e=+e),r=i(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function I(d){return function(m){var p,h;return arguments.length?([p,h]=m,o=d(p,h),u):[o(0),o(1)]}}return u.range=I(as),u.rangeRound=I(UB),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return i=d,n=d(e),r=d(t),a=n===r?0:1/(r-n),u}}function go(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Q5(){var e=oo(Rm()(Jn));return e.copy=function(){return go(e,Q5())},fi.apply(e,arguments)}function _5(){var e=_B(Rm()).domain([1,10]);return e.copy=function(){return go(e,_5()).base(e.base())},fi.apply(e,arguments)}function q5(){var e=qB(Rm());return e.copy=function(){return go(e,q5()).constant(e.constant())},fi.apply(e,arguments)}function sS(){var e=$B(Rm());return e.copy=function(){return go(e,sS()).exponent(e.exponent())},fi.apply(e,arguments)}function Toe(){return sS.apply(null,arguments).exponent(.5)}function $5(){var e=[],t=Jn;function n(r){if(r!=null&&!isNaN(r=+r))return t((ju(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Qi),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>kae(e,i/r))},n.copy=function(){return $5(t).domain(e)},fi.apply(n,arguments)}function xm(){var e=0,t=.5,n=1,r=1,a,i,o,l,c,u=Jn,I,d=!1,m;function p(b){return isNaN(b=+b)?m:(b=.5+((b=+I(b))-i)*(r*b<r*i?l:c),u(d?Math.max(0,Math.min(1,b)):b))}p.domain=function(b){return arguments.length?([e,t,n]=b,a=I(e=+e),i=I(t=+t),o=I(n=+n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,p):[e,t,n]},p.clamp=function(b){return arguments.length?(d=!!b,p):d},p.interpolator=function(b){return arguments.length?(u=b,p):u};function h(b){return function(y){var v,G,S;return arguments.length?([v,G,S]=y,u=tie(b,[v,G,S]),p):[u(0),u(.5),u(1)]}}return p.range=h(as),p.rangeRound=h(UB),p.unknown=function(b){return arguments.length?(m=b,p):m},function(b){return I=b,a=b(e),i=b(t),o=b(n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,p}}function e9(){var e=oo(xm()(Jn));return e.copy=function(){return go(e,e9())},fi.apply(e,arguments)}function t9(){var e=_B(xm()).domain([.1,1,10]);return e.copy=function(){return go(e,t9()).base(e.base())},fi.apply(e,arguments)}function n9(){var e=qB(xm());return e.copy=function(){return go(e,n9()).constant(e.constant())},fi.apply(e,arguments)}function cS(){var e=$B(xm());return e.copy=function(){return go(e,cS()).exponent(e.exponent())},fi.apply(e,arguments)}function joe(){return cS.apply(null,arguments).exponent(.5)}const UJ=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Uc,scaleDiverging:e9,scaleDivergingLog:t9,scaleDivergingPow:cS,scaleDivergingSqrt:joe,scaleDivergingSymlog:n9,scaleIdentity:J5,scaleImplicit:mv,scaleLinear:PC,scaleLog:N5,scaleOrdinal:jB,scalePoint:Bc,scalePow:eS,scaleQuantile:K5,scaleQuantize:E5,scaleRadial:F5,scaleSequential:Q5,scaleSequentialLog:_5,scaleSequentialPow:sS,scaleSequentialQuantile:$5,scaleSequentialSqrt:Toe,scaleSequentialSymlog:q5,scaleSqrt:Gie,scaleSymlog:H5,scaleThreshold:M5,scaleTime:Moe,scaleUtc:Doe,tickFormat:X5},Symbol.toStringTag,{value:"Module"}));var J0,PJ;function r9(){if(PJ)return J0;PJ=1;var e=ts();function t(n,r,a){for(var i=-1,o=n.length;++i<o;){var l=n[i],c=r(l);if(c!=null&&(u===void 0?c===c&&!e(c):a(c,u)))var u=c,I=l}return I}return J0=t,J0}var Y0,OJ;function Loe(){if(OJ)return Y0;OJ=1;function e(t,n){return t>n}return Y0=e,Y0}var N0,QJ;function zoe(){if(QJ)return N0;QJ=1;var e=r9(),t=Loe(),n=rs();function r(a){return a&&a.length?e(a,n,t):void 0}return N0=r,N0}var Uoe=zoe();const Xm=ut(Uoe);var H0,_J;function Poe(){if(_J)return H0;_J=1;function e(t,n){return t<n}return H0=e,H0}var F0,qJ;function Ooe(){if(qJ)return F0;qJ=1;var e=r9(),t=Poe(),n=rs();function r(a){return a&&a.length?e(a,n,t):void 0}return F0=r,F0}var Qoe=Ooe();const Jm=ut(Qoe);var K0,$J;function _oe(){if($J)return K0;$J=1;var e=SB(),t=io(),n=u5(),r=Pn();function a(i,o){var l=r(i)?e:n;return l(i,t(o,3))}return K0=a,K0}var E0,e1;function qoe(){if(e1)return E0;e1=1;var e=s5(),t=_oe();function n(r,a){return e(t(r,a),1)}return E0=n,E0}var $oe=qoe();const ege=ut($oe);var M0,t1;function tge(){if(t1)return M0;t1=1;var e=KB();function t(n,r){return e(n,r)}return M0=t,M0}var nge=tge();const Ym=ut(nge);var is=1e9,rge={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IS,St=!0,Vr="[DecimalError] ",Do=Vr+"Invalid argument: ",uS=Vr+"Exponent out of range: ",os=Math.floor,wo=Math.pow,age=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ar,on=1e7,Zt=7,a9=9007199254740991,qC=os(a9/Zt),pe={};pe.absoluteValue=pe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};pe.comparedTo=pe.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};pe.decimalPlaces=pe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Zt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};pe.dividedBy=pe.div=function(e){return li(this,new this.constructor(e))};pe.dividedToIntegerBy=pe.idiv=function(e){var t=this,n=t.constructor;return mt(li(t,new n(e),0,1),n.precision)};pe.equals=pe.eq=function(e){return!this.cmp(e)};pe.exponent=function(){return Ot(this)};pe.greaterThan=pe.gt=function(e){return this.cmp(e)>0};pe.greaterThanOrEqualTo=pe.gte=function(e){return this.cmp(e)>=0};pe.isInteger=pe.isint=function(){return this.e>this.d.length-2};pe.isNegative=pe.isneg=function(){return this.s<0};pe.isPositive=pe.ispos=function(){return this.s>0};pe.isZero=function(){return this.s===0};pe.lessThan=pe.lt=function(e){return this.cmp(e)<0};pe.lessThanOrEqualTo=pe.lte=function(e){return this.cmp(e)<1};pe.logarithm=pe.log=function(e){var t,n=this,r=n.constructor,a=r.precision,i=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ar))throw Error(Vr+"NaN");if(n.s<1)throw Error(Vr+(n.s?"NaN":"-Infinity"));return n.eq(ar)?new r(0):(St=!1,t=li(qc(n,i),qc(e,i),i),St=!0,mt(t,a))};pe.minus=pe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?g9(t,e):i9(t,(e.s=-e.s,e))};pe.modulo=pe.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(Vr+"NaN");return n.s?(St=!1,t=li(n,e,0,1).times(e),St=!0,n.minus(t)):mt(new r(n),a)};pe.naturalExponential=pe.exp=function(){return o9(this)};pe.naturalLogarithm=pe.ln=function(){return qc(this)};pe.negated=pe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};pe.plus=pe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?i9(t,e):g9(t,(e.s=-e.s,e))};pe.precision=pe.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Do+e);if(t=Ot(a)+1,r=a.d.length-1,n=r*Zt+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};pe.squareRoot=pe.sqrt=function(){var e,t,n,r,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Vr+"NaN")}for(e=Ot(l),St=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Ga(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=os((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(i=r,r=i.plus(li(l,i,o+2)).times(.5),Ga(i.d).slice(0,o)===(t=Ga(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(mt(i,n+1,0),i.times(i).eq(l)){r=i;break}}else if(t!="9999")break;o+=4}return St=!0,mt(r,n)};pe.times=pe.mul=function(e){var t,n,r,a,i,o,l,c,u,I=this,d=I.constructor,m=I.d,p=(e=new d(e)).d;if(!I.s||!e.s)return new d(0);for(e.s*=I.s,n=I.e+e.e,c=m.length,u=p.length,c<u&&(i=m,m=p,p=i,o=c,c=u,u=o),i=[],o=c+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=i[a]+p[r]*m[a-r-1]+t,i[a--]=l%on|0,t=l/on|0;i[a]=(i[a]+t)%on|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,St?mt(e,d.precision):e};pe.toDecimalPlaces=pe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Xa(e,0,is),t===void 0?t=r.rounding:Xa(t,0,8),mt(n,e+Ot(n)+1,t))};pe.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=qo(r,!0):(Xa(e,0,is),t===void 0?t=a.rounding:Xa(t,0,8),r=mt(new a(r),e+1,t),n=qo(r,!0,e+1)),n};pe.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?qo(a):(Xa(e,0,is),t===void 0?t=i.rounding:Xa(t,0,8),r=mt(new i(a),e+Ot(a)+1,t),n=qo(r.abs(),!1,e+Ot(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};pe.toInteger=pe.toint=function(){var e=this,t=e.constructor;return mt(new t(e),Ot(e)+1,t.rounding)};pe.toNumber=function(){return+this};pe.toPower=pe.pow=function(e){var t,n,r,a,i,o,l=this,c=l.constructor,u=12,I=+(e=new c(e));if(!e.s)return new c(ar);if(l=new c(l),!l.s){if(e.s<1)throw Error(Vr+"Infinity");return l}if(l.eq(ar))return l;if(r=c.precision,e.eq(ar))return mt(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=I<0?-I:I)<=a9){for(a=new c(ar),t=Math.ceil(r/Zt+4),St=!1;n%2&&(a=a.times(l),r1(a.d,t)),n=os(n/2),n!==0;)l=l.times(l),r1(l.d,t);return St=!0,e.s<0?new c(ar).div(a):mt(a,r)}}else if(i<0)throw Error(Vr+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,St=!1,a=e.times(qc(l,r+u)),St=!0,a=o9(a),a.s=i,a};pe.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?(n=Ot(a),r=qo(a,n<=i.toExpNeg||n>=i.toExpPos)):(Xa(e,1,is),t===void 0?t=i.rounding:Xa(t,0,8),a=mt(new i(a),e,t),n=Ot(a),r=qo(a,e<=n||n<=i.toExpNeg,e)),r};pe.toSignificantDigits=pe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Xa(e,1,is),t===void 0?t=r.rounding:Xa(t,0,8)),mt(new r(n),e,t)};pe.toString=pe.valueOf=pe.val=pe.toJSON=pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ot(e),n=e.constructor;return qo(e,t<=n.toExpNeg||t>=n.toExpPos)};function i9(e,t){var n,r,a,i,o,l,c,u,I=e.constructor,d=I.precision;if(!e.s||!t.s)return t.s||(t=new I(e)),St?mt(t,d):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(r=c,i=-i,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(d/Zt),l=o>l?o+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/on|0,c[i]%=on;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,St?mt(t,d):t}function Xa(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Do+e)}function Ga(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)r=e[t]+"",n=Zt-r.length,n&&(i+=Di(n)),i+=r;o=e[t],r=o+"",n=Zt-r.length,n&&(i+=Di(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var li=function(){function e(r,a){var i,o=0,l=r.length;for(r=r.slice();l--;)i=r[l]*a+o,r[l]=i%on|0,o=i/on|0;return o&&r.unshift(o),r}function t(r,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,i){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*on+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,o){var l,c,u,I,d,m,p,h,b,y,v,G,S,R,B,V,W,X,N=r.constructor,x=r.s==a.s?1:-1,Y=r.d,F=a.d;if(!r.s)return new N(r);if(!a.s)throw Error(Vr+"Division by zero");for(c=r.e-a.e,W=F.length,B=Y.length,p=new N(x),h=p.d=[],u=0;F[u]==(Y[u]||0);)++u;if(F[u]>(Y[u]||0)&&--c,i==null?G=i=N.precision:o?G=i+(Ot(r)-Ot(a))+1:G=i,G<0)return new N(0);if(G=G/Zt+2|0,u=0,W==1)for(I=0,F=F[0],G++;(u<B||I)&&G--;u++)S=I*on+(Y[u]||0),h[u]=S/F|0,I=S%F|0;else{for(I=on/(F[0]+1)|0,I>1&&(F=e(F,I),Y=e(Y,I),W=F.length,B=Y.length),R=W,b=Y.slice(0,W),y=b.length;y<W;)b[y++]=0;X=F.slice(),X.unshift(0),V=F[0],F[1]>=on/2&&++V;do I=0,l=t(F,b,W,y),l<0?(v=b[0],W!=y&&(v=v*on+(b[1]||0)),I=v/V|0,I>1?(I>=on&&(I=on-1),d=e(F,I),m=d.length,y=b.length,l=t(d,b,m,y),l==1&&(I--,n(d,W<m?X:F,m))):(I==0&&(l=I=1),d=F.slice()),m=d.length,m<y&&d.unshift(0),n(b,d,y),l==-1&&(y=b.length,l=t(F,b,W,y),l<1&&(I++,n(b,W<y?X:F,y))),y=b.length):l===0&&(I++,b=[0]),h[u++]=I,l&&b[0]?b[y++]=Y[R]||0:(b=[Y[R]],y=1);while((R++<B||b[0]!==void 0)&&G--)}return h[0]||h.shift(),p.e=c,mt(p,o?i+Ot(p)+1:i)}}();function o9(e,t){var n,r,a,i,o,l,c=0,u=0,I=e.constructor,d=I.precision;if(Ot(e)>16)throw Error(uS+Ot(e));if(!e.s)return new I(ar);for(t==null?(St=!1,l=d):l=t,o=new I(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(wo(2,u))/Math.LN10*2+5|0,l+=r,n=a=i=new I(ar),I.precision=l;;){if(a=mt(a.times(e),l),n=n.times(++c),o=i.plus(li(a,n,l)),Ga(o.d).slice(0,l)===Ga(i.d).slice(0,l)){for(;u--;)i=mt(i.times(i),l);return I.precision=d,t==null?(St=!0,mt(i,d)):i}i=o}}function Ot(e){for(var t=e.e*Zt,n=e.d[0];n>=10;n/=10)t++;return t}function D0(e,t,n){if(t>e.LN10.sd())throw St=!0,n&&(e.precision=n),Error(Vr+"LN10 precision limit exceeded");return mt(new e(e.LN10),t)}function Di(e){for(var t="";e--;)t+="0";return t}function qc(e,t){var n,r,a,i,o,l,c,u,I,d=1,m=10,p=e,h=p.d,b=p.constructor,y=b.precision;if(p.s<1)throw Error(Vr+(p.s?"NaN":"-Infinity"));if(p.eq(ar))return new b(0);if(t==null?(St=!1,u=y):u=t,p.eq(10))return t==null&&(St=!0),D0(b,u);if(u+=m,b.precision=u,n=Ga(h),r=n.charAt(0),i=Ot(p),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Ga(p.d),r=n.charAt(0),d++;i=Ot(p),r>1?(p=new b("0."+n),i++):p=new b(r+"."+n.slice(1))}else return c=D0(b,u+2,y).times(i+""),p=qc(new b(r+"."+n.slice(1)),u-m).plus(c),b.precision=y,t==null?(St=!0,mt(p,y)):p;for(l=o=p=li(p.minus(ar),p.plus(ar),u),I=mt(p.times(p),u),a=3;;){if(o=mt(o.times(I),u),c=l.plus(li(o,new b(a),u)),Ga(c.d).slice(0,u)===Ga(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(D0(b,u+2,y).times(i+""))),l=li(l,new b(d),u),b.precision=y,t==null?(St=!0,mt(l,y)):l;l=c,a+=2}}function n1(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=os(n/Zt),e.d=[],r=(n+1)%Zt,n<0&&(r+=Zt),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=Zt;r<a;)e.d.push(+t.slice(r,r+=Zt));t=t.slice(r),r=Zt-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),St&&(e.e>qC||e.e<-qC))throw Error(uS+n)}else e.s=0,e.e=0,e.d=[0];return e}function mt(e,t,n){var r,a,i,o,l,c,u,I,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=Zt,a=t,u=d[I=0];else{if(I=Math.ceil((r+1)/Zt),i=d.length,I>=i)return e;for(u=i=d[I],o=1;i>=10;i/=10)o++;r%=Zt,a=r-Zt+o}if(n!==void 0&&(i=wo(10,o-a-1),l=u/i%10|0,c=t<0||d[I+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/wo(10,o-a):0:d[I-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(i=Ot(e),d.length=1,t=t-i-1,d[0]=wo(10,(Zt-t%Zt)%Zt),e.e=os(-t/Zt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=I,i=1,I--):(d.length=I+1,i=wo(10,Zt-r),d[I]=a>0?(u/wo(10,o-a)%wo(10,a)|0)*i:0),c)for(;;)if(I==0){(d[0]+=i)==on&&(d[0]=1,++e.e);break}else{if(d[I]+=i,d[I]!=on)break;d[I--]=0,i=1}for(r=d.length;d[--r]===0;)d.pop();if(St&&(e.e>qC||e.e<-qC))throw Error(uS+Ot(e));return e}function g9(e,t){var n,r,a,i,o,l,c,u,I,d,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),St?mt(t,p):t;if(c=e.d,d=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(I=o<0,I?(n=c,o=-o,l=d.length):(n=d,r=u,l=c.length),a=Math.max(Math.ceil(p/Zt),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=d.length,I=a<l,I&&(l=a),a=0;a<l;a++)if(c[a]!=d[a]){I=c[a]<d[a];break}o=0}for(I&&(n=c,c=d,d=n,t.s=-t.s),l=c.length,a=d.length-l;a>0;--a)c[l++]=0;for(a=d.length;a>o;){if(c[--a]<d[a]){for(i=a;i&&c[--i]===0;)c[i]=on-1;--c[i],c[a]+=on}c[a]-=d[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,St?mt(t,p):t):new m(0)}function qo(e,t,n){var r,a=Ot(e),i=Ga(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Di(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Di(-a-1)+i,n&&(r=n-o)>0&&(i+=Di(r))):a>=o?(i+=Di(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+Di(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=Di(r))),e.s<0?"-"+i:i}function r1(e,t){if(e.length>t)return e.length=t,!0}function l9(e){var t,n,r;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Do+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return n1(o,i.toString())}else if(typeof i!="string")throw Error(Do+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,age.test(i))n1(o,i);else throw Error(Do+i)}if(a.prototype=pe,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=l9,a.config=a.set=ige,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function ige(e){if(!e||typeof e!="object")throw Error(Vr+"Object expected");var t,n,r,a=["precision",1,is,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(os(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(Do+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Do+n+": "+r);return this}var IS=l9(rge);ar=new IS(1);const ct=IS;function oge(e){return cge(e)||sge(e)||lge(e)||gge()}function gge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lge(e,t){if(e){if(typeof e=="string")return bv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bv(e,t)}}function sge(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function cge(e){if(Array.isArray(e))return bv(e)}function bv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uge=function(t){return t},s9={"@@functional/placeholder":!0},c9=function(t){return t===s9},a1=function(t){return function n(){return arguments.length===0||arguments.length===1&&c9(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Ige=function e(t,n){return t===1?n:a1(function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==s9}).length;return o>=t?n.apply(void 0,a):e(t-o,a1(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var I=a.map(function(d){return c9(d)?c.shift():d});return n.apply(void 0,oge(I).concat(c))}))})},Nm=function(t){return Ige(t.length,t)},yv=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},dge=Nm(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Cge=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return uge;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},Zv=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},u9=function(t){var n=null,r=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,r=t.apply(void 0,i)),r}};function Age(e){var t;return e===0?t=1:t=Math.floor(new ct(e).abs().log(10).toNumber())+1,t}function mge(e,t,n){for(var r=new ct(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var fge=Nm(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),hge=Nm(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),pge=Nm(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Hm={rangeStep:mge,getDigitCount:Age,interpolateNumber:fge,uninterpolateNumber:hge,uninterpolateTruncation:pge};function vv(e){return Zge(e)||yge(e)||I9(e)||bge()}function bge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yge(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Zge(e){if(Array.isArray(e))return Gv(e)}function $c(e,t){return Bge(e)||Gge(e,t)||I9(e,t)||vge()}function vge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I9(e,t){if(e){if(typeof e=="string")return Gv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gv(e,t)}}function Gv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gge(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,i=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function Bge(e){if(Array.isArray(e))return e}function d9(e){var t=$c(e,2),n=t[0],r=t[1],a=n,i=r;return n>r&&(a=r,i=n),[a,i]}function C9(e,t,n){if(e.lte(0))return new ct(0);var r=Hm.getDigitCount(e.toNumber()),a=new ct(10).pow(r),i=e.div(a),o=r!==1?.05:.1,l=new ct(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new ct(Math.ceil(c))}function Sge(e,t,n){var r=1,a=new ct(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new ct(10).pow(Hm.getDigitCount(e)-1),a=new ct(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new ct(Math.floor(e)))}else e===0?a=new ct(Math.floor((t-1)/2)):n||(a=new ct(Math.floor(e)));var o=Math.floor((t-1)/2),l=Cge(dge(function(c){return a.add(new ct(c-o).mul(r)).toNumber()}),yv);return l(0,t)}function A9(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new ct(0),tickMin:new ct(0),tickMax:new ct(0)};var i=C9(new ct(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new ct(0):(o=new ct(e).add(t).div(2),o=o.sub(new ct(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new ct(t).sub(o).div(i).toNumber()),u=l+c+1;return u>n?A9(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:i,tickMin:o.sub(new ct(l).mul(i)),tickMax:o.add(new ct(c).mul(i))})}function wge(e){var t=$c(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=d9([n,r]),c=$c(l,2),u=c[0],I=c[1];if(u===-1/0||I===1/0){var d=I===1/0?[u].concat(vv(yv(0,a-1).map(function(){return 1/0}))):[].concat(vv(yv(0,a-1).map(function(){return-1/0})),[I]);return n>r?Zv(d):d}if(u===I)return Sge(u,a,i);var m=A9(u,I,o,i),p=m.step,h=m.tickMin,b=m.tickMax,y=Hm.rangeStep(h,b.add(new ct(.1).mul(p)),p);return n>r?Zv(y):y}function Wge(e,t){var n=$c(e,2),r=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=d9([r,a]),l=$c(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var I=Math.max(t,2),d=C9(new ct(u).sub(c).div(I-1),i,0),m=[].concat(vv(Hm.rangeStep(new ct(c),new ct(u).sub(new ct(.99).mul(d)),d)),[u]);return r>a?Zv(m):m}var kge=u9(wge),Vge=u9(Wge),Rge="Invariant failed";function $o(e,t){throw new Error(Rge)}var xge=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function kl(e){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(e)}function $C(){return $C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$C.apply(this,arguments)}function Xge(e,t){return Hge(e)||Nge(e,t)||Yge(e,t)||Jge()}function Jge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yge(e,t){if(e){if(typeof e=="string")return i1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i1(e,t)}}function i1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Hge(e){if(Array.isArray(e))return e}function Fge(e,t){if(e==null)return{};var n=Kge(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Kge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ege(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h9(r.key),r)}}function Dge(e,t,n){return Mge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tge(e,t,n){return t=eA(t),jge(e,m9()?Reflect.construct(t,n||[],eA(e).constructor):t.apply(e,n))}function jge(e,t){if(t&&(kl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lge(e)}function Lge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m9=function(){return!!e})()}function eA(e){return eA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eA(e)}function zge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bv(e,t)}function Bv(e,t){return Bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Bv(e,t)}function f9(e,t,n){return t=h9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h9(e){var t=Uge(e,"string");return kl(t)=="symbol"?t:t+""}function Uge(e,t){if(kl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pu=function(e){function t(){return Ege(this,t),Tge(this,t,arguments)}return zge(t,e),Dge(t,[{key:"render",value:function(){var r=this.props,a=r.offset,i=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,I=r.xAxis,d=r.yAxis,m=Fge(r,xge),p=De(m,!1);this.props.direction==="x"&&I.type!=="number"&&$o();var h=c.map(function(b){var y=u(b,l),v=y.x,G=y.y,S=y.value,R=y.errorVal;if(!R)return null;var B=[],V,W;if(Array.isArray(R)){var X=Xge(R,2);V=X[0],W=X[1]}else V=W=R;if(i==="vertical"){var N=I.scale,x=G+a,Y=x+o,F=x-o,E=N(S-V),M=N(S+W);B.push({x1:M,y1:Y,x2:M,y2:F}),B.push({x1:E,y1:x,x2:M,y2:x}),B.push({x1:E,y1:Y,x2:E,y2:F})}else if(i==="horizontal"){var T=d.scale,z=v+a,P=z-o,L=z+o,q=T(S-V),ee=T(S+W);B.push({x1:P,y1:ee,x2:L,y2:ee}),B.push({x1:z,y1:q,x2:z,y2:ee}),B.push({x1:P,y1:q,x2:L,y2:q})}return H.createElement(Mt,$C({className:"recharts-errorBar",key:"bar-".concat(B.map(function(D){return"".concat(D.x1,"-").concat(D.x2,"-").concat(D.y1,"-").concat(D.y2)}))},p),B.map(function(D){return H.createElement("line",$C({},D,{key:"line-".concat(D.x1,"-").concat(D.x2,"-").concat(D.y1,"-").concat(D.y2)}))}))});return H.createElement(Mt,{className:"recharts-errorBars"},h)}}])}(H.Component);f9(Pu,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});f9(Pu,"displayName","ErrorBar");function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function o1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o1(Object(n),!0).forEach(function(r){Pge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pge(e,t,n){return t=Oge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oge(e){var t=Qge(e,"string");return eu(t)=="symbol"?t:t+""}function Qge(e,t){if(eu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(eu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p9=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=tr(n,nl);if(!o)return null;var l=nl.defaultProps,c=l!==void 0?Go(Go({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(r||[]).reduce(function(I,d){var m=d.item,p=d.props,h=p.sectors||p.data||[];return I.concat(h.map(function(b){return{type:o.props.iconType||m.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):u=(r||[]).map(function(I){var d=I.item,m=d.type.defaultProps,p=m!==void 0?Go(Go({},m),d.props):{},h=p.dataKey,b=p.name,y=p.legendType,v=p.hide;return{inactive:v,dataKey:h,type:c.iconType||y||"square",color:dS(d),value:b||h,payload:p}}),Go(Go(Go({},c),nl.getWithHeight(o,a)),{},{payload:u,item:o})};function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}function g1(e){return ele(e)||$ge(e)||qge(e)||_ge()}function _ge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qge(e,t){if(e){if(typeof e=="string")return Sv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sv(e,t)}}function $ge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ele(e){if(Array.isArray(e))return Sv(e)}function Sv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(n),!0).forEach(function(r){al(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function al(e,t,n){return t=tle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tle(e){var t=nle(e,"string");return tu(t)=="symbol"?t:t+""}function nle(e,t){if(tu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cr(e,t,n){return Me(e)||Me(t)?n:$t(t)?Sr(e,t,n):He(t)?t(e):n}function Sc(e,t,n,r){var a=ege(e,function(l){return cr(l,t)});if(n==="number"){var i=a.filter(function(l){return de(l)||parseFloat(l)});return i.length?[Jm(i),Xm(i)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!Me(l)}):a;return o.map(function(l){return $t(l)||l instanceof Date?l:""})}var rle=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var I=u>0?a[u-1].coordinate:a[l-1].coordinate,d=a[u].coordinate,m=u>=l-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(Or(d-I)!==Or(m-d)){var h=[];if(Or(m-d)===Or(c[1]-c[0])){p=m;var b=d+c[1]-c[0];h[0]=Math.min(b,(b+I)/2),h[1]=Math.max(b,(b+I)/2)}else{p=I;var y=m+c[1]-c[0];h[0]=Math.min(d,(y+d)/2),h[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>v[0]&&t<=v[1]||t>=h[0]&&t<=h[1]){o=a[u].index;break}}else{var G=Math.min(I,m),S=Math.max(I,m);if(t>(G+d)/2&&t<=(S+d)/2){o=a[u].index;break}}}else for(var R=0;R<l;R++)if(R===0&&t<=(r[R].coordinate+r[R+1].coordinate)/2||R>0&&R<l-1&&t>(r[R].coordinate+r[R-1].coordinate)/2&&t<=(r[R].coordinate+r[R+1].coordinate)/2||R===l-1&&t>(r[R].coordinate+r[R-1].coordinate)/2){o=r[R].index;break}return o},dS=function(t){var n,r=t,a=r.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Nt(Nt({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},ale=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var I=i[l[c]].stackGroups,d=Object.keys(I),m=0,p=d.length;m<p;m++){var h=I[d[m]],b=h.items,y=h.cateAxisId,v=b.filter(function(W){return ii(W.type).indexOf("Bar")>=0});if(v&&v.length){var G=v[0].type.defaultProps,S=G!==void 0?Nt(Nt({},G),v[0].props):v[0].props,R=S.barSize,B=S[y];o[B]||(o[B]=[]);var V=Me(R)?n:R;o[B].push({item:v[0],stackList:v.slice(1),barSize:Me(V)?void 0:_o(V,r,0)})}}return o},ile=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=_o(n,a,0,!0),I,d=[];if(o[0].barSize===+o[0].barSize){var m=!1,p=a/c,h=o.reduce(function(R,B){return R+B.barSize||0},0);h+=(c-1)*u,h>=a&&(h-=(c-1)*u,u=0),h>=a&&p>0&&(m=!0,p*=.9,h=c*p);var b=(a-h)/2>>0,y={offset:b-u,size:0};I=o.reduce(function(R,B){var V={item:B.item,position:{offset:y.offset+y.size+u,size:m?p:B.barSize}},W=[].concat(g1(R),[V]);return y=W[W.length-1].position,B.stackList&&B.stackList.length&&B.stackList.forEach(function(X){W.push({item:X,position:y})}),W},d)}else{var v=_o(r,a,0,!0);a-2*v-(c-1)*u<=0&&(u=0);var G=(a-2*v-(c-1)*u)/c;G>1&&(G>>=0);var S=l===+l?Math.min(G,l):G;I=o.reduce(function(R,B,V){var W=[].concat(g1(R),[{item:B.item,position:{offset:v+(G+u)*V+(G-S)/2,size:S}}]);return B.stackList&&B.stackList.length&&B.stackList.forEach(function(X){W.push({item:X,position:W[W.length-1].position})}),W},d)}return I},ole=function(t,n,r,a){var i=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=p9({children:i,legendWidth:c});if(u){var I=a||{},d=I.width,m=I.height,p=u.align,h=u.verticalAlign,b=u.layout;if((b==="vertical"||b==="horizontal"&&h==="middle")&&p!=="center"&&de(t[p]))return Nt(Nt({},t),{},al({},p,t[p]+(d||0)));if((b==="horizontal"||b==="vertical"&&p==="center")&&h!=="middle"&&de(t[h]))return Nt(Nt({},t),{},al({},h,t[h]+(m||0)))}return t},gle=function(t,n,r){return Me(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},b9=function(t,n,r,a,i){var o=n.props.children,l=wr(o,Pu).filter(function(u){return gle(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,I){var d=cr(I,r);if(Me(d))return u;var m=Array.isArray(d)?[Jm(d),Xm(d)]:[d,d],p=c.reduce(function(h,b){var y=cr(I,b,0),v=m[0]-Math.abs(Array.isArray(y)?y[0]:y),G=m[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(v,h[0]),Math.max(G,h[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},lle=function(t,n,r,a,i){var o=n.map(function(l){return b9(t,l,r,i,a)}).filter(function(l){return!Me(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},y9=function(t,n,r,a,i){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&b9(t,c,u,a)||Sc(t,u,r,i)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var I=0,d=u.length;I<d;I++)l[u[I]]||(l[u[I]]=!0,c.push(u[I]));return c},[])},Z9=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},v9=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===r&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(r),l},qa=function(t,n,r){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Or(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var I=(t.ticks||t.niceTicks).map(function(d){var m=i?i.indexOf(d):d;return{coordinate:a(m)+u,value:d,offset:u}});return I.filter(function(d){return!Mu(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,m){return{coordinate:a(d)+u,value:d,index:m,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,m){return{coordinate:a(d)+u,value:i?i[d]:d,index:m,offset:u}})},T0=new WeakMap,Sd=function(t,n){if(typeof n!="function")return t;T0.has(t)||T0.set(t,new WeakMap);var r=T0.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},sle=function(t,n,r){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Uc(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:PC(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Bc(),realScaleType:"point"}:i==="category"?{scale:Uc(),realScaleType:"band"}:{scale:PC(),realScaleType:"linear"};if(Eu(a)){var c="scale".concat(bm(a));return{scale:(UJ[c]||Bc)(),realScaleType:UJ[c]?c:"point"}}return He(a)?{scale:a}:{scale:Bc(),realScaleType:"point"}},s1=1e-4,cle=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),i=Math.min(a[0],a[1])-s1,o=Math.max(a[0],a[1])+s1,l=t(n[0]),c=t(n[r-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[r-1]])}},ule=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},Ile=function(t,n){if(!n||n.length!==2||!de(n[0])||!de(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!de(t[0])||t[0]<r)&&(i[0]=r),(!de(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<r&&(i[1]=r),i},dle=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0,l=0;l<n;++l){var c=Mu(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=i,t[l][r][1]=i+c,i=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},Cle=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0;o<n;++o){var l=Mu(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=i,t[o][r][1]=i+l,i=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},Ale={sign:dle,expand:qee,none:yl,silhouette:$ee,wiggle:ete,positive:Cle},mle=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),i=Ale[r],o=_ee().keys(a).value(function(l,c){return+cr(l,c,0)}).order(nv).offset(i);return o(t)},fle=function(t,n,r,a,i,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(d,m){var p,h=(p=m.type)!==null&&p!==void 0&&p.defaultProps?Nt(Nt({},m.type.defaultProps),m.props):m.props,b=h.stackId,y=h.hide;if(y)return d;var v=h[r],G=d[v]||{hasStack:!1,stackGroups:{}};if($t(b)){var S=G.stackGroups[b]||{numericAxisId:r,cateAxisId:a,items:[]};S.items.push(m),G.hasStack=!0,G.stackGroups[b]=S}else G.stackGroups[Du("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[m]};return Nt(Nt({},d),{},al({},v,G))},c),I={};return Object.keys(u).reduce(function(d,m){var p=u[m];if(p.hasStack){var h={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(b,y){var v=p.stackGroups[y];return Nt(Nt({},b),{},al({},y,{numericAxisId:r,cateAxisId:a,items:v.items,stackedData:mle(t,v.items,i)}))},h)}return Nt(Nt({},d),{},al({},m,p))},I)},hle=function(t,n){var r=n.realScaleType,a=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var I=kge(u,i,l);return t.domain([Jm(I),Xm(I)]),{niceTicks:I}}if(i&&a==="number"){var d=t.domain(),m=Vge(d,i,l);return{niceTicks:m}}return null};function c1(e){var t=e.axis,n=e.ticks,r=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Me(a[t.dataKey])){var l=WC(n,"value",a[t.dataKey]);if(l)return l.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var c=cr(a,Me(o)?t.dataKey:o);return Me(c)?null:t.scale(c)}var u1=function(t){var n=t.axis,r=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=cr(o,n.dataKey,n.domain[l]);return Me(c)?null:n.scale(c)-i/2+a},ple=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return a<=0&&i>=0?0:i<0?i:a}return r[0]},ble=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Nt(Nt({},t.type.defaultProps),t.props):t.props,i=a.stackId;if($t(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},yle=function(t){return t.reduce(function(n,r){return[Jm(r.concat([n[0]]).filter(de)),Xm(r.concat([n[1]]).filter(de))]},[1/0,-1/0])},G9=function(t,n,r){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,I){var d=yle(I.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},I1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,d1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wv=function(t,n,r){if(He(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(de(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(I1.test(t[0])){var i=+I1.exec(t[0])[1];a[0]=n[0]-i}else He(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(de(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(d1.test(t[1])){var o=+d1.exec(t[1])[1];a[1]=n[1]+o}else He(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},tA=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var i=MB(n,function(d){return d.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],I=i[l-1];o=Math.min((u.coordinate||0)-(I.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},C1=function(t,n,r){return!t||!t.length||Ym(t,Sr(r,"type.defaultProps.domain"))?n:t},B9=function(t,n){var r=t.type.defaultProps?Nt(Nt({},t.type.defaultProps),t.props):t.props,a=r.dataKey,i=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,I=r.hide;return Nt(Nt({},De(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:dS(t),value:cr(n,a),type:c,payload:n,chartType:u,hide:I})};function nu(e){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}function A1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function m1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A1(Object(n),!0).forEach(function(r){Zle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zle(e,t,n){return t=vle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vle(e){var t=Gle(e,"string");return nu(t)=="symbol"?t:t+""}function Gle(e,t){if(nu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nA=Math.PI/180,Ble=function(t){return t*180/Math.PI},mn=function(t,n,r,a){return{x:t+Math.cos(-nA*a)*r,y:n+Math.sin(-nA*a)*r}},Sle=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(a-o,2))},wle=function(t,n){var r=t.x,a=t.y,i=n.cx,o=n.cy,l=Sle({x:r,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(r-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:Ble(u),angleInRadian:u}},Wle=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(a,i);return{startAngle:n-o*360,endAngle:r-o*360}},kle=function(t,n){var r=n.startAngle,a=n.endAngle,i=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},f1=function(t,n){var r=t.x,a=t.y,i=wle({x:r,y:a},n),o=i.radius,l=i.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var I=Wle(n),d=I.startAngle,m=I.endAngle,p=l,h;if(d<=m){for(;p>m;)p-=360;for(;p<d;)p+=360;h=p>=d&&p<=m}else{for(;p>d;)p-=360;for(;p<m;)p+=360;h=p>=m&&p<=d}return h?m1(m1({},n),{},{radius:o,angle:kle(p,n)}):null};function ru(e){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(e)}var Vle=["offset"];function Rle(e){return Yle(e)||Jle(e)||Xle(e)||xle()}function xle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xle(e,t){if(e){if(typeof e=="string")return Wv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wv(e,t)}}function Jle(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yle(e){if(Array.isArray(e))return Wv(e)}function Wv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nle(e,t){if(e==null)return{};var n=Hle(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Hle(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function h1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h1(Object(n),!0).forEach(function(r){Fle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fle(e,t,n){return t=Kle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kle(e){var t=Ele(e,"string");return ru(t)=="symbol"?t:t+""}function Ele(e,t){if(ru(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ru(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},au.apply(this,arguments)}var Mle=function(t){var n=t.value,r=t.formatter,a=Me(t.children)?n:t.children;return He(r)?r(a):a},Dle=function(t,n){var r=Or(n-t),a=Math.min(Math.abs(n-t),360);return r*a},Tle=function(t,n,r){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,I=c.cy,d=c.innerRadius,m=c.outerRadius,p=c.startAngle,h=c.endAngle,b=c.clockWise,y=(d+m)/2,v=Dle(p,h),G=v>=0?1:-1,S,R;a==="insideStart"?(S=p+G*o,R=b):a==="insideEnd"?(S=h-G*o,R=!b):a==="end"&&(S=h+G*o,R=b),R=v<=0?R:!R;var B=mn(u,I,y,S),V=mn(u,I,y,S+(R?1:-1)*359),W="M".concat(B.x,",").concat(B.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(R?0:1,`,
    `).concat(V.x,",").concat(V.y),X=Me(t.id)?Du("recharts-radial-line-"):t.id;return H.createElement("text",au({},r,{dominantBaseline:"central",className:Ve("recharts-radial-bar-label",l)}),H.createElement("defs",null,H.createElement("path",{id:X,d:W})),H.createElement("textPath",{xlinkHref:"#".concat(X)},n))},jle=function(t){var n=t.viewBox,r=t.offset,a=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,I=i.startAngle,d=i.endAngle,m=(I+d)/2;if(a==="outside"){var p=mn(o,l,u+r,m),h=p.x,b=p.y;return{x:h,y:b,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,v=mn(o,l,y,m),G=v.x,S=v.y;return{x:G,y:S,textAnchor:"middle",verticalAnchor:"middle"}},Lle=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,i=t.position,o=n,l=o.x,c=o.y,u=o.width,I=o.height,d=I>=0?1:-1,m=d*a,p=d>0?"end":"start",h=d>0?"start":"end",b=u>=0?1:-1,y=b*a,v=b>0?"end":"start",G=b>0?"start":"end";if(i==="top"){var S={x:l+u/2,y:c-d*a,textAnchor:"middle",verticalAnchor:p};return qt(qt({},S),r?{height:Math.max(c-r.y,0),width:u}:{})}if(i==="bottom"){var R={x:l+u/2,y:c+I+m,textAnchor:"middle",verticalAnchor:h};return qt(qt({},R),r?{height:Math.max(r.y+r.height-(c+I),0),width:u}:{})}if(i==="left"){var B={x:l-y,y:c+I/2,textAnchor:v,verticalAnchor:"middle"};return qt(qt({},B),r?{width:Math.max(B.x-r.x,0),height:I}:{})}if(i==="right"){var V={x:l+u+y,y:c+I/2,textAnchor:G,verticalAnchor:"middle"};return qt(qt({},V),r?{width:Math.max(r.x+r.width-V.x,0),height:I}:{})}var W=r?{width:u,height:I}:{};return i==="insideLeft"?qt({x:l+y,y:c+I/2,textAnchor:G,verticalAnchor:"middle"},W):i==="insideRight"?qt({x:l+u-y,y:c+I/2,textAnchor:v,verticalAnchor:"middle"},W):i==="insideTop"?qt({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:h},W):i==="insideBottom"?qt({x:l+u/2,y:c+I-m,textAnchor:"middle",verticalAnchor:p},W):i==="insideTopLeft"?qt({x:l+y,y:c+m,textAnchor:G,verticalAnchor:h},W):i==="insideTopRight"?qt({x:l+u-y,y:c+m,textAnchor:v,verticalAnchor:h},W):i==="insideBottomLeft"?qt({x:l+y,y:c+I-m,textAnchor:G,verticalAnchor:p},W):i==="insideBottomRight"?qt({x:l+u-y,y:c+I-m,textAnchor:v,verticalAnchor:p},W):ns(i)&&(de(i.x)||Ro(i.x))&&(de(i.y)||Ro(i.y))?qt({x:l+_o(i.x,u),y:c+_o(i.y,I),textAnchor:"end",verticalAnchor:"end"},W):qt({x:l+u/2,y:c+I/2,textAnchor:"middle",verticalAnchor:"middle"},W)},zle=function(t){return"cx"in t&&de(t.cx)};function Gn(e){var t=e.offset,n=t===void 0?5:t,r=Nle(e,Vle),a=qt({offset:n},r),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,I=a.className,d=I===void 0?"":I,m=a.textBreakAll;if(!i||Me(l)&&Me(c)&&!k.isValidElement(u)&&!He(u))return null;if(k.isValidElement(u))return k.cloneElement(u,a);var p;if(He(u)){if(p=k.createElement(u,a),k.isValidElement(p))return p}else p=Mle(a);var h=zle(i),b=De(a,!0);if(h&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Tle(a,p,b);var y=h?jle(a):Lle(a);return H.createElement(MC,au({className:Ve("recharts-label",d)},b,y,{breakAll:m}),p)}Gn.displayName="Label";var S9=function(t){var n=t.cx,r=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,I=t.outerRadius,d=t.x,m=t.y,p=t.top,h=t.left,b=t.width,y=t.height,v=t.clockWise,G=t.labelViewBox;if(G)return G;if(de(b)&&de(y)){if(de(d)&&de(m))return{x:d,y:m,width:b,height:y};if(de(p)&&de(h))return{x:p,y:h,width:b,height:y}}return de(d)&&de(m)?{x:d,y:m,width:0,height:0}:de(n)&&de(r)?{cx:n,cy:r,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:I||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},Ule=function(t,n){return t?t===!0?H.createElement(Gn,{key:"label-implicit",viewBox:n}):$t(t)?H.createElement(Gn,{key:"label-implicit",viewBox:n,value:t}):k.isValidElement(t)?t.type===Gn?k.cloneElement(t,{key:"label-implicit",viewBox:n}):H.createElement(Gn,{key:"label-implicit",content:t,viewBox:n}):He(t)?H.createElement(Gn,{key:"label-implicit",content:t,viewBox:n}):ns(t)?H.createElement(Gn,au({viewBox:n},t,{key:"label-implicit"})):null:null},Ple=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,i=S9(t),o=wr(a,Gn).map(function(c,u){return k.cloneElement(c,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return o;var l=Ule(t.label,n||i);return[l].concat(Rle(o))};Gn.parseViewBox=S9;Gn.renderCallByParent=Ple;var j0,p1;function Ole(){if(p1)return j0;p1=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return j0=e,j0}var Qle=Ole();const _le=ut(Qle);function iu(e){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(e)}var qle=["valueAccessor"],$le=["data","dataKey","clockWise","id","textBreakAll"];function ese(e){return ase(e)||rse(e)||nse(e)||tse()}function tse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nse(e,t){if(e){if(typeof e=="string")return kv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kv(e,t)}}function rse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ase(e){if(Array.isArray(e))return kv(e)}function kv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rA(){return rA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rA.apply(this,arguments)}function b1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function y1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b1(Object(n),!0).forEach(function(r){ise(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ise(e,t,n){return t=ose(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ose(e){var t=gse(e,"string");return iu(t)=="symbol"?t:t+""}function gse(e,t){if(iu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(iu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z1(e,t){if(e==null)return{};var n=lse(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var sse=function(t){return Array.isArray(t.value)?_le(t.value):t.value};function _i(e){var t=e.valueAccessor,n=t===void 0?sse:t,r=Z1(e,qle),a=r.data,i=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=Z1(r,$le);return!a||!a.length?null:H.createElement(Mt,{className:"recharts-label-list"},a.map(function(I,d){var m=Me(i)?n(I,d):cr(I&&I.payload,i),p=Me(l)?{}:{id:"".concat(l,"-").concat(d)};return H.createElement(Gn,rA({},De(I,!0),u,p,{parentViewBox:I.parentViewBox,value:m,textBreakAll:c,viewBox:Gn.parseViewBox(Me(o)?I:y1(y1({},I),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}_i.displayName="LabelList";function cse(e,t){return e?e===!0?H.createElement(_i,{key:"labelList-implicit",data:t}):H.isValidElement(e)||He(e)?H.createElement(_i,{key:"labelList-implicit",data:t,content:e}):ns(e)?H.createElement(_i,rA({data:t},e,{key:"labelList-implicit"})):null:null}function use(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=wr(r,_i).map(function(o,l){return k.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var i=cse(e.label,t);return[i].concat(ese(a))}_i.renderCallByParent=use;function ou(e){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(e)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vv.apply(this,arguments)}function v1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function G1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v1(Object(n),!0).forEach(function(r){Ise(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ise(e,t,n){return t=dse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dse(e){var t=Cse(e,"string");return ou(t)=="symbol"?t:t+""}function Cse(e,t){if(ou(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ou(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ase=function(t,n){var r=Or(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},wd=function(t){var n=t.cx,r=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,I=c*(l?1:-1)+a,d=Math.asin(c/I)/nA,m=u?i:i+o*d,p=mn(n,r,I,m),h=mn(n,r,a,m),b=u?i-o*d:i,y=mn(n,r,I*Math.cos(d*nA),b);return{center:p,circleTangency:h,lineTangency:y,theta:d}},w9=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=Ase(o,l),u=o+c,I=mn(n,r,i,o),d=mn(n,r,i,u),m="M ".concat(I.x,",").concat(I.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var p=mn(n,r,a,o),h=mn(n,r,a,u);m+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(n,",").concat(r," Z");return m},mse=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,I=t.endAngle,d=Or(I-u),m=wd({cx:n,cy:r,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),p=m.circleTangency,h=m.lineTangency,b=m.theta,y=wd({cx:n,cy:r,radius:i,angle:I,sign:-d,cornerRadius:o,cornerIsExternal:c}),v=y.circleTangency,G=y.lineTangency,S=y.theta,R=c?Math.abs(u-I):Math.abs(u-I)-b-S;if(R<0)return l?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):w9({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:u,endAngle:I});var B="M ".concat(h.x,",").concat(h.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(R>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(G.x,",").concat(G.y,`
  `);if(a>0){var V=wd({cx:n,cy:r,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),W=V.circleTangency,X=V.lineTangency,N=V.theta,x=wd({cx:n,cy:r,radius:a,angle:I,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),Y=x.circleTangency,F=x.lineTangency,E=x.theta,M=c?Math.abs(u-I):Math.abs(u-I)-N-E;if(M<0&&o===0)return"".concat(B,"L").concat(n,",").concat(r,"Z");B+="L".concat(F.x,",").concat(F.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(Y.x,",").concat(Y.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(M>180),",").concat(+(d>0),",").concat(W.x,",").concat(W.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(X.x,",").concat(X.y,"Z")}else B+="L".concat(n,",").concat(r,"Z");return B},fse={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},W9=function(t){var n=G1(G1({},fse),t),r=n.cx,a=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,I=n.startAngle,d=n.endAngle,m=n.className;if(o<i||I===d)return null;var p=Ve("recharts-sector",m),h=o-i,b=_o(l,h,0,!0),y;return b>0&&Math.abs(I-d)<360?y=mse({cx:r,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(b,h/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:I,endAngle:d}):y=w9({cx:r,cy:a,innerRadius:i,outerRadius:o,startAngle:I,endAngle:d}),H.createElement("path",Vv({},De(n,!0),{className:p,d:y,role:"img"}))};function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rv.apply(this,arguments)}function B1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function S1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B1(Object(n),!0).forEach(function(r){hse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hse(e,t,n){return t=pse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pse(e){var t=bse(e,"string");return gu(t)=="symbol"?t:t+""}function bse(e,t){if(gu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w1={curveBasisClosed:Eee,curveBasisOpen:Mee,curveBasis:Kee,curveBumpX:Bee,curveBumpY:See,curveLinearClosed:Dee,curveLinear:Zm,curveMonotoneX:Tee,curveMonotoneY:jee,curveNatural:Lee,curveStep:zee,curveStepAfter:Pee,curveStepBefore:Uee},Wd=function(t){return t.x===+t.x&&t.y===+t.y},cc=function(t){return t.x},uc=function(t){return t.y},yse=function(t,n){if(He(t))return t;var r="curve".concat(bm(t));return(r==="curveMonotone"||r==="curveBump")&&n?w1["".concat(r).concat(n==="vertical"?"Y":"X")]:w1[r]||Zm},Zse=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,I=yse(r,l),d=u?i.filter(function(b){return Wd(b)}):i,m;if(Array.isArray(o)){var p=u?o.filter(function(b){return Wd(b)}):o,h=d.map(function(b,y){return S1(S1({},b),{},{base:p[y]})});return l==="vertical"?m=pd().y(uc).x1(cc).x0(function(b){return b.base.x}):m=pd().x(cc).y1(uc).y0(function(b){return b.base.y}),m.defined(Wd).curve(I),m(h)}return l==="vertical"&&de(o)?m=pd().y(uc).x1(cc).x0(o):de(o)?m=pd().x(cc).y1(uc).y0(o):m=xK().x(cc).y(uc),m.defined(Wd).curve(I),m(d)},xv=function(t){var n=t.className,r=t.points,a=t.path,i=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?Zse(t):a;return H.createElement("path",Rv({},De(t,!1),kC(t),{className:Ve("recharts-curve",n),d:o,ref:i}))},vse=Object.getOwnPropertyNames,Gse=Object.getOwnPropertySymbols,Bse=Object.prototype.hasOwnProperty;function W1(e,t){return function(r,a,i){return e(r,a,i)&&t(r,a,i)}}function kd(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var i=a.cache,o=i.get(n),l=i.get(r);if(o&&l)return o===r&&l===n;i.set(n,r),i.set(r,n);var c=e(n,r,a);return i.delete(n),i.delete(r),c}}function k1(e){return vse(e).concat(Gse(e))}var Sse=Object.hasOwn||function(e,t){return Bse.call(e,t)};function gg(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var wse="__v",Wse="__o",kse="_owner",V1=Object.getOwnPropertyDescriptor,R1=Object.keys;function Vse(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Rse(e,t){return gg(e.getTime(),t.getTime())}function xse(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Xse(e,t){return e===t}function x1(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),I=!1,d=0;(l=u.next())&&!l.done;){if(a[d]){d++;continue}var m=o.value,p=l.value;if(n.equals(m[0],p[0],c,d,e,t,n)&&n.equals(m[1],p[1],m[0],p[0],e,t,n)){I=a[d]=!0;break}d++}if(!I)return!1;c++}return!0}var Jse=gg;function Yse(e,t,n){var r=R1(e),a=r.length;if(R1(t).length!==a)return!1;for(;a-- >0;)if(!k9(e,t,n,r[a]))return!1;return!0}function Ic(e,t,n){var r=k1(e),a=r.length;if(k1(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=r[a],!k9(e,t,n,i)||(o=V1(e,i),l=V1(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Nse(e,t){return gg(e.valueOf(),t.valueOf())}function Hse(e,t){return e.source===t.source&&e.flags===t.flags}function X1(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,I=0;(l=c.next())&&!l.done;){if(!a[I]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[I]=!0;break}I++}if(!u)return!1}return!0}function Fse(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Kse(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function k9(e,t,n,r){return(r===kse||r===Wse||r===wse)&&(e.$$typeof||t.$$typeof)?!0:Sse(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var Ese="[object Arguments]",Mse="[object Boolean]",Dse="[object Date]",Tse="[object Error]",jse="[object Map]",Lse="[object Number]",zse="[object Object]",Use="[object RegExp]",Pse="[object Set]",Ose="[object String]",Qse="[object URL]",_se=Array.isArray,J1=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Y1=Object.assign,qse=Object.prototype.toString.call.bind(Object.prototype.toString);function $se(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,I=e.areSetsEqual,d=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(h,b,y){if(h===b)return!0;if(h==null||b==null)return!1;var v=typeof h;if(v!==typeof b)return!1;if(v!=="object")return v==="number"?o(h,b,y):v==="function"?a(h,b,y):!1;var G=h.constructor;if(G!==b.constructor)return!1;if(G===Object)return l(h,b,y);if(_se(h))return t(h,b,y);if(J1!=null&&J1(h))return d(h,b,y);if(G===Date)return n(h,b,y);if(G===RegExp)return u(h,b,y);if(G===Map)return i(h,b,y);if(G===Set)return I(h,b,y);var S=qse(h);return S===Dse?n(h,b,y):S===Use?u(h,b,y):S===jse?i(h,b,y):S===Pse?I(h,b,y):S===zse?typeof h.then!="function"&&typeof b.then!="function"&&l(h,b,y):S===Qse?m(h,b,y):S===Tse?r(h,b,y):S===Ese?l(h,b,y):S===Mse||S===Lse||S===Ose?c(h,b,y):!1}}function ece(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?Ic:Vse,areDatesEqual:Rse,areErrorsEqual:xse,areFunctionsEqual:Xse,areMapsEqual:r?W1(x1,Ic):x1,areNumbersEqual:Jse,areObjectsEqual:r?Ic:Yse,arePrimitiveWrappersEqual:Nse,areRegExpsEqual:Hse,areSetsEqual:r?W1(X1,Ic):X1,areTypedArraysEqual:r?Ic:Fse,areUrlsEqual:Kse};if(n&&(a=Y1({},a,n(a))),t){var i=kd(a.areArraysEqual),o=kd(a.areMapsEqual),l=kd(a.areObjectsEqual),c=kd(a.areSetsEqual);a=Y1({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function tce(e){return function(t,n,r,a,i,o,l){return e(t,n,l)}}function nce(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,i=e.strict;if(r)return function(c,u){var I=r(),d=I.cache,m=d===void 0?t?new WeakMap:void 0:d,p=I.meta;return n(c,u,{cache:m,equals:a,meta:p,strict:i})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return n(c,u,o)}}var rce=lo();lo({strict:!0});lo({circular:!0});lo({circular:!0,strict:!0});lo({createInternalComparator:function(){return gg}});lo({strict:!0,createInternalComparator:function(){return gg}});lo({circular:!0,createInternalComparator:function(){return gg}});lo({circular:!0,createInternalComparator:function(){return gg},strict:!0});function lo(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=ece(e),c=$se(l),u=r?r(c):tce(c);return nce({circular:n,comparator:c,createState:a,equals:u,strict:o})}function ace(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function N1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):ace(a)};requestAnimationFrame(r)}function Xv(e){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xv(e)}function ice(e){return sce(e)||lce(e)||gce(e)||oce()}function oce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gce(e,t){if(e){if(typeof e=="string")return H1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H1(e,t)}}function H1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sce(e){if(Array.isArray(e))return e}function cce(){var e={},t=function(){return null},n=!1,r=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=ice(o),c=l[0],u=l.slice(1);if(typeof c=="number"){N1(a.bind(null,u),c);return}a(c),N1(a.bind(null,u));return}Xv(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function lu(e){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lu(e)}function F1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function K1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F1(Object(n),!0).forEach(function(r){V9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V9(e,t,n){return t=uce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uce(e){var t=Ice(e,"string");return lu(t)==="symbol"?t:String(t)}function Ice(e,t){if(lu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dce=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(i){return a.includes(i)})})},Cce=function(t){return t},Ace=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},wc=function(t,n){return Object.keys(n).reduce(function(r,a){return K1(K1({},r),{},V9({},a,t(a,n[a])))},{})},E1=function(t,n,r){return t.map(function(a){return"".concat(Ace(a)," ").concat(n,"ms ").concat(r)}).join(",")};function mce(e,t){return pce(e)||hce(e,t)||R9(e,t)||fce()}function fce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function pce(e){if(Array.isArray(e))return e}function bce(e){return vce(e)||Zce(e)||R9(e)||yce()}function yce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R9(e,t){if(e){if(typeof e=="string")return Jv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jv(e,t)}}function Zce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vce(e){if(Array.isArray(e))return Jv(e)}function Jv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var aA=1e-4,x9=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},X9=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},M1=function(t,n){return function(r){var a=x9(t,n);return X9(a,r)}},Gce=function(t,n){return function(r){var a=x9(t,n),i=[].concat(bce(a.map(function(o,l){return o*l}).slice(1)),[0]);return X9(i,r)}},D1=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),I=mce(u,4);a=I[0],i=I[1],o=I[2],l=I[3]}}}var d=M1(a,o),m=M1(i,l),p=Gce(a,o),h=function(v){return v>1?1:v<0?0:v},b=function(v){for(var G=v>1?1:v,S=G,R=0;R<8;++R){var B=d(S)-G,V=p(S);if(Math.abs(B-G)<aA||V<aA)return m(S);S=h(S-B/V)}return m(S)};return b.isStepper=!1,b},Bce=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(I,d,m){var p=-(I-d)*r,h=m*i,b=m+(p-h)*l/1e3,y=m*l/1e3+I;return Math.abs(y-d)<aA&&Math.abs(b)<aA?[d,0]:[y,b]};return c.isStepper=!0,c.dt=l,c},Sce=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return D1(a);case"spring":return Bce();default:if(a.split("(")[0]==="cubic-bezier")return D1(a)}return typeof a=="function"?a:null};function su(e){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(e)}function T1(e){return kce(e)||Wce(e)||J9(e)||wce()}function wce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kce(e){if(Array.isArray(e))return Nv(e)}function j1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j1(Object(n),!0).forEach(function(r){Yv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yv(e,t,n){return t=Vce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vce(e){var t=Rce(e,"string");return su(t)==="symbol"?t:String(t)}function Rce(e,t){if(su(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(su(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xce(e,t){return Yce(e)||Jce(e,t)||J9(e,t)||Xce()}function Xce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J9(e,t){if(e){if(typeof e=="string")return Nv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nv(e,t)}}function Nv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Yce(e){if(Array.isArray(e))return e}var iA=function(t,n,r){return t+(n-t)*r},Hv=function(t){var n=t.from,r=t.to;return n!==r},Nce=function e(t,n,r){var a=wc(function(i,o){if(Hv(o)){var l=t(o.from,o.to,o.velocity),c=xce(l,2),u=c[0],I=c[1];return Cn(Cn({},o),{},{from:u,velocity:I})}return o},n);return r<1?wc(function(i,o){return Hv(o)?Cn(Cn({},o),{},{velocity:iA(o.velocity,a[i].velocity,r),from:iA(o.from,a[i].from,r)}):o},n):e(t,a,r-1)};const Hce=function(e,t,n,r,a){var i=dce(e,t),o=i.reduce(function(y,v){return Cn(Cn({},y),{},Yv({},v,[e[v],t[v]]))},{}),l=i.reduce(function(y,v){return Cn(Cn({},y),{},Yv({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,u,I,d=function(){return null},m=function(){return wc(function(v,G){return G.from},l)},p=function(){return!Object.values(l).filter(Hv).length},h=function(v){u||(u=v);var G=v-u,S=G/n.dt;l=Nce(n,l,S),a(Cn(Cn(Cn({},e),t),m())),u=v,p()||(c=requestAnimationFrame(d))},b=function(v){I||(I=v);var G=(v-I)/r,S=wc(function(B,V){return iA.apply(void 0,T1(V).concat([n(G)]))},o);if(a(Cn(Cn(Cn({},e),t),S)),G<1)c=requestAnimationFrame(d);else{var R=wc(function(B,V){return iA.apply(void 0,T1(V).concat([n(1)]))},o);a(Cn(Cn(Cn({},e),t),R))}};return d=n.isStepper?h:b,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function Vl(e){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(e)}var Fce=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Kce(e,t){if(e==null)return{};var n=Ece(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ece(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function L0(e){return jce(e)||Tce(e)||Dce(e)||Mce()}function Mce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dce(e,t){if(e){if(typeof e=="string")return Fv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fv(e,t)}}function Tce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jce(e){if(Array.isArray(e))return Fv(e)}function Fv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L1(Object(n),!0).forEach(function(r){yc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yc(e,t,n){return t=Y9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y9(r.key),r)}}function Uce(e,t,n){return zce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y9(e){var t=Pce(e,"string");return Vl(t)==="symbol"?t:String(t)}function Pce(e,t){if(Vl(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kv(e,t)}function Kv(e,t){return Kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Kv(e,t)}function Qce(e){var t=_ce();return function(){var r=oA(e),a;if(t){var i=oA(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Ev(this,a)}}function Ev(e,t){if(t&&(Vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mv(e)}function Mv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oA(e){return oA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oA(e)}var Ci=function(e){Oce(n,e);var t=Qce(n);function n(r,a){var i;Lce(this,n),i=t.call(this,r,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,I=o.to,d=o.steps,m=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Mv(i)),i.changeStyle=i.changeStyle.bind(Mv(i)),!l||p<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:I}),Ev(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof m=="function")return i.state={style:u},Ev(i);i.state={style:c?yc({},c,u):u}}else i.state={style:{}};return i}return Uce(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,I=i.to,d=i.from,m=this.state.style;if(l){if(!o){var p={style:c?yc({},c,I):I};this.state&&m&&(c&&m[c]!==I||!c&&m!==I)&&this.setState(p);return}if(!(rce(a.to,I)&&a.canBegin&&a.isActive)){var h=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=h||u?d:a.to;if(this.state&&m){var y={style:c?yc({},c,b):b};(c&&m[c]!==b||!c&&m!==b)&&this.setState(y)}this.runAnimation(jr(jr({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,I=a.begin,d=a.onAnimationEnd,m=a.onAnimationStart,p=Hce(o,l,Sce(u),c,this.changeStyle),h=function(){i.stopJSAnimation=p()};this.manager.start([m,I,h,c,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],I=u.style,d=u.duration,m=d===void 0?0:d,p=function(b,y,v){if(v===0)return b;var G=y.duration,S=y.easing,R=S===void 0?"ease":S,B=y.style,V=y.properties,W=y.onAnimationEnd,X=v>0?o[v-1]:y,N=V||Object.keys(B);if(typeof R=="function"||R==="spring")return[].concat(L0(b),[i.runJSAnimation.bind(i,{from:X.style,to:B,duration:G,easing:R}),G]);var x=E1(N,G,R),Y=jr(jr(jr({},X.style),B),{},{transition:x});return[].concat(L0(b),[Y,G,W]).filter(Cce)};return this.manager.start([c].concat(L0(o.reduce(p,[I,Math.max(m,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=cce());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,I=a.onAnimationStart,d=a.onAnimationEnd,m=a.steps,p=a.children,h=this.manager;if(this.unSubscribe=h.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(m.length>1){this.runStepAnimation(a);return}var b=l?yc({},l,c):c,y=E1(Object.keys(b),o,u);h.start([I,i,jr(jr({},b),{},{transition:y}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Kce(a,Fce),u=k.Children.count(i),I=this.state.style;if(typeof i=="function")return i(I);if(!l||u===0||o<=0)return i;var d=function(p){var h=p.props,b=h.style,y=b===void 0?{}:b,v=h.className,G=k.cloneElement(p,jr(jr({},c),{},{style:jr(jr({},y),I),className:v}));return G};return u===1?d(k.Children.only(i)):H.createElement("div",null,k.Children.map(i,function(m){return d(m)}))}}]),n}(k.PureComponent);Ci.displayName="Animate";Ci.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ci.propTypes={from:tt.oneOfType([tt.object,tt.string]),to:tt.oneOfType([tt.object,tt.string]),attributeName:tt.string,duration:tt.number,begin:tt.number,easing:tt.oneOfType([tt.string,tt.func]),steps:tt.arrayOf(tt.shape({duration:tt.number.isRequired,style:tt.object.isRequired,easing:tt.oneOfType([tt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),tt.func]),properties:tt.arrayOf("string"),onAnimationEnd:tt.func})),children:tt.oneOfType([tt.node,tt.func]),isActive:tt.bool,canBegin:tt.bool,onAnimationEnd:tt.func,shouldReAnimate:tt.bool,onAnimationStart:tt.func,onAnimationReStart:tt.func};function cu(e){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}function gA(){return gA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gA.apply(this,arguments)}function qce(e,t){return nue(e)||tue(e,t)||eue(e,t)||$ce()}function $ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eue(e,t){if(e){if(typeof e=="string")return z1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z1(e,t)}}function z1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tue(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function nue(e){if(Array.isArray(e))return e}function U1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function P1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U1(Object(n),!0).forEach(function(r){rue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rue(e,t,n){return t=aue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aue(e){var t=iue(e,"string");return cu(t)=="symbol"?t:t+""}function iue(e,t){if(cu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O1=function(t,n,r,a,i){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,I;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],m=0,p=4;m<p;m++)d[m]=i[m]>o?o:i[m];I="M".concat(t,",").concat(n+l*d[0]),d[0]>0&&(I+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(n)),I+="L ".concat(t+r-c*d[1],",").concat(n),d[1]>0&&(I+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*d[1])),I+="L ".concat(t+r,",").concat(n+a-l*d[2]),d[2]>0&&(I+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+r-c*d[2],",").concat(n+a)),I+="L ".concat(t+c*d[3],",").concat(n+a),d[3]>0&&(I+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*d[3])),I+="Z"}else if(o>0&&i===+i&&i>0){var h=Math.min(o,i);I="M ".concat(t,",").concat(n+l*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(t+c*h,",").concat(n,`
            L `).concat(t+r-c*h,",").concat(n,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*h,`
            L `).concat(t+r,",").concat(n+a-l*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(t+r-c*h,",").concat(n+a,`
            L `).concat(t+c*h,",").concat(n+a,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*h," Z")}else I="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return I},oue=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),I=Math.max(i,i+l),d=Math.min(o,o+c),m=Math.max(o,o+c);return r>=u&&r<=I&&a>=d&&a<=m}return!1},gue={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CS=function(t){var n=P1(P1({},gue),t),r=k.useRef(),a=k.useState(-1),i=qce(a,2),o=i[0],l=i[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var R=r.current.getTotalLength();R&&l(R)}catch{}},[]);var c=n.x,u=n.y,I=n.width,d=n.height,m=n.radius,p=n.className,h=n.animationEasing,b=n.animationDuration,y=n.animationBegin,v=n.isAnimationActive,G=n.isUpdateAnimationActive;if(c!==+c||u!==+u||I!==+I||d!==+d||I===0||d===0)return null;var S=Ve("recharts-rectangle",p);return G?H.createElement(Ci,{canBegin:o>0,from:{width:I,height:d,x:c,y:u},to:{width:I,height:d,x:c,y:u},duration:b,animationEasing:h,isActive:G},function(R){var B=R.width,V=R.height,W=R.x,X=R.y;return H.createElement(Ci,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:b,isActive:v,easing:h},H.createElement("path",gA({},De(n,!0),{className:S,d:O1(W,X,B,V,m),ref:r})))}):H.createElement("path",gA({},De(n,!0),{className:S,d:O1(c,u,I,d,m)}))};function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dv.apply(this,arguments)}var AS=function(t){var n=t.cx,r=t.cy,a=t.r,i=t.className,o=Ve("recharts-dot",i);return n===+n&&r===+r&&a===+a?H.createElement("circle",Dv({},De(t,!1),kC(t),{className:o,cx:n,cy:r,r:a})):null};function uu(e){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(e)}var lue=["x","y","top","left","width","height","className"];function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tv.apply(this,arguments)}function Q1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q1(Object(n),!0).forEach(function(r){cue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cue(e,t,n){return t=uue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uue(e){var t=Iue(e,"string");return uu(t)=="symbol"?t:t+""}function Iue(e,t){if(uu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(uu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function due(e,t){if(e==null)return{};var n=Cue(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Cue(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Aue=function(t,n,r,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},mue=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,I=t.width,d=I===void 0?0:I,m=t.height,p=m===void 0?0:m,h=t.className,b=due(t,lue),y=sue({x:r,y:i,top:l,left:u,width:d,height:p},b);return!de(r)||!de(i)||!de(d)||!de(p)||!de(l)||!de(u)?null:H.createElement("path",Tv({},De(y,!0),{className:Ve("recharts-cross",h),d:Aue(r,i,d,p,l,u)}))},z0,_1;function fue(){if(_1)return z0;_1=1;var e=t5(),t=e(Object.getPrototypeOf,Object);return z0=t,z0}var U0,q1;function hue(){if(q1)return U0;q1=1;var e=Ai(),t=fue(),n=mi(),r="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,l=i.hasOwnProperty,c=o.call(Object);function u(I){if(!n(I)||e(I)!=r)return!1;var d=t(I);if(d===null)return!0;var m=l.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==c}return U0=u,U0}var pue=hue();const bue=ut(pue);var P0,$1;function yue(){if($1)return P0;$1=1;var e=Ai(),t=mi(),n="[object Boolean]";function r(a){return a===!0||a===!1||t(a)&&e(a)==n}return P0=r,P0}var Zue=yue();const vue=ut(Zue);function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}function lA(){return lA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lA.apply(this,arguments)}function Gue(e,t){return Wue(e)||wue(e,t)||Sue(e,t)||Bue()}function Bue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sue(e,t){if(e){if(typeof e=="string")return eY(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eY(e,t)}}function eY(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wue(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Wue(e){if(Array.isArray(e))return e}function tY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function nY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tY(Object(n),!0).forEach(function(r){kue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kue(e,t,n){return t=Vue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vue(e){var t=Rue(e,"string");return Iu(t)=="symbol"?t:t+""}function Rue(e,t){if(Iu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Iu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rY=function(t,n,r,a,i){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+i),l+="L ".concat(t+r-o/2-a,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},xue={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xue=function(t){var n=nY(nY({},xue),t),r=k.useRef(),a=k.useState(-1),i=Gue(a,2),o=i[0],l=i[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&l(S)}catch{}},[]);var c=n.x,u=n.y,I=n.upperWidth,d=n.lowerWidth,m=n.height,p=n.className,h=n.animationEasing,b=n.animationDuration,y=n.animationBegin,v=n.isUpdateAnimationActive;if(c!==+c||u!==+u||I!==+I||d!==+d||m!==+m||I===0&&d===0||m===0)return null;var G=Ve("recharts-trapezoid",p);return v?H.createElement(Ci,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:I,lowerWidth:d,height:m,x:c,y:u},duration:b,animationEasing:h,isActive:v},function(S){var R=S.upperWidth,B=S.lowerWidth,V=S.height,W=S.x,X=S.y;return H.createElement(Ci,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:b,easing:h},H.createElement("path",lA({},De(n,!0),{className:G,d:rY(W,X,R,B,V),ref:r})))}):H.createElement("g",null,H.createElement("path",lA({},De(n,!0),{className:G,d:rY(c,u,I,d,m)})))},Jue=["option","shapeType","propTransformer","activeClassName","isActive"];function du(e){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},du(e)}function Yue(e,t){if(e==null)return{};var n=Nue(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Nue(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function aY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aY(Object(n),!0).forEach(function(r){Hue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hue(e,t,n){return t=Fue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fue(e){var t=Kue(e,"string");return du(t)=="symbol"?t:t+""}function Kue(e,t){if(du(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(du(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eue(e,t){return sA(sA({},t),e)}function Mue(e,t){return e==="symbols"}function iY(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return H.createElement(CS,n);case"trapezoid":return H.createElement(Xue,n);case"sector":return H.createElement(W9,n);case"symbols":if(Mue(t))return H.createElement(XB,n);break;default:return null}}function Due(e){return k.isValidElement(e)?e.props:e}function Tue(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?Eue:r,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=Yue(e,Jue),u;if(k.isValidElement(t))u=k.cloneElement(t,sA(sA({},c),Due(t)));else if(He(t))u=t(c);else if(bue(t)&&!vue(t)){var I=a(t,c);u=H.createElement(iY,{shapeType:n,elementProps:I})}else{var d=c;u=H.createElement(iY,{shapeType:n,elementProps:d})}return l?H.createElement(Mt,{className:o},u):u}function Fm(e,t){return t!=null&&"trapezoids"in e.props}function Km(e,t){return t!=null&&"sectors"in e.props}function Cu(e,t){return t!=null&&"points"in e.props}function jue(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&i}function Lue(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function zue(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function Uue(e,t){var n;return Fm(e,t)?n=jue:Km(e,t)?n=Lue:Cu(e,t)&&(n=zue),n}function Pue(e,t){var n;return Fm(e,t)?n="trapezoids":Km(e,t)?n="sectors":Cu(e,t)&&(n="points"),n}function Oue(e,t){if(Fm(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Km(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Cu(e,t)?t.payload:{}}function Que(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=Pue(n,t),i=Oue(n,t),o=r.filter(function(c,u){var I=Ym(i,c),d=n.props[a].filter(function(h){var b=Uue(n,t);return b(h,t)}),m=n.props[a].indexOf(d[d.length-1]),p=u===m;return I&&p}),l=r.indexOf(o[o.length-1]);return l}var O0,oY;function _ue(){if(oY)return O0;oY=1;var e=Math.ceil,t=Math.max;function n(r,a,i,o){for(var l=-1,c=t(e((a-r)/(i||1)),0),u=Array(c);c--;)u[o?c:++l]=r,r+=i;return u}return O0=n,O0}var Q0,gY;function N9(){if(gY)return Q0;gY=1;var e=f5(),t=1/0,n=17976931348623157e292;function r(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-1/0){var i=a<0?-1:1;return i*n}return a===a?a:0}return Q0=r,Q0}var _0,lY;function que(){if(lY)return _0;lY=1;var e=_ue(),t=Sm(),n=N9();function r(a){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=n(i),o===void 0?(o=i,i=0):o=n(o),l=l===void 0?i<o?1:-1:n(l),e(i,o,l,a)}}return _0=r,_0}var q0,sY;function $ue(){if(sY)return q0;sY=1;var e=que(),t=e();return q0=t,q0}var eIe=$ue();const cA=ut(eIe);function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function cY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cY(Object(n),!0).forEach(function(r){H9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H9(e,t,n){return t=tIe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tIe(e){var t=nIe(e,"string");return Au(t)=="symbol"?t:t+""}function nIe(e,t){if(Au(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rIe=["Webkit","Moz","O","ms"],aIe=function(t,n){var r=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=rIe.reduce(function(i,o){return uY(uY({},i),{},H9({},o+r,n))},{});return a[t]=n,a};function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function uA(){return uA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uA.apply(this,arguments)}function IY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IY(Object(n),!0).forEach(function(r){er(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K9(r.key),r)}}function oIe(e,t,n){return dY(e.prototype,t),dY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gIe(e,t,n){return t=IA(t),lIe(e,F9()?Reflect.construct(t,n,IA(e).constructor):t.apply(e,n))}function lIe(e,t){if(t&&(Rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sIe(e)}function sIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F9=function(){return!!e})()}function IA(e){return IA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},IA(e)}function cIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jv(e,t)}function jv(e,t){return jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},jv(e,t)}function er(e,t,n){return t=K9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K9(e){var t=uIe(e,"string");return Rl(t)=="symbol"?t:t+""}function uIe(e,t){if(Rl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IIe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Bc().domain(cA(0,c)).range([i,i+o-l]),I=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:I}},CY=function(t){return t.changedTouches&&!!t.changedTouches.length},xl=function(e){function t(n){var r;return iIe(this,t),r=gIe(this,t,[n]),er(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),er(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),er(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),r.detachDragEndListener()}),er(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),er(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),er(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),er(r,"handleSlideDragStart",function(a){var i=CY(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return cIe(t,e),oIe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,i=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,I=u.length-1,d=Math.min(a,i),m=Math.max(a,i),p=t.getIndexInRange(o,d),h=t.getIndexInRange(o,m);return{startIndex:p-p%c,endIndex:h===I?I:h-h%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=cr(i[r],l,r);return He(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,I=c.width,d=c.travellerWidth,m=c.startIndex,p=c.endIndex,h=c.onChange,b=r.pageX-i;b>0?b=Math.min(b,u+I-d-l,u+I-d-o):b<0&&(b=Math.max(b,u-o,u-l));var y=this.getIndex({startX:o+b,endX:l+b});(y.startIndex!==m||y.endIndex!==p)&&h&&h(y),this.setState({startX:o+b,endX:l+b,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var i=CY(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],I=this.props,d=I.x,m=I.width,p=I.travellerWidth,h=I.onChange,b=I.gap,y=I.data,v={startX:this.state.startX,endX:this.state.endX},G=r.pageX-i;G>0?G=Math.min(G,d+m-p-u):G<0&&(G=Math.max(G,d-u)),v[o]=u+G;var S=this.getIndex(v),R=S.startIndex,B=S.endIndex,V=function(){var X=y.length-1;return o==="startX"&&(l>c?R%b===0:B%b===0)||l<c&&B===X||o==="endX"&&(l>c?B%b===0:R%b===0)||l>c&&B===X};this.setState(er(er({},o,u+G),"brushMoveStartX",r.pageX),function(){h&&V()&&h(S)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,I=this.state[a],d=l.indexOf(I);if(d!==-1){var m=d+r;if(!(m===-1||m>=l.length)){var p=l[m];a==="startX"&&p>=u||a==="endX"&&p<=c||this.setState(er({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return H.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.data,u=r.children,I=r.padding,d=k.Children.only(u);return d?H.cloneElement(d,{x:a,y:i,width:o,height:l,margin:I,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var i,o,l=this,c=this.props,u=c.y,I=c.travellerWidth,d=c.height,m=c.traveller,p=c.ariaLabel,h=c.data,b=c.startIndex,y=c.endIndex,v=Math.max(r,this.props.x),G=$0($0({},De(this.props,!1)),{},{x:v,y:u,width:I,height:d}),S=p||"Min value: ".concat((i=h[b])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=h[y])===null||o===void 0?void 0:o.name);return H.createElement(Mt,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(B){["ArrowLeft","ArrowRight"].includes(B.key)&&(B.preventDefault(),B.stopPropagation(),l.handleTravellerMoveKeyboard(B.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,G))}},{key:"renderSlide",value:function(r,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,I=Math.min(r,a)+u,d=Math.max(Math.abs(a-r)-u,0);return H.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:I,y:o,width:d,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,i=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,I=this.state,d=I.startX,m=I.endX,p=5,h={pointerEvents:"none",fill:u};return H.createElement(Mt,{className:"recharts-brush-texts"},H.createElement(MC,uA({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,m)-p,y:o+l/2},h),this.getTextOfTick(a)),H.createElement(MC,uA({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,m)+c+p,y:o+l/2},h),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,a=r.data,i=r.className,o=r.children,l=r.x,c=r.y,u=r.width,I=r.height,d=r.alwaysShowText,m=this.state,p=m.startX,h=m.endX,b=m.isTextActive,y=m.isSlideMoving,v=m.isTravellerMoving,G=m.isTravellerFocused;if(!a||!a.length||!de(l)||!de(c)||!de(u)||!de(I)||u<=0||I<=0)return null;var S=Ve("recharts-brush",i),R=H.Children.count(o)===1,B=aIe("userSelect","none");return H.createElement(Mt,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:B},this.renderBackground(),R&&this.renderPanorama(),this.renderSlide(p,h),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(h,"endX"),(b||y||v||G||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,i=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(i+l/2)-1;return H.createElement(H.Fragment,null,H.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),H.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),H.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var i;return H.isValidElement(r)?i=H.cloneElement(r,a):He(r)?i=r(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(r,a){var i=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,I=r.startIndex,d=r.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return $0({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?IIe({data:i,width:o,x:l,travellerWidth:c,startIndex:I,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var m=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(r,a){for(var i=r.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(k.PureComponent);er(xl,"displayName","Brush");er(xl,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var eZ,AY;function dIe(){if(AY)return eZ;AY=1;var e=EB();function t(n,r){var a;return e(n,function(i,o,l){return a=r(i,o,l),!a}),!!a}return eZ=t,eZ}var tZ,mY;function CIe(){if(mY)return tZ;mY=1;var e=PK(),t=io(),n=dIe(),r=Pn(),a=Sm();function i(o,l,c){var u=r(o)?e:n;return c&&a(o,l,c)&&(l=void 0),u(o,t(l,3))}return tZ=i,tZ}var AIe=CIe();const mIe=ut(AIe);var Va=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},nZ,fY;function fIe(){if(fY)return nZ;fY=1;var e=I5();function t(n,r,a){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[r]=a}return nZ=t,nZ}var rZ,hY;function hIe(){if(hY)return rZ;hY=1;var e=fIe(),t=c5(),n=io();function r(a,i){var o={};return i=n(i,3),t(a,function(l,c,u){e(o,c,i(l,c,u))}),o}return rZ=r,rZ}var pIe=hIe();const bIe=ut(pIe);var aZ,pY;function yIe(){if(pY)return aZ;pY=1;function e(t,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(!n(t[r],r,t))return!1;return!0}return aZ=e,aZ}var iZ,bY;function ZIe(){if(bY)return iZ;bY=1;var e=EB();function t(n,r){var a=!0;return e(n,function(i,o,l){return a=!!r(i,o,l),a}),a}return iZ=t,iZ}var oZ,yY;function vIe(){if(yY)return oZ;yY=1;var e=yIe(),t=ZIe(),n=io(),r=Pn(),a=Sm();function i(o,l,c){var u=r(o)?e:t;return c&&a(o,l,c)&&(l=void 0),u(o,n(l,3))}return oZ=i,oZ}var GIe=vIe();const E9=ut(GIe);var BIe=["x","y"];function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lv.apply(this,arguments)}function ZY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZY(Object(n),!0).forEach(function(r){SIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SIe(e,t,n){return t=wIe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wIe(e){var t=WIe(e,"string");return mu(t)=="symbol"?t:t+""}function WIe(e,t){if(mu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kIe(e,t){if(e==null)return{};var n=VIe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function VIe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function RIe(e,t){var n=e.x,r=e.y,a=kIe(e,BIe),i="".concat(n),o=parseInt(i,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),I=parseInt(u,10),d="".concat(t.width||a.width),m=parseInt(d,10);return dc(dc(dc(dc(dc({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:I,width:m,name:t.name,radius:t.radius})}function vY(e){return H.createElement(Tue,Lv({shapeType:"rectangle",propTransformer:RIe,activeClassName:"recharts-active-bar"},e))}var xIe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var i=typeof r=="number";return i?t(r,a):(i||$o(),n)}},XIe=["value","background"],M9;function Xl(e){"@babel/helpers - typeof";return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xl(e)}function JIe(e,t){if(e==null)return{};var n=YIe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function YIe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function dA(){return dA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dA.apply(this,arguments)}function GY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GY(Object(n),!0).forEach(function(r){Ui(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function NIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T9(r.key),r)}}function HIe(e,t,n){return BY(e.prototype,t),BY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function FIe(e,t,n){return t=CA(t),KIe(e,D9()?Reflect.construct(t,n,CA(e).constructor):t.apply(e,n))}function KIe(e,t){if(t&&(Xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EIe(e)}function EIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D9=function(){return!!e})()}function CA(e){return CA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CA(e)}function MIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zv(e,t)}function zv(e,t){return zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},zv(e,t)}function Ui(e,t,n){return t=T9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T9(e){var t=DIe(e,"string");return Xl(t)=="symbol"?t:t+""}function DIe(e,t){if(Xl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ou=function(e){function t(){var n;NIe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=FIe(this,t,[].concat(a)),Ui(n,"state",{isAnimationFinished:!1}),Ui(n,"id",Du("recharts-bar-")),Ui(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Ui(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return MIe(t,e),HIe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,I=De(this.props,!1);return r&&r.map(function(d,m){var p=m===c,h=p?u:o,b=Ut(Ut(Ut({},I),d),{},{isActive:p,option:h,index:m,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return H.createElement(Mt,dA({className:"recharts-bar-rectangle"},VC(a.props,d,m),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value)}),H.createElement(vY,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,I=a.animationEasing,d=a.animationId,m=this.state.prevData;return H.createElement(Ci,{begin:c,duration:u,isActive:l,easing:I,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var h=p.t,b=i.map(function(y,v){var G=m&&m[v];if(G){var S=Ur(G.x,y.x),R=Ur(G.y,y.y),B=Ur(G.width,y.width),V=Ur(G.height,y.height);return Ut(Ut({},y),{},{x:S(h),y:R(h),width:B(h),height:V(h)})}if(o==="horizontal"){var W=Ur(0,y.height),X=W(h);return Ut(Ut({},y),{},{y:y.y+y.height-X,height:X})}var N=Ur(0,y.width),x=N(h);return Ut(Ut({},y),{},{width:x})});return H.createElement(Mt,null,r.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Ym(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=De(this.props.background,!1);return i.map(function(u,I){u.value;var d=u.background,m=JIe(u,XIe);if(!d)return null;var p=Ut(Ut(Ut(Ut(Ut({},m),{},{fill:"#eee"},d),c),VC(r.props,u,I)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:I,className:"recharts-bar-background-rectangle"});return H.createElement(vY,dA({key:"background-bar-".concat(I),option:r.props.background,isActive:I===l},p))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,I=i.children,d=wr(I,Pu);if(!d)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,p=function(y,v){var G=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:G,errorVal:cr(y,v)}},h={clipPath:r?"url(#clipPath-".concat(a,")"):null};return H.createElement(Mt,h,d.map(function(b){return H.cloneElement(b,{key:"error-bar-".concat(a,"-").concat(b.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,i=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,I=r.top,d=r.width,m=r.height,p=r.isAnimationActive,h=r.background,b=r.id;if(a||!i||!i.length)return null;var y=this.state.isAnimationFinished,v=Ve("recharts-bar",o),G=l&&l.allowDataOverflow,S=c&&c.allowDataOverflow,R=G||S,B=Me(b)?this.id:b;return H.createElement(Mt,{className:v},G||S?H.createElement("defs",null,H.createElement("clipPath",{id:"clipPath-".concat(B)},H.createElement("rect",{x:G?u:u-d/2,y:S?I:I-m/2,width:G?d:d*2,height:S?m:m*2}))):null,H.createElement(Mt,{className:"recharts-bar-rectangles",clipPath:R?"url(#clipPath-".concat(B,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(R,B),(!p||y)&&_i.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(k.PureComponent);M9=Ou;Ui(Ou,"displayName","Bar");Ui(Ou,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!gi.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ui(Ou,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,I=e.dataStartIndex,d=e.displayedData,m=e.offset,p=ule(r,n);if(!p)return null;var h=t.layout,b=n.type.defaultProps,y=b!==void 0?Ut(Ut({},b),n.props):n.props,v=y.dataKey,G=y.children,S=y.minPointSize,R=h==="horizontal"?o:i,B=u?R.scale.domain():null,V=ple({numericAxis:R}),W=wr(G,p5),X=d.map(function(N,x){var Y,F,E,M,T,z;u?Y=Ile(u[I+x],B):(Y=cr(N,v),Array.isArray(Y)||(Y=[V,Y]));var P=xIe(S,M9.defaultProps.minPointSize)(Y[1],x);if(h==="horizontal"){var L,q=[o.scale(Y[0]),o.scale(Y[1])],ee=q[0],D=q[1];F=u1({axis:i,ticks:l,bandSize:a,offset:p.offset,entry:N,index:x}),E=(L=D??ee)!==null&&L!==void 0?L:void 0,M=p.size;var O=ee-D;if(T=Number.isNaN(O)?0:O,z={x:F,y:o.y,width:M,height:o.height},Math.abs(P)>0&&Math.abs(T)<Math.abs(P)){var ue=Or(T||P)*(Math.abs(P)-Math.abs(T));E-=ue,T+=ue}}else{var ye=[i.scale(Y[0]),i.scale(Y[1])],Be=ye[0],xe=ye[1];if(F=Be,E=u1({axis:o,ticks:c,bandSize:a,offset:p.offset,entry:N,index:x}),M=xe-Be,T=p.size,z={x:i.x,y:E,width:i.width,height:T},Math.abs(P)>0&&Math.abs(M)<Math.abs(P)){var Te=Or(M||P)*(Math.abs(P)-Math.abs(M));M+=Te}}return Ut(Ut(Ut({},N),{},{x:F,y:E,width:M,height:T,value:u?Y:Y[1],payload:N,background:z},W[x]&&W[x].props),{},{tooltipPayload:[B9(n,N)],tooltipPosition:{x:F+M/2,y:E+T/2}})});return Ut({data:X,layout:h},m)});function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function TIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j9(r.key),r)}}function jIe(e,t,n){return SY(e.prototype,t),SY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wY(Object(n),!0).forEach(function(r){Em(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Em(e,t,n){return t=j9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j9(e){var t=LIe(e,"string");return fu(t)=="symbol"?t:t+""}function LIe(e,t){if(fu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zIe=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,I=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},m=!!tr(u,Ou);return I.reduce(function(p,h){var b=n[h],y=b.orientation,v=b.domain,G=b.padding,S=G===void 0?{}:G,R=b.mirror,B=b.reversed,V="".concat(y).concat(R?"Mirror":""),W,X,N,x,Y;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var F=v[1]-v[0],E=1/0,M=b.categoricalDomain.sort();if(M.forEach(function(ye,Be){Be>0&&(E=Math.min((ye||0)-(M[Be-1]||0),E))}),Number.isFinite(E)){var T=E/F,z=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(W=T*z/2),b.padding==="no-gap"){var P=_o(t.barCategoryGap,T*z),L=T*z/2;W=L-P-(L-P)/z*P}}}a==="xAxis"?X=[r.left+(S.left||0)+(W||0),r.left+r.width-(S.right||0)-(W||0)]:a==="yAxis"?X=c==="horizontal"?[r.top+r.height-(S.bottom||0),r.top+(S.top||0)]:[r.top+(S.top||0)+(W||0),r.top+r.height-(S.bottom||0)-(W||0)]:X=b.range,B&&(X=[X[1],X[0]]);var q=sle(b,i,m),ee=q.scale,D=q.realScaleType;ee.domain(v).range(X),cle(ee);var O=hle(ee,Lr(Lr({},b),{},{realScaleType:D}));a==="xAxis"?(Y=y==="top"&&!R||y==="bottom"&&R,N=r.left,x=d[V]-Y*b.height):a==="yAxis"&&(Y=y==="left"&&!R||y==="right"&&R,N=d[V]-Y*b.width,x=r.top);var ue=Lr(Lr(Lr({},b),O),{},{realScaleType:D,x:N,y:x,scale:ee,width:a==="xAxis"?r.width:b.width,height:a==="yAxis"?r.height:b.height});return ue.bandSize=tA(ue,O),!b.hide&&a==="xAxis"?d[V]+=(Y?-1:1)*ue.height:b.hide||(d[V]+=(Y?-1:1)*ue.width),Lr(Lr({},p),{},Em({},h,ue))},{})},L9=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(a,o),width:Math.abs(i-r),height:Math.abs(o-a)}},UIe=function(t){var n=t.x1,r=t.y1,a=t.x2,i=t.y2;return L9({x:n,y:r},{x:a,y:i})},z9=function(){function e(t){TIe(this,e),this.scale=t}return jIe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],i=r[r.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();Em(z9,"EPS",1e-4);var mS=function(t){var n=Object.keys(t).reduce(function(r,a){return Lr(Lr({},r),{},Em({},a,z9.create(t[a])))},{});return Lr(Lr({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return bIe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return E9(a,function(i,o){return n[o].isInRange(i)})}})};function PIe(e){return(e%180+180)%180}var OIe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=PIe(a),o=i*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},gZ,WY;function QIe(){if(WY)return gZ;WY=1;var e=io(),t=Tu(),n=Gm();function r(a){return function(i,o,l){var c=Object(i);if(!t(i)){var u=e(o,3);i=n(i),o=function(d){return u(c[d],d,c)}}var I=a(i,o,l);return I>-1?c[u?i[I]:I]:void 0}}return gZ=r,gZ}var lZ,kY;function _Ie(){if(kY)return lZ;kY=1;var e=N9();function t(n){var r=e(n),a=r%1;return r===r?a?r-a:r:0}return lZ=t,lZ}var sZ,VY;function qIe(){if(VY)return sZ;VY=1;var e=i5(),t=io(),n=_Ie(),r=Math.max;function a(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var u=l==null?0:n(l);return u<0&&(u=r(c+u,0)),e(i,t(o,3),u)}return sZ=a,sZ}var cZ,RY;function $Ie(){if(RY)return cZ;RY=1;var e=QIe(),t=qIe(),n=e(t);return cZ=n,cZ}var ede=$Ie();const tde=ut(ede);var nde=yK();const rde=ut(nde);var ade=rde(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),fS=k.createContext(void 0),hS=k.createContext(void 0),U9=k.createContext(void 0),P9=k.createContext({}),O9=k.createContext(void 0),Q9=k.createContext(0),_9=k.createContext(0),xY=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,I=ade(i);return H.createElement(fS.Provider,{value:r},H.createElement(hS.Provider,{value:a},H.createElement(P9.Provider,{value:i},H.createElement(U9.Provider,{value:I},H.createElement(O9.Provider,{value:o},H.createElement(Q9.Provider,{value:u},H.createElement(_9.Provider,{value:c},l)))))))},ide=function(){return k.useContext(O9)},q9=function(t){var n=k.useContext(fS);n==null&&$o();var r=n[t];return r==null&&$o(),r},ode=function(){var t=k.useContext(fS);return Ti(t)},gde=function(){var t=k.useContext(hS),n=tde(t,function(r){return E9(r.domain,Number.isFinite)});return n||Ti(t)},$9=function(t){var n=k.useContext(hS);n==null&&$o();var r=n[t];return r==null&&$o(),r},lde=function(){var t=k.useContext(U9);return t},sde=function(){return k.useContext(P9)},pS=function(){return k.useContext(_9)},bS=function(){return k.useContext(Q9)};function Jl(e){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jl(e)}function cde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ude(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tE(r.key),r)}}function Ide(e,t,n){return ude(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dde(e,t,n){return t=AA(t),Cde(e,eE()?Reflect.construct(t,n||[],AA(e).constructor):t.apply(e,n))}function Cde(e,t){if(t&&(Jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ade(e)}function Ade(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eE=function(){return!!e})()}function AA(e){return AA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AA(e)}function mde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uv(e,t)}function Uv(e,t){return Uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Uv(e,t)}function XY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function JY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XY(Object(n),!0).forEach(function(r){yS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yS(e,t,n){return t=tE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tE(e){var t=fde(e,"string");return Jl(t)=="symbol"?t:t+""}function fde(e,t){if(Jl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hde(e,t){return Zde(e)||yde(e,t)||bde(e,t)||pde()}function pde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bde(e,t){if(e){if(typeof e=="string")return YY(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YY(e,t)}}function YY(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yde(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Zde(e){if(Array.isArray(e))return e}function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pv.apply(this,arguments)}var vde=function(t,n){var r;return H.isValidElement(t)?r=H.cloneElement(t,n):He(t)?r=t(n):r=H.createElement("line",Pv({},n,{className:"recharts-reference-line-line"})),r},Gde=function(t,n,r,a,i,o,l,c,u){var I=i.x,d=i.y,m=i.width,p=i.height;if(r){var h=u.y,b=t.y.apply(h,{position:o});if(Va(u,"discard")&&!t.y.isInRange(b))return null;var y=[{x:I+m,y:b},{x:I,y:b}];return c==="left"?y.reverse():y}if(n){var v=u.x,G=t.x.apply(v,{position:o});if(Va(u,"discard")&&!t.x.isInRange(G))return null;var S=[{x:G,y:d+p},{x:G,y:d}];return l==="top"?S.reverse():S}if(a){var R=u.segment,B=R.map(function(V){return t.apply(V,{position:o})});return Va(u,"discard")&&mIe(B,function(V){return!t.isInRange(V)})?null:B}return null};function Bde(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=ide(),I=q9(a),d=$9(i),m=lde();if(!u||!m)return null;oi(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=mS({x:I.scale,y:d.scale}),h=$t(t),b=$t(n),y=r&&r.length===2,v=Gde(p,h,b,y,m,e.position,I.orientation,d.orientation,e);if(!v)return null;var G=hde(v,2),S=G[0],R=S.x,B=S.y,V=G[1],W=V.x,X=V.y,N=Va(e,"hidden")?"url(#".concat(u,")"):void 0,x=JY(JY({clipPath:N},De(e,!0)),{},{x1:R,y1:B,x2:W,y2:X});return H.createElement(Mt,{className:Ve("recharts-reference-line",l)},vde(o,x),Gn.renderCallByParent(e,UIe({x1:R,y1:B,x2:W,y2:X})))}var ZS=function(e){function t(){return cde(this,t),dde(this,t,arguments)}return mde(t,e),Ide(t,[{key:"render",value:function(){return H.createElement(Bde,this.props)}}])}(H.Component);yS(ZS,"displayName","ReferenceLine");yS(ZS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ov.apply(this,arguments)}function Yl(e){"@babel/helpers - typeof";return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yl(e)}function NY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function HY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NY(Object(n),!0).forEach(function(r){Mm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rE(r.key),r)}}function Wde(e,t,n){return wde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kde(e,t,n){return t=mA(t),Vde(e,nE()?Reflect.construct(t,n||[],mA(e).constructor):t.apply(e,n))}function Vde(e,t){if(t&&(Yl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rde(e)}function Rde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nE=function(){return!!e})()}function mA(e){return mA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mA(e)}function xde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qv(e,t)}function Qv(e,t){return Qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Qv(e,t)}function Mm(e,t,n){return t=rE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rE(e){var t=Xde(e,"string");return Yl(t)=="symbol"?t:t+""}function Xde(e,t){if(Yl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jde=function(t){var n=t.x,r=t.y,a=t.xAxis,i=t.yAxis,o=mS({x:a.scale,y:i.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Va(t,"discard")&&!o.isInRange(l)?null:l},Dm=function(e){function t(){return Sde(this,t),kde(this,t,arguments)}return xde(t,e),Wde(t,[{key:"render",value:function(){var r=this.props,a=r.x,i=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=$t(a),I=$t(i);if(oi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!I)return null;var d=Jde(this.props);if(!d)return null;var m=d.x,p=d.y,h=this.props,b=h.shape,y=h.className,v=Va(this.props,"hidden")?"url(#".concat(c,")"):void 0,G=HY(HY({clipPath:v},De(this.props,!0)),{},{cx:m,cy:p});return H.createElement(Mt,{className:Ve("recharts-reference-dot",y)},t.renderDot(b,G),Gn.renderCallByParent(this.props,{x:m-o,y:p-o,width:2*o,height:2*o}))}}])}(H.Component);Mm(Dm,"displayName","ReferenceDot");Mm(Dm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Mm(Dm,"renderDot",function(e,t){var n;return H.isValidElement(e)?n=H.cloneElement(e,t):He(e)?n=e(t):n=H.createElement(AS,Ov({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_v.apply(this,arguments)}function Nl(e){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}function FY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function KY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FY(Object(n),!0).forEach(function(r){Tm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iE(r.key),r)}}function Hde(e,t,n){return Nde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fde(e,t,n){return t=fA(t),Kde(e,aE()?Reflect.construct(t,n||[],fA(e).constructor):t.apply(e,n))}function Kde(e,t){if(t&&(Nl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ede(e)}function Ede(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aE=function(){return!!e})()}function fA(e){return fA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fA(e)}function Mde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qv(e,t)}function qv(e,t){return qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},qv(e,t)}function Tm(e,t,n){return t=iE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iE(e){var t=Dde(e,"string");return Nl(t)=="symbol"?t:t+""}function Dde(e,t){if(Nl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Nl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tde=function(t,n,r,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,I=i.xAxis,d=i.yAxis;if(!I||!d)return null;var m=mS({x:I.scale,y:d.scale}),p={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:r?m.y.apply(c,{position:"start"}):m.y.rangeMin},h={x:n?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:a?m.y.apply(u,{position:"end"}):m.y.rangeMax};return Va(i,"discard")&&(!m.isInRange(p)||!m.isInRange(h))?null:L9(p,h)},jm=function(e){function t(){return Yde(this,t),Fde(this,t,arguments)}return Mde(t,e),Hde(t,[{key:"render",value:function(){var r=this.props,a=r.x1,i=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,I=r.clipPathId;oi(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=$t(a),m=$t(i),p=$t(o),h=$t(l),b=this.props.shape;if(!d&&!m&&!p&&!h&&!b)return null;var y=Tde(d,m,p,h,this.props);if(!y&&!b)return null;var v=Va(this.props,"hidden")?"url(#".concat(I,")"):void 0;return H.createElement(Mt,{className:Ve("recharts-reference-area",c)},t.renderRect(b,KY(KY({clipPath:v},De(this.props,!0)),y)),Gn.renderCallByParent(this.props,y))}}])}(H.Component);Tm(jm,"displayName","ReferenceArea");Tm(jm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Tm(jm,"renderRect",function(e,t){var n;return H.isValidElement(e)?n=H.cloneElement(e,t):He(e)?n=e(t):n=H.createElement(CS,_v({},t,{className:"recharts-reference-area-rect"})),n});function oE(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function jde(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return OIe(r,n)}function Lde(e,t,n){var r=n==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:r?a:i,end:r?a+o:i+l}:{start:r?a+o:i+l,end:r?a:i}}function hA(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function zde(e,t){return oE(e,t+1)}function Ude(e,t,n,r,a){for(var i=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,I=o,d=function(){var h=r==null?void 0:r[c];if(h===void 0)return{v:oE(r,u)};var b=c,y,v=function(){return y===void 0&&(y=n(h,b)),y},G=h.coordinate,S=c===0||hA(e,G,v,I,l);S||(c=0,I=o,u+=1),S&&(I=G+e*(v()/2+a),c+=u)},m;u<=i.length;)if(m=d(),m)return m.v;return[]}function hu(e){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(e)}function EY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EY(Object(n),!0).forEach(function(r){Pde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pde(e,t,n){return t=Ode(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ode(e){var t=Qde(e,"string");return hu(t)=="symbol"?t:t+""}function Qde(e,t){if(hu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _de(e,t,n,r,a){for(var i=(r||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var p=i[m],h,b=function(){return h===void 0&&(h=n(p,m)),h};if(m===o-1){var y=e*(p.coordinate+e*b()/2-c);i[m]=p=vn(vn({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate})}else i[m]=p=vn(vn({},p),{},{tickCoord:p.coordinate});var v=hA(e,p.tickCoord,b,l,c);v&&(c=p.tickCoord-e*(b()/2+a),i[m]=vn(vn({},p),{},{isShow:!0}))},I=o-1;I>=0;I--)u(I);return i}function qde(e,t,n,r,a,i){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var I=r[l-1],d=n(I,l-1),m=e*(I.coordinate+e*d/2-u);o[l-1]=I=vn(vn({},I),{},{tickCoord:m>0?I.coordinate-m*e:I.coordinate});var p=hA(e,I.tickCoord,function(){return d},c,u);p&&(u=I.tickCoord-e*(d/2+a),o[l-1]=vn(vn({},I),{},{isShow:!0}))}for(var h=i?l-1:l,b=function(G){var S=o[G],R,B=function(){return R===void 0&&(R=n(S,G)),R};if(G===0){var V=e*(S.coordinate-e*B()/2-c);o[G]=S=vn(vn({},S),{},{tickCoord:V<0?S.coordinate-V*e:S.coordinate})}else o[G]=S=vn(vn({},S),{},{tickCoord:S.coordinate});var W=hA(e,S.tickCoord,B,c,u);W&&(c=S.tickCoord+e*(B()/2+a),o[G]=vn(vn({},S),{},{isShow:!0}))},y=0;y<h;y++)b(y);return o}function vS(e,t,n){var r=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,I=e.unit,d=e.angle;if(!a||!a.length||!r)return[];if(de(c)||gi.isSsr)return zde(a,typeof c=="number"&&de(c)?c:0);var m=[],p=l==="top"||l==="bottom"?"width":"height",h=I&&p==="width"?Gc(I,{fontSize:t,letterSpacing:n}):{width:0,height:0},b=function(S,R){var B=He(u)?u(S.value,R):S.value;return p==="width"?jde(Gc(B,{fontSize:t,letterSpacing:n}),h,d):Gc(B,{fontSize:t,letterSpacing:n})[p]},y=a.length>=2?Or(a[1].coordinate-a[0].coordinate):1,v=Lde(i,y,p);return c==="equidistantPreserveStart"?Ude(y,v,b,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=qde(y,v,b,a,o,c==="preserveStartEnd"):m=_de(y,v,b,a,o),m.filter(function(G){return G.isShow}))}var $de=["viewBox"],eCe=["viewBox"],tCe=["ticks"];function Hl(e){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(e)}function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ug.apply(this,arguments)}function MY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MY(Object(n),!0).forEach(function(r){GS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uZ(e,t){if(e==null)return{};var n=nCe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nCe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function rCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lE(r.key),r)}}function aCe(e,t,n){return DY(e.prototype,t),DY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function iCe(e,t,n){return t=pA(t),oCe(e,gE()?Reflect.construct(t,n,pA(e).constructor):t.apply(e,n))}function oCe(e,t){if(t&&(Hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gCe(e)}function gCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gE=function(){return!!e})()}function pA(e){return pA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pA(e)}function lCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$v(e,t)}function $v(e,t){return $v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$v(e,t)}function GS(e,t,n){return t=lE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lE(e){var t=sCe(e,"string");return Hl(t)=="symbol"?t:t+""}function sCe(e,t){if(Hl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gs=function(e){function t(n){var r;return rCe(this,t),r=iCe(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return lCe(t,e),aCe(t,[{key:"shouldComponentUpdate",value:function(r,a){var i=r.viewBox,o=uZ(r,$de),l=this.props,c=l.viewBox,u=uZ(l,eCe);return!tl(i,c)||!tl(o,u)||!tl(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,I=a.tickSize,d=a.mirror,m=a.tickMargin,p,h,b,y,v,G,S=d?-1:1,R=r.tickSize||I,B=de(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=h=r.coordinate,y=o+ +!d*c,b=y-S*R,G=b-S*m,v=B;break;case"left":b=y=r.coordinate,h=i+ +!d*l,p=h-S*R,v=p-S*m,G=B;break;case"right":b=y=r.coordinate,h=i+ +d*l,p=h+S*R,v=p+S*m,G=B;break;default:p=h=r.coordinate,y=o+ +d*c,b=y+S*R,G=b+S*m,v=B;break}return{line:{x1:p,y1:b,x2:h,y2:y},tick:{x:v,y:G}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,I=r.axisLine,d=Vn(Vn(Vn({},De(this.props,!1)),De(I,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);d=Vn(Vn({},d),{},{x1:a,y1:i+m*l,x2:a+o,y2:i+m*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);d=Vn(Vn({},d),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+l})}return H.createElement("line",Ug({},d,{className:Ve("recharts-cartesian-axis-line",Sr(I,"className"))}))}},{key:"renderTicks",value:function(r,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,I=l.tick,d=l.tickFormatter,m=l.unit,p=vS(Vn(Vn({},this.props),{},{ticks:r}),a,i),h=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),y=De(this.props,!1),v=De(I,!1),G=Vn(Vn({},y),{},{fill:"none"},De(c,!1)),S=p.map(function(R,B){var V=o.getTickLineCoord(R),W=V.line,X=V.tick,N=Vn(Vn(Vn(Vn({textAnchor:h,verticalAnchor:b},y),{},{stroke:"none",fill:u},v),X),{},{index:B,payload:R,visibleTicksCount:p.length,tickFormatter:d});return H.createElement(Mt,Ug({className:"recharts-cartesian-axis-tick",key:"tick-".concat(R.value,"-").concat(R.coordinate,"-").concat(R.tickCoord)},VC(o.props,R,B)),c&&H.createElement("line",Ug({},G,W,{className:Ve("recharts-cartesian-axis-tick-line",Sr(c,"className"))})),I&&t.renderTickItem(I,N,"".concat(He(d)?d(R.value,B):R.value).concat(m||"")))});return H.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var r=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,I=a.hide;if(I)return null;var d=this.props,m=d.ticks,p=uZ(d,tCe),h=m;return He(c)&&(h=m&&m.length>0?c(this.props):c(p)),o<=0||l<=0||!h||!h.length?null:H.createElement(Mt,{className:Ve("recharts-cartesian-axis",u),ref:function(y){r.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),Gn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,i){var o;return H.isValidElement(r)?o=H.cloneElement(r,a):He(r)?o=r(a):o=H.createElement(MC,Ug({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(k.Component);GS(gs,"displayName","CartesianAxis");GS(gs,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var cCe=["x1","y1","x2","y2","key"],uCe=["offset"];function eg(e){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}function TY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TY(Object(n),!0).forEach(function(r){ICe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ICe(e,t,n){return t=dCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dCe(e){var t=CCe(e,"string");return eg(t)=="symbol"?t:t+""}function CCe(e,t){if(eg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jo(){return Jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jo.apply(this,arguments)}function jY(e,t){if(e==null)return{};var n=ACe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ACe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var mCe=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return H.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function sE(e,t){var n;if(H.isValidElement(e))n=H.cloneElement(e,t);else if(He(e))n=e(t);else{var r=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=jY(t,cCe),u=De(c,!1);u.offset;var I=jY(u,uCe);n=H.createElement("line",Jo({},I,{x1:r,y1:a,x2:i,y2:o,fill:"none",key:l}))}return n}function fCe(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Bn(Bn({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return sE(a,u)});return H.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function hCe(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Bn(Bn({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return sE(a,u)});return H.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function pCe(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var I=l.map(function(m){return Math.round(m+a-a)}).sort(function(m,p){return m-p});a!==I[0]&&I.unshift(0);var d=I.map(function(m,p){var h=!I[p+1],b=h?a+o-m:I[p+1]-m;if(b<=0)return null;var y=p%t.length;return H.createElement("rect",{key:"react-".concat(p),y:m,x:r,height:b,width:i,stroke:"none",fill:t[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function bCe(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var I=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,p){return m-p});i!==I[0]&&I.unshift(0);var d=I.map(function(m,p){var h=!I[p+1],b=h?i+l-m:I[p+1]-m;if(b<=0)return null;var y=p%r.length;return H.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:b,height:c,stroke:"none",fill:r[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var yCe=function(t,n){var r=t.xAxis,a=t.width,i=t.height,o=t.offset;return v9(vS(Bn(Bn(Bn({},gs.defaultProps),r),{},{ticks:qa(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,n)},ZCe=function(t,n){var r=t.yAxis,a=t.width,i=t.height,o=t.offset;return v9(vS(Bn(Bn(Bn({},gs.defaultProps),r),{},{ticks:qa(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,n)},Dg={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function cE(e){var t,n,r,a,i,o,l=pS(),c=bS(),u=sde(),I=Bn(Bn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Dg.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Dg.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Dg.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Dg.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Dg.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Dg.verticalFill,x:de(e.x)?e.x:u.left,y:de(e.y)?e.y:u.top,width:de(e.width)?e.width:u.width,height:de(e.height)?e.height:u.height}),d=I.x,m=I.y,p=I.width,h=I.height,b=I.syncWithTicks,y=I.horizontalValues,v=I.verticalValues,G=ode(),S=gde();if(!de(p)||p<=0||!de(h)||h<=0||!de(d)||d!==+d||!de(m)||m!==+m)return null;var R=I.verticalCoordinatesGenerator||yCe,B=I.horizontalCoordinatesGenerator||ZCe,V=I.horizontalPoints,W=I.verticalPoints;if((!V||!V.length)&&He(B)){var X=y&&y.length,N=B({yAxis:S?Bn(Bn({},S),{},{ticks:X?y:S.ticks}):void 0,width:l,height:c,offset:u},X?!0:b);oi(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(eg(N),"]")),Array.isArray(N)&&(V=N)}if((!W||!W.length)&&He(R)){var x=v&&v.length,Y=R({xAxis:G?Bn(Bn({},G),{},{ticks:x?v:G.ticks}):void 0,width:l,height:c,offset:u},x?!0:b);oi(Array.isArray(Y),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(eg(Y),"]")),Array.isArray(Y)&&(W=Y)}return H.createElement("g",{className:"recharts-cartesian-grid"},H.createElement(mCe,{fill:I.fill,fillOpacity:I.fillOpacity,x:I.x,y:I.y,width:I.width,height:I.height,ry:I.ry}),H.createElement(fCe,Jo({},I,{offset:u,horizontalPoints:V,xAxis:G,yAxis:S})),H.createElement(hCe,Jo({},I,{offset:u,verticalPoints:W,xAxis:G,yAxis:S})),H.createElement(pCe,Jo({},I,{horizontalPoints:V})),H.createElement(bCe,Jo({},I,{verticalPoints:W})))}cE.displayName="CartesianGrid";var vCe=["type","layout","connectNulls","ref"],GCe=["key"];function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function LY(e,t){if(e==null)return{};var n=BCe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function BCe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Wc(){return Wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wc.apply(this,arguments)}function zY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zY(Object(n),!0).forEach(function(r){zr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tg(e){return kCe(e)||WCe(e)||wCe(e)||SCe()}function SCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wCe(e,t){if(e){if(typeof e=="string")return eG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eG(e,t)}}function WCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kCe(e){if(Array.isArray(e))return eG(e)}function eG(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IE(r.key),r)}}function RCe(e,t,n){return UY(e.prototype,t),UY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xCe(e,t,n){return t=bA(t),XCe(e,uE()?Reflect.construct(t,n,bA(e).constructor):t.apply(e,n))}function XCe(e,t){if(t&&(Fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JCe(e)}function JCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uE=function(){return!!e})()}function bA(e){return bA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bA(e)}function YCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tG(e,t)}function tG(e,t){return tG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},tG(e,t)}function zr(e,t,n){return t=IE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IE(e){var t=NCe(e,"string");return Fl(t)=="symbol"?t:t+""}function NCe(e,t){if(Fl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pi=function(e){function t(){var n;VCe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=xCe(this,t,[].concat(a)),zr(n,"state",{isAnimationFinished:!0,totalLength:0}),zr(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),zr(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(v,G){return v+G});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var I=Math.floor(o/u),d=o%u,m=l-o,p=[],h=0,b=0;h<c.length;b+=c[h],++h)if(b+c[h]>d){p=[].concat(Tg(c.slice(0,h)),[d-b]);break}var y=p.length%2===0?[0,m]:[m];return[].concat(Tg(t.repeat(c,I)),Tg(p),y).map(function(v){return"".concat(v,"px")}).join(", ")}),zr(n,"id",Du("recharts-line-")),zr(n,"pathRef",function(o){n.mainCurve=o}),zr(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),zr(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return YCe(t,e),RCe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,I=i.children,d=wr(I,Pu);if(!d)return null;var m=function(b,y){return{x:b.x,y:b.y,value:b.value,errorVal:cr(b.payload,y)}},p={clipPath:r?"url(#clipPath-".concat(a,")"):null};return H.createElement(Mt,p,d.map(function(h){return H.cloneElement(h,{key:"bar-".concat(h.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(r,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,I=l.dataKey,d=De(this.props,!1),m=De(c,!0),p=u.map(function(b,y){var v=$n($n($n({key:"dot-".concat(y),r:3},d),m),{},{value:b.value,dataKey:I,cx:b.x,cy:b.y,index:y,payload:b.payload});return t.renderDotItem(c,v)}),h={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return H.createElement(Mt,Wc({className:"recharts-line-dots",key:"dots"},h),p)}},{key:"renderCurveStatically",value:function(r,a,i,o){var l=this.props,c=l.type,u=l.layout,I=l.connectNulls;l.ref;var d=LY(l,vCe),m=$n($n($n({},De(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:r},o),{},{type:c,layout:u,connectNulls:I});return H.createElement(xv,Wc({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,I=o.animationBegin,d=o.animationDuration,m=o.animationEasing,p=o.animationId,h=o.animateNewValues,b=o.width,y=o.height,v=this.state,G=v.prevPoints,S=v.totalLength;return H.createElement(Ci,{begin:I,duration:d,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(R){var B=R.t;if(G){var V=G.length/l.length,W=l.map(function(F,E){var M=Math.floor(E*V);if(G[M]){var T=G[M],z=Ur(T.x,F.x),P=Ur(T.y,F.y);return $n($n({},F),{},{x:z(B),y:P(B)})}if(h){var L=Ur(b*2,F.x),q=Ur(y/2,F.y);return $n($n({},F),{},{x:L(B),y:q(B)})}return $n($n({},F),{},{x:F.x,y:F.y})});return i.renderCurveStatically(W,r,a)}var X=Ur(0,S),N=X(B),x;if(c){var Y="".concat(c).split(/[,\s]+/gim).map(function(F){return parseFloat(F)});x=i.getStrokeDasharray(N,S,Y)}else x=i.generateSimpleStrokeDasharray(S,N);return i.renderCurveStatically(l,r,a,{strokeDasharray:x})})}},{key:"renderCurve",value:function(r,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,I=c.totalLength;return l&&o&&o.length&&(!u&&I>0||!Ym(u,o))?this.renderCurveWithAnimation(r,a):this.renderCurveStatically(o,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,I=a.yAxis,d=a.top,m=a.left,p=a.width,h=a.height,b=a.isAnimationActive,y=a.id;if(i||!l||!l.length)return null;var v=this.state.isAnimationFinished,G=l.length===1,S=Ve("recharts-line",c),R=u&&u.allowDataOverflow,B=I&&I.allowDataOverflow,V=R||B,W=Me(y)?this.id:y,X=(r=De(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},N=X.r,x=N===void 0?3:N,Y=X.strokeWidth,F=Y===void 0?2:Y,E=aee(o)?o:{},M=E.clipDot,T=M===void 0?!0:M,z=x*2+F;return H.createElement(Mt,{className:S},R||B?H.createElement("defs",null,H.createElement("clipPath",{id:"clipPath-".concat(W)},H.createElement("rect",{x:R?m:m-p/2,y:B?d:d-h/2,width:R?p:p*2,height:B?h:h*2})),!T&&H.createElement("clipPath",{id:"clipPath-dots-".concat(W)},H.createElement("rect",{x:m-z/2,y:d-z/2,width:p+z,height:h+z}))):null,!G&&this.renderCurve(V,W),this.renderErrorBar(V,W),(G||o)&&this.renderDots(V,T,W),(!b||v)&&_i.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:a.curPoints}:r.points!==a.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,a){for(var i=r.length%2!==0?[].concat(Tg(r),[0]):r,o=[],l=0;l<a;++l)o=[].concat(Tg(o),Tg(i));return o}},{key:"renderDotItem",value:function(r,a){var i;if(H.isValidElement(r))i=H.cloneElement(r,a);else if(He(r))i=r(a);else{var o=a.key,l=LY(a,GCe),c=Ve("recharts-line-dot",typeof r!="boolean"?r.className:"");i=H.createElement(AS,Wc({key:o},l,{className:c}))}return i}}])}(k.PureComponent);zr(Pi,"displayName","Line");zr(Pi,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!gi.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});zr(Pi,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,I=t.layout,d=c.map(function(m,p){var h=cr(m,o);return I==="horizontal"?{x:c1({axis:n,ticks:a,bandSize:l,entry:m,index:p}),y:Me(h)?null:r.scale(h),value:h,payload:m}:{x:Me(h)?null:n.scale(h),y:c1({axis:r,ticks:i,bandSize:l,entry:m,index:p}),value:h,payload:m}});return $n({points:d,layout:I},u)});function Kl(e){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kl(e)}function HCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AE(r.key),r)}}function KCe(e,t,n){return FCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ECe(e,t,n){return t=yA(t),MCe(e,dE()?Reflect.construct(t,n||[],yA(e).constructor):t.apply(e,n))}function MCe(e,t){if(t&&(Kl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DCe(e)}function DCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dE=function(){return!!e})()}function yA(e){return yA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yA(e)}function TCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nG(e,t)}function nG(e,t){return nG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},nG(e,t)}function CE(e,t,n){return t=AE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AE(e){var t=jCe(e,"string");return Kl(t)=="symbol"?t:t+""}function jCe(e,t){if(Kl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rG(){return rG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rG.apply(this,arguments)}function LCe(e){var t=e.xAxisId,n=pS(),r=bS(),a=q9(t);return a==null?null:H.createElement(gs,rG({},a,{className:Ve("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return qa(o,!0)}}))}var Lm=function(e){function t(){return HCe(this,t),ECe(this,t,arguments)}return TCe(t,e),KCe(t,[{key:"render",value:function(){return H.createElement(LCe,this.props)}}])}(H.Component);CE(Lm,"displayName","XAxis");CE(Lm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function El(e){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},El(e)}function zCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hE(r.key),r)}}function PCe(e,t,n){return UCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OCe(e,t,n){return t=ZA(t),QCe(e,mE()?Reflect.construct(t,n||[],ZA(e).constructor):t.apply(e,n))}function QCe(e,t){if(t&&(El(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Ce(e)}function _Ce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mE=function(){return!!e})()}function ZA(e){return ZA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ZA(e)}function qCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aG(e,t)}function aG(e,t){return aG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},aG(e,t)}function fE(e,t,n){return t=hE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hE(e){var t=$Ce(e,"string");return El(t)=="symbol"?t:t+""}function $Ce(e,t){if(El(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(El(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iG(){return iG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iG.apply(this,arguments)}var eAe=function(t){var n=t.yAxisId,r=pS(),a=bS(),i=$9(n);return i==null?null:H.createElement(gs,iG({},i,{className:Ve("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return qa(l,!0)}}))},zm=function(e){function t(){return zCe(this,t),OCe(this,t,arguments)}return qCe(t,e),PCe(t,[{key:"render",value:function(){return H.createElement(eAe,this.props)}}])}(H.Component);fE(zm,"displayName","YAxis");fE(zm,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function PY(e){return aAe(e)||rAe(e)||nAe(e)||tAe()}function tAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nAe(e,t){if(e){if(typeof e=="string")return oG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oG(e,t)}}function rAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aAe(e){if(Array.isArray(e))return oG(e)}function oG(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gG=function(t,n,r,a,i){var o=wr(t,ZS),l=wr(t,Dm),c=[].concat(PY(o),PY(l)),u=wr(t,jm),I="".concat(a,"Id"),d=a[0],m=n;if(c.length&&(m=c.reduce(function(b,y){if(y.props[I]===r&&Va(y.props,"extendDomain")&&de(y.props[d])){var v=y.props[d];return[Math.min(b[0],v),Math.max(b[1],v)]}return b},m)),u.length){var p="".concat(d,"1"),h="".concat(d,"2");m=u.reduce(function(b,y){if(y.props[I]===r&&Va(y.props,"extendDomain")&&de(y.props[p])&&de(y.props[h])){var v=y.props[p],G=y.props[h];return[Math.min(b[0],v,G),Math.max(b[1],v,G)]}return b},m)}return i&&i.length&&(m=i.reduce(function(b,y){return de(y)?[Math.min(b[0],y),Math.max(b[1],y)]:b},m)),m},IZ={exports:{}},OY;function iAe(){return OY||(OY=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,I){this.fn=c,this.context=u,this.once=I||!1}function i(c,u,I,d,m){if(typeof I!="function")throw new TypeError("The listener must be a function");var p=new a(I,d||c,m),h=n?n+u:u;return c._events[h]?c._events[h].fn?c._events[h]=[c._events[h],p]:c._events[h].push(p):(c._events[h]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],I,d;if(this._eventsCount===0)return u;for(d in I=this._events)t.call(I,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(I)):u},l.prototype.listeners=function(u){var I=n?n+u:u,d=this._events[I];if(!d)return[];if(d.fn)return[d.fn];for(var m=0,p=d.length,h=new Array(p);m<p;m++)h[m]=d[m].fn;return h},l.prototype.listenerCount=function(u){var I=n?n+u:u,d=this._events[I];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,I,d,m,p,h){var b=n?n+u:u;if(!this._events[b])return!1;var y=this._events[b],v=arguments.length,G,S;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,I),!0;case 3:return y.fn.call(y.context,I,d),!0;case 4:return y.fn.call(y.context,I,d,m),!0;case 5:return y.fn.call(y.context,I,d,m,p),!0;case 6:return y.fn.call(y.context,I,d,m,p,h),!0}for(S=1,G=new Array(v-1);S<v;S++)G[S-1]=arguments[S];y.fn.apply(y.context,G)}else{var R=y.length,B;for(S=0;S<R;S++)switch(y[S].once&&this.removeListener(u,y[S].fn,void 0,!0),v){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,I);break;case 3:y[S].fn.call(y[S].context,I,d);break;case 4:y[S].fn.call(y[S].context,I,d,m);break;default:if(!G)for(B=1,G=new Array(v-1);B<v;B++)G[B-1]=arguments[B];y[S].fn.apply(y[S].context,G)}}return!0},l.prototype.on=function(u,I,d){return i(this,u,I,d,!1)},l.prototype.once=function(u,I,d){return i(this,u,I,d,!0)},l.prototype.removeListener=function(u,I,d,m){var p=n?n+u:u;if(!this._events[p])return this;if(!I)return o(this,p),this;var h=this._events[p];if(h.fn)h.fn===I&&(!m||h.once)&&(!d||h.context===d)&&o(this,p);else{for(var b=0,y=[],v=h.length;b<v;b++)(h[b].fn!==I||m&&!h[b].once||d&&h[b].context!==d)&&y.push(h[b]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var I;return u?(I=n?n+u:u,this._events[I]&&o(this,I)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}(IZ)),IZ.exports}var oAe=iAe();const gAe=ut(oAe);var dZ=new gAe,CZ="recharts.syncMouseEvents";function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}function lAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sAe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pE(r.key),r)}}function cAe(e,t,n){return sAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function AZ(e,t,n){return t=pE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pE(e){var t=uAe(e,"string");return pu(t)=="symbol"?t:t+""}function uAe(e,t){if(pu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(pu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var IAe=function(){function e(){lAe(this,e),AZ(this,"activeIndex",0),AZ(this,"coordinateList",[]),AZ(this,"layout","horizontal")}return cAe(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,i=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,I=n.offset,d=I===void 0?null:I,m=n.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,I=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=i+c+u,m=o+this.offset.top+l/2+I;this.mouseHandlerCallback({pageX:d,pageY:m})}}}])}();function dAe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&de(r)&&de(a))return!0}return!1}function CAe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function bE(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,i=e.endAngle,o=mn(t,n,r,a),l=mn(t,n,r,i);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function AAe(e,t,n){var r,a,i,o;if(e==="horizontal")r=t.x,i=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,I=t.outerRadius,d=t.angle,m=mn(l,c,u,d),p=mn(l,c,I,d);r=m.x,a=m.y,i=p.x,o=p.y}else return bE(t);return[{x:r,y:a},{x:i,y:o}]}function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function QY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QY(Object(n),!0).forEach(function(r){mAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mAe(e,t,n){return t=fAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fAe(e){var t=hAe(e,"string");return bu(t)=="symbol"?t:t+""}function hAe(e,t){if(bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pAe(e){var t,n,r=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,I=e.tooltipAxisBandSize,d=e.layout,m=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!i||!o||m!=="ScatterChart"&&a!=="axis")return null;var h,b=xv;if(m==="ScatterChart")h=o,b=mue;else if(m==="BarChart")h=CAe(d,o,c,I),b=CS;else if(d==="radial"){var y=bE(o),v=y.cx,G=y.cy,S=y.radius,R=y.startAngle,B=y.endAngle;h={cx:v,cy:G,startAngle:R,endAngle:B,innerRadius:S,outerRadius:S},b=W9}else h={points:AAe(d,o,c)},b=xv;var V=Vd(Vd(Vd(Vd({stroke:"#ccc",pointerEvents:"none"},c),h),De(p,!1)),{},{payload:l,payloadIndex:u,className:Ve("recharts-tooltip-cursor",p.className)});return k.isValidElement(p)?k.cloneElement(p,V):k.createElement(b,V)}var bAe=["item"],yAe=["children","className","width","height","style","compact","title","desc"];function Ml(e){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ml(e)}function Pg(){return Pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pg.apply(this,arguments)}function _Y(e,t){return GAe(e)||vAe(e,t)||ZE(e,t)||ZAe()}function ZAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(I){u=!0,a=I}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function GAe(e){if(Array.isArray(e))return e}function qY(e,t){if(e==null)return{};var n=BAe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function BAe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function SAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wAe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vE(r.key),r)}}function WAe(e,t,n){return wAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kAe(e,t,n){return t=vA(t),VAe(e,yE()?Reflect.construct(t,n,vA(e).constructor):t.apply(e,n))}function VAe(e,t){if(t&&(Ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RAe(e)}function RAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yE=function(){return!!e})()}function vA(e){return vA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vA(e)}function xAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lG(e,t)}function lG(e,t){return lG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},lG(e,t)}function Dl(e){return YAe(e)||JAe(e)||ZE(e)||XAe()}function XAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZE(e,t){if(e){if(typeof e=="string")return sG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sG(e,t)}}function JAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YAe(e){if(Array.isArray(e))return sG(e)}function sG(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$Y(Object(n),!0).forEach(function(r){ke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$Y(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ke(e,t,n){return t=vE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vE(e){var t=NAe(e,"string");return Ml(t)=="symbol"?t:t+""}function NAe(e,t){if(Ml(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HAe={xAxis:["bottom","top"],yAxis:["left","right"]},FAe={width:"100%",height:"100%"},GE={x:0,y:0};function Rd(e){return e}var KAe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},EAe=function(t,n,r,a){var i=n.find(function(I){return I&&I.index===r});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return ae(ae(ae({},a),mn(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return ae(ae(ae({},a),mn(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return GE},Um=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Dl(l),Dl(u)):l},[]);return o.length>0?o:t&&t.length&&de(a)&&de(i)?t.slice(a,i+1):[]};function BE(e){return e==="number"?[0,"auto"]:void 0}var cG=function(t,n,r,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Um(n,t);return r<0||!i||!i.length||r>=l.length?null:i.reduce(function(c,u){var I,d=(I=u.props.data)!==null&&I!==void 0?I:n;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?l:d;m=WC(p,o.dataKey,a)}else m=d&&d[r]||l[r];return m?[].concat(Dl(c),[B9(u,m)]):c},[])},eN=function(t,n,r,a){var i=a||{x:t.chartX,y:t.chartY},o=KAe(i,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,I=rle(o,l,u,c);if(I>=0&&u){var d=u[I]&&u[I].value,m=cG(t,n,I,d),p=EAe(r,l,I,i);return{activeTooltipIndex:I,activeLabel:d,activePayload:m,activeCoordinate:p}}return null},MAe=function(t,n){var r=n.axes,a=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,I=t.layout,d=t.children,m=t.stackOffset,p=Z9(I,i);return r.reduce(function(h,b){var y,v=b.type.defaultProps!==void 0?ae(ae({},b.type.defaultProps),b.props):b.props,G=v.type,S=v.dataKey,R=v.allowDataOverflow,B=v.allowDuplicatedCategory,V=v.scale,W=v.ticks,X=v.includeHidden,N=v[o];if(h[N])return h;var x=Um(t.data,{graphicalItems:a.filter(function(O){var ue,ye=o in O.props?O.props[o]:(ue=O.type.defaultProps)===null||ue===void 0?void 0:ue[o];return ye===N}),dataStartIndex:c,dataEndIndex:u}),Y=x.length,F,E,M;dAe(v.domain,R,G)&&(F=wv(v.domain,null,R),p&&(G==="number"||V!=="auto")&&(M=Sc(x,S,"category")));var T=BE(G);if(!F||F.length===0){var z,P=(z=v.domain)!==null&&z!==void 0?z:T;if(S){if(F=Sc(x,S,G),G==="category"&&p){var L=O6(F);B&&L?(E=F,F=cA(0,Y)):B||(F=C1(P,F,b).reduce(function(O,ue){return O.indexOf(ue)>=0?O:[].concat(Dl(O),[ue])},[]))}else if(G==="category")B?F=F.filter(function(O){return O!==""&&!Me(O)}):F=C1(P,F,b).reduce(function(O,ue){return O.indexOf(ue)>=0||ue===""||Me(ue)?O:[].concat(Dl(O),[ue])},[]);else if(G==="number"){var q=lle(x,a.filter(function(O){var ue,ye,Be=o in O.props?O.props[o]:(ue=O.type.defaultProps)===null||ue===void 0?void 0:ue[o],xe="hide"in O.props?O.props.hide:(ye=O.type.defaultProps)===null||ye===void 0?void 0:ye.hide;return Be===N&&(X||!xe)}),S,i,I);q&&(F=q)}p&&(G==="number"||V!=="auto")&&(M=Sc(x,S,"category"))}else p?F=cA(0,Y):l&&l[N]&&l[N].hasStack&&G==="number"?F=m==="expand"?[0,1]:G9(l[N].stackGroups,c,u):F=y9(x,a.filter(function(O){var ue=o in O.props?O.props[o]:O.type.defaultProps[o],ye="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return ue===N&&(X||!ye)}),G,I,!0);if(G==="number")F=gG(d,F,N,i,W),P&&(F=wv(P,F,R));else if(G==="category"&&P){var ee=P,D=F.every(function(O){return ee.indexOf(O)>=0});D&&(F=ee)}}return ae(ae({},h),{},ke({},N,ae(ae({},v),{},{axisType:i,domain:F,categoricalDomain:M,duplicateDomain:E,originalDomain:(y=v.domain)!==null&&y!==void 0?y:T,isCategorical:p,layout:I})))},{})},DAe=function(t,n){var r=n.graphicalItems,a=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,I=t.layout,d=t.children,m=Um(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),p=m.length,h=Z9(I,i),b=-1;return r.reduce(function(y,v){var G=v.type.defaultProps!==void 0?ae(ae({},v.type.defaultProps),v.props):v.props,S=G[o],R=BE("number");if(!y[S]){b++;var B;return h?B=cA(0,p):l&&l[S]&&l[S].hasStack?(B=G9(l[S].stackGroups,c,u),B=gG(d,B,S,i)):(B=wv(R,y9(m,r.filter(function(V){var W,X,N=o in V.props?V.props[o]:(W=V.type.defaultProps)===null||W===void 0?void 0:W[o],x="hide"in V.props?V.props.hide:(X=V.type.defaultProps)===null||X===void 0?void 0:X.hide;return N===S&&!x}),"number",I),a.defaultProps.allowDataOverflow),B=gG(d,B,S,i)),ae(ae({},y),{},ke({},S,ae(ae({axisType:i},a.defaultProps),{},{hide:!0,orientation:Sr(HAe,"".concat(i,".").concat(b%2),null),domain:B,originalDomain:R,isCategorical:h,layout:I})))}return y},{})},TAe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,I=t.children,d="".concat(a,"Id"),m=wr(I,i),p={};return m.length?p=MAe(t,{axes:m,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=DAe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},jAe=function(t){var n=Ti(t),r=qa(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:MB(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:tA(n,r)}},tN=function(t){var n=t.children,r=t.defaultShowTooltip,a=tr(n,xl),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},LAe=function(t){return!t||!t.length?!1:t.some(function(n){var r=ii(n&&n.type);return r&&r.indexOf("Bar")>=0})},nN=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},zAe=function(t,n){var r=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,I=r.height,d=r.children,m=r.margin||{},p=tr(d,xl),h=tr(d,nl),b=Object.keys(c).reduce(function(B,V){var W=c[V],X=W.orientation;return!W.mirror&&!W.hide?ae(ae({},B),{},ke({},X,B[X]+W.width)):B},{left:m.left||0,right:m.right||0}),y=Object.keys(o).reduce(function(B,V){var W=o[V],X=W.orientation;return!W.mirror&&!W.hide?ae(ae({},B),{},ke({},X,Sr(B,"".concat(X))+W.height)):B},{top:m.top||0,bottom:m.bottom||0}),v=ae(ae({},y),b),G=v.bottom;p&&(v.bottom+=p.props.height||xl.defaultProps.height),h&&n&&(v=ole(v,a,r,n));var S=u-v.left-v.right,R=I-v.top-v.bottom;return ae(ae({brushBottom:G},v),{},{width:Math.max(S,0),height:Math.max(R,0)})},UAe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},PAe=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,I=t.formatAxisMap,d=t.defaultProps,m=function(v,G){var S=G.graphicalItems,R=G.stackGroups,B=G.offset,V=G.updateId,W=G.dataStartIndex,X=G.dataEndIndex,N=v.barSize,x=v.layout,Y=v.barGap,F=v.barCategoryGap,E=v.maxBarSize,M=nN(x),T=M.numericAxisName,z=M.cateAxisName,P=LAe(S),L=[];return S.forEach(function(q,ee){var D=Um(v.data,{graphicalItems:[q],dataStartIndex:W,dataEndIndex:X}),O=q.type.defaultProps!==void 0?ae(ae({},q.type.defaultProps),q.props):q.props,ue=O.dataKey,ye=O.maxBarSize,Be=O["".concat(T,"Id")],xe=O["".concat(z,"Id")],Te={},Xe=c.reduce(function(Yn,Jr){var lg=G["".concat(Jr.axisType,"Map")],ls=O["".concat(Jr.axisType,"Id")];lg&&lg[ls]||Jr.axisType==="zAxis"||$o();var ss=lg[ls];return ae(ae({},Yn),{},ke(ke({},Jr.axisType,ss),"".concat(Jr.axisType,"Ticks"),qa(ss)))},Te),se=Xe[z],Ge=Xe["".concat(z,"Ticks")],Je=R&&R[Be]&&R[Be].hasStack&&ble(q,R[Be].stackGroups),ge=ii(q.type).indexOf("Bar")>=0,dt=tA(se,Ge),Ee=[],Rt=P&&ale({barSize:N,stackGroups:R,totalSize:UAe(Xe,z)});if(ge){var xt,tn,Xr=Me(ye)?E:ye,aa=(xt=(tn=tA(se,Ge,!0))!==null&&tn!==void 0?tn:Xr)!==null&&xt!==void 0?xt:0;Ee=ile({barGap:Y,barCategoryGap:F,bandSize:aa!==dt?aa:dt,sizeList:Rt[xe],maxBarSize:Xr}),aa!==dt&&(Ee=Ee.map(function(Yn){return ae(ae({},Yn),{},{position:ae(ae({},Yn.position),{},{offset:Yn.position.offset-aa/2})})}))}var ia=q&&q.type&&q.type.getComposedData;ia&&L.push({props:ae(ae({},ia(ae(ae({},Xe),{},{displayedData:D,props:v,dataKey:ue,item:q,bandSize:dt,barPosition:Ee,offset:B,stackedData:Je,layout:x,dataStartIndex:W,dataEndIndex:X}))),{},ke(ke(ke({key:q.key||"item-".concat(ee)},T,Xe[T]),z,Xe[z]),"animationId",V)),childIndex:gee(q,v.children),item:q})}),L},p=function(v,G){var S=v.props,R=v.dataStartIndex,B=v.dataEndIndex,V=v.updateId;if(!w2({props:S}))return null;var W=S.children,X=S.layout,N=S.stackOffset,x=S.data,Y=S.reverseStackOrder,F=nN(X),E=F.numericAxisName,M=F.cateAxisName,T=wr(W,r),z=fle(x,T,"".concat(E,"Id"),"".concat(M,"Id"),N,Y),P=c.reduce(function(O,ue){var ye="".concat(ue.axisType,"Map");return ae(ae({},O),{},ke({},ye,TAe(S,ae(ae({},ue),{},{graphicalItems:T,stackGroups:ue.axisType===E&&z,dataStartIndex:R,dataEndIndex:B}))))},{}),L=zAe(ae(ae({},P),{},{props:S,graphicalItems:T}),G==null?void 0:G.legendBBox);Object.keys(P).forEach(function(O){P[O]=I(S,P[O],L,O.replace("Map",""),n)});var q=P["".concat(M,"Map")],ee=jAe(q),D=m(S,ae(ae({},P),{},{dataStartIndex:R,dataEndIndex:B,updateId:V,graphicalItems:T,stackGroups:z,offset:L}));return ae(ae({formattedGraphicalItems:D,graphicalItems:T,offset:L,stackGroups:z},ee),P)},h=function(y){function v(G){var S,R,B;return SAe(this,v),B=kAe(this,v,[G]),ke(B,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ke(B,"accessibilityManager",new IAe),ke(B,"handleLegendBBoxUpdate",function(V){if(V){var W=B.state,X=W.dataStartIndex,N=W.dataEndIndex,x=W.updateId;B.setState(ae({legendBBox:V},p({props:B.props,dataStartIndex:X,dataEndIndex:N,updateId:x},ae(ae({},B.state),{},{legendBBox:V}))))}}),ke(B,"handleReceiveSyncEvent",function(V,W,X){if(B.props.syncId===V){if(X===B.eventEmitterSymbol&&typeof B.props.syncMethod!="function")return;B.applySyncEvent(W)}}),ke(B,"handleBrushChange",function(V){var W=V.startIndex,X=V.endIndex;if(W!==B.state.dataStartIndex||X!==B.state.dataEndIndex){var N=B.state.updateId;B.setState(function(){return ae({dataStartIndex:W,dataEndIndex:X},p({props:B.props,dataStartIndex:W,dataEndIndex:X,updateId:N},B.state))}),B.triggerSyncEvent({dataStartIndex:W,dataEndIndex:X})}}),ke(B,"handleMouseEnter",function(V){var W=B.getMouseInfo(V);if(W){var X=ae(ae({},W),{},{isTooltipActive:!0});B.setState(X),B.triggerSyncEvent(X);var N=B.props.onMouseEnter;He(N)&&N(X,V)}}),ke(B,"triggeredAfterMouseMove",function(V){var W=B.getMouseInfo(V),X=W?ae(ae({},W),{},{isTooltipActive:!0}):{isTooltipActive:!1};B.setState(X),B.triggerSyncEvent(X);var N=B.props.onMouseMove;He(N)&&N(X,V)}),ke(B,"handleItemMouseEnter",function(V){B.setState(function(){return{isTooltipActive:!0,activeItem:V,activePayload:V.tooltipPayload,activeCoordinate:V.tooltipPosition||{x:V.cx,y:V.cy}}})}),ke(B,"handleItemMouseLeave",function(){B.setState(function(){return{isTooltipActive:!1}})}),ke(B,"handleMouseMove",function(V){V.persist(),B.throttleTriggeredAfterMouseMove(V)}),ke(B,"handleMouseLeave",function(V){B.throttleTriggeredAfterMouseMove.cancel();var W={isTooltipActive:!1};B.setState(W),B.triggerSyncEvent(W);var X=B.props.onMouseLeave;He(X)&&X(W,V)}),ke(B,"handleOuterEvent",function(V){var W=oee(V),X=Sr(B.props,"".concat(W));if(W&&He(X)){var N,x;/.*touch.*/i.test(W)?x=B.getMouseInfo(V.changedTouches[0]):x=B.getMouseInfo(V),X((N=x)!==null&&N!==void 0?N:{},V)}}),ke(B,"handleClick",function(V){var W=B.getMouseInfo(V);if(W){var X=ae(ae({},W),{},{isTooltipActive:!0});B.setState(X),B.triggerSyncEvent(X);var N=B.props.onClick;He(N)&&N(X,V)}}),ke(B,"handleMouseDown",function(V){var W=B.props.onMouseDown;if(He(W)){var X=B.getMouseInfo(V);W(X,V)}}),ke(B,"handleMouseUp",function(V){var W=B.props.onMouseUp;if(He(W)){var X=B.getMouseInfo(V);W(X,V)}}),ke(B,"handleTouchMove",function(V){V.changedTouches!=null&&V.changedTouches.length>0&&B.throttleTriggeredAfterMouseMove(V.changedTouches[0])}),ke(B,"handleTouchStart",function(V){V.changedTouches!=null&&V.changedTouches.length>0&&B.handleMouseDown(V.changedTouches[0])}),ke(B,"handleTouchEnd",function(V){V.changedTouches!=null&&V.changedTouches.length>0&&B.handleMouseUp(V.changedTouches[0])}),ke(B,"handleDoubleClick",function(V){var W=B.props.onDoubleClick;if(He(W)){var X=B.getMouseInfo(V);W(X,V)}}),ke(B,"handleContextMenu",function(V){var W=B.props.onContextMenu;if(He(W)){var X=B.getMouseInfo(V);W(X,V)}}),ke(B,"triggerSyncEvent",function(V){B.props.syncId!==void 0&&dZ.emit(CZ,B.props.syncId,V,B.eventEmitterSymbol)}),ke(B,"applySyncEvent",function(V){var W=B.props,X=W.layout,N=W.syncMethod,x=B.state.updateId,Y=V.dataStartIndex,F=V.dataEndIndex;if(V.dataStartIndex!==void 0||V.dataEndIndex!==void 0)B.setState(ae({dataStartIndex:Y,dataEndIndex:F},p({props:B.props,dataStartIndex:Y,dataEndIndex:F,updateId:x},B.state)));else if(V.activeTooltipIndex!==void 0){var E=V.chartX,M=V.chartY,T=V.activeTooltipIndex,z=B.state,P=z.offset,L=z.tooltipTicks;if(!P)return;if(typeof N=="function")T=N(L,V);else if(N==="value"){T=-1;for(var q=0;q<L.length;q++)if(L[q].value===V.activeLabel){T=q;break}}var ee=ae(ae({},P),{},{x:P.left,y:P.top}),D=Math.min(E,ee.x+ee.width),O=Math.min(M,ee.y+ee.height),ue=L[T]&&L[T].value,ye=cG(B.state,B.props.data,T),Be=L[T]?{x:X==="horizontal"?L[T].coordinate:D,y:X==="horizontal"?O:L[T].coordinate}:GE;B.setState(ae(ae({},V),{},{activeLabel:ue,activeCoordinate:Be,activePayload:ye,activeTooltipIndex:T}))}else B.setState(V)}),ke(B,"renderCursor",function(V){var W,X=B.state,N=X.isTooltipActive,x=X.activeCoordinate,Y=X.activePayload,F=X.offset,E=X.activeTooltipIndex,M=X.tooltipAxisBandSize,T=B.getTooltipEventType(),z=(W=V.props.active)!==null&&W!==void 0?W:N,P=B.props.layout,L=V.key||"_recharts-cursor";return H.createElement(pAe,{key:L,activeCoordinate:x,activePayload:Y,activeTooltipIndex:E,chartName:n,element:V,isActive:z,layout:P,offset:F,tooltipAxisBandSize:M,tooltipEventType:T})}),ke(B,"renderPolarAxis",function(V,W,X){var N=Sr(V,"type.axisType"),x=Sr(B.state,"".concat(N,"Map")),Y=V.type.defaultProps,F=Y!==void 0?ae(ae({},Y),V.props):V.props,E=x&&x[F["".concat(N,"Id")]];return k.cloneElement(V,ae(ae({},E),{},{className:Ve(N,E.className),key:V.key||"".concat(W,"-").concat(X),ticks:qa(E,!0)}))}),ke(B,"renderPolarGrid",function(V){var W=V.props,X=W.radialLines,N=W.polarAngles,x=W.polarRadius,Y=B.state,F=Y.radiusAxisMap,E=Y.angleAxisMap,M=Ti(F),T=Ti(E),z=T.cx,P=T.cy,L=T.innerRadius,q=T.outerRadius;return k.cloneElement(V,{polarAngles:Array.isArray(N)?N:qa(T,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray(x)?x:qa(M,!0).map(function(ee){return ee.coordinate}),cx:z,cy:P,innerRadius:L,outerRadius:q,key:V.key||"polar-grid",radialLines:X})}),ke(B,"renderLegend",function(){var V=B.state.formattedGraphicalItems,W=B.props,X=W.children,N=W.width,x=W.height,Y=B.props.margin||{},F=N-(Y.left||0)-(Y.right||0),E=p9({children:X,formattedGraphicalItems:V,legendWidth:F,legendContent:u});if(!E)return null;var M=E.item,T=qY(E,bAe);return k.cloneElement(M,ae(ae({},T),{},{chartWidth:N,chartHeight:x,margin:Y,onBBoxUpdate:B.handleLegendBBoxUpdate}))}),ke(B,"renderTooltip",function(){var V,W=B.props,X=W.children,N=W.accessibilityLayer,x=tr(X,Aa);if(!x)return null;var Y=B.state,F=Y.isTooltipActive,E=Y.activeCoordinate,M=Y.activePayload,T=Y.activeLabel,z=Y.offset,P=(V=x.props.active)!==null&&V!==void 0?V:F;return k.cloneElement(x,{viewBox:ae(ae({},z),{},{x:z.left,y:z.top}),active:P,label:T,payload:P?M:[],coordinate:E,accessibilityLayer:N})}),ke(B,"renderBrush",function(V){var W=B.props,X=W.margin,N=W.data,x=B.state,Y=x.offset,F=x.dataStartIndex,E=x.dataEndIndex,M=x.updateId;return k.cloneElement(V,{key:V.key||"_recharts-brush",onChange:Sd(B.handleBrushChange,V.props.onChange),data:N,x:de(V.props.x)?V.props.x:Y.left,y:de(V.props.y)?V.props.y:Y.top+Y.height+Y.brushBottom-(X.bottom||0),width:de(V.props.width)?V.props.width:Y.width,startIndex:F,endIndex:E,updateId:"brush-".concat(M)})}),ke(B,"renderReferenceElement",function(V,W,X){if(!V)return null;var N=B,x=N.clipPathId,Y=B.state,F=Y.xAxisMap,E=Y.yAxisMap,M=Y.offset,T=V.type.defaultProps||{},z=V.props,P=z.xAxisId,L=P===void 0?T.xAxisId:P,q=z.yAxisId,ee=q===void 0?T.yAxisId:q;return k.cloneElement(V,{key:V.key||"".concat(W,"-").concat(X),xAxis:F[L],yAxis:E[ee],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:x})}),ke(B,"renderActivePoints",function(V){var W=V.item,X=V.activePoint,N=V.basePoint,x=V.childIndex,Y=V.isRange,F=[],E=W.props.key,M=W.item.type.defaultProps!==void 0?ae(ae({},W.item.type.defaultProps),W.item.props):W.item.props,T=M.activeDot,z=M.dataKey,P=ae(ae({index:x,dataKey:z,cx:X.x,cy:X.y,r:4,fill:dS(W.item),strokeWidth:2,stroke:"#fff",payload:X.payload,value:X.value},De(T,!1)),kC(T));return F.push(v.renderActiveDot(T,P,"".concat(E,"-activePoint-").concat(x))),N?F.push(v.renderActiveDot(T,ae(ae({},P),{},{cx:N.x,cy:N.y}),"".concat(E,"-basePoint-").concat(x))):Y&&F.push(null),F}),ke(B,"renderGraphicChild",function(V,W,X){var N=B.filterFormatItem(V,W,X);if(!N)return null;var x=B.getTooltipEventType(),Y=B.state,F=Y.isTooltipActive,E=Y.tooltipAxis,M=Y.activeTooltipIndex,T=Y.activeLabel,z=B.props.children,P=tr(z,Aa),L=N.props,q=L.points,ee=L.isRange,D=L.baseLine,O=N.item.type.defaultProps!==void 0?ae(ae({},N.item.type.defaultProps),N.item.props):N.item.props,ue=O.activeDot,ye=O.hide,Be=O.activeBar,xe=O.activeShape,Te=!!(!ye&&F&&P&&(ue||Be||xe)),Xe={};x!=="axis"&&P&&P.props.trigger==="click"?Xe={onClick:Sd(B.handleItemMouseEnter,V.props.onClick)}:x!=="axis"&&(Xe={onMouseLeave:Sd(B.handleItemMouseLeave,V.props.onMouseLeave),onMouseEnter:Sd(B.handleItemMouseEnter,V.props.onMouseEnter)});var se=k.cloneElement(V,ae(ae({},N.props),Xe));function Ge(Jr){return typeof E.dataKey=="function"?E.dataKey(Jr.payload):null}if(Te)if(M>=0){var Je,ge;if(E.dataKey&&!E.allowDuplicatedCategory){var dt=typeof E.dataKey=="function"?Ge:"payload.".concat(E.dataKey.toString());Je=WC(q,dt,T),ge=ee&&D&&WC(D,dt,T)}else Je=q==null?void 0:q[M],ge=ee&&D&&D[M];if(xe||Be){var Ee=V.props.activeIndex!==void 0?V.props.activeIndex:M;return[k.cloneElement(V,ae(ae(ae({},N.props),Xe),{},{activeIndex:Ee})),null,null]}if(!Me(Je))return[se].concat(Dl(B.renderActivePoints({item:N,activePoint:Je,basePoint:ge,childIndex:M,isRange:ee})))}else{var Rt,xt=(Rt=B.getItemByXY(B.state.activeCoordinate))!==null&&Rt!==void 0?Rt:{graphicalItem:se},tn=xt.graphicalItem,Xr=tn.item,aa=Xr===void 0?V:Xr,ia=tn.childIndex,Yn=ae(ae(ae({},N.props),Xe),{},{activeIndex:ia});return[k.cloneElement(aa,Yn),null,null]}return ee?[se,null,null]:[se,null]}),ke(B,"renderCustomized",function(V,W,X){return k.cloneElement(V,ae(ae({key:"recharts-customized-".concat(X)},B.props),B.state))}),ke(B,"renderMap",{CartesianGrid:{handler:Rd,once:!0},ReferenceArea:{handler:B.renderReferenceElement},ReferenceLine:{handler:Rd},ReferenceDot:{handler:B.renderReferenceElement},XAxis:{handler:Rd},YAxis:{handler:Rd},Brush:{handler:B.renderBrush,once:!0},Bar:{handler:B.renderGraphicChild},Line:{handler:B.renderGraphicChild},Area:{handler:B.renderGraphicChild},Radar:{handler:B.renderGraphicChild},RadialBar:{handler:B.renderGraphicChild},Scatter:{handler:B.renderGraphicChild},Pie:{handler:B.renderGraphicChild},Funnel:{handler:B.renderGraphicChild},Tooltip:{handler:B.renderCursor,once:!0},PolarGrid:{handler:B.renderPolarGrid,once:!0},PolarAngleAxis:{handler:B.renderPolarAxis},PolarRadiusAxis:{handler:B.renderPolarAxis},Customized:{handler:B.renderCustomized}}),B.clipPathId="".concat((S=G.id)!==null&&S!==void 0?S:Du("recharts"),"-clip"),B.throttleTriggeredAfterMouseMove=h5(B.triggeredAfterMouseMove,(R=G.throttleDelay)!==null&&R!==void 0?R:1e3/60),B.state={},B}return xAe(v,y),WAe(v,[{key:"componentDidMount",value:function(){var S,R;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(R=this.props.margin.top)!==null&&R!==void 0?R:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,R=S.children,B=S.data,V=S.height,W=S.layout,X=tr(R,Aa);if(X){var N=X.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var x=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,Y=cG(this.state,B,N,x),F=this.state.tooltipTicks[N].coordinate,E=(this.state.offset.top+V)/2,M=W==="horizontal",T=M?{x:F,y:E}:{y:F,x:E},z=this.state.formattedGraphicalItems.find(function(L){var q=L.item;return q.type.name==="Scatter"});z&&(T=ae(ae({},T),z.props.points[N].tooltipPosition),Y=z.props.points[N].tooltipPayload);var P={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:x,activePayload:Y,activeCoordinate:T};this.setState(P),this.renderCursor(X),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,R){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==R.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var B,V;this.accessibilityManager.setDetails({offset:{left:(B=this.props.margin.left)!==null&&B!==void 0?B:0,top:(V=this.props.margin.top)!==null&&V!==void 0?V:0}})}return null}},{key:"componentDidUpdate",value:function(S){OZ([tr(S.children,Aa)],[tr(this.props.children,Aa)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=tr(this.props.children,Aa);if(S&&typeof S.props.shared=="boolean"){var R=S.props.shared?"axis":"item";return l.indexOf(R)>=0?R:i}return i}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var R=this.container,B=R.getBoundingClientRect(),V=Ure(B),W={chartX:Math.round(S.pageX-V.left),chartY:Math.round(S.pageY-V.top)},X=B.width/R.offsetWidth||1,N=this.inRange(W.chartX,W.chartY,X);if(!N)return null;var x=this.state,Y=x.xAxisMap,F=x.yAxisMap,E=this.getTooltipEventType();if(E!=="axis"&&Y&&F){var M=Ti(Y).scale,T=Ti(F).scale,z=M&&M.invert?M.invert(W.chartX):null,P=T&&T.invert?T.invert(W.chartY):null;return ae(ae({},W),{},{xValue:z,yValue:P})}var L=eN(this.state,this.props.data,this.props.layout,N);return L?ae(ae({},W),L):null}},{key:"inRange",value:function(S,R){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,V=this.props.layout,W=S/B,X=R/B;if(V==="horizontal"||V==="vertical"){var N=this.state.offset,x=W>=N.left&&W<=N.left+N.width&&X>=N.top&&X<=N.top+N.height;return x?{x:W,y:X}:null}var Y=this.state,F=Y.angleAxisMap,E=Y.radiusAxisMap;if(F&&E){var M=Ti(F);return f1({x:W,y:X},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,R=this.getTooltipEventType(),B=tr(S,Aa),V={};B&&R==="axis"&&(B.props.trigger==="click"?V={onClick:this.handleClick}:V={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var W=kC(this.props,this.handleOuterEvent);return ae(ae({},W),V)}},{key:"addListener",value:function(){dZ.on(CZ,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){dZ.removeListener(CZ,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,R,B){for(var V=this.state.formattedGraphicalItems,W=0,X=V.length;W<X;W++){var N=V[W];if(N.item===S||N.props.key===S.key||R===ii(N.item.type)&&B===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,R=this.state.offset,B=R.left,V=R.top,W=R.height,X=R.width;return H.createElement("defs",null,H.createElement("clipPath",{id:S},H.createElement("rect",{x:B,y:V,height:W,width:X})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(R,B){var V=_Y(B,2),W=V[0],X=V[1];return ae(ae({},R),{},ke({},W,X.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(R,B){var V=_Y(B,2),W=V[0],X=V[1];return ae(ae({},R),{},ke({},W,X.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var R;return(R=this.state.xAxisMap)===null||R===void 0||(R=R[S])===null||R===void 0?void 0:R.scale}},{key:"getYScaleByAxisId",value:function(S){var R;return(R=this.state.yAxisMap)===null||R===void 0||(R=R[S])===null||R===void 0?void 0:R.scale}},{key:"getItemByXY",value:function(S){var R=this.state,B=R.formattedGraphicalItems,V=R.activeItem;if(B&&B.length)for(var W=0,X=B.length;W<X;W++){var N=B[W],x=N.props,Y=N.item,F=Y.type.defaultProps!==void 0?ae(ae({},Y.type.defaultProps),Y.props):Y.props,E=ii(Y.type);if(E==="Bar"){var M=(x.data||[]).find(function(L){return oue(S,L)});if(M)return{graphicalItem:N,payload:M}}else if(E==="RadialBar"){var T=(x.data||[]).find(function(L){return f1(S,L)});if(T)return{graphicalItem:N,payload:T}}else if(Fm(N,V)||Km(N,V)||Cu(N,V)){var z=Que({graphicalItem:N,activeTooltipItem:V,itemData:F.data}),P=F.activeIndex===void 0?z:F.activeIndex;return{graphicalItem:ae(ae({},N),{},{childIndex:P}),payload:Cu(N,V)?F.data[z]:N.props.data[z]}}}return null}},{key:"render",value:function(){var S=this;if(!w2(this))return null;var R=this.props,B=R.children,V=R.className,W=R.width,X=R.height,N=R.style,x=R.compact,Y=R.title,F=R.desc,E=qY(R,yAe),M=De(E,!1);if(x)return H.createElement(xY,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},H.createElement(_Z,Pg({},M,{width:W,height:X,title:Y,desc:F}),this.renderClipPath(),k2(B,this.renderMap)));if(this.props.accessibilityLayer){var T,z;M.tabIndex=(T=this.props.tabIndex)!==null&&T!==void 0?T:0,M.role=(z=this.props.role)!==null&&z!==void 0?z:"application",M.onKeyDown=function(L){S.accessibilityManager.keyboardEvent(L)},M.onFocus=function(){S.accessibilityManager.focus()}}var P=this.parseEventsOfWrapper();return H.createElement(xY,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},H.createElement("div",Pg({className:Ve("recharts-wrapper",V),style:ae({position:"relative",cursor:"default",width:W,height:X},N)},P,{ref:function(q){S.container=q}}),H.createElement(_Z,Pg({},M,{width:W,height:X,title:Y,desc:F,style:FAe}),this.renderClipPath(),k2(B,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(k.Component);ke(h,"displayName",n),ke(h,"defaultProps",ae({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),ke(h,"getDerivedStateFromProps",function(y,v){var G=y.dataKey,S=y.data,R=y.children,B=y.width,V=y.height,W=y.layout,X=y.stackOffset,N=y.margin,x=v.dataStartIndex,Y=v.dataEndIndex;if(v.updateId===void 0){var F=tN(y);return ae(ae(ae({},F),{},{updateId:0},p(ae(ae({props:y},F),{},{updateId:0}),v)),{},{prevDataKey:G,prevData:S,prevWidth:B,prevHeight:V,prevLayout:W,prevStackOffset:X,prevMargin:N,prevChildren:R})}if(G!==v.prevDataKey||S!==v.prevData||B!==v.prevWidth||V!==v.prevHeight||W!==v.prevLayout||X!==v.prevStackOffset||!tl(N,v.prevMargin)){var E=tN(y),M={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},T=ae(ae({},eN(v,S,W)),{},{updateId:v.updateId+1}),z=ae(ae(ae({},E),M),T);return ae(ae(ae({},z),p(ae({props:y},z),v)),{},{prevDataKey:G,prevData:S,prevWidth:B,prevHeight:V,prevLayout:W,prevStackOffset:X,prevMargin:N,prevChildren:R})}if(!OZ(R,v.prevChildren)){var P,L,q,ee,D=tr(R,xl),O=D&&(P=(L=D.props)===null||L===void 0?void 0:L.startIndex)!==null&&P!==void 0?P:x,ue=D&&(q=(ee=D.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&q!==void 0?q:Y,ye=O!==x||ue!==Y,Be=!Me(S),xe=Be&&!ye?v.updateId:v.updateId+1;return ae(ae({updateId:xe},p(ae(ae({props:y},v),{},{updateId:xe,dataStartIndex:O,dataEndIndex:ue}),v)),{},{prevChildren:R,dataStartIndex:O,dataEndIndex:ue})}return null}),ke(h,"renderActiveDot",function(y,v,G){var S;return k.isValidElement(y)?S=k.cloneElement(y,v):He(y)?S=y(v):S=H.createElement(AS,v),H.createElement(Mt,{className:"recharts-active-dot",key:G},S)});var b=k.forwardRef(function(v,G){return H.createElement(h,Pg({},v,{ref:G}))});return b.displayName=h.displayName,b},OAe=PAe({chartName:"LineChart",GraphicalChild:Pi,axisComponents:[{axisType:"xAxis",AxisComp:Lm},{axisType:"yAxis",AxisComp:zm}],formatAxisMap:zIe});const QAe=()=>{const[e,t]=k.useState([]),[n,r]=k.useState({approved:0,pending:0,rejected:0}),[a,i]=k.useState(!1),o=Math.PI*2*15.9155,c=(()=>{const u=n.approved+n.pending+n.rejected;if(u===0)return{approved:0,pending:0,rejected:0};const I=n.approved/u*o,d=n.pending/u*o,m=n.rejected/u*o;return{approved:{offset:0,length:I},pending:{offset:I,length:d},rejected:{offset:I+d,length:m}}})();return k.useEffect(()=>{const u=async()=>{try{i(!0);const d=localStorage.getItem("token"),p=await(await fetch("http://localhost:3000/api/logbook/stats",{headers:{Authorization:`Bearer ${d}`}})).json();p.success&&r({approved:Number(p.data.approved)||0,pending:Number(p.data.pending)||0,rejected:Number(p.data.rejected)||0})}catch(d){console.error("Error fetching stats:",d)}finally{setTimeout(()=>i(!1),1e3)}};u();const I=setInterval(u,3e5);return()=>clearInterval(I)},[]),k.useEffect(()=>{const u=async()=>{try{const d=new Date,m=new Date(d.getTime()-7*24*60*60*1e3),p=await Ie.get("http://localhost:3000/api/absen/statistics",{params:{startDate:m.toISOString().split("T")[0],endDate:d.toISOString().split("T")[0]}});if(p.data.success){const h=p.data.data.map(b=>({day:new Date(b.date).toLocaleDateString("id-ID",{weekday:"long"}),hadir:b.hadir||0,izin:b.izin||0,alpha:b.alpha||0,total:(b.hadir||0)+(b.izin||0)+(b.alpha||0)}));t(h)}}catch(d){console.error("Error fetching attendance data:",d)}};u();const I=setInterval(u,3e5);return()=>clearInterval(I)},[]),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[A.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[A.jsx("h3",{className:"text-lg font-medium mb-4",children:"Grafik Kehadiran Mingguan"}),A.jsx("div",{className:"h-64",children:A.jsx(_X,{width:"100%",height:"100%",children:A.jsxs(OAe,{data:e,children:[A.jsx(cE,{strokeDasharray:"3 3"}),A.jsx(Lm,{dataKey:"day"}),A.jsx(zm,{}),A.jsx(Aa,{}),A.jsx(Pi,{type:"monotone",dataKey:"hadir",stroke:"#10B981",name:"Hadir"}),A.jsx(Pi,{type:"monotone",dataKey:"izin",stroke:"#F59E0B",name:"Izin"}),A.jsx(Pi,{type:"monotone",dataKey:"alpha",stroke:"#EF4444",name:"Alpha"}),A.jsx(Pi,{type:"monotone",dataKey:"total",stroke:"#6366F1",name:"Total",strokeDasharray:"5 5"})]})})}),A.jsxs("div",{className:"flex justify-center mt-4 space-x-6",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full mr-2"}),A.jsx("span",{className:"text-sm text-gray-600",children:"Hadir"})]}),A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full mr-2"}),A.jsx("span",{className:"text-sm text-gray-600",children:"Izin"})]}),A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),A.jsx("span",{className:"text-sm text-gray-600",children:"Alpha"})]}),A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full mr-2"}),A.jsx("span",{className:"text-sm text-gray-600",children:"Total"})]})]})]}),A.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[A.jsx("h3",{className:"text-lg font-medium mb-4",children:"Status Logbook"}),A.jsx("div",{className:"flex justify-center items-center h-64",children:A.jsx(_X,{width:"80%",height:"80%",children:A.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full",children:[A.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#ddd",strokeWidth:"3"}),A.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeDasharray:`${c.approved.length} ${o}`,strokeDashoffset:a?o:c.approved.offset,transform:"rotate(-90 18 18)",className:"transition-all duration-1000 ease-out"}),n.pending>0&&A.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#F59E0B",strokeWidth:"3",strokeDasharray:`${c.pending.length} ${o}`,strokeDashoffset:a?o:-c.pending.offset,transform:"rotate(-90 18 18)",className:"transition-all duration-1000 ease-out delay-100"}),n.rejected>0&&A.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#EF4444",strokeWidth:"3",strokeDasharray:`${c.rejected.length} ${o}`,strokeDashoffset:a?o:-c.rejected.offset,transform:"rotate(-90 18 18)",className:"transition-all duration-1000 ease-out delay-200"})]})})}),A.jsxs("div",{className:"flex justify-center space-x-6",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full mr-2"}),A.jsxs("span",{className:`text-sm text-gray-600 transition-opacity duration-500 ${a?"opacity-0":"opacity-100"}`,children:["Approved (",n.approved.toFixed(1),"%)"]})]}),A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full mr-2"}),A.jsxs("span",{className:`text-sm text-gray-600 transition-opacity duration-500 delay-100 ${a?"opacity-0":"opacity-100"}`,children:["Pending (",n.pending.toFixed(1),"%)"]})]}),A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),A.jsxs("span",{className:`text-sm text-gray-600 transition-opacity duration-500 delay-200 ${a?"opacity-0":"opacity-100"}`,children:["Rejected (",n.rejected.toFixed(1),"%)"]})]})]})]})]})};function _Ae(){const[e,t]=k.useState([]);k.useEffect(()=>{const i=async()=>{try{const l=new Date,u=new Date(l-24*60*60*1e3).toISOString().split("T")[0],[I,d,m]=await Promise.all([Ie.get("http://localhost:3000/api/logbook",{params:{startDate:u,endDate:new Date().toISOString().split("T")[0]}}),Ie.get("http://localhost:3000/api/reports",{params:{startDate:u,sort:"created_at",order:"desc"}}),Ie.get("http://localhost:3000/api/izin/history",{params:{startDate:u}})]),p=(b,y,v)=>b.filter(G=>{const S=new Date(G.created_at||G.tanggal);return l-S<=24*60*60*1e3}).map(G=>({type:y,description:v(G),timestamp:new Date(G.created_at||G.tanggal),status:G.status,mahasiswa_nama:G.mahasiswa_nama,details:G})),h=[...p(I.data.data,"Logbook",b=>`${b.mahasiswa_nama} mengajukan logbook untuk tanggal ${new Date(b.tanggal).toLocaleDateString("id-ID")}`),...p(d.data.data,"Laporan",b=>`${b.mahasiswa_nama} mengajukan laporan V${b.versi}`),...p(m.data.data,"Pengajuan Izin",b=>`${b.mahasiswa_nama} mengajukan izin ${b.kategori||""}`)].sort((b,y)=>y.timestamp-b.timestamp).slice(0,5);t(h)}catch(l){console.error("Error fetching activities:",l)}};i();const o=setInterval(i,5*60*1e3);return()=>clearInterval(o)},[]);const n=i=>{switch(i){case"Logbook":return A.jsx(gL,{className:"w-5 h-5 text-blue-500"});case"Laporan":return A.jsx(iH,{className:"w-5 h-5 text-green-500"});case"Pengajuan Izin":return A.jsx(sL,{className:"w-5 h-5 text-purple-500"});default:return A.jsx(ol,{className:"w-5 h-5 text-gray-500"})}},r=i=>{const o={pending:["Menunggu","bg-yellow-100 text-yellow-800"],approved:["Disetujui","bg-green-100 text-green-800"],rejected:["Ditolak","bg-red-100 text-red-800"],pending_review:["Menunggu Review","bg-blue-100 text-blue-800"],perlu_revisi:["Perlu Revisi","bg-orange-100 text-orange-800"]},[l,c]=o[i]||["Unknown","bg-gray-100 text-gray-800"];return A.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${c}`,children:l})},a=i=>{if(!(i instanceof Date)||isNaN(i))return"Invalid Date";const l=new Date-i,c=Math.floor(l/6e4),u=Math.floor(l/36e5);return c<60?`${c} menit yang lalu`:u<24?`${u} jam yang lalu`:i.toLocaleString("id-ID",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short"})};return A.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[A.jsx("h3",{className:"text-lg font-medium mb-4",children:"Aktifitas Terbaru"}),e.length>0?A.jsx("div",{className:"space-y-4",children:e.map((i,o)=>A.jsxs("div",{className:"flex items-start space-x-4 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[A.jsx("div",{className:"mt-1",children:n(i.type)}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h4",{className:"text-sm font-medium",children:i.type}),r(i.status)]}),A.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.description}),A.jsx("p",{className:"text-xs text-gray-400 mt-1",children:a(i.timestamp)})]})]},o))}):A.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Tidak ada aktivitas dalam 24 jam terakhir"})]})}const qAe=()=>A.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:A.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[A.jsx(g6,{}),A.jsx(QAe,{}),A.jsx(_Ae,{})]})});function $Ae(){return A.jsxs(A.Fragment,{children:[A.jsx(es,{type:"dashboard"}),A.jsx(qAe,{})]})}function eme(e){const{children:t,variant:n="",onClick:r=()=>{},type:a="Button"}=e;return A.jsx("button",{type:a,className:`${n} bg-gray-400 hover:bg-gray-600 text-white px-4 py-2 rounded-lg`,onClick:()=>r(),children:t})}function mZ({onFilterChange:e}){const[t,n]=k.useState({status:"Semua Status",institusi:"Semua Institusi",periode:null,search:""}),[r,a]=k.useState([]),i=["Semua Status","aktif","selesai","berhenti"];k.useEffect(()=>{(async()=>{try{const c=await Ie.get("http://localhost:3000/api/admin/institutions");a(["Semua Institusi",...c.data.institutions])}catch(c){console.error("Error fetching institutions:",c)}})()},[]);const o=(l,c)=>{const u={...t,[l]:c};n(u),e(u)};return A.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Status"}),A.jsx("select",{className:"w-full border rounded-md p-2",value:t.status,onChange:l=>o("status",l.target.value),children:i.map(l=>A.jsx("option",{value:l,children:l},l))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Institusi"}),A.jsx("select",{className:"w-full border rounded-md p-2",value:t.institusi,onChange:l=>o("institusi",l.target.value),children:r.map(l=>A.jsx("option",{value:l,children:l},l))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Periode Magang"}),A.jsxs("div",{className:"flex",children:[A.jsx(fl,{selected:t.periode,onChange:l=>o("periode",l),placeholderText:"Pilih tanggal",className:"w-full border rounded-l-md p-2 pr-44",dateFormat:"dd/MM/yyyy"}),A.jsx("button",{className:"bg-gray-100 px-3 border-y border-r rounded-r-md",onClick:()=>document.querySelector(".react-datepicker__input-container input").focus(),children:A.jsx(Lo,{size:20,className:"text-gray-500"})})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Pencarian"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:"Cari nama atau NIM",className:"flex-1 p-2 border rounded-lg",value:t.search,onChange:l=>o("search",l.target.value)}),A.jsx(eme,{onClick:()=>e(t),children:"Cari"})]})]})]})})}const tme=({isOpen:e,onClose:t,mahasiswaData:n})=>{ln();const[r,a]=k.useState({nama:"",nim:"",institusi:"",jenis_kelamin:"",alamat:"",no_telepon:"",tanggal_mulai:"",tanggal_selesai:""}),[i,o]=k.useState(!1),[l,c]=k.useState("");k.useEffect(()=>{n&&e&&a({nama:n.nama||"",nim:n.nim||"",institusi:n.institusi||"",jenis_kelamin:n.jenis_kelamin||"",alamat:n.alamat||"",no_telepon:n.no_telepon||"",tanggal_mulai:n.tanggal_mulai?new Date(n.tanggal_mulai).toISOString().split("T")[0]:"",tanggal_selesai:n.tanggal_selesai?new Date(n.tanggal_selesai).toISOString().split("T")[0]:""})},[n,e]);const u=d=>{const{name:m,value:p}=d.target;a(h=>({...h,[m]:p}))},I=async d=>{var m,p;d.preventDefault(),o(!0),c("");try{await Ie.put(`http://localhost:3000/api/admin/mahasiswa/${n.id}`,r,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t(),window.location.reload()}catch(h){console.error("Update mahasiswa error:",h),c(((p=(m=h.response)==null?void 0:m.data)==null?void 0:p.message)||"Terjadi kesalahan saat memperbarui data mahasiswa")}finally{o(!1)}};return e?A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Data Mahasiswa"}),l&&A.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:l}),A.jsxs("form",{onSubmit:I,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nama"}),A.jsx("input",{type:"text",name:"nama",value:r.nama,onChange:u,className:"w-full px-3 py-2 border rounded",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"NIM"}),A.jsx("input",{type:"text",name:"nim",value:r.nim,onChange:u,className:"w-full px-3 py-2 border rounded",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Institusi"}),A.jsx("input",{type:"text",name:"institusi",value:r.institusi,onChange:u,className:"w-full px-3 py-2 border rounded",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jenis Kelamin"}),A.jsxs("select",{name:"jenis_kelamin",value:r.jenis_kelamin,onChange:u,className:"w-full px-3 py-2 border rounded",required:!0,children:[A.jsx("option",{value:"",children:"Pilih Jenis Kelamin"}),A.jsx("option",{value:"Laki-laki",children:"Laki-laki"}),A.jsx("option",{value:"Perempuan",children:"Perempuan"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alamat"}),A.jsx("textarea",{name:"alamat",value:r.alamat,onChange:u,className:"w-full px-3 py-2 border rounded",rows:"3",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nomor Telepon"}),A.jsx("input",{type:"tel",name:"no_telepon",value:r.no_telepon,onChange:u,className:"w-full px-3 py-2 border rounded",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal Mulai Magang"}),A.jsx("input",{type:"date",name:"tanggal_mulai",value:r.tanggal_mulai,onChange:u,className:"w-full px-3 py-2 border rounded",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal Selesai Magang"}),A.jsx("input",{type:"date",name:"tanggal_selesai",value:r.tanggal_selesai,onChange:u,className:"w-full px-3 py-2 border rounded",required:!0})]}),A.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[A.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",disabled:i,children:"Batal"}),A.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:i,children:i?"Memperbarui...":"Perbarui"})]})]})]})}):null};function nme(){const[e,t]=k.useState([]),[n,r]=k.useState(!0),[a,i]=k.useState(""),[o,l]=k.useState(1),[c,u]=k.useState(1),[I,d]=k.useState({status:"Semua Status",institusi:"Semua Institusi",periode:null,search:""}),[m,p]=k.useState(null),[h,b]=k.useState(!1),y=10,{user:v}=ln(),G=async(W=o)=>{var X,N;try{const x={page:W,limit:y,...I.status!=="Semua Status"&&{status:I.status},...I.institusi!=="Semua Institusi"&&{institusi:I.institusi},...I.periode&&{periode:I.periode.toISOString().split("T")[0]},...I.search&&{search:I.search}},Y=await Ie.get("http://localhost:3000/api/admin/mahasiswa",{params:x,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});Y.data.success&&(t(Y.data.mahasiswa),u(Math.ceil(Y.data.total/y)))}catch(x){console.error("Error details:",x.response||x),i(((N=(X=x.response)==null?void 0:X.data)==null?void 0:N.message)||"Gagal memuat data mahasiswa")}finally{r(!1)}},S=W=>{d(W),l(1)};k.useEffect(()=>{v&&v.role==="admin"?G():r(!1)},[v,o,I]);const R=async W=>{var X,N;if(window.confirm("Apakah Anda yakin ingin menghapus data ini?"))try{await Ie.delete(`http://localhost:3000/api/admin/mahasiswa/${W}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t(e.filter(x=>x.id!==W)),alert("Data mahasiswa berhasil dihapus.")}catch(x){console.error("Error deleting mahasiswa:",x.response||x),alert(((N=(X=x.response)==null?void 0:X.data)==null?void 0:N.message)||"Gagal menghapus data mahasiswa.")}},B=W=>{p(W),b(!0)},V=()=>{b(!1),p(null)};return n?A.jsxs("div",{children:[A.jsx(mZ,{onFilterChange:S}),A.jsx("div",{className:"p-4 text-center",children:A.jsx("p",{children:"Loading data mahasiswa..."})})]}):a?A.jsxs("div",{children:[A.jsx(mZ,{onFilterChange:S}),A.jsxs("div",{className:"p-4 text-center text-red-500",children:[A.jsxs("p",{children:["Error: ",a]}),A.jsx("button",{onClick:()=>G(),className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Coba Lagi"})]})]}):!v||v.role!=="admin"?A.jsx("div",{className:"p-4 text-center text-yellow-600",children:"Anda harus login sebagai admin untuk melihat data ini."}):A.jsxs("div",{children:[A.jsx(mZ,{onFilterChange:S}),A.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:e.length===0?A.jsx("div",{className:"p-4 text-center text-gray-600",children:"Tidak ada data mahasiswa yang tersedia."}):A.jsxs(A.Fragment,{children:[A.jsxs("table",{className:"w-full",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-gray-50",children:[A.jsx("th",{className:"p-4 text-left",children:"Nama"}),A.jsx("th",{className:"p-4 text-left",children:"NIM"}),A.jsx("th",{className:"p-4 text-left",children:"Institusi"}),A.jsx("th",{className:"p-4 text-left",children:"Periode Magang"}),A.jsx("th",{className:"p-4 text-left",children:"Status"}),A.jsx("th",{className:"p-4 text-left",children:"Aksi"})]})}),A.jsx("tbody",{children:e.map(W=>A.jsxs("tr",{className:"border-t",children:[A.jsx("td",{className:"p-4",children:A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("img",{src:W.photo_profile||"/api/placeholder/40/40",alt:W.nama,className:"h-10 w-10 rounded-full object-cover"}),A.jsxs("div",{children:[A.jsx("div",{className:"font-medium",children:W.nama}),A.jsx("div",{className:"text-gray-500 text-sm",children:W.email})]})]})}),A.jsx("td",{className:"p-4",children:W.nim}),A.jsx("td",{className:"p-4",children:W.institusi}),A.jsxs("td",{className:"p-4",children:[new Date(W.tanggal_mulai).toLocaleDateString()," -"," ",new Date(W.tanggal_selesai).toLocaleDateString()]}),A.jsx("td",{className:"p-4",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${W.status==="aktif"?"bg-green-100 text-green-800":W.status==="selesai"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:W.status})}),A.jsx("td",{className:"p-4",children:A.jsxs("div",{className:"flex space-x-4",children:[A.jsx("button",{className:"text-blue-500 hover:bg-blue-50 p-1",onClick:()=>B(W),children:A.jsx(gH,{size:20})}),A.jsx("button",{className:"text-red-500 hover:bg-red-50 p-1",onClick:()=>R(W.id),children:A.jsx(ML,{size:20})})]})})]},W.id))})]}),A.jsxs("div",{className:"p-4 border-t flex items-center justify-between",children:[A.jsxs("div",{className:"text-gray-600",children:["Showing ",(o-1)*y+1," to"," ",Math.min(o*y,e.length)," of"," ",e.length," entries"]}),A.jsxs("div",{className:"flex space-x-2",children:[A.jsx("button",{className:"px-3 py-1 border rounded text-gray-600 disabled:opacity-50",onClick:()=>l(W=>Math.max(W-1,1)),disabled:o===1,children:"Previous"}),[...Array(c)].map((W,X)=>A.jsx("button",{className:`px-3 py-1 border rounded ${o===X+1?"bg-gray-100":"text-gray-600"}`,onClick:()=>l(X+1),children:X+1},X+1)),A.jsx("button",{className:"px-3 py-1 border rounded text-gray-600 disabled:opacity-50",onClick:()=>l(W=>Math.min(W+1,c)),disabled:o===c,children:"Next"})]})]})]})}),A.jsx(tme,{isOpen:h,onClose:V,mahasiswaData:m})]})}function hi(e){const{children:t}=e;return A.jsx("h1",{className:"text-2xl font-bold",children:t})}function rme(){return A.jsx("div",{className:"h-auto relative px-8 pt-[70px] w-full",children:A.jsx("div",{className:"max-w-7xl mx-auto py-8",children:A.jsxs("div",{className:"container mx-auto",children:[A.jsx("div",{className:"flex justify-between items-center mb-8",children:A.jsx(hi,{children:"Manajemen Data Intership"})}),A.jsx(nme,{})]})})})}function ame(){return A.jsxs(A.Fragment,{children:[A.jsx(es,{type:"internship"}),A.jsx(rme,{})]})}function ime(){const[e,t]=k.useState({totalMahasiswa:0,hadir:0,izin:0,alpha:0}),{user:n}=ln();k.useEffect(()=>{const i=async()=>{try{const o=await Ie.get("http://localhost:3000/api/admin/mahasiswa",{params:{status:"aktif"},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),l=new Date().toISOString().split("T")[0],c=await Ie.get("http://localhost:3000/api/absen/riwayat",{params:{tanggal:l},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(c.data.success){const u=c.data.data;t({totalMahasiswa:o.data.total||0,hadir:u.filter(I=>I.status_kehadiran==="hadir").length,izin:u.filter(I=>I.status_kehadiran==="izin").length,alpha:u.filter(I=>I.status_kehadiran==="alpha").length})}else t(u=>({...u,totalMahasiswa:o.data.total||0}))}catch(o){console.error("Error fetching stats:",o)}};if((n==null?void 0:n.role)==="admin"){i();const o=setInterval(i,3e5);return()=>clearInterval(o)}},[n]);const r=i=>{switch(i){case"Total Intership":return"text-black";case"Hadir":return"text-green-500";case"Izin":return"text-yellow-500";case"Alpha":return"text-red-500";default:return"text-gray-500"}},a=[{title:"Total Intership",value:e.totalMahasiswa},{title:"Hadir",value:e.hadir},{title:"Izin",value:e.izin},{title:"Alpha",value:e.alpha}];return A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:a.map((i,o)=>A.jsxs("div",{className:"group bg-white p-6 rounded-lg shadow hover:scale-105 duration-500",children:[A.jsx("h3",{className:"text-gray-600 mb-2 group-hover:text-red-500 duration-500",children:i.title}),A.jsx("p",{className:`text-3xl font-bold ${r(i.title)}`,children:i.value})]},o))})}function fZ({onFilterChange:e}){const[t,n]=k.useState(null),[r,a]=k.useState(""),[i,o]=k.useState("");k.useEffect(()=>{const I={startDate:t?l(t):null,endDate:t?l(t):null,status:r||"Semua Status",search:i.trim()};e(I)},[t,r,i]);const l=I=>{if(!I)return null;const d=I.getFullYear(),m=String(I.getMonth()+1).padStart(2,"0"),p=String(I.getDate()).padStart(2,"0");return`${d}-${m}-${p}`},c=()=>{n(null),a(""),o(""),e({startDate:null,endDate:null,status:"Semua Status",search:""})},u=H.forwardRef(({value:I,onClick:d,placeholder:m},p)=>A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:"text",ref:p,className:"w-full p-2 pl-10 border rounded-lg cursor-pointer bg-white pr-44",value:I||"",onClick:d,placeholder:m,readOnly:!0}),A.jsx(Lo,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}));return A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal"}),A.jsx(fl,{selected:t,onChange:I=>n(I),dateFormat:"dd/MM/yyyy",placeholderText:"Pilih tanggal",isClearable:!0,customInput:A.jsx(u,{})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Kehadiran"}),A.jsxs("select",{value:r,onChange:I=>a(I.target.value),className:"w-full p-2 border rounded-lg bg-white",children:[A.jsx("option",{value:"",children:"Semua Status"}),A.jsx("option",{value:"hadir",children:"Hadir"}),A.jsx("option",{value:"izin",children:"Izin"}),A.jsx("option",{value:"alpha",children:"Alpha"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cari Mahasiswa"}),A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:"text",value:i,onChange:I=>o(I.target.value),placeholder:"Cari nama atau NIM...",className:"w-full p-2 pl-10 pr-10 border rounded-lg"}),A.jsx(SG,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),i&&A.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:A.jsx(ro,{size:16})})]})]})]}),(t||r||i)&&A.jsx("div",{className:"mt-4 flex justify-end",children:A.jsx("button",{onClick:c,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear Filters"})})]})}function ome(){const[e,t]=k.useState([]),[n,r]=k.useState(!0),[a,i]=k.useState(""),[o,l]=k.useState(1),[c,u]=k.useState(1),[I,d]=k.useState({tanggal:null,status:"Semua Status",search:""}),[m,p]=k.useState([]),[h,b]=k.useState(!1),{user:y}=ln(),v=10,G=async(W=o)=>{var X,N;try{r(!0),i(null);const x={page:W,limit:v};I.status!=="Semua Status"&&(x.status=I.status),I.startDate&&I.endDate&&(x.startDate=I.startDate,x.endDate=I.endDate),I.search&&(x.search=I.search);const Y=await Ie.get("http://localhost:3000/api/absen/riwayat",{params:x,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Y.data.success){const F=Y.data.data.map((E,M)=>({id:E.id||`temp-${M}`,nama:E.mahasiswa_nama||"-",nim:E.nim||"-",tanggal:E.tanggal?new Date(E.tanggal).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",waktu_masuk:E.waktu_masuk?new Date(E.waktu_masuk).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"-",waktu_keluar:E.waktu_keluar?new Date(E.waktu_keluar).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"-",status_kehadiran:E.status_kehadiran||"-",dalam_radius:E.dalam_radius||!1,status_masuk:E.status_masuk||"-",uniqueKey:`${E.id||M}-${E.nim||"nonim"}-${E.tanggal||"nodate"}`}));t(F),u(Math.ceil((Y.data.total||F.length)/v))}}catch(x){console.error("Error fetching data:",x),i(((N=(X=x.response)==null?void 0:X.data)==null?void 0:N.message)||"Gagal memuat data absensi"),t([]),u(1)}finally{r(!1)}},S=async()=>{var W;if(m.length===0){alert("Pilih setidaknya satu data untuk diekspor");return}b(!0);try{const X=await Ie.post("http://localhost:3000/api/absen/export-admin",{selectedIds:m},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},responseType:"blob"});if(X.data instanceof Blob){const N=new Blob([X.data],{type:"application/pdf"}),x=window.URL.createObjectURL(N),Y=document.createElement("a");Y.href=x,Y.setAttribute("download",`Absensi_Admin_${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),window.URL.revokeObjectURL(x)}else throw new Error("Invalid response format")}catch(X){console.error("Export error:",X);let N="Gagal mengekspor data";if(X.response)if(X.response.data instanceof Blob){const x=await X.response.data.text();try{N=JSON.parse(x).message||N}catch(Y){console.error("Error parsing error response:",Y)}}else N=((W=X.response.data)==null?void 0:W.message)||N;alert(N)}finally{b(!1)}},R=W=>{d(W),l(1),p([])},B=W=>{p(W.target.checked?e.map(X=>X.id):[])},V=W=>{p(X=>X.includes(W)?X.filter(N=>N!==W):[...X,W])};return k.useEffect(()=>{(y==null?void 0:y.role)==="admin"&&G()},[y,o,I]),!y||y.role!=="admin"?A.jsxs("div",{className:"p-4 text-center text-yellow-600 bg-yellow-50 rounded-lg",children:[A.jsx(Rc,{className:"w-6 h-6 mx-auto mb-2"}),"Anda harus login sebagai admin untuk melihat data ini."]}):n?A.jsxs("div",{children:[A.jsx(fZ,{onFilterChange:R}),A.jsxs("div",{className:"p-8 text-center",children:[A.jsx(ll,{className:"w-8 h-8 animate-spin mx-auto text-blue-500"}),A.jsx("p",{className:"mt-2 text-gray-600",children:"Loading data absensi..."})]})]}):a?A.jsxs("div",{children:[A.jsx(fZ,{onFilterChange:R}),A.jsxs("div",{className:"p-6 text-center text-red-500 bg-red-50 rounded-lg mt-4",children:[A.jsx(Rc,{className:"w-8 h-8 mx-auto mb-2"}),A.jsxs("p",{className:"mb-2",children:["Error: ",a]}),A.jsx("button",{onClick:()=>G(),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Coba Lagi"})]})]}):A.jsxs("div",{className:"space-y-4",children:[A.jsx(fZ,{onFilterChange:R}),A.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsxs("div",{className:"text-sm text-gray-600",children:[m.length," data terpilih dari ",e.length," total data"]}),A.jsxs("button",{onClick:S,disabled:m.length===0||h,className:`flex items-center px-4 py-2 rounded transition-colors ${m.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"text-white bg-green-600 hover:bg-green-700"}`,children:[h?A.jsx(ll,{className:"w-4 h-4 mr-2 animate-spin"}):A.jsx(gl,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),A.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:A.jsxs("table",{className:"w-full",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"w-8 py-4 px-4",children:A.jsx("input",{type:"checkbox",checked:m.length===e.length&&e.length>0,onChange:B,className:"rounded border-gray-300 text-blue-500 focus:ring-blue-500"})}),A.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Nama"}),A.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"NIM"}),A.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Tanggal"}),A.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Waktu Masuk"}),A.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Waktu Keluar"}),A.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Status"}),A.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Ketepatan"}),A.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Lokasi"})]})}),A.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(W=>A.jsxs("tr",{className:"hover:bg-gray-50",children:[A.jsx("td",{className:"py-4 px-4",children:A.jsx("input",{type:"checkbox",checked:m.includes(W.id),onChange:()=>V(W.id),className:"rounded border-gray-300 text-blue-500 focus:ring-blue-500"})}),A.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:W.nama}),A.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:W.nim}),A.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:W.tanggal}),A.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:W.waktu_masuk}),A.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:W.waktu_keluar}),A.jsx("td",{className:"py-4 px-6",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${W.status_kehadiran==="hadir"?"bg-green-100 text-green-800":W.status_kehadiran==="izin"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:W.status_kehadiran.charAt(0).toUpperCase()+W.status_kehadiran.slice(1)})}),A.jsx("td",{className:"py-4 px-6",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${W.status_masuk==="tepat_waktu"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:W.status_masuk==="tepat_waktu"?"Tepat Waktu":"Telat"})}),A.jsx("td",{className:"py-4 px-6",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${W.dalam_radius?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:W.dalam_radius?"Dalam Radius":"Luar Radius"})})]},W.uniqueKey))})]})}),A.jsxs("div",{className:"flex justify-between items-center mt-4 px-4",children:[A.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(o-1)*v+1," to"," ",Math.min(o*v,e.length)," of"," ",e.length," entries"]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>l(W=>Math.max(W-1,1)),disabled:o===1,className:"px-4 py-2 border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(c)].map((W,X)=>A.jsx("button",{onClick:()=>l(X+1),className:`px-4 py-2 border rounded-md ${o===X+1?"bg-blue-50 text-blue-600 border-blue-200":"hover:bg-gray-50"}`,children:X+1},X)),A.jsx("button",{onClick:()=>l(W=>Math.min(W+1,c)),disabled:o===c,className:"px-4 py-2 border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}function gme(){const[e,t]=k.useState([]),[n,r]=k.useState(!0),[a,i]=k.useState(null),[o,l]=k.useState(1),c=10;k.useEffect(()=>{u()},[]);const u=async()=>{try{const G=await Ie.get("http://localhost:3000/api/izin/history",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});t(G.data.data),r(!1)}catch{i("Gagal mengambil data izin"),r(!1)}},I=async(G,S)=>{var R,B;try{S==="approve"?(await Ye.fire({title:"Konfirmasi Persetujuan",text:"Apakah Anda yakin ingin menyetujui izin ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed&&await d(G.id,"approved"):(await Ye.fire({title:"Tolak Izin",text:"Apakah Anda yakin ingin menolak izin ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280"})).isConfirmed&&await d(G.id,"rejected")}catch(V){console.error("Error in handling action:",V),await Ye.fire({title:"Error!",text:((B=(R=V.response)==null?void 0:R.data)==null?void 0:B.message)||"Terjadi kesalahan",icon:"error",confirmButtonColor:"#EF4444"})}},d=async(G,S)=>{try{await Ie.put(`http://localhost:3000/api/izin/${G}/status`,{status:S,alasan_response:""},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t(e.map(R=>R.id===G?{...R,status:S}:R)),await Ye.fire({title:"Berhasil!",text:S==="approved"?"Izin telah disetujui":"Izin telah ditolak",icon:"success",confirmButtonColor:"#10B981"})}catch(R){throw R}},m=G=>`px-2 py-1 rounded-full text-xs ${{pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[G]}`,p=G=>new Date(G).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),h=o*c,b=h-c,y=e.slice(b,h),v=Math.ceil(e.length/c);return n?A.jsx("div",{className:"flex justify-center items-center h-64",children:A.jsx(ll,{className:"w-8 h-8 animate-spin text-gray-500"})}):a?A.jsxs("div",{className:"flex justify-center items-center h-64 text-red-500",children:[A.jsx(Rc,{className:"w-6 h-6 mr-2"}),A.jsx("span",{children:a})]}):A.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mt-8",children:[A.jsxs("table",{className:"w-full",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"text-left p-4",children:"Mahasiswa"}),A.jsx("th",{className:"text-left p-4",children:"Tanggal"}),A.jsx("th",{className:"text-left p-4",children:"Kategori"}),A.jsx("th",{className:"text-left p-4",children:"Keterangan"}),A.jsx("th",{className:"text-left p-4",children:"Status"}),A.jsx("th",{className:"text-left p-4",children:"Aksi"})]})}),A.jsx("tbody",{children:y.map(G=>A.jsxs("tr",{className:"border-t",children:[A.jsx("td",{className:"p-4",children:A.jsx("div",{className:"flex items-center gap-3",children:A.jsx("div",{children:A.jsx("div",{className:"font-medium",children:G.mahasiswa_nama})})})}),A.jsxs("td",{className:"p-4",children:[p(G.tanggal_mulai)," -"," ",p(G.tanggal_selesai)]}),A.jsx("td",{className:"p-4",children:G.kategori}),A.jsx("td",{className:"p-4",children:G.keterangan}),A.jsx("td",{className:"p-4",children:A.jsx("span",{className:m(G.status),children:G.status==="pending"?"Menunggu":G.status==="approved"?"Disetujui":"Ditolak"})}),A.jsx("td",{className:"p-4",children:G.status==="pending"&&A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>I(G,"approve"),className:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Setujui",children:A.jsx(eC,{size:20})}),A.jsx("button",{onClick:()=>I(G,"reject"),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Tolak",children:A.jsx(ro,{size:20})})]})})]},G.id))})]}),A.jsx("div",{className:"p-4 border-t",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"text-gray-600",children:["Showing ",b+1," to"," ",Math.min(h,e.length)," of"," ",e.length," entries"]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-50 disabled:opacity-50",onClick:()=>l(G=>Math.max(G-1,1)),disabled:o===1,children:"Previous"}),[...Array(v)].map((G,S)=>A.jsx("button",{className:`px-4 py-2 border rounded ${o===S+1?"bg-gray-50":"hover:bg-gray-50"}`,onClick:()=>l(S+1),children:S+1},S)),A.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-50 disabled:opacity-50",onClick:()=>l(G=>Math.min(G+1,v)),disabled:o===v,children:"Next"})]})]})})]})}function lme(){return A.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:A.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[A.jsx("div",{className:"flex justify-between items-center mb-8",children:A.jsx(hi,{children:"Manajemen Absensi"})}),A.jsx(ime,{}),A.jsx(ome,{}),A.jsx(gme,{})]})})}function sme(){return A.jsxs(A.Fragment,{children:[A.jsx(es,{type:"absensi"}),A.jsx(lme,{})]})}function cme({refreshTrigger:e=0}){const[t,n]=k.useState({total:0,approved:0,pending:0,rejected:0});k.useEffect(()=>{r()},[e]);const r=async()=>{try{const i=await Ie.get("http://localhost:3000/api/logbook");if(i.data.success&&i.data.data){const o=i.data.data;n({total:o.length,approved:o.filter(l=>l.status==="approved").length,pending:o.filter(l=>l.status==="pending").length,rejected:o.filter(l=>l.status==="rejected").length})}}catch(i){console.error("Error fetching logbook stats:",i)}},a=i=>{switch(i){case"Total Logbook":return"text-black";case"Approved":return"text-green-500";case"Pending":return"text-yellow-500";case"Rejected":return"text-red-500";default:return"text-gray-500"}};return A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{title:"Total Logbook",value:t.total},{title:"Approved",value:t.approved},{title:"Pending",value:t.pending},{title:"Rejected",value:t.rejected}].map((i,o)=>A.jsxs("div",{className:"group bg-white p-6 rounded-lg shadow hover:scale-105 duration-500",children:[A.jsx("h3",{className:"text-gray-600 mb-2 group-hover:text-red-500 duration-500",children:i.title}),A.jsx("p",{className:`text-3xl font-bold ${a(i.title)}`,children:i.value})]},o))})}function ume({onFilter:e}){const[t,n]=k.useState(null),[r,a]=k.useState(""),[i,o]=k.useState("");k.useEffect(()=>{const I={};t&&(I.date=l(t)),r&&(I.status=r),i.trim()&&(I.search=i.trim()),e(I)},[t,r,i]);const l=I=>{if(!I)return"";const d=I.getFullYear(),m=String(I.getMonth()+1).padStart(2,"0"),p=String(I.getDate()).padStart(2,"0");return`${d}-${m}-${p}`},c=()=>{n(null),a(""),o(""),e({})},u=H.forwardRef(({value:I,onClick:d,placeholder:m},p)=>A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:"text",ref:p,className:"w-full p-2 pl-10 border rounded-lg cursor-pointer bg-white pr-44",value:I||"",onClick:d,placeholder:m,readOnly:!0}),A.jsx(Lo,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}));return A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal"}),A.jsx(fl,{selected:t,onChange:I=>n(I),dateFormat:"dd/MM/yyyy",placeholderText:"Pilih tanggal",isClearable:!0,customInput:A.jsx(u,{})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),A.jsxs("select",{value:r,onChange:I=>a(I.target.value),className:"w-full p-2 border rounded-lg bg-white",children:[A.jsx("option",{value:"",children:"Semua Status"}),A.jsx("option",{value:"pending",children:"Pending"}),A.jsx("option",{value:"approved",children:"Approved"}),A.jsx("option",{value:"rejected",children:"Rejected"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cari Mahasiswa"}),A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:"text",value:i,onChange:I=>o(I.target.value),placeholder:"Cari nama atau NIM...",className:"w-full p-2 pl-10 pr-10 border rounded-lg"}),A.jsx(SG,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),i&&A.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:A.jsx(ro,{size:16})})]})]})]}),(t||r||i)&&A.jsx("div",{className:"mt-4 flex justify-end",children:A.jsx("button",{onClick:c,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear Filters"})})]})}function Ime({logbooks:e,onApprove:t,onReject:n,onSelectUser:r}){const[a,i]=k.useState(null),[o,l]=k.useState(!1),[c,u]=k.useState(null),[I,d]=k.useState(""),m=(h,b)=>{a===h?(i(null),r(null)):(i(h),r({id:h,name:b}))},p=async()=>{I.trim()&&(await n(c.id,I),l(!1),u(null),d(""))};return A.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[A.jsxs("table",{className:"w-full",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"text-left p-4 w-20",children:"Select"}),A.jsx("th",{className:"text-left p-4",children:"Mahasiswa"}),A.jsx("th",{className:"text-left p-4",children:"Tanggal"}),A.jsx("th",{className:"text-left p-4",children:"Aktivitas"}),A.jsx("th",{className:"text-left p-4",children:"Progress"}),A.jsx("th",{className:"text-left p-4",children:"Status"}),A.jsx("th",{className:"text-left p-4",children:"Aksi"})]})}),A.jsx("tbody",{children:e.map(h=>A.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[A.jsx("td",{className:"p-4",children:A.jsx("button",{onClick:()=>m(h.mahasiswa_id,h.mahasiswa_nama),className:`w-6 h-6 rounded border ${a===h.mahasiswa_id?"bg-blue-500 border-blue-500":"border-gray-300"} flex items-center justify-center`,children:a===h.mahasiswa_id&&A.jsx(eC,{className:"w-4 h-4 text-white"})})}),A.jsx("td",{className:"p-4",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),A.jsxs("div",{children:[A.jsx("div",{className:"font-medium",children:h.mahasiswa_nama}),A.jsx("div",{className:"text-gray-500 text-sm",children:h.nim})]})]})}),A.jsx("td",{className:"p-4",children:h.tanggal}),A.jsx("td",{className:"p-4 max-w-md",children:h.aktivitas}),A.jsxs("td",{className:"p-4",children:[h.progress,"%"]}),A.jsx("td",{className:"p-4",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${h.status==="approved"?"bg-green-100 text-green-800":h.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:h.status})}),A.jsx("td",{className:"p-4",children:A.jsx("div",{className:"flex gap-2",children:h.status==="pending"&&A.jsxs(A.Fragment,{children:[A.jsx("button",{onClick:()=>t(h.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-full",children:A.jsx(eC,{size:20})}),A.jsx("button",{onClick:()=>{u(h),l(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:A.jsx(ro,{size:20})})]})})})]},h.id))})]}),o&&A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:A.jsx("div",{className:"bg-white rounded-lg w-full max-w-md",children:A.jsxs("div",{className:"p-6",children:[A.jsx("h3",{className:"text-lg font-medium mb-4",children:"Reject Logbook"}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("textarea",{value:I,onChange:h=>d(h.target.value),className:"w-full p-2 border rounded-md",rows:4,placeholder:"Masukkan catatan untuk mahasiswa..."}),A.jsxs("div",{className:"flex justify-end gap-3",children:[A.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Batal"}),A.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Reject"})]})]})]})})})]})}function dme(){const[e,t]=k.useState([]),[n,r]=k.useState(!0),[a,i]=k.useState(null),[o,l]=k.useState(null),[c,u]=k.useState(!1),[I,d]=k.useState({}),[m,p]=k.useState(0);k.useEffect(()=>{h()},[m]);const h=async(R={})=>{try{r(!0),i(null);const B=await Ie.get("http://localhost:3000/api/logbook",{params:R});B.data.success&&t(B.data.data)}catch(B){console.error("Error fetching logbooks:",B),i("Gagal mengambil data logbook")}finally{r(!1)}},b=R=>{d(R),h(R)},y=R=>{l(R)},v=async()=>{if(!(!(o!=null&&o.id)||c))try{u(!0);const R=await Ie.get(`http://localhost:3000/api/logbook/export/${o.id}`,{responseType:"blob"}),B=new Blob([R.data],{type:"application/pdf"}),V=window.URL.createObjectURL(B),W=document.createElement("a");W.href=V,W.download=`logbook_${o.name}_${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(W),W.click(),document.body.removeChild(W),window.URL.revokeObjectURL(V)}catch(R){console.error("Error downloading logbook:",R),await Ye.fire({title:"Gagal!",text:"Gagal mengunduh logbook",icon:"error",confirmButtonColor:"#EF4444"})}finally{u(!1)}},G=async R=>{var B,V;try{(await Ye.fire({title:"Konfirmasi Persetujuan",text:"Apakah Anda yakin ingin menyetujui logbook ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed&&(await Ie.put(`http://localhost:3000/api/logbook/${R}/status`,{status:"approved"})).data.success&&(p(N=>N+1),await h(I),await Ye.fire({title:"Berhasil!",text:"Logbook telah disetujui",icon:"success",confirmButtonColor:"#10B981"}))}catch(W){console.error("Error approving logbook:",W),await Ye.fire({title:"Gagal!",text:((V=(B=W.response)==null?void 0:B.data)==null?void 0:V.message)||"Gagal menyetujui logbook",icon:"error",confirmButtonColor:"#EF4444"})}},S=async(R,B)=>{var V,W;try{(await Ie.put(`http://localhost:3000/api/logbook/${R}/status`,{status:"rejected",catatan_admin:B})).data.success&&(p(N=>N+1),await h(I),await Ye.fire({title:"Berhasil!",text:"Logbook telah ditolak",icon:"success",confirmButtonColor:"#10B981"}))}catch(X){console.error("Error rejecting logbook:",X),await Ye.fire({title:"Gagal!",text:((W=(V=X.response)==null?void 0:V.data)==null?void 0:W.message)||"Gagal menolak logbook",icon:"error",confirmButtonColor:"#EF4444"})}};return A.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:A.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsx(hi,{children:"Manajemen Logbook"}),A.jsxs("button",{onClick:v,disabled:!o||c,className:`bg-green-600 hover:bg-green-700 text-white px-6 py-2.5 rounded-lg 
              inline-flex items-center transition-colors duration-200
              ${!o||c?"opacity-50 cursor-not-allowed":""}`,children:[A.jsx(gl,{className:"mr-2 h-5 w-5"}),c?"Mengunduh...":"Download Logbook"]})]}),a&&A.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-600 rounded-lg",children:a}),A.jsx(cme,{refreshTrigger:m}),A.jsx(ume,{onFilter:b}),n?A.jsx("div",{className:"flex justify-center items-center py-8",children:A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.length===0?A.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:"Tidak ada data logbook yang ditemukan"}):A.jsx(Ime,{logbooks:e,onSelectUser:y,onApprove:G,onReject:S}),o&&A.jsxs("div",{className:"fixed bottom-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg",children:["Selected: ",o.name]})]})})}function Cme(){return A.jsxs(A.Fragment,{children:[A.jsx(es,{type:"logbook"}),A.jsx(dme,{})]})}function Ame(e){const{children:t,variant:n="",onClick:r=()=>{},type:a="Button"}=e;return A.jsxs("button",{type:a,className:`${n} bg-green-600 hover:bg-green-800 text-white px-4 py-2 rounded-lg flex items-center gap-2`,onClick:()=>r(),children:[A.jsx(RL,{size:20}),A.jsx("span",{children:t})]})}function mme({filters:e={}}){ln();const[t,n]=k.useState({total_laporan:0,disetujui:0,pending_review:0,perlu_revisi:0,avg_progress:0,first_submit:null,last_submit:null}),[r,a]=k.useState(!0),[i,o]=k.useState("");k.useEffect(()=>{l()},[e]);const l=async()=>{try{a(!0);const d=new URLSearchParams(e).toString(),m=await Ie.get(`http://localhost:3000/api/reports/stats?${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});m.data.success&&m.data.summary&&n(m.data.summary),o("")}catch(d){console.error("Error fetching stats:",d),o("Gagal memuat statistik laporan")}finally{a(!1)}},c=d=>{switch(d){case"Total Laporan":return"text-blue-600";case"Disetujui":return"text-green-600";case"Pending Review":return"text-yellow-600";case"Perlu Revisi":return"text-red-600";default:return"text-gray-600"}},u=d=>{switch(d){case"Total Laporan":return A.jsx(iH,{className:"h-6 w-6"});case"Disetujui":return A.jsx(BG,{className:"h-6 w-6"});case"Pending Review":return A.jsx(ol,{className:"h-6 w-6"});case"Perlu Revisi":return A.jsx(TL,{className:"h-6 w-6"});default:return null}};if(r)return A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(d=>A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow animate-pulse",children:[A.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),A.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"})]},d))});const I=[{title:"Total Laporan",value:t.total_laporan},{title:"Disetujui",value:t.disetujui},{title:"Pending Review",value:t.pending_review},{title:"Perlu Revisi",value:t.perlu_revisi}];return A.jsxs(A.Fragment,{children:[i&&A.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:i}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:I.map((d,m)=>A.jsx("div",{className:"bg-white group rounded-lg p-6 shadow hover:scale-105 duration-500",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:c(d.title),children:u(d.title)}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-sm font-medium text-gray-600 group-hover:text-red-500 duration-500",children:d.title}),A.jsx("div",{className:"mt-1",children:A.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:d.value})})]})]})},m))})]})}function il(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}function ya(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}function Za(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?hme(l,d=>d.test(o)):fme(l,d=>d.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const I=t.slice(o.length);return{value:u,rest:I}}}function fme(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function hme(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function SE(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const wE=6048e5,pme=864e5,rN=Symbol.for("constructDateFrom");function no(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&rN in e?e[rN](t):e instanceof Date?new e.constructor(t):new Date(t)}function bme(e,...t){const n=no.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}let yme={};function Pm(){return yme}function ra(e,t){return no(t||e,e)}function yu(e,t){var l,c,u,I;const n=Pm(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((I=(u=n.locale)==null?void 0:u.options)==null?void 0:I.weekStartsOn)??0,a=ra(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}const Zme={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vme=(e,t,n)=>{let r;const a=Zme[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},Gme={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Bme=(e,t,n,r)=>Gme[e],Sme={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wme={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wme={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},kme={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Vme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Rme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xme=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Xme={ordinalNumber:xme,era:ya({values:Sme,defaultWidth:"wide"}),quarter:ya({values:wme,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ya({values:Wme,defaultWidth:"wide"}),day:ya({values:kme,defaultWidth:"wide"}),dayPeriod:ya({values:Vme,defaultWidth:"wide",formattingValues:Rme,defaultFormattingWidth:"wide"})},Jme=/^(\d+)(th|st|nd|rd)?/i,Yme=/\d+/i,Nme={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Hme={any:[/^b/i,/^(a|c)/i]},Fme={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Kme={any:[/1/i,/2/i,/3/i,/4/i]},Eme={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Mme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Dme={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Tme={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jme={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Lme={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zme={ordinalNumber:SE({matchPattern:Jme,parsePattern:Yme,valueCallback:e=>parseInt(e,10)}),era:Za({matchPatterns:Nme,defaultMatchWidth:"wide",parsePatterns:Hme,defaultParseWidth:"any"}),quarter:Za({matchPatterns:Fme,defaultMatchWidth:"wide",parsePatterns:Kme,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Za({matchPatterns:Eme,defaultMatchWidth:"wide",parsePatterns:Mme,defaultParseWidth:"any"}),day:Za({matchPatterns:Dme,defaultMatchWidth:"wide",parsePatterns:Tme,defaultParseWidth:"any"}),dayPeriod:Za({matchPatterns:jme,defaultMatchWidth:"any",parsePatterns:Lme,defaultParseWidth:"any"})},Ume={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Pme={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ome={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Qme={date:il({formats:Ume,defaultWidth:"full"}),time:il({formats:Pme,defaultWidth:"full"}),dateTime:il({formats:Ome,defaultWidth:"full"})},_me={code:"en-US",formatDistance:vme,formatLong:Qme,formatRelative:Bme,localize:Xme,match:zme,options:{weekStartsOn:0,firstWeekContainsDate:1}},qme={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},$me=(e,t,n)=>{let r;const a=qme[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dalam waktu "+r:r+" yang lalu":r},efe={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},tfe={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},nfe={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},rfe={date:il({formats:efe,defaultWidth:"full"}),time:il({formats:tfe,defaultWidth:"full"}),dateTime:il({formats:nfe,defaultWidth:"full"})},afe={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},ife=(e,t,n,r)=>afe[e],ofe={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},gfe={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},lfe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},sfe={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},cfe={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},ufe={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},Ife=(e,t)=>"ke-"+Number(e),dfe={ordinalNumber:Ife,era:ya({values:ofe,defaultWidth:"wide"}),quarter:ya({values:gfe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ya({values:lfe,defaultWidth:"wide"}),day:ya({values:sfe,defaultWidth:"wide"}),dayPeriod:ya({values:cfe,defaultWidth:"wide",formattingValues:ufe,defaultFormattingWidth:"wide"})},Cfe=/^ke-(\d+)?/i,Afe=/\d+/i,mfe={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},ffe={any:[/^s/i,/^(m|e)/i]},hfe={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},pfe={any:[/1/i,/2/i,/3/i,/4/i]},bfe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},yfe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},Zfe={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},vfe={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},Gfe={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},Bfe={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},Sfe={ordinalNumber:SE({matchPattern:Cfe,parsePattern:Afe,valueCallback:e=>parseInt(e,10)}),era:Za({matchPatterns:mfe,defaultMatchWidth:"wide",parsePatterns:ffe,defaultParseWidth:"any"}),quarter:Za({matchPatterns:hfe,defaultMatchWidth:"wide",parsePatterns:pfe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Za({matchPatterns:bfe,defaultMatchWidth:"wide",parsePatterns:yfe,defaultParseWidth:"any"}),day:Za({matchPatterns:Zfe,defaultMatchWidth:"wide",parsePatterns:vfe,defaultParseWidth:"any"}),dayPeriod:Za({matchPatterns:Gfe,defaultMatchWidth:"any",parsePatterns:Bfe,defaultParseWidth:"any"})},Om={code:"id",formatDistance:$me,formatLong:rfe,formatRelative:ife,localize:dfe,match:Sfe,options:{weekStartsOn:1,firstWeekContainsDate:1}};function wfe(e,t,n){var r=this,a=k.useRef(null),i=k.useRef(0),o=k.useRef(null),l=k.useRef([]),c=k.useRef(),u=k.useRef(),I=k.useRef(e),d=k.useRef(!0);I.current=e;var m=typeof window<"u",p=!t&&t!==0&&m;if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0;var h=!!(n=n||{}).leading,b=!("trailing"in n)||!!n.trailing,y="maxWait"in n,v="debounceOnServer"in n&&!!n.debounceOnServer,G=y?Math.max(+n.maxWait||0,t):null;k.useEffect(function(){return d.current=!0,function(){d.current=!1}},[]);var S=k.useMemo(function(){var R=function(x){var Y=l.current,F=c.current;return l.current=c.current=null,i.current=x,u.current=I.current.apply(F,Y)},B=function(x,Y){p&&cancelAnimationFrame(o.current),o.current=p?requestAnimationFrame(x):setTimeout(x,Y)},V=function(x){if(!d.current)return!1;var Y=x-a.current;return!a.current||Y>=t||Y<0||y&&x-i.current>=G},W=function(x){return o.current=null,b&&l.current?R(x):(l.current=c.current=null,u.current)},X=function x(){var Y=Date.now();if(V(Y))return W(Y);if(d.current){var F=t-(Y-a.current),E=y?Math.min(F,G-(Y-i.current)):F;B(x,E)}},N=function(){if(m||v){var x=Date.now(),Y=V(x);if(l.current=[].slice.call(arguments),c.current=r,a.current=x,Y){if(!o.current&&d.current)return i.current=a.current,B(X,t),h?R(a.current):u.current;if(y)return B(X,t),R(a.current)}return o.current||B(X,t),u.current}};return N.cancel=function(){o.current&&(p?cancelAnimationFrame(o.current):clearTimeout(o.current)),i.current=0,l.current=a.current=c.current=o.current=null},N.isPending=function(){return!!o.current},N.flush=function(){return o.current?W(Date.now()):u.current},N},[h,y,t,G,b,p,m,v]);return S}function Wfe(e,t){return e===t}function kfe(e,t,n){var r=Wfe,a=k.useRef(e),i=k.useState({})[1],o=wfe(k.useCallback(function(c){a.current=c,i({})},[i]),t,n),l=k.useRef(e);return r(l.current,e)||(o(e),l.current=e),[a.current,o]}function Vfe({onFilter:e}){const[t,n]=k.useState(null),[r,a]=k.useState(""),[i,o]=k.useState(""),[l,c]=k.useState(!1),[u]=kfe(i,500);k.useEffect(()=>{I()},[u,r,t]);const I=()=>{c(!0);const d={created_at:t?t.toISOString().split("T")[0]:null,status:r||null,search:i||null};Object.keys(d).forEach(m=>d[m]===null&&delete d[m]),e(d),c(!1)};return A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Tanggal Submit"}),A.jsxs("div",{className:"flex",children:[A.jsx(fl,{selected:t,onChange:d=>n(d),placeholderText:"Pilih tanggal submit",className:"w-full border rounded-l-md p-2",locale:Om,dateFormat:"dd/MM/yyyy",isClearable:!0,maxDate:new Date}),A.jsx("button",{className:"bg-gray-100 px-3 border-y border-r rounded-r-md",onClick:()=>document.querySelector(".react-datepicker__input-container input").focus(),children:A.jsx(Lo,{size:20,className:"text-gray-500"})})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Status"}),A.jsxs("select",{className:"w-full p-2 border rounded-lg",value:r,onChange:d=>a(d.target.value),children:[A.jsx("option",{value:"",children:"Semua Status"}),A.jsx("option",{value:"pending_review",children:"Pending Review"}),A.jsx("option",{value:"perlu_revisi",children:"Perlu Revisi"}),A.jsx("option",{value:"disetujui",children:"Disetujui"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Cari"}),A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg pl-10",placeholder:"Cari nama/NIM...",value:i,onChange:d=>o(d.target.value)}),A.jsx(SG,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]})]}),l&&A.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center",children:A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})}function GA(e,t){return yu(e,{...t,weekStartsOn:1})}function WE(e,t){const n=ra(e,t==null?void 0:t.in),r=n.getFullYear(),a=no(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=GA(a),o=no(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=GA(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function aN(e){const t=ra(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function iN(e,t){const n=ra(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Rfe(e,t,n){const[r,a]=bme(n==null?void 0:n.in,e,t),i=iN(r),o=iN(a),l=+i-aN(i),c=+o-aN(o);return Math.round((l-c)/pme)}function xfe(e,t){const n=WE(e,t),r=no(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),GA(r)}function Xfe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Jfe(e){return!(!Xfe(e)&&typeof e!="number"||isNaN(+ra(e)))}function Yfe(e,t){const n=ra(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Nfe(e,t){const n=ra(e,t==null?void 0:t.in);return Rfe(n,Yfe(n))+1}function Hfe(e,t){const n=ra(e,t==null?void 0:t.in),r=+GA(n)-+xfe(n);return Math.round(r/wE)+1}function kE(e,t){var I,d,m,p;const n=ra(e,t==null?void 0:t.in),r=n.getFullYear(),a=Pm(),i=(t==null?void 0:t.firstWeekContainsDate)??((d=(I=t==null?void 0:t.locale)==null?void 0:I.options)==null?void 0:d.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(m=a.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=no((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=yu(o,t),c=no((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=yu(c,t);return+n>=+l?r+1:+n>=+u?r:r-1}function Ffe(e,t){var l,c,u,I;const n=Pm(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((I=(u=n.locale)==null?void 0:u.options)==null?void 0:I.firstWeekContainsDate)??1,a=kE(e,t),i=no((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),yu(i,t)}function Kfe(e,t){const n=ra(e,t==null?void 0:t.in),r=+yu(n,t)-+Ffe(n,t);return Math.round(r/wE)+1}function ot(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Mi={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return ot(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ot(n+1,2)},d(e,t){return ot(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ot(e.getHours()%12||12,t.length)},H(e,t){return ot(e.getHours(),t.length)},m(e,t){return ot(e.getMinutes(),t.length)},s(e,t){return ot(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return ot(a,t.length)}},jg={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},oN={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Mi.y(e,t)},Y:function(e,t,n,r){const a=kE(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return ot(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):ot(i,t.length)},R:function(e,t){const n=WE(e);return ot(n,t.length)},u:function(e,t){const n=e.getFullYear();return ot(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return ot(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return ot(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Mi.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return ot(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Kfe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):ot(a,t.length)},I:function(e,t,n){const r=Hfe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):ot(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Mi.d(e,t)},D:function(e,t,n){const r=Nfe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ot(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ot(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ot(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return ot(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=jg.noon:r===0?a=jg.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=jg.evening:r>=12?a=jg.afternoon:r>=4?a=jg.morning:a=jg.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Mi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Mi.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ot(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):ot(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Mi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Mi.s(e,t)},S:function(e,t){return Mi.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return lN(r);case"XXXX":case"XX":return Wo(r);case"XXXXX":case"XXX":default:return Wo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return lN(r);case"xxxx":case"xx":return Wo(r);case"xxxxx":case"xxx":default:return Wo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+gN(r,":");case"OOOO":default:return"GMT"+Wo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+gN(r,":");case"zzzz":default:return"GMT"+Wo(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return ot(r,t.length)},T:function(e,t,n){return ot(+e,t.length)}};function gN(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+ot(i,2)}function lN(e,t){return e%60===0?(e>0?"-":"+")+ot(Math.abs(e)/60,2):Wo(e,t)}function Wo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=ot(Math.trunc(r/60),2),i=ot(r%60,2);return n+a+t+i}const sN=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},VE=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Efe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return sN(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",sN(r,t)).replace("{{time}}",VE(a,t))},Mfe={p:VE,P:Efe},Dfe=/^D+$/,Tfe=/^Y+$/,jfe=["D","DD","YY","YYYY"];function Lfe(e){return Dfe.test(e)}function zfe(e){return Tfe.test(e)}function Ufe(e,t,n){const r=Pfe(e,t,n);if(console.warn(r),jfe.includes(e))throw new RangeError(r)}function Pfe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ofe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Qfe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_fe=/^'([^]*?)'?$/,qfe=/''/g,$fe=/[a-zA-Z]/;function Qm(e,t,n){var I,d,m,p,h,b,y,v;const r=Pm(),a=(n==null?void 0:n.locale)??r.locale??_me,i=(n==null?void 0:n.firstWeekContainsDate)??((d=(I=n==null?void 0:n.locale)==null?void 0:I.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((b=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((v=(y=r.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,l=ra(e,n==null?void 0:n.in);if(!Jfe(l))throw new RangeError("Invalid time value");let c=t.match(Qfe).map(G=>{const S=G[0];if(S==="p"||S==="P"){const R=Mfe[S];return R(G,a.formatLong)}return G}).join("").match(Ofe).map(G=>{if(G==="''")return{isToken:!1,value:"'"};const S=G[0];if(S==="'")return{isToken:!1,value:ehe(G)};if(oN[S])return{isToken:!0,value:G};if(S.match($fe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:G}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(G=>{if(!G.isToken)return G.value;const S=G.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&zfe(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Lfe(S))&&Ufe(S,t,String(e));const R=oN[S[0]];return R(l,S,a.localize,u)}).join("")}function ehe(e){const t=e.match(_fe);return t?t[1].replace(qfe,"'"):e}const the=({isOpen:e,onClose:t,onSubmit:n,report:r})=>{const[a,i]=k.useState(""),[o,l]=k.useState(null),[c,u]=k.useState(!1),I=async d=>{d.preventDefault(),u(!0);try{await n({feedback:a,file:o}),i(""),l(null)}catch(m){console.error("Error in reject submission:",m)}finally{u(!1)}};return e?A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl",children:[A.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Alasan Penolakan"}),A.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:A.jsx(ro,{size:24})})]}),A.jsxs("div",{className:"p-6",children:[A.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:A.jsxs("div",{className:"grid grid-cols-2 gap-x-12 gap-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-gray-500 text-sm block mb-1",children:"Mahasiswa:"}),A.jsx("span",{className:"text-gray-900 text-lg",children:r==null?void 0:r.mahasiswa_nama})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-gray-500 text-sm block mb-1",children:"NIM:"}),A.jsx("span",{className:"text-gray-900 text-lg",children:r==null?void 0:r.nim})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-gray-500 text-sm block mb-1",children:"Versi:"}),A.jsx("span",{className:"text-gray-900 text-lg",children:r==null?void 0:r.versi})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-gray-500 text-sm block mb-1",children:"Tanggal Submit:"}),A.jsx("span",{className:"text-gray-900 text-lg",children:Qm(new Date(r==null?void 0:r.created_at),"d/M/yyyy")})]})]})}),A.jsxs("form",{onSubmit:I,children:[A.jsxs("div",{className:"mb-6",children:[A.jsxs("label",{className:"block mb-2",children:[A.jsx("span",{className:"text-gray-700 text-lg",children:"Feedback"}),A.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),A.jsx("textarea",{required:!0,value:a,onChange:d=>i(d.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:"4",placeholder:"Tuliskan feedback untuk perbaikan laporan..."})]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{className:"block mb-2",children:A.jsx("span",{className:"text-gray-700 text-lg",children:"File Revisi (Opsional)"})}),A.jsxs("div",{className:"mt-1",children:[A.jsxs("label",{className:"w-full flex items-center px-4 py-3 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50",children:[A.jsx("input",{type:"file",onChange:d=>l(d.target.files[0]),className:"hidden",accept:".pdf,.doc,.docx"}),A.jsx("span",{className:"inline-flex rounded-md shadow-sm",children:A.jsx("span",{className:"px-3 py-2 text-sm font-medium bg-white border border-gray-300 rounded-md",children:"Choose File"})}),A.jsx("span",{className:"ml-3 text-sm text-gray-600",children:o?o.name:"No file chosen"})]}),A.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Format yang diizinkan: PDF, DOC, DOCX (Maks. 10MB)"})]})]}),A.jsxs("div",{className:"flex justify-end gap-3",children:[A.jsx("button",{type:"button",onClick:t,className:"px-6 py-2.5 text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg text-lg font-medium transition-colors",disabled:c,children:"Batal"}),A.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-red-600 text-white rounded-lg text-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",disabled:c,children:c?"Mengirim...":"Kirim Feedback"})]})]})]})]})}):null};function nhe({filters:e={},onSelectionChange:t}){const[n,r]=k.useState(!1),[a,i]=k.useState(null),[o,l]=k.useState([]),[c,u]=k.useState(!0),[I,d]=k.useState(""),[m,p]=k.useState(1),[h,b]=k.useState(1),[y,v]=k.useState(0),[G,S]=k.useState([]),R=10;k.useEffect(()=>{B()},[m,e]),k.useEffect(()=>{t&&t(G)},[G]);const B=async()=>{var M,T;u(!0);try{const z=new URLSearchParams({page:m,limit:R,...e}).toString(),P=await Ie.get(`http://localhost:3000/api/reports?${z}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});P.data.success&&(l(P.data.data),b(P.data.totalPages),v(P.data.total),d(""))}catch(z){console.error("Error fetching reports:",z),d(((T=(M=z.response)==null?void 0:M.data)==null?void 0:T.message)||"Gagal memuat data laporan"),l([])}finally{u(!1)}},V=M=>{if(M.target.checked){const T=o.map(z=>z.id);S(T)}else S([])},W=M=>{S(T=>T.includes(M)?T.filter(z=>z!==M):[...T,M])},X=async(M,T)=>{var z,P;try{const L=await Ie({url:`http://localhost:3000${M}`,method:"GET",responseType:"blob",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/pdf"}}),q=new Blob([L.data],{type:"application/pdf"}),ee=window.URL.createObjectURL(q),D=document.createElement("a");D.href=ee,D.setAttribute("download",T),document.body.appendChild(D),D.click(),D.remove(),window.URL.revokeObjectURL(ee)}catch(L){console.error("Download error:",L),Ye.fire({title:"Gagal!",text:"Gagal mengunduh file. "+(((P=(z=L.response)==null?void 0:z.data)==null?void 0:P.message)||"Silakan coba lagi."),icon:"error",confirmButtonColor:"#EF4444"})}},N=async M=>{var T,z;try{(await Ye.fire({title:"Konfirmasi Persetujuan",text:"Apakah Anda yakin ingin menyetujui laporan ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#EF4444"})).isConfirmed&&(await Ie.post(`http://localhost:3000/api/reports/${M}/review`,{status:"disetujui",feedback:"Laporan disetujui"},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.success&&(await Ye.fire({title:"Berhasil!",text:"Laporan telah disetujui",icon:"success",confirmButtonColor:"#10B981"}),B())}catch(P){console.error("Error approving report:",P),await Ye.fire({title:"Gagal!",text:((z=(T=P.response)==null?void 0:T.data)==null?void 0:z.message)||"Gagal menyetujui laporan",icon:"error",confirmButtonColor:"#EF4444"})}},x=async M=>{try{(await Ye.fire({title:"Konfirmasi Penolakan",text:"Apakah Anda yakin ingin menolak laporan ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280"})).isConfirmed&&(i(M),r(!0))}catch(T){console.error("Error in rejection confirmation:",T),await Ye.fire({title:"Gagal!",text:"Terjadi kesalahan saat memproses penolakan",icon:"error",confirmButtonColor:"#EF4444"})}},Y=async M=>{var T,z;try{const P=new FormData;P.append("status","perlu_revisi"),P.append("feedback",M.feedback),M.file&&P.append("file_revisi",M.file),(await Ie.post(`http://localhost:3000/api/reports/${a.id}/review`,P,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.success&&(r(!1),await Ye.fire({title:"Berhasil!",text:"Feedback telah berhasil dikirim",icon:"success",confirmButtonColor:"#10B981"}),B())}catch(P){console.error("Error rejecting report:",P),await Ye.fire({title:"Gagal!",text:((z=(T=P.response)==null?void 0:T.data)==null?void 0:z.message)||"Gagal mengirim feedback",icon:"error",confirmButtonColor:"#EF4444"})}},F=M=>{try{return M?Qm(new Date(M),"d MMMM yyyy",{locale:Om}):"-"}catch(T){return console.error("Date formatting error:",T),M}},E=M=>{const T={pending_review:"bg-yellow-100 text-yellow-800 border border-yellow-200",perlu_revisi:"bg-red-100 text-red-800 border border-red-200",disetujui:"bg-green-100 text-green-800 border border-green-200"},z={pending_review:"Menunggu Review",perlu_revisi:"Perlu Revisi",disetujui:"Disetujui"};return A.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T[M]||"bg-gray-100 text-gray-800"}`,children:z[M]||M})};return c?A.jsx("div",{className:"bg-white rounded-lg shadow",children:A.jsxs("div",{className:"animate-pulse",children:[A.jsx("div",{className:"h-16 bg-gray-100"}),A.jsx("div",{className:"p-4 space-y-3",children:[...Array(5)].map((M,T)=>A.jsx("div",{className:"h-20 bg-gray-100 rounded"},T))})]})}):A.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[I&&A.jsx("div",{className:"p-4 bg-red-100 border-l-4 border-red-500 text-red-700",children:I}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full whitespace-nowrap",children:[A.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-4",children:A.jsx("input",{type:"checkbox",checked:G.length===o.length&&o.length>0,onChange:V,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),A.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Mahasiswa"}),A.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Tanggal Submit"}),A.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Versi"}),A.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Progress"}),A.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Status"}),A.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Dokumen"}),A.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Aksi"})]})}),A.jsx("tbody",{className:"divide-y divide-gray-200",children:o.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:"8",className:"text-center py-8 text-gray-500",children:"Tidak ada data laporan"})}):o.map(M=>{var T;return A.jsxs("tr",{className:"hover:bg-gray-50",children:[A.jsx("td",{className:"p-4",children:A.jsx("input",{type:"checkbox",checked:G.includes(M.id),onChange:()=>W(M.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),A.jsx("td",{className:"p-4",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:A.jsx("span",{className:"text-blue-600 font-medium",children:(T=M.mahasiswa_nama)==null?void 0:T.charAt(0)})}),A.jsxs("div",{children:[A.jsx("div",{className:"font-medium text-gray-900",children:M.mahasiswa_nama}),A.jsx("div",{className:"text-gray-500 text-sm",children:M.nim})]})]})}),A.jsx("td",{className:"p-4 text-gray-600",children:F(M.created_at)}),A.jsx("td",{className:"p-4 text-gray-900 font-medium",children:M.versi}),A.jsxs("td",{className:"p-4 text-gray-600 font-medium",children:[M.progress||0,"%"]}),A.jsx("td",{className:"p-4",children:E(M.status)}),A.jsx("td",{className:"p-4",children:A.jsxs("div",{className:"flex space-x-2",children:[M.file_path&&A.jsxs("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg flex items-center gap-2 transition-colors",onClick:()=>X(M.file_path,`Laporan_${M.versi}.pdf`),children:[A.jsx(kL,{size:18}),A.jsx("span",{className:"text-sm",children:"Laporan"})]}),M.file_revisi_path&&A.jsxs("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg flex items-center gap-2 transition-colors",onClick:()=>X(M.file_revisi_path,`Revisi_${M.versi}.pdf`),children:[A.jsx(SL,{size:18}),A.jsx("span",{className:"text-sm",children:"Revisi"})]})]})}),A.jsx("td",{className:"p-4",children:A.jsx("div",{className:"flex gap-2",children:M.status==="pending_review"&&A.jsxs(A.Fragment,{children:[A.jsx("button",{onClick:()=>N(M.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Setujui",children:A.jsx(eC,{size:18})}),A.jsx("button",{onClick:()=>x(M),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Tolak",children:A.jsx(ro,{size:18})})]})})})]},M.id)})})]})}),A.jsx("div",{className:"p-4 border-t border-gray-200",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"text-sm text-gray-600",children:["Menampilkan ",o.length," dari ",y," data"]}),h>1&&A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{className:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",onClick:()=>p(m-1),disabled:m===1,children:A.jsx(AL,{className:"h-5 w-5"})}),[...Array(h)].map((M,T)=>A.jsx("button",{className:`px-4 py-2 border rounded-lg hover:bg-gray-50 transition-colors ${m===T+1?"bg-blue-50 text-blue-600 border-blue-600":"text-gray-600"}`,onClick:()=>p(T+1),children:T+1},T+1)),A.jsx("button",{className:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",onClick:()=>p(m+1),disabled:m===h,children:A.jsx(fL,{className:"h-5 w-5"})})]})]})}),A.jsx(the,{isOpen:n,onClose:()=>{r(!1),i(null)},onSubmit:Y,report:a})]})}function rhe(){Ya();const[e,t]=k.useState({}),[n,r]=k.useState(!1),[a,i]=k.useState([]),o=u=>{t(u)},l=u=>{i(u)},c=async()=>{if(a.length===0){alert("Pilih laporan yang akan diekspor");return}try{r(!0);const u=await Ie({url:"http://localhost:3000/api/reports/export",method:"POST",responseType:"blob",data:{selectedIds:a},headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),I=new Blob([u.data],{type:"application/pdf"}),d=window.URL.createObjectURL(I),m=document.createElement("a");m.href=d,m.setAttribute("download",`laporan_mahasiswa_${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(d)}catch(u){console.error("Export error:",u),alert("Gagal mengekspor data. Silakan coba lagi.")}finally{r(!1)}};return A.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:A.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsx(hi,{children:"Manajemen Laporan Akhir"}),A.jsxs("div",{className:"flex gap-4 items-center",children:[a.length>0&&A.jsxs("span",{className:"text-sm text-gray-600",children:[a.length," laporan dipilih"]}),A.jsx(Ame,{onClick:c,disabled:n||a.length===0,children:n?"Mengekspor...":"Export Data"})]})]}),A.jsx(mme,{filters:e}),A.jsx(Vfe,{onFilter:o}),A.jsx(nhe,{filters:e,onSelectionChange:l})]})})}function ahe(){return A.jsxs(A.Fragment,{children:[A.jsx(es,{type:"laporan"}),A.jsx(rhe,{})]})}function ihe(){const[e,t]=k.useState({nama:"",institusi:"",sisa_hari:0});return k.useEffect(()=>{(async()=>{try{const r=localStorage.getItem("token"),a=await Ie.get("http://localhost:3000/api/user/profile",{headers:{Authorization:`Bearer ${r}`}});if(a.data.success){const{data:i}=a.data;t({nama:i.profile.nama,institusi:i.profile.institusi,sisa_hari:i.profile.sisa_hari})}}catch(r){console.error("Error fetching user data:",r)}})()},[]),A.jsx("div",{className:"bg-white rounded-xl shadow p-4 md:p-8 mb-6",children:A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[A.jsxs("div",{className:"mb-4 md:mb-0",children:[A.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Selamat Datang, ",e.nama]}),A.jsxs("p",{className:"text-gray-600",children:["Magang - ",e.institusi]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("div",{className:"text-gray-600",children:"Masa Magang"}),A.jsxs("div",{className:"text-red-500 text-xl font-medium",children:[e.sisa_hari," Hari Tersisa"]})]})]})})}function ohe(){const[e,t]=k.useState(null),[n,r]=k.useState(!0),[a,i]=k.useState(""),[o,l]=k.useState(null),c=async()=>{var u,I;try{r(!0),i(null);const d=localStorage.getItem("token"),m=await Ie.get("http://localhost:3000/api/absen/absensi",{params:{page:1,limit:1},headers:{Authorization:`Bearer ${d}`}});if(m.data.success&&m.data.data[0]){const h=m.data.data[0],b={id:h.id,tanggal:new Date(h.tanggal).toLocaleDateString("id-ID"),waktu_masuk:h.waktu_masuk?new Date(h.waktu_masuk).toLocaleTimeString("id-ID"):null,waktu_keluar:h.waktu_keluar?new Date(h.waktu_keluar).toLocaleTimeString("id-ID"):null,status_kehadiran:h.status_kehadiran||"-",status_masuk:h.status_masuk||"-",dalam_radius:h.dalam_radius||!1};t(b)}const p=await Ie.get("http://localhost:3000/api/user/profileQr",{headers:{Authorization:`Bearer ${d}`}});p.data.success&&p.data.data.qr_code&&l(p.data.data.qr_code)}catch(d){console.error("Error fetching data:",d),i(((I=(u=d.response)==null?void 0:u.data)==null?void 0:I.message)||"Failed to load data")}finally{r(!1)}};return k.useEffect(()=>{c()},[]),n?A.jsx("div",{className:"bg-white rounded-xl shadow p-4 md:p-8 mb-6",children:A.jsx("div",{className:"p-4 text-center",children:A.jsx("p",{children:"Loading data..."})})}):a?A.jsx("div",{className:"bg-white rounded-xl shadow p-4 md:p-8 mb-6",children:A.jsxs("div",{className:"p-4 text-center text-red-500",children:[A.jsxs("p",{children:["Error: ",a]}),A.jsx("button",{onClick:c,className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry"})]})}):A.jsx("div",{className:"bg-white rounded-xl shadow p-4 md:p-8 mb-6",children:A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsx("div",{className:"flex flex-col items-center",children:o?A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsx("img",{src:o,alt:"QR Code",className:"w-64 h-64 object-contain",onError:u=>{console.error("Error loading QR code"),l(null)}}),A.jsx("p",{className:"text-gray-600 mt-2",children:"QR Code Anda"})]}):A.jsx("div",{className:"w-64 h-64 flex items-center justify-center border border-gray-200 rounded-lg",children:A.jsx("p",{className:"text-gray-500",children:"QR Code tidak tersedia"})})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-bold mb-6",children:"Status Absensi Hari Ini"}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx(ol,{className:"text-blue-500"}),A.jsxs("div",{children:[A.jsx("div",{className:"text-gray-600",children:"Jam Masuk"}),A.jsx("div",{className:"font-medium",children:(e==null?void 0:e.waktu_masuk)||"Belum Absen"})]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx(YL,{className:"text-green-500"}),A.jsxs("div",{children:[A.jsx("div",{className:"text-gray-600",children:"Status Lokasi"}),A.jsx("div",{className:"font-medium",children:e?A.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${e.dalam_radius?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.dalam_radius?"Dalam Radius":"Luar Radius"}):"-"})]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx(ol,{className:"text-red-500"}),A.jsxs("div",{children:[A.jsx("div",{className:"text-gray-600",children:"Jam Keluar"}),A.jsx("div",{className:"font-medium",children:(e==null?void 0:e.waktu_keluar)||"Belum Absen"})]})]})]})]})]})})}const ghe=()=>{const[e,t]=k.useState({attendance:{total:0,days:0},logbook:{submitted:0,total:0,lastUpdate:null},report:{status:"",lastSubmission:null,version:"",feedback:"",daysSinceSubmission:0}}),[n,r]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const u=await(await fetch("http://localhost:3000/api/user/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),d=await(await fetch("http://localhost:3000/api/logbook",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),p=await(await fetch("http://localhost:3000/api/reports",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),h=new Date(u.data.profile.tanggal_mulai),b=new Date(u.data.profile.tanggal_selesai),y=Math.ceil((b-h)/(1e3*60*60*24))+1,v=u.data.statistik.total_kehadiran||0,G=d.data.sort((W,X)=>new Date(X.created_at)-new Date(W.created_at)),S=G.length>0?new Date(G[0].created_at).toLocaleDateString():"No submissions yet",R=p.data[0]||{},B=R.created_at?new Date(R.created_at):null,V=B?Math.ceil((new Date-B)/(1e3*60*60*24)):0;t({attendance:{total:v,days:y},logbook:{submitted:d.data.length,total:y,lastUpdate:S},report:{status:R.status||"Belum Submit",lastSubmission:B==null?void 0:B.toLocaleDateString("id-ID"),version:R.versi||"-",feedback:R.feedback||"-",daysSinceSubmission:V}})}catch(c){console.error("Error fetching dashboard data:",c)}finally{r(!1)}})()},[]);const a=()=>e.attendance.days===0?0:e.attendance.total/e.attendance.days*100,i=l=>{switch(l==null?void 0:l.toLowerCase()){case"disetujui":return"text-green-500";case"pending_review":case"menunggu review":return"text-orange-500";case"perlu_revisi":case"perlu revisi":return"text-red-500";default:return"text-gray-500"}},o=l=>{switch(l==null?void 0:l.toLowerCase()){case"disetujui":return"bg-green-100";case"pending_review":case"menunggu review":return"bg-orange-100";case"perlu_revisi":case"perlu revisi":return"bg-red-100";default:return"bg-gray-100"}};return A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[A.jsx("h3",{className:"text-gray-600 mb-2",children:"Total Kehadiran"}),n?A.jsxs("div",{className:"animate-pulse",children:[A.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),A.jsx("div",{className:"h-2 bg-gray-200 rounded-full"})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"text-xl font-bold mb-4",children:[e.attendance.total,"/",e.attendance.days," Hari"]}),A.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:A.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${a()}%`}})})]})]}),A.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[A.jsx("h3",{className:"text-gray-600 mb-2",children:"Logbook Terisi"}),n?A.jsxs("div",{className:"animate-pulse",children:[A.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),A.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"text-xl font-bold mb-4",children:[e.logbook.submitted,"/",e.logbook.total," Hari"]}),A.jsxs("div",{className:"text-sm text-gray-500",children:["Terakhir diperbarui: ",e.logbook.lastUpdate]})]})]}),A.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[A.jsx("h3",{className:"text-gray-600 mb-2",children:"Status Laporan"}),n?A.jsxs("div",{className:"animate-pulse",children:[A.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),A.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{className:`${i(e.report.status)} font-medium mb-2`,children:A.jsx("span",{className:`${o(e.report.status)} px-3 py-1 rounded-full text-sm`,children:e.report.status})}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"text-sm text-gray-600",children:[A.jsx("span",{className:"font-medium",children:"Versi:"})," ",e.report.version]}),e.report.lastSubmission&&A.jsx(A.Fragment,{children:A.jsxs("div",{className:"text-sm text-gray-600",children:[A.jsx("span",{className:"font-medium",children:"Terakhir disubmit"})," ",e.report.daysSinceSubmission," hari yang lalu"]})})]})]})]})]})};function lhe(){return A.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:A.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[A.jsx(ihe,{}),A.jsx(ohe,{}),A.jsx(ghe,{})]})})}function xd(){const e=ea(),t=Ya(),[n,r]=k.useState(null),a=(o,l)=>{r(o),t(l)},i=[{id:1,name:"Dashboard",link:"/dashboardUser"},{id:2,name:"Absensi",link:"/absensiUser"},{id:3,name:"Logbook",link:"/logbookUser"},{id:4,name:"Laporan",link:"/laporanUser"}];return A.jsx("div",{className:"md:ml-6 h-full flex flex-col md:flex-row space-x-8",children:i.map(o=>A.jsx("div",{className:`${e.pathname===o.link||n===o.id?"text-red-500 border-b-2 border-red-500":"text-gray-500 hover:text-gray-700 duration-500"} px-3 pt-5 cursor-pointer`,onClick:()=>a(o.id,o.link),children:o.name},o.id))})}const Qu=({type:e})=>{const{user:t,logout:n}=ln(),[r,a]=k.useState(!1),[i,o]=k.useState(!1),l=k.useRef(null),c=Ya(),u=()=>{o(!i)},I=async()=>{try{await n(),c("/login")}catch(d){console.error("Logout error:",d)}};return A.jsx("nav",{className:"bg-white z-50 fixed px-8 shadow-md w-full",children:A.jsx("div",{className:"max-w-7xl mx-auto",children:A.jsxs("div",{className:"flex justify-between h-16",children:[A.jsxs("div",{className:"flex h-full items-center",children:[A.jsx("img",{src:"images/cemenLogo.svg",alt:"Logo",className:"h-11 w-auto"}),A.jsx("div",{className:"ml-6 h-full md:flex hidden space-x-8",children:A.jsx(cN,{type:e})})]}),A.jsxs("div",{className:"md:flex items-center hidden relative",ref:l,children:[A.jsx("button",{onClick:()=>a(!r),className:"flex items-center group hover:bg-gray-50 rounded-lg transition-all duration-150 ease-in-out",children:A.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[A.jsxs("div",{className:"flex flex-col items-end",children:[A.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900 duration-500",children:(t==null?void 0:t.nama)||"Mahasiswa"}),A.jsx("span",{className:"text-xs text-gray-500 group-hover:text-gray-700 duration-500",children:"Magang"})]}),A.jsx("div",{className:"h-9 w-9 rounded-full ring-2 ring-gray-100 duration-500 group-hover:ring-red-200 overflow-hidden",children:t!=null&&t.photo_profile?A.jsx("img",{src:t.photo_profile,alt:"Profile",className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:A.jsx(tC,{className:"h-6 w-6 text-gray-500"})})}),A.jsx(aH,{className:`h-4 w-4 text-gray-500 transition-transform duration-200 ${r?"transform rotate-180":""}`})]})}),A.jsx("div",{className:`
                absolute right-0 top-full mt-1 w-60 rounded-xl bg-white shadow-lg ring-1 ring-black ring-opacity-5
                transform transition-all duration-200 ease-in-out
                ${r?"opacity-100 translate-y-0 visible":"opacity-0 -translate-y-2 invisible"}
              `,children:A.jsxs("div",{className:"p-2",children:[A.jsx("div",{className:"text-xs font-medium text-gray-400 px-3 py-2",children:"Account Settings"}),A.jsxs(To,{to:"/profileUser",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>a(!1),children:[A.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-blue-50 text-blue-600",children:A.jsx(tC,{className:"h-5 w-5"})}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"font-medium",children:"Edit Profile"}),A.jsx("span",{className:"text-xs text-gray-500",children:"Manage your account"})]})]}),A.jsx("div",{className:"h-px bg-gray-100 my-2"}),A.jsxs("button",{onClick:()=>{I(),a(!1)},className:"flex items-center gap-3 w-full px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50 transition-colors",children:[A.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-red-50 text-red-600",children:A.jsx(oH,{className:"h-5 w-5"})}),A.jsxs("div",{className:"flex flex-col items-start",children:[A.jsx("span",{className:"font-medium",children:"Log Out"}),A.jsx("span",{className:"text-xs text-red-500",children:"End your session"})]})]})]})})]}),A.jsxs("div",{className:"md:hidden flex justify-between items-center w-full",children:[A.jsx("div",{className:"bg-white shadow ml-auto px-[12px] py-[12px] rounded-md",children:A.jsx("div",{children:A.jsx(nH,{className:"text-3xl cursor-pointer text-gray-500",onClick:u})})}),A.jsx("div",{className:`absolute shadow text-end justify-end items-end cursor-pointer mr-[32px] rounded-lg top-20 right-0 bg-white z-50 flex flex-col px-5 pb-5 transition-all duration-500 ease-in-out ${i?"opacity-100 translate-y-0 visible":"opacity-0 -translate-y-2 invisible"}`,children:A.jsx(cN,{type:e})})]})]})})})},cN=({type:e})=>e==="dashboardUser"?A.jsx(xd,{}):e==="absensiUser"?A.jsx(xd,{}):e==="logbookUser"?A.jsx(xd,{}):A.jsx(xd,{});function she(){return A.jsxs(A.Fragment,{children:[A.jsx(Qu,{type:"dashboardUser"}),A.jsx(lhe,{})]})}const che=({isOpen:e,onClose:t})=>{ln();const[n,r]=k.useState([]),[a,i]=k.useState({tanggal_mulai:"",tanggal_selesai:"",kategori:"",keterangan:"",file_bukti:null}),[o,l]=k.useState(!1),[c,u]=k.useState("");k.useEffect(()=>{(async()=>{try{const h=await Ie.get("http://localhost:3000/api/izin/categories");r(h.data)}catch(h){console.error("Error fetching categories:",h),u("Failed to load categories")}})()},[]);const I=p=>{const{name:h,value:b}=p.target;i(y=>({...y,[h]:b}))},d=p=>{i(h=>({...h,file_bukti:p.target.files[0]}))},m=async p=>{var h,b,y,v;p.preventDefault(),l(!0),u("");try{const G=new FormData;Object.keys(a).forEach(S=>{a[S]&&G.append(S,a[S])}),await Ie.post("http://localhost:3000/api/izin/submit",G,{headers:{"Content-Type":"multipart/form-data"}}),Ye.fire({title:"Berhasil!",text:"Pengajuan izin berhasil dikirim",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}).then(S=>{S.isConfirmed&&t()})}catch(G){Ye.fire({title:"Gagal!",text:((b=(h=G.response)==null?void 0:h.data)==null?void 0:b.message)||"Terjadi kesalahan saat mengajukan izin",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),u(((v=(y=G.response)==null?void 0:y.data)==null?void 0:v.message)||"Terjadi kesalahan saat mengajukan izin")}finally{l(!1)}};return e?A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pengajuan Izin"}),c&&A.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:c}),A.jsxs("form",{onSubmit:m,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal Mulai"}),A.jsx("input",{type:"date",name:"tanggal_mulai",value:a.tanggal_mulai,onChange:I,className:"w-full px-3 py-2 border rounded",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal Selesai"}),A.jsx("input",{type:"date",name:"tanggal_selesai",value:a.tanggal_selesai,onChange:I,className:"w-full px-3 py-2 border rounded",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kategori"}),A.jsxs("select",{name:"kategori",value:a.kategori,onChange:I,className:"w-full px-3 py-2 border rounded",required:!0,children:[A.jsx("option",{value:"",children:"Pilih Kategori"}),A.jsx("option",{value:"Sakit",children:"Sakit"}),A.jsx("option",{value:"Keperluan Keluarga",children:"Keperluan Keluarga"}),A.jsx("option",{value:"Keperluan Kampus",children:"Keperluan Kampus"}),A.jsx("option",{value:"Lainnya",children:"Lainnya"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Keterangan"}),A.jsx("textarea",{name:"keterangan",value:a.keterangan,onChange:I,className:"w-full px-3 py-2 border rounded",rows:"4",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Upload Bukti"}),A.jsx("input",{type:"file",name:"file_bukti",onChange:d,className:"w-full px-3 py-2 border rounded text-sm file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:bg-blue-50 file:text-blue-700",accept:".pdf,.jpg,.jpeg,.png"})]}),A.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[A.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",disabled:o,children:"Batal"}),A.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:o,children:o?"Mengirim...":"Ajukan"})]})]})]})}):null};function uhe(){const[e,t]=k.useState([]),[n,r]=k.useState(!0),[a,i]=k.useState(""),[o,l]=k.useState(1),[c,u]=k.useState(1),[I,d]=k.useState([]),[m,p]=k.useState(!1),{user:h}=ln(),b=10,y=async(W=o)=>{var X,N;try{r(!0),i(null);const x=await Ie.get("http://localhost:3000/api/absen/absensi",{params:{page:W,limit:b},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(x.data.success){const Y=x.data.data.map(E=>({id:E.id,tanggal:new Date(E.tanggal).toLocaleDateString("id-ID"),waktu_masuk:E.waktu_masuk?new Date(E.waktu_masuk).toLocaleTimeString("id-ID"):"-",waktu_keluar:E.waktu_keluar?new Date(E.waktu_keluar).toLocaleTimeString("id-ID"):"-",status_kehadiran:E.status_kehadiran||"-",status_masuk:E.status_masuk||"-",dalam_radius:E.dalam_radius||!1}));t(Y);const F=x.data.total||Y.length;u(Math.ceil(F/b))}}catch(x){console.error("Error fetching data:",x),i(((N=(X=x.response)==null?void 0:X.data)==null?void 0:N.message)||"Gagal memuat data absensi"),t([]),u(1)}finally{r(!1)}},v=async()=>{var W,X;if(I.length===0){alert("Pilih setidaknya satu data untuk diekspor");return}p(!0);try{const N=await Ie.post("http://localhost:3000/api/absen/export-mahasiswa",{selectedIds:I},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},responseType:"blob"}),x=new Blob([N.data],{type:"application/pdf"}),Y=window.URL.createObjectURL(x),F=document.createElement("a");F.href=Y,F.setAttribute("download",`Absensi_${h.nim||"Mahasiswa"}_${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(F),F.click(),document.body.removeChild(F),window.URL.revokeObjectURL(Y)}catch(N){console.error("Export error:",N),alert("Gagal mengekspor data: "+(((X=(W=N.response)==null?void 0:W.data)==null?void 0:X.message)||"Terjadi kesalahan"))}finally{p(!1)}},G=W=>{W.target.checked?d(e.map(X=>X.id)):d([])},S=W=>{d(X=>X.includes(W)?X.filter(N=>N!==W):[...X,W])};if(k.useEffect(()=>{y()},[o]),n)return A.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:A.jsx("div",{className:"flex justify-center items-center h-64",children:A.jsx(ll,{className:"w-8 h-8 animate-spin text-gray-500"})})});if(a)return A.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:A.jsxs("div",{className:"flex justify-center items-center h-64 text-red-500",children:[A.jsx(Rc,{className:"w-6 h-6 mr-2"}),A.jsx("span",{children:a})]})});const R=e.length,B=(o-1)*b,V=Math.min(B+b,R);return A.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-8 ",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-xl font-semibold",children:"Riwayat Absensi"}),A.jsxs("button",{onClick:v,disabled:I.length===0||m,className:`flex items-center px-4 py-2 rounded ${I.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[m?A.jsx(ll,{className:"w-4 h-4 mr-2 animate-spin"}):A.jsx(gl,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),A.jsx("div",{className:"overflow-x-auto",children:e.length===0?A.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada data absensi yang tersedia."}):A.jsxs("div",{children:[A.jsxs("table",{className:"min-w-full",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"border-b",children:[A.jsx("th",{className:"w-8 py-4 px-4",children:A.jsx("input",{type:"checkbox",checked:I.length===e.length,onChange:G,className:"rounded border-gray-300"})}),A.jsx("th",{className:"text-left py-4",children:"Tanggal"}),A.jsx("th",{className:"text-left py-4",children:"Status"}),A.jsx("th",{className:"text-left py-4",children:"Waktu Masuk"}),A.jsx("th",{className:"text-left py-4",children:"Waktu Keluar"}),A.jsx("th",{className:"text-left py-4",children:"Ketepatan Waktu"}),A.jsx("th",{className:"text-left py-4",children:"Lokasi"})]})}),A.jsx("tbody",{children:e.map(W=>A.jsxs("tr",{className:"border-b",children:[A.jsx("td",{className:"py-4 px-4",children:A.jsx("input",{type:"checkbox",checked:I.includes(W.id),onChange:()=>S(W.id),className:"rounded border-gray-300"})}),A.jsx("td",{className:"py-4",children:W.tanggal}),A.jsx("td",{className:"py-4",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${W.status_kehadiran==="hadir"?"bg-green-100 text-green-800":W.status_kehadiran==="izin"?"bg-yellow-100 text-[#F59E0B]":W.status_kehadiran==="alpha"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:W.status_kehadiran})}),A.jsx("td",{className:"py-4",children:W.waktu_masuk}),A.jsx("td",{className:"py-4",children:W.waktu_keluar}),A.jsx("td",{className:"py-4",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${W.status_masuk==="tepat_waktu"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:W.status_masuk==="tepat_waktu"?"Tepat Waktu":"Telat"})}),A.jsx("td",{className:"py-4",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${W.dalam_radius?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:W.dalam_radius?"Dalam Radius":"Luar Radius"})})]},W.id))})]}),A.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[A.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",B+1," to ",V," of ",R," entries"]}),A.jsxs("div",{className:"flex space-x-2",children:[A.jsx("button",{onClick:()=>l(W=>Math.max(W-1,1)),disabled:o===1,className:"px-4 py-2 border rounded text-gray-600 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),[...Array(c)].map((W,X)=>A.jsx("button",{onClick:()=>l(X+1),className:`px-4 py-2 border rounded ${o===X+1?"bg-blue-50 text-blue-600 border-blue-200":"hover:bg-gray-50"}`,children:X+1},X)),A.jsx("button",{onClick:()=>l(W=>Math.min(W+1,c)),disabled:o===c,className:"px-4 py-2 border rounded text-gray-600 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})]})]})})]})}const Xd=({icon:e,title:t,value:n,color:r})=>A.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:`${r} p-2 rounded`,children:e}),A.jsxs("div",{className:"ml-4",children:[A.jsx("h3",{className:"text-sm font-medium text-gray-500",children:t}),A.jsx("p",{className:"text-2xl font-semibold mt-1",children:n})]})]})});function Ihe(){const[e,t]=k.useState(null),[n,r]=k.useState(!0),[a,i]=k.useState(null);return k.useEffect(()=>{(async()=>{try{const l=await Ie.get("http://localhost:3000/api/absen/attendance-stats");t(l.data.data),r(!1)}catch{i("Gagal memuat data kehadiran"),r(!1)}})()},[]),n?A.jsx("div",{className:"text-center py-4",children:"Memuat data..."}):a?A.jsx("div",{className:"text-center text-red-500 py-4",children:a}):e?A.jsx("div",{className:"",children:A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[A.jsx(Xd,{icon:A.jsx(Lo,{className:"text-purple-500",size:24}),title:"Total Kehadiran",value:`${e.total_attendance}/${e.total_days}`,color:"bg-purple-100"}),A.jsx(Xd,{icon:A.jsx(BG,{className:"text-green-500",size:24}),title:"Hadir Tepat Waktu",value:e.hadir_tepat,color:"bg-green-100"}),A.jsx(Xd,{icon:A.jsx(ol,{className:"text-orange-500",size:24}),title:"Izin",value:e.izin,color:"bg-orange-100"}),A.jsx(Xd,{icon:A.jsx(ZL,{className:"text-red-500",size:24}),title:"Alpha",value:e.alpha,color:"bg-red-100"})]})}):null}function dhe(){const[e,t]=k.useState([]),[n,r]=k.useState(!0),[a,i]=k.useState(null),[o,l]=k.useState(1),c=10;k.useEffect(()=>{u()},[]);const u=async()=>{try{const y=await Ie.get("http://localhost:3000/api/izin/history",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});t(y.data.data),r(!1)}catch{i("Gagal mengambil data izin"),r(!1)}},I=y=>`px-2 py-1 rounded-full text-xs ${{pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[y]}`,d=y=>new Date(y).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),m=o*c,p=m-c,h=e.slice(p,m),b=Math.ceil(e.length/c);return n?A.jsx("div",{className:"flex justify-center items-center h-64",children:A.jsx(ll,{className:"w-8 h-8 animate-spin text-gray-500"})}):a?A.jsxs("div",{className:"flex justify-center items-center h-64 text-red-500",children:[A.jsx(Rc,{className:"w-6 h-6 mr-2"}),A.jsx("span",{children:a})]}):A.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mt-8 p-6",children:[A.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Riwayat Izin"}),A.jsxs("table",{className:"w-full",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"text-left p-4",children:"Tanggal"}),A.jsx("th",{className:"text-left p-4",children:"Total Hari"}),A.jsx("th",{className:"text-left p-4",children:"Kategori"}),A.jsx("th",{className:"text-left p-4",children:"Keterangan"}),A.jsx("th",{className:"text-left p-4",children:"Status"})]})}),A.jsx("tbody",{children:h.map((y,v)=>A.jsxs("tr",{className:"border-t",children:[A.jsx("td",{className:"p-4",children:A.jsx("div",{className:"flex items-center gap-3",children:A.jsx("div",{children:A.jsxs("div",{className:" font-medium",children:[d(y.tanggal_mulai)," - ",d(y.tanggal_selesai)]})})})}),A.jsxs("td",{className:"p-4",children:[y.total_hari," hari"]}),A.jsx("td",{className:"p-4",children:y.kategori}),A.jsx("td",{className:"p-4",children:y.keterangan}),A.jsx("td",{className:"p-4",children:A.jsx("span",{className:I(y.status),children:y.status})})]},v))})]}),A.jsx("div",{className:"p-4 border-t",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"text-gray-600",children:["Showing ",p+1," to ",Math.min(m,e.length)," of ",e.length," entries"]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-50 disabled:opacity-50",onClick:()=>l(y=>Math.max(y-1,1)),disabled:o===1,children:"Previous"}),[...Array(b)].map((y,v)=>A.jsx("button",{className:`px-4 py-2 border rounded ${o===v+1?"bg-gray-50":"hover:bg-gray-50"}`,onClick:()=>l(v+1),children:v+1},v)),A.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-50 disabled:opacity-50",onClick:()=>l(y=>Math.min(y+1,b)),disabled:o===b,children:"Next"})]})]})})]})}const Che=()=>{const[e,t]=k.useState(!1);return A.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:A.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsx(hi,{children:"Absensi"}),A.jsx("div",{className:"flex gap-4",children:A.jsx("button",{onClick:()=>t(!0),className:"inline-flex items-center px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Ajukan Izin"})})]}),A.jsx(Ihe,{}),A.jsx("div",{className:"mt-8",children:A.jsx(uhe,{})}),A.jsx("div",{className:"mt-8",children:A.jsx(dhe,{})}),e&&A.jsx(che,{isOpen:e,onClose:()=>t(!1)})]})})};function Ahe(){return A.jsxs(A.Fragment,{children:[A.jsx(Qu,{type:"absensiUser"}),A.jsx(Che,{})]})}const RE=({isOpen:e,onClose:t,onSubmit:n,initialData:r,isEdit:a=!1})=>{const[i,o]=k.useState({tanggal:"",aktivitas:"",progress:""}),[l,c]=k.useState({aktivitas:"",progress:""});if(k.useEffect(()=>{r&&a&&o({tanggal:r.tanggal,aktivitas:r.aktivitas,progress:r.progress.toString()})},[r,a]),!e)return null;const u=m=>{const{name:p,value:h}=m.target;if(p==="progress"){const b=parseInt(h);if(b<0||b>100||isNaN(b)){c(y=>({...y,progress:"Masukkan nilai antara 0 sampai 100"}));return}else c(y=>({...y,progress:""}))}p==="aktivitas"&&(h.length<10||h.length>255?c(b=>({...b,aktivitas:"Aktivitas harus antara 10-255 karakter"})):c(b=>({...b,aktivitas:""}))),o(b=>({...b,[p]:h}))},I=m=>{if(m.preventDefault(),i.aktivitas.length<10||i.aktivitas.length>255){c(h=>({...h,aktivitas:"Aktivitas harus antara 10-255 karakter"}));return}const p=parseInt(i.progress);if(p<0||p>100||isNaN(p)){c(h=>({...h,progress:"Masukkan nilai antara 0 sampai 100"}));return}n(i)},d=()=>{o({tanggal:"",aktivitas:"",progress:""}),c({aktivitas:"",progress:""}),t()};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:m=>{m.target===m.currentTarget&&d()},children:A.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4",onClick:m=>m.stopPropagation(),children:A.jsxs("div",{className:"p-6",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold",children:a?"Edit Aktivitas":"Tambah Aktivitas"}),A.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 transition-colors",children:A.jsx(ro,{className:"h-6 w-6"})})]}),A.jsxs("form",{onSubmit:I,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Tanggal"}),A.jsx("div",{className:"relative",children:A.jsx("input",{type:"date",name:"tanggal",value:i.tanggal,onChange:u,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Aktivitas"}),A.jsx("textarea",{name:"aktivitas",value:i.aktivitas,onChange:u,placeholder:"Masukkan deskripsi aktivitas...",className:`w-full border rounded-lg p-3 h-32 resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.aktivitas?"border-red-500":""}`,required:!0}),l.aktivitas&&A.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.aktivitas})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Progress (%)"}),A.jsx("input",{type:"number",name:"progress",value:i.progress,onChange:u,min:"0",max:"100",placeholder:"Masukkan progress (0-100)",className:`w-full border rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.progress?"border-red-500":""}`,required:!0}),l.progress&&A.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.progress})]}),A.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[A.jsx("button",{type:"button",onClick:d,className:"px-6 py-2.5 border rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:"Batal"}),A.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors",children:a?"Update":"Simpan"})]})]})]})})})},hZ=({icon:e,title:t,value:n,color:r})=>A.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:`${r} p-3 rounded-lg`,children:e}),A.jsxs("div",{className:"ml-4",children:[A.jsx("h3",{className:"text-gray-600 text-sm",children:t}),A.jsx("p",{className:"text-2xl font-semibold mt-1",children:n})]})]})});function mhe({logbooks:e}){const t=(e==null?void 0:e.length)||0,n=(e==null?void 0:e.filter(a=>a.status==="pending").length)||0,r=(e==null?void 0:e.filter(a=>a.status==="approved").length)||0;return A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[A.jsx(hZ,{icon:A.jsx(iL,{className:"text-blue-600 h-6 w-6"}),title:"Total Entries",value:t.toString(),color:"bg-blue-100"}),A.jsx(hZ,{icon:A.jsx(ol,{className:"text-orange-500 h-6 w-6"}),title:"Pending Review",value:n.toString(),color:"bg-orange-100"}),A.jsx(hZ,{icon:A.jsx(BG,{className:"text-green-600 h-6 w-6"}),title:"Approved",value:r.toString(),color:"bg-green-100"})]})}function fhe({logbooks:e}){const[t,n]=k.useState(!1),[r,a]=k.useState(null),i=l=>{a(l),n(!0)},o=async l=>{var c,u;try{(await Ie.put(`http://localhost:3000/api/logbook/${r.id}`,l)).data.success&&(n(!1),window.location.reload(),alert("Logbook berhasil diupdate"))}catch(I){console.error("Error updating logbook:",I),alert(((u=(c=I.response)==null?void 0:c.data)==null?void 0:u.message)||"Gagal mengupdate logbook")}};return A.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"border-b",children:[A.jsx("th",{className:"text-left py-4 px-4",children:"Tanggal"}),A.jsx("th",{className:"text-left py-4 px-4",children:"Aktivitas"}),A.jsx("th",{className:"text-left py-4 px-4",children:"Progress"}),A.jsx("th",{className:"text-left py-4 px-4",children:"Status"}),A.jsx("th",{className:"text-left py-4 px-4",children:"Aksi"})]})}),A.jsx("tbody",{children:e==null?void 0:e.map((l,c)=>A.jsxs("tr",{className:"border-b",children:[A.jsx("td",{className:"py-4 px-4",children:new Date(l.tanggal).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),A.jsxs("td",{className:"py-4 px-4 max-w-md",children:[l.aktivitas,l.catatan_admin&&A.jsxs("div",{className:"text-sm text-red-600 mt-1",children:["Catatan Admin: ",l.catatan_admin]})]}),A.jsx("td",{className:"py-4 px-4",children:A.jsx("div",{className:"flex items-center gap-2",children:A.jsxs("div",{className:"w-12 text-center",children:[l.progress,"%"]})})}),A.jsx("td",{className:"py-4 px-4",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${l.status==="approved"?"bg-green-100 text-green-800":l.status==="pending"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:l.status.charAt(0).toUpperCase()+l.status.slice(1)})}),A.jsx("td",{className:"py-4 px-4",children:l.status==="rejected"&&A.jsx("button",{onClick:()=>i(l),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"Edit Logbook",children:A.jsx(gH,{size:20})})})]},l.id||c))})]})}),A.jsx(RE,{isOpen:t,onClose:()=>n(!1),onSubmit:o,initialData:r,isEdit:!0})]})}const hhe=()=>{const[e,t]=k.useState([]),[n,r]=k.useState(!1),[a,i]=k.useState(!0),[o,l]=k.useState(null),[c,u]=k.useState(!1);k.useEffect(()=>{I()},[]);const I=async()=>{try{i(!0),l(null);const h=await Ie.get("http://localhost:3000/api/logbook");t(h.data.success?h.data.data:[])}catch(h){console.error("Error fetching logbooks:",h),l(h.message)}finally{i(!1)}},d=async h=>{var b,y;try{if(!h.tanggal||!h.aktivitas||!h.progress)throw new Error("Mohon lengkapi semua field yang diperlukan");const v=new FormData;v.append("tanggal",h.tanggal),v.append("aktivitas",h.aktivitas),v.append("progress",h.progress),h.file&&v.append("file_dokumentasi",h.file);const G=await Ie.post("http://localhost:3000/api/logbook",v,{headers:{"Content-Type":"multipart/form-data"}});if(G.data.success)r(!1),await I(),Ye.fire({title:"Berhasil!",text:"Logbook berhasil disimpan",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"});else throw new Error(G.data.message)}catch(v){console.error("Error submitting logbook:",v),Ye.fire({title:"Gagal!",text:((y=(b=v.response)==null?void 0:b.data)==null?void 0:y.message)||v.message||"Terjadi kesalahan saat menyimpan logbook",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}},m=async h=>{var b,y;try{const v=new FormData;v.append("tanggal",h.tanggal),v.append("aktivitas",h.aktivitas),v.append("progress",h.progress);const G=await Ie.put(`http://localhost:3000/api/logbook/${h.id}`,v,{headers:{"Content-Type":"multipart/form-data"}});if(G.data.success)await I(),Ye.fire({title:"Berhasil!",text:"Logbook berhasil diperbarui",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"});else throw new Error(G.data.message)}catch(v){console.error("Error updating logbook:",v),Ye.fire({title:"Gagal!",text:((y=(b=v.response)==null?void 0:b.data)==null?void 0:y.message)||v.message||"Terjadi kesalahan saat memperbarui logbook",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}},p=async()=>{if(!c)try{u(!0);const h=await Ie.get("http://localhost:3000/api/logbook/export",{responseType:"blob"});if(h.headers["content-type"]==="application/json"){const S=new FileReader;S.onload=()=>{const R=JSON.parse(S.result);Ye.fire({title:"Gagal!",text:R.message||"Terjadi kesalahan saat mengunduh logbook",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})},S.readAsText(h.data);return}const y=new Blob([h.data],{type:"application/pdf"}),v=window.URL.createObjectURL(y),G=document.createElement("a");G.href=v,G.setAttribute("download",`logbook_${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(v),Ye.fire({title:"Berhasil!",text:"File logbook berhasil diunduh",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}catch(h){console.error("Error downloading logbook:",h),Ye.fire({title:"Gagal!",text:"Terjadi kesalahan saat mengunduh logbook",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}finally{u(!1)}};return o?A.jsx("div",{className:"h-screen flex items-center justify-center",children:A.jsxs("div",{className:"text-red-600 text-center",children:[A.jsx("p",{className:"text-xl font-semibold",children:"Error"}),A.jsx("p",{children:o})]})}):A.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:A.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8",children:[A.jsx(hi,{children:"Logbook Aktivitas"}),A.jsxs("div",{className:"flex space-x-4 mt-4 md:mt-0",children:[A.jsxs("button",{onClick:()=>r(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2.5 rounded-lg inline-flex items-center justify-center min-w-[180px] transition-colors",disabled:a,children:[A.jsx(FL,{className:"mr-2 h-5 w-5"})," Tambah Aktivitas"]}),A.jsxs("button",{onClick:p,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2.5 rounded-lg inline-flex items-center justify-center min-w-[180px] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:c,children:[A.jsx(gl,{className:"mr-2 h-5 w-5"}),c?"Mengunduh...":"Download Rekap"]})]})]}),A.jsx(mhe,{logbooks:e}),A.jsx(fhe,{logbooks:e,onEdit:m}),A.jsx(RE,{isOpen:n,onClose:()=>r(!1),onSubmit:d})]})})};function phe(){return A.jsxs(A.Fragment,{children:[A.jsx(Qu,{type:"logbookUser"}),A.jsx(hhe,{})]})}const bhe=({isOpen:e,onClose:t,onSuccess:n,onUploadComplete:r})=>{ln();const[a,i]=k.useState(!1),[o,l]=k.useState(""),[c,u]=k.useState({versi:"",progress:"",catatan:"",file:null}),I=()=>{Ye.fire({title:"Berhasil!",text:"Laporan berhasil diunggah",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#3B82F6",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})},d=b=>{Ye.fire({title:"Gagal!",text:b,icon:"error",confirmButtonText:"OK",confirmButtonColor:"#EF4444",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})},m=b=>{const{name:y,value:v,files:G}=b.target;u(S=>({...S,[y]:G?G[0]:v}))},p=()=>c.versi?c.file?c.progress&&(c.progress<0||c.progress>100)?(d("Progress harus antara 0-100"),!1):!0:(d("File laporan wajib diunggah"),!1):(d("Versi laporan wajib diisi"),!1),h=async b=>{var v,G;if(b.preventDefault(),l(""),!p())return;Ye.fire({title:"Mengunggah...",html:"Mohon tunggu sebentar",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{Ye.showLoading()}});const y=new FormData;y.append("versi",c.versi),y.append("progress",c.progress),y.append("catatan",c.catatan),y.append("file_laporan",c.file);try{await Ie.post("http://localhost:3000/api/reports",y,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}),u({versi:"",progress:"",catatan:"",file:null}),I(),n&&n(),r&&r(),t()}catch(S){const R=((G=(v=S.response)==null?void 0:v.data)==null?void 0:G.message)||"Terjadi kesalahan saat mengunggah laporan";d(R)}finally{i(!1)}};return e?A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg w-full max-w-xl mx-4",children:[A.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[A.jsx("h2",{className:"text-xl font-semibold",children:"Upload Laporan"}),A.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 focus:outline-none",disabled:a,children:A.jsx(ro,{className:"h-5 w-5"})})]}),A.jsxs("form",{onSubmit:h,className:"p-6",children:[A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Versi ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"text",name:"versi",value:c.versi,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"v1.0",required:!0,disabled:a})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress (%)"}),A.jsx("input",{type:"number",name:"progress",value:c.progress,onChange:m,min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0-100",disabled:a})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catatan"}),A.jsx("textarea",{name:"catatan",value:c.catatan,onChange:m,rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tambahkan catatan...",disabled:a})]}),A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["File Laporan (PDF/DOC/DOCX) ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"file",name:"file",onChange:m,accept:".pdf,.doc,.docx",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:a}),A.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maksimal ukuran file 10MB"})]})]}),A.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t",children:[A.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300",disabled:a,children:"Batal"}),A.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:a,children:a?"Mengunggah...":"Upload"})]})]})]})}):null};function yhe(){ln();const[e,t]=k.useState(!0),[n,r]=k.useState(""),[a,i]=k.useState({progress_terakhir:0,deadline:null});k.useEffect(()=>{o()},[]);const o=async()=>{try{const I=await Ie.get("http://localhost:3000/api/reports/progress");i(I.data.data),r("")}catch(I){r("Gagal memuat data progress"),console.error("Error fetching progress:",I)}finally{t(!1)}},l=I=>I?Qm(new Date(I),"d MMMM yyyy",{locale:Om}):"-";if(e)return A.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:A.jsxs("div",{className:"animate-pulse",children:[A.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),A.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})});const c=(I,d,m)=>I>0?"text-green-600":m>0?"text-red-600":d>0?"text-yellow-600":"text-gray-600",u=(I,d,m)=>I>0?"Disetujui":m>0?"Perlu Revisi":d>0?"Menunggu Review":"Belum Ada Laporan";return A.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Status Laporan"}),n&&A.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:n}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between mb-2",children:[A.jsx("span",{className:"text-gray-600",children:"Progress"}),A.jsxs("span",{className:"text-gray-600",children:[a.progress_terakhir||0,"%"]})]}),A.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:A.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${a.progress_terakhir||0}%`}})})]}),A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("span",{className:"text-gray-600",children:"Deadline Pengumpulan:"}),A.jsx("span",{className:"text-gray-800 font-medium",children:l(a.deadline)})]}),A.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[A.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[A.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Total Versi"}),A.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a.total_versi||0})]}),A.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[A.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Versi Disetujui"}),A.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.approved||0})]}),A.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[A.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Status"}),A.jsx("p",{className:`text-lg font-bold ${c(a.approved,a.pending,a.need_revision)}`,children:u(a.approved,a.pending,a.need_revision)})]})]}),a.update_terakhir&&A.jsxs("div",{className:"text-sm text-gray-500 mt-4",children:["Terakhir diperbarui: ",l(a.update_terakhir)]})]})]})}function Zhe(){ln();const[e,t]=k.useState(!0),[n,r]=k.useState(""),[a,i]=k.useState([]);k.useEffect(()=>{o()},[]);const o=async()=>{try{const I=await Ie.get("http://localhost:3000/api/reports",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});i(I.data.data),r("")}catch(I){r("Gagal memuat riwayat pengumpulan"),console.error("Error fetching reports:",I)}finally{t(!1)}},l=async(I,d)=>{var m,p;try{const h=`http://localhost:3000${I}`;console.log("Downloading from:",h);const b=await Ie({url:h,method:"GET",responseType:"blob",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/pdf"}}),y=new Blob([b.data],{type:"application/pdf"}),v=window.URL.createObjectURL(y),G=document.createElement("a");G.href=v,G.setAttribute("download",d),document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(v)}catch(h){console.error("Download error:",h),alert("Gagal mengunduh file. "+(((p=(m=h.response)==null?void 0:m.data)==null?void 0:p.message)||"Silakan coba lagi."))}},c=I=>I?Qm(new Date(I),"d MMMM yyyy",{locale:Om}):"-",u=I=>{const d={pending_review:"bg-yellow-100 text-yellow-800",perlu_revisi:"bg-red-100 text-red-800",disetujui:"bg-green-100 text-green-800"},m={pending_review:"Menunggu Review",perlu_revisi:"Perlu Revisi",disetujui:"Disetujui"};return A.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${d[I]||"bg-gray-100 text-gray-800"}`,children:m[I]||I})};return e?A.jsx("div",{className:"bg-white rounded-lg shadow",children:A.jsxs("div",{className:"animate-pulse p-6",children:[A.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),A.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})}):A.jsx("div",{className:"bg-white rounded-lg shadow",children:A.jsxs("div",{className:"p-6",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Riwayat Pengumpulan"}),n&&A.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:n}),a.length===0?A.jsx("div",{className:"text-center py-8 text-gray-500",children:"Belum ada laporan yang dikumpulkan"}):A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Versi"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Feedback"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File"})]})}),A.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((I,d)=>A.jsxs("tr",{className:d%2===0?"bg-white":"bg-gray-50",children:[A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:I.versi}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c(I.created_at)}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u(I.status)}),A.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:I.feedback||"-"}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:A.jsxs("div",{className:"flex space-x-4",children:[I.file_path&&A.jsxs("button",{onClick:()=>l(I.file_path,`Laporan_${I.versi}.pdf`),className:"text-blue-600 hover:text-blue-800 flex items-center",children:[A.jsx(gl,{className:"h-4 w-4 mr-1"})," Laporan"]}),I.file_revisi_path&&A.jsxs("button",{onClick:()=>l(I.file_revisi_path,`Revisi_${I.versi}.pdf`),className:"text-blue-600 hover:text-blue-800 flex items-center",children:[A.jsx(gl,{className:"h-4 w-4 mr-1"})," Revisi"]})]})})]},I.id))})]})})]})})}const vhe=()=>{const[e,t]=k.useState(!1);return A.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:A.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsx(hi,{children:"Laporan Akhir Magang"}),A.jsxs("button",{onClick:()=>t(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg inline-flex items-center hover:bg-blue-700",children:[A.jsx(LL,{className:"mr-2 h-5 w-5"})," Upload Laporan"]})]}),A.jsx(yhe,{}),A.jsx(Zhe,{}),A.jsx(bhe,{isOpen:e,onClose:()=>t(!1)})]})})};function Ghe(){return A.jsxs(A.Fragment,{children:[A.jsx(Qu,{type:"laporanUser"}),A.jsx(vhe,{})]})}const Bhe=()=>{const{user:e,updateProfile:t}=ln(),[n,r]=k.useState(!1),[a,i]=k.useState({type:"",text:""}),[o,l]=k.useState({nama:(e==null?void 0:e.nama)||"",email:(e==null?void 0:e.email)||"",photo:null,photoPreview:(e==null?void 0:e.photo_profile)||null}),c=I=>{const d=I.target.files[0];if(d){if(d.size>5*1024*1024){i({type:"error",text:"File terlalu besar. Maksimal 5MB"});return}if(!["image/jpeg","image/png","image/jpg"].includes(d.type)){i({type:"error",text:"Tipe file tidak diizinkan. Gunakan JPG, JPEG, atau PNG"});return}l(m=>({...m,photo:d,photoPreview:URL.createObjectURL(d)}))}},u=async I=>{I.preventDefault(),r(!0),i({type:"",text:""});try{const d=new FormData;o.nama!==e.nama&&d.append("nama",o.nama),o.email!==e.email&&d.append("email",o.email),o.photo&&d.append("photo_profile",o.photo);const m=await t(d);if(m.success)i({type:"success",text:m.message});else throw new Error(m.message||"Update profile gagal")}catch(d){i({type:"error",text:d.message||"Terjadi kesalahan saat update profile"})}finally{r(!1)}};return A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mt-8 max-w-3xl",children:[A.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Informasi Pribadi"}),a.text&&A.jsx("div",{className:`mb-4 p-3 rounded ${a.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.text}),A.jsxs("div",{className:"flex items-start",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-200",children:o.photoPreview?A.jsx("img",{src:o.photoPreview,alt:"Profile",className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Photo"})}),A.jsxs("label",{className:"absolute bottom-0 right-0 p-2 bg-gray-800 rounded-full text-white cursor-pointer",children:[A.jsx(rH,{size:20}),A.jsx("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/jpg",onChange:c})]})]}),A.jsxs("form",{className:"flex-1 ml-8",onSubmit:u,children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Nama Lengkap"}),A.jsx("input",{type:"text",value:o.nama,onChange:I=>l({...o,nama:I.target.value}),className:"w-full p-2 border rounded-lg",required:!0})]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Email"}),A.jsx("input",{type:"email",value:o.email,onChange:I=>l({...o,email:I.target.value}),className:"w-full p-2 border rounded-lg",required:!0})]}),A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"submit",disabled:n,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"Menyimpan...":"Simpan Perubahan"})})]})]})]})};var She={};function whe(){const[e,t]=k.useState({selectedFile:null,previewUrl:null,error:null,loading:!1,success:!1});k.useEffect(()=>{(async()=>{try{const i=await Ie.get("http://localhost:3000/api/admin/profile");i.data.success&&i.data.data.paraf_image&&t(o=>({...o,previewUrl:`${She.REACT_APP_API_URL}/${i.data.data.paraf_image}`}))}catch(i){console.error("Error fetching paraf:",i)}})()},[]);const n=a=>{const i=a.target.files[0];if(i&&i.type.startsWith("image/")){const o=URL.createObjectURL(i);t({selectedFile:i,previewUrl:o,error:null,loading:!1,success:!1})}else t({selectedFile:null,previewUrl:null,error:"File harus berupa gambar",loading:!1,success:!1})},r=async a=>{if(a.preventDefault(),!e.selectedFile)return;t(o=>({...o,loading:!0,error:null}));const i=new FormData;i.append("paraf_image",e.selectedFile);try{const o=await Ie.put("http://localhost:3000/api/admin/paraf",i,{headers:{"Content-Type":"multipart/form-data"}});if(o.data.success)t(l=>({...l,loading:!1,success:!0,error:null})),alert("Paraf berhasil diupload");else throw new Error(o.data.message||"Gagal mengupload paraf")}catch(o){console.error("Upload error:",o),t(l=>({...l,error:o.message||"Gagal mengupload paraf",loading:!1,success:!1})),e.previewUrl&&URL.revokeObjectURL(e.previewUrl)}};return k.useEffect(()=>()=>{e.previewUrl&&URL.revokeObjectURL(e.previewUrl)},[]),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mt-8 max-w-3xl",children:[A.jsx("h3",{className:"text-lg font-medium mb-4",children:"Upload Paraf"}),e.error&&A.jsx("div",{className:"mb-4 p-4 bg-red-50 text-red-600 rounded-md",children:e.error}),e.success&&A.jsx("div",{className:"mb-4 p-4 bg-green-50 text-green-600 rounded-md",children:"Paraf berhasil diupload!"}),e.previewUrl&&A.jsxs("div",{className:"mb-4",children:[A.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview Paraf:"}),A.jsx("img",{src:e.previewUrl,alt:"Preview Paraf",className:"h-20 object-contain border rounded-md"})]}),A.jsxs("form",{onSubmit:r,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pilih Gambar Paraf"}),A.jsx("input",{type:"file",accept:"image/*",onChange:n,className:"w-full p-2 border rounded-md",disabled:e.loading}),A.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Format yang didukung: JPG, JPEG, PNG (Max: 5MB)"})]}),A.jsx("button",{type:"submit",disabled:!e.selectedFile||e.loading,className:`px-4 py-2 rounded-md text-white transition-colors
            ${!e.selectedFile||e.loading?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:e.loading?"Mengupload...":"Upload Paraf"})]})]})}function Whe(){const{updatePassword:e}=ln(),[t,n]=k.useState(!1),[r,a]=k.useState({type:"",text:""}),[i,o]=k.useState({oldPassword:"",newPassword:"",konfirmasiPassword:""}),l=async c=>{if(c.preventDefault(),n(!0),a({type:"",text:""}),i.newPassword!==i.konfirmasiPassword){a({type:"error",text:"Konfirmasi password tidak sesuai"}),n(!1);return}try{const u=await e({oldPassword:i.oldPassword,newPassword:i.newPassword});a({type:"success",text:u.message}),o({oldPassword:"",newPassword:"",konfirmasiPassword:""})}catch(u){a({type:"error",text:u.message||"Terjadi kesalahan saat update password"})}finally{n(!1)}};return A.jsxs("section",{className:"bg-white p-6 rounded-lg shadow mt-8 max-w-3xl",children:[A.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Ubah Password"}),r.text&&A.jsx("div",{className:`mb-4 p-3 rounded ${r.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r.text}),A.jsxs("form",{onSubmit:l,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Password Lama"})," ",A.jsx("input",{type:"password",value:i.oldPassword,onChange:c=>o({...i,oldPassword:c.target.value}),className:"w-full p-2 border rounded-lg"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Password Baru"}),A.jsx("input",{type:"password",value:i.newPassword,onChange:c=>o({...i,newPassword:c.target.value}),className:"w-full p-2 border rounded-lg"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-600 mb-2",children:"Konfirmasi Password"}),A.jsx("input",{type:"password",value:i.konfirmasiPassword,onChange:c=>o({...i,konfirmasiPassword:c.target.value}),className:"w-full p-2 border rounded-lg"})]}),A.jsx("div",{className:"justify-end flex",children:A.jsx("button",{type:"submit",disabled:t,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:t?"Memperbarui...":"Update Password"})})]})]})}const khe=()=>A.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:A.jsxs("div",{className:"max-w-7xl mx-auto py-6 bg-white p-6 rounded-lg shadow my-8",children:[A.jsx(hi,{children:"Pengaturan Profile"}),A.jsxs("div",{className:"mt-6",children:[A.jsx(Bhe,{}),A.jsx(whe,{}),A.jsx(Whe,{})]})]})});function Vhe(){return A.jsxs(A.Fragment,{children:[A.jsx(es,{}),A.jsx(khe,{})]})}const Rhe="http://localhost:3000/api";function xhe(){const{user:e,updateProfile:t,refreshProfile:n}=ln(),[r,a]=k.useState(!1),[i,o]=k.useState({type:"",text:""}),[l,c]=k.useState({namaLengkap:"",nim:"",email:"",nomorTelepon:"",institusi:"",alamat:"",photo:null,photoPreview:null}),[u,I]=k.useState({passwordLama:"",passwordBaru:"",konfirmasiPassword:""});k.useEffect(()=>{e&&c({namaLengkap:e.nama||"",nim:e.nim||"",email:e.email||"",nomorTelepon:e.no_telepon||"",institusi:e.institusi||"",alamat:e.alamat||"",photo:null,photoPreview:e.photo_profile||null})},[e]);const d=h=>{const b=h.target.files[0];if(b){if(b.size>2*1024*1024){o({type:"error",text:"Ukuran file tidak boleh lebih dari 2MB"});return}if(!b.type.match(/^image\/(jpeg|png|jpg)$/)){o({type:"error",text:"Format file harus JPG atau PNG"});return}c(y=>({...y,photo:b,photoPreview:URL.createObjectURL(b)}))}},m=async h=>{var b,y;h.preventDefault(),a(!0),o({type:"",text:""});try{const v=new FormData;l.email!==e.email&&v.append("email",l.email),l.nomorTelepon!==e.no_telepon&&v.append("no_telepon",l.nomorTelepon),l.alamat!==e.alamat&&v.append("alamat",l.alamat),l.photo&&v.append("photo_profile",l.photo);const G=await t(v);G.success&&(o({type:"success",text:G.message}),await n())}catch(v){console.error("Error updating profile:",v),o({type:"error",text:((y=(b=v.response)==null?void 0:b.data)==null?void 0:y.message)||"Terjadi kesalahan saat update profile"})}finally{a(!1)}},p=async h=>{var b,y;if(h.preventDefault(),u.passwordBaru!==u.konfirmasiPassword){o({type:"error",text:"Konfirmasi password tidak sesuai"});return}a(!0),o({type:"",text:""});try{const v=await Ie.put(`${Rhe}/user/profile/password`,{oldPassword:u.passwordLama,newPassword:u.passwordBaru},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});v.data.success&&(o({type:"success",text:v.data.message}),I({passwordLama:"",passwordBaru:"",konfirmasiPassword:""}))}catch(v){o({type:"error",text:((y=(b=v.response)==null?void 0:b.data)==null?void 0:y.message)||"Terjadi kesalahan saat update password"})}finally{a(!1)}};return A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.text&&A.jsx("div",{className:`p-4 rounded-lg ${i.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:i.text}),A.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[A.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Informasi Pribadi"}),A.jsx("div",{className:"flex justify-center mb-6",children:A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200",children:l.photoPreview?A.jsx("img",{src:l.photoPreview,alt:"Profile",className:"w-full h-full object-cover"},l.photoPreview):A.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Photo"})}),A.jsxs("label",{className:"absolute bottom-0 right-0 bg-white rounded-full p-2 shadow-lg cursor-pointer",children:[A.jsx(rH,{className:"w-4 h-4 text-gray-600"}),A.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:d})]})]})}),A.jsxs("form",{onSubmit:m,children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap"}),A.jsx("input",{type:"text",value:l.namaLengkap,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIM"}),A.jsx("input",{type:"text",value:l.nim,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),A.jsx("input",{type:"email",value:l.email,onChange:h=>c({...l,email:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nomor Telepon"}),A.jsx("input",{type:"tel",value:l.nomorTelepon,onChange:h=>c({...l,nomorTelepon:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Institusi"}),A.jsx("input",{type:"text",value:l.institusi,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat"}),A.jsx("input",{type:"text",value:l.alamat,onChange:h=>c({...l,alamat:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),A.jsx("div",{className:"flex justify-end mt-6",children:A.jsx("button",{type:"submit",disabled:r,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:r?"Menyimpan...":"Simpan Perubahan"})})]})]}),A.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[A.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Ubah Password"}),A.jsxs("form",{onSubmit:p,children:[A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Lama"}),A.jsx("input",{type:"password",value:u.passwordLama,onChange:h=>I({...u,passwordLama:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Baru"}),A.jsx("input",{type:"password",value:u.passwordBaru,onChange:h=>I({...u,passwordBaru:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konfirmasi Password"}),A.jsx("input",{type:"password",value:u.konfirmasiPassword,onChange:h=>I({...u,konfirmasiPassword:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),A.jsx("div",{className:"flex justify-end mt-6",children:A.jsx("button",{type:"submit",disabled:r,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:r?"Memperbarui...":"Update Password"})})]})]})]}),A.jsx("div",{className:"space-y-6",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Status Magang"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-600",children:"Status"}),A.jsx("p",{className:"text-green-500 font-medium",children:(e==null?void 0:e.status)||"Aktif"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-600",children:"Periode Magang"}),A.jsxs("p",{className:"font-medium",children:[e==null?void 0:e.tanggal_mulai," - ",e==null?void 0:e.tanggal_selesai]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-600",children:"Sisa Waktu"}),A.jsxs("p",{className:"font-medium",children:[(e==null?void 0:e.sisa_hari)||"0"," Hari"]})]})]})]})})]})}const Xhe=()=>A.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:A.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[A.jsx(hi,{children:"Pengaturan Profile"}),A.jsx("div",{className:"mt-6",children:A.jsx(xhe,{})})]})});function Jhe(){const[e,t]=k.useState(null),[n,r]=k.useState([]),[a,i]=k.useState(null),[o,l]=k.useState("");k.useEffect(()=>{c(),u(),I()},[]);const c=async()=>{try{const h=(await Ie.get("/api/user/profile")).data.data;t(h),l(h.period)}catch(p){console.error("Error fetching profile:",p)}},u=async()=>{try{const p=await Ie.get("/api/user/recent-activities");r(p.data.data)}catch(p){console.error("Error fetching recent activities:",p)}},I=async()=>{try{const p=await Ie.get("/api/user/status-magang");i(p.data.data)}catch(p){console.error("Error fetching status magang:",p)}},d=async p=>{try{await Ie.put("/api/user/profile",p),c()}catch(h){console.error("Error updating profile:",h)}},m=async p=>{try{await Ie.put("/api/user/profile/password",p),c()}catch(h){console.error("Error updating password:",h)}};return A.jsxs(A.Fragment,{children:[A.jsx(Qu,{profile:e}),A.jsx(Xhe,{profile:e,onUpdateProfile:d,onUpdatePassword:m})]})}H3.createRoot(document.getElementById("root")).render(A.jsx(H.StrictMode,{children:A.jsx(_D,{basename:"/Sistem-Manajemen-Magang",children:A.jsx(Hj,{children:A.jsxs(wD,{children:[A.jsx(yn,{path:"/",element:A.jsx(Cc,{to:"/login",replace:!0})}),A.jsx(yn,{path:"/login",element:A.jsx($j,{})}),A.jsx(yn,{path:"/register",element:A.jsx(r8,{})}),A.jsx(yn,{path:"/scan",element:A.jsx(i6,{})}),A.jsx(yn,{path:"/dashboard",element:A.jsx(Dr,{allowedRoles:["admin"],children:A.jsx($Ae,{})})}),A.jsx(yn,{path:"/internship",element:A.jsx(Dr,{allowedRoles:["admin"],children:A.jsx(ame,{})})}),A.jsx(yn,{path:"/absensi",element:A.jsx(Dr,{allowedRoles:["admin"],children:A.jsx(sme,{})})}),A.jsx(yn,{path:"/logbook",element:A.jsx(Dr,{allowedRoles:["admin"],children:A.jsx(Cme,{})})}),A.jsx(yn,{path:"/laporan",element:A.jsx(Dr,{allowedRoles:["admin"],children:A.jsx(ahe,{})})}),A.jsx(yn,{path:"/profile",element:A.jsx(Dr,{allowedRoles:["admin"],children:A.jsx(Vhe,{})})}),A.jsx(yn,{path:"/dashboardUser",element:A.jsx(Dr,{allowedRoles:["mahasiswa"],children:A.jsx(she,{})})}),A.jsx(yn,{path:"/absensiUser",element:A.jsx(Dr,{allowedRoles:["mahasiswa"],children:A.jsx(Ahe,{})})}),A.jsx(yn,{path:"/logbookUser",element:A.jsx(Dr,{allowedRoles:["mahasiswa"],children:A.jsx(phe,{})})}),A.jsx(yn,{path:"/laporanUser",element:A.jsx(Dr,{allowedRoles:["mahasiswa"],children:A.jsx(Ghe,{})})}),A.jsx(yn,{path:"/profileUser",element:A.jsx(Dr,{allowedRoles:["mahasiswa"],children:A.jsx(Jhe,{})})})]})})})}));
