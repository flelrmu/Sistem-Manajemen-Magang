import{r as i,a as w,j as e,u as he,N as ee,b as G,H as Be,L as Te,c as ae,R as Me,D as J,C as q,S as _,d as $e,e as Re,f as ie,g as ke,h as Se,A as Ce,i as ve,k as Ue,l as Fe,X as ze,Y as Oe,T as Ge,m as re,n as W,o as Ke,F as _e,B as qe,P as Pe,p as He,q as ge,s as pe,t as K,v as te,w as Q,x as V,y as oe,z as Je,E as We,G as fe,I as Qe,J as de,K as Ve,M as Ye,O as Xe,Q as Ze,U as ce,V as ea,W as aa,Z as ta,_ as sa,$ as ra,a0 as De,a1 as la,a2 as na,a3 as ia,a4 as R}from"./vendor-B0UmRLs0.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const t of s.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&c(t)}).observe(document,{childList:!0,subtree:!0});function h(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(l){if(l.ep)return;l.ep=!0;const s=h(l);fetch(l.href,s)}})();const Le=i.createContext(null),O="http://localhost:3000",oa=({children:a})=>{const[n,h]=i.useState(null),[c,l]=i.useState(!0),s=async()=>{var m;try{const u=localStorage.getItem("token");if(!u)return;const p=(n==null?void 0:n.role)==="admin"?"/api/admin/profile":"/api/user/profile",d=await w.get(`${O}${p}`,{headers:{Authorization:`Bearer ${u}`}});if(d.data.success){const f=d.data.data.profile||d.data.data;if(f.photo_profile){const j=f.photo_profile.split("/").pop();f.photo_profile=`${O}/uploads/profiles/${j}`}return f.role=(n==null?void 0:n.role)||f.role,localStorage.setItem("user",JSON.stringify(f)),h(f),d.data}}catch(u){throw console.error("Error refreshing profile:",u),((m=u.response)==null?void 0:m.data)||{message:"Profile refresh error"}}},t=async(m,u)=>{var p;try{const d=await w.post(`${O}/api/auth/login`,{email:m,password:u});if(d.data.success){const{token:f}=d.data;localStorage.setItem("token",f),w.defaults.headers.common.Authorization=`Bearer ${f}`;const j=d.data.user.role==="admin"?"/api/admin/profile":"/api/user/profile",v=await w.get(`${O}${j}`,{headers:{Authorization:`Bearer ${f}`}});if(v.data.success){const y={...v.data.data.profile||v.data.data,role:d.data.user.role};if(y.photo_profile){const S=y.photo_profile.split("/").pop();y.photo_profile=`${O}/uploads/profiles/${S}`}return h(y),localStorage.setItem("user",JSON.stringify(y)),{success:!0,user:y}}}throw new Error(d.data.message||"Login failed")}catch(d){throw console.error("Login error:",d),((p=d.response)==null?void 0:p.data)||{message:"Login error"}}},o=async m=>{var u;try{const p=localStorage.getItem("token");if(!p)throw new Error("Token not found");const d=(n==null?void 0:n.role)==="admin"?"/api/admin/profile":"/api/user/profile",f=await w.put(`${O}${d}`,m,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"multipart/form-data"}});if(f.data.success){const j={...f.data.data.profile||f.data.data,role:n.role};return j.photo_profile&&!j.photo_profile.startsWith("http")&&(j.photo_profile=`${O}/uploads/profiles/${j.photo_profile}`),h(j),localStorage.setItem("user",JSON.stringify(j)),f.data}throw new Error(f.data.message||"Update failed")}catch(p){throw console.error("Error updating profile:",p),((u=p.response)==null?void 0:u.data)||{message:"Update profile error"}}},g=async m=>{var u;try{const p=localStorage.getItem("token");if(!p)throw new Error("Token not found");const f=(n==null?void 0:n.role)==="admin"?"/api/admin/profile/password":"/api/user/profile/password";return(await w.put(`${O}${f}`,m,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}})).data}catch(p){throw((u=p.response)==null?void 0:u.data)||{message:"Update password error"}}},x=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),delete w.defaults.headers.common.Authorization,h(null)};i.useEffect(()=>{(async()=>{try{l(!0);const u=localStorage.getItem("token"),p=localStorage.getItem("user");if(u&&p){w.defaults.headers.common.Authorization=`Bearer ${u}`;const d=JSON.parse(p);h(d),await s()}}catch(u){console.error("Auth initialization error:",u),x()}finally{l(!1)}})()},[]),i.useEffect(()=>{const m=w.interceptors.response.use(u=>u,u=>{var p;return((p=u.response)==null?void 0:p.status)===401&&x(),Promise.reject(u)});return()=>{w.interceptors.response.eject(m)}},[]);const r={user:n,loading:c,login:t,logout:x,updateProfile:o,updatePassword:g,refreshProfile:s};return e.jsx(Le.Provider,{value:r,children:!c&&a})},$=()=>{const a=i.useContext(Le);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},F=({children:a,allowedRoles:n})=>{const{user:h,loading:c}=$(),l=he();return c?e.jsx("div",{children:"Loading..."}):h?n&&!n.includes(h.role)?h.role==="admin"?e.jsx(ee,{to:"/dashboard",replace:!0}):h.role==="mahasiswa"?e.jsx(ee,{to:"/dashboardUser",replace:!0}):e.jsx(ee,{to:"/login",replace:!0}):a:e.jsx(ee,{to:"/login",state:{from:l},replace:!0})};function be(){return e.jsxs("div",{className:"justify-start gap-[14px] items-center flex px-5 py-5",children:[e.jsx("img",{className:"w-[75px] h-full relative",src:"images/sig.svg"}),e.jsx("img",{className:"w-[44px] h-full relative",src:"images/semenPadangLogo.svg"})]})}const da=()=>{const a=G(),{login:n}=$(),[h,c]=i.useState(!1),[l,s]=i.useState(""),[t,o]=i.useState({email:"",password:""}),g=r=>{o({...t,[r.target.name]:r.target.value}),l&&s("")},x=async r=>{r.preventDefault(),s("");try{c(!0),await n(t.email,t.password);const m=JSON.parse(localStorage.getItem("user"));m.role==="admin"?a("/dashboard"):m.role==="mahasiswa"&&a("/dashboardUser")}catch(m){s(m.message||"Terjadi kesalahan saat login")}finally{c(!1)}};return e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[l&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:l}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center",children:e.jsx(Be,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-red-500",value:t.email,onChange:g,required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center",children:e.jsx(Te,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-red-500",value:t.password,onChange:g,required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-black text-white py-2 px-4 rounded-md hover:bg-gray-800 transition duration-300 disabled:opacity-50",children:h?"Masuk...":"Masuk"}),e.jsx(ae,{to:"/scan",className:"w-full bg-white text-black border border-black py-2 px-4 rounded-md hover:bg-gray-100 transition duration-300 text-center",children:"Scan QR Code"})]}),e.jsx("div",{className:"text-center",children:e.jsx(ae,{to:"/register",className:"text-red-500 hover:underline text-sm",children:"Belum punya akun? Daftar"})})]})})};function je(){return e.jsx("div",{className:"absolute bottom-0 w-full h-1/2 bg-cover bg-center",children:e.jsx("img",{src:"images/bg.svg",alt:"Background",className:"w-full h-full object-cover"})})}function Ee(){return e.jsx(Me,{className:"hover:animate-pulse text-5xl font-bold text-red-500 mb-8",strings:["SISTEM ABSENSI MAGANG","SEMEN PADANG"],typeSpeed:100,backSpeed:100,loop:!0})}function ca(){return e.jsxs("div",{className:"h-screen bg-white relative overflow-hidden",children:[e.jsx(be,{}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center px-4",children:[e.jsx(Ee,{}),e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl text-red-500 font-bold  text-center mb-8",children:"Selamat datang"}),e.jsx(da,{})]})]}),e.jsx(je,{})]})}function ua(){return e.jsx(ca,{})}function ma(a){const{children:n,variant:h="",onClick:c=()=>{},type:l="Button"}=a;return e.jsx("button",{type:l,className:`flex px-4 ${h} py-2 text-white justify-center rounded-md duration-500`,onClick:()=>c(),children:n})}function xa(){const a=G(),[n,h]=i.useState(!1),[c,l]=i.useState(null),[s,t]=i.useState(null),[o,g]=i.useState([]),[x,r]=i.useState({email:"",password:"",konfirmasiPassword:"",nim:"",nama:"",institusi:"",jenis_kelamin:"",alamat:"",no_telepon:"",tanggal_mulai:"",tanggal_selesai:"",admin_id:""});i.useEffect(()=>{(async()=>{try{const p=await w.get("http://localhost:3000/api/admin/users");p.data.success&&g(p.data.admins)}catch(p){console.error("Error fetching admin users:",p),_.fire({title:"Error!",text:"Gagal memuat daftar admin",icon:"error",confirmButtonColor:"#EF4444"})}})()},[]);const m=async u=>{var p,d;if(u.preventDefault(),x.password!==x.konfirmasiPassword){await _.fire({title:"Error!",text:"Password dan konfirmasi password tidak cocok",icon:"error",confirmButtonColor:"#EF4444"});return}if(!c||!s){await _.fire({title:"Error!",text:"Tanggal mulai dan selesai harus diisi",icon:"error",confirmButtonColor:"#EF4444"});return}if(!x.admin_id){await _.fire({title:"Error!",text:"Silakan pilih admin pembimbing",icon:"error",confirmButtonColor:"#EF4444"});return}try{h(!0);const f={...x,tanggal_mulai:c.toISOString().split("T")[0],tanggal_selesai:s.toISOString().split("T")[0]};delete f.konfirmasiPassword,(await w.post("http://localhost:3000/api/auth/register",f)).data.success&&(await _.fire({title:"Berhasil!",text:"Registrasi berhasil. Silakan login menggunakan akun Anda.",icon:"success",confirmButtonColor:"#10B981"}),a("/login"))}catch(f){console.error("Registration error:",f),await _.fire({title:"Gagal!",text:((d=(p=f.response)==null?void 0:p.data)==null?void 0:d.message)||"Terjadi kesalahan saat registrasi",icon:"error",confirmButtonColor:"#EF4444"})}finally{h(!1)}};return e.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Nama"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded-md shadow-sm",value:x.nama,onChange:u=>r({...x,nama:u.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Pembimbing Lapangan"}),e.jsxs("select",{className:"w-full p-2 border rounded-md shadow-sm bg-white",value:x.admin_id,onChange:u=>r({...x,admin_id:u.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Pilih Pembimbing Lapangan"}),o.map(u=>e.jsx("option",{value:u.id,children:u.nama},u.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"NIM"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded-md shadow-sm",value:x.nim,onChange:u=>r({...x,nim:u.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",className:"w-full p-2 border rounded-md shadow-sm",value:x.email,onChange:u=>r({...x,email:u.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Nomor Telepon"}),e.jsx("input",{type:"tel",className:"w-full p-2 border rounded-md shadow-sm",value:x.no_telepon,onChange:u=>r({...x,no_telepon:u.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Tanggal Mulai"}),e.jsxs("div",{className:"flex",children:[e.jsx(J,{selected:c,onChange:u=>l(u),placeholderText:"mm/dd/yyyy",className:"w-full border rounded-l-md p-2 pr-44",required:!0}),e.jsx("button",{type:"button",className:"bg-gray-100 px-3 border-y border-r rounded-r-md",onClick:()=>document.querySelector(".react-datepicker__input-container input").focus(),children:e.jsx(q,{size:20,className:"text-gray-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Tanggal Selesai"}),e.jsxs("div",{className:"flex",children:[e.jsx(J,{selected:s,onChange:u=>t(u),placeholderText:"mm/dd/yyyy",className:"w-full border rounded-l-md p-2 pr-44",required:!0}),e.jsx("button",{type:"button",className:"bg-gray-100 px-3 border-y border-r rounded-r-md",onClick:()=>document.querySelector(".react-datepicker__input-container input").focus(),children:e.jsx(q,{size:20,className:"text-gray-500"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Institusi"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded-md shadow-sm",value:x.institusi,onChange:u=>r({...x,institusi:u.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Jenis Kelamin"}),e.jsxs("select",{className:"w-full p-2 border rounded-md shadow-sm bg-white",value:x.jenis_kelamin,onChange:u=>r({...x,jenis_kelamin:u.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Pilih Jenis Kelamin"}),e.jsx("option",{value:"L",children:"Laki-laki"}),e.jsx("option",{value:"P",children:"Perempuan"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Alamat"}),e.jsx("textarea",{className:"w-full p-2 border rounded-md shadow-sm h-24",value:x.alamat,onChange:u=>r({...x,alamat:u.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",className:"w-full p-2 border rounded-md shadow-sm",value:x.password,onChange:u=>r({...x,password:u.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Konfirmasi Password"}),e.jsx("input",{type:"password",className:"w-full p-2 border rounded-md shadow-sm",value:x.konfirmasiPassword,onChange:u=>r({...x,konfirmasiPassword:u.target.value}),required:!0})]})]}),e.jsxs("div",{className:"col-span-full flex justify-between items-center mt-6",children:[e.jsx(ae,{to:"/login",className:"text-sm text-gray-600 hover:underline",children:"Sudah ada akun?"}),e.jsx(ma,{type:"submit",variant:"bg-black hover:bg-gray-800",disabled:n,children:n?"Mendaftar...":"Daftar"})]})]})}const ha=()=>e.jsxs("div",{className:"h-screen bg-white relative overflow-hidden",children:[e.jsx(be,{}),e.jsxs("div",{className:"relative z-20 flex flex-col items-center justify-center px-4 h-[550px] ",children:[e.jsx(Ee,{}),e.jsxs("div",{className:"max-w-4xl w-full mx-auto bg-white mb-10 rounded-lg shadow-xl p-8 pb-10 overflow-y-auto scrollbar-hide",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-6",children:"Pendaftaran"}),e.jsx(xa,{})]})]}),e.jsx(je,{})]});function ga(){return e.jsx(ha,{})}function pa(){const[a,n]=i.useState(null),[h,c]=i.useState(!1),l=G(),s=async m=>{if(m&&!h&&m.text){c(!0);try{let u;try{u=m.text}catch(v){throw console.error("QR Parse error:",v),new Error("Format QR Code tidak valid")}let p;try{p=await new Promise((v,y)=>{navigator.geolocation.getCurrentPosition(v,y,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})})}catch(v){throw console.error("Location error:",v),new Error("Gagal mendapatkan lokasi. Pastikan GPS aktif.")}const d={qrData:u,latitude:p.coords.latitude,longitude:p.coords.longitude,deviceInfo:JSON.stringify({userAgent:navigator.userAgent,platform:navigator.platform})},f=await fetch("http://localhost:3000/api/absen/scan",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(d)});if(!f.ok){const v=await f.json();throw new Error(v.message||"Gagal memproses absensi")}const j=await f.json();if(j.success)n(j),await _.fire({title:'<div class="text-2xl font-bold mb-4">Absensi Berhasil! ðŸŽ‰</div>',html:`
              <div class="bg-gray-50 p-6 rounded-lg shadow-sm">
                <div class="space-y-3">
                  <div class="flex items-center border-b border-gray-200 pb-3">
                    <div class="w-24 text-gray-600">Nama</div>
                    <div class="flex-1 font-medium">${j.data.nama}</div>
                  </div>
                  <div class="flex items-center border-b border-gray-200 pb-3">
                    <div class="w-24 text-gray-600">Waktu</div>
                    <div class="flex-1 font-medium">${j.data.waktu}</div>
                  </div>
                  <div class="flex items-center border-b border-gray-200 pb-3">
                    <div class="w-24 text-gray-600">Status</div>
                    <div class="flex-1">
                      <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">
                        ${j.data.status}
                      </span>
                    </div>
                  </div>
                  ${j.data.dalam_radius!==void 0?`
                    <div class="flex items-center">
                      <div class="w-24 text-gray-600">Lokasi</div>
                      <div class="flex-1">
                        <span class="px-3 py-1 ${j.data.dalam_radius?"bg-green-100 text-green-800":"bg-red-100 text-red-800"} rounded-full text-sm font-medium">
                          ${j.data.dalam_radius?"Dalam radius":"Di luar radius"}
                        </span>
                      </div>
                    </div>
                  `:""}
                </div>
              </div>
            `,icon:"success",showConfirmButton:!0,confirmButtonText:"Selesai",confirmButtonColor:"#10B981",allowOutsideClick:!1,customClass:{popup:"swal2-show",container:"swal2-container",title:"text-2xl font-bold mb-4"}}).then(v=>{v.isConfirmed&&o()});else throw new Error(j.message||"Gagal memproses absensi")}catch(u){await _.fire({title:"Gagal!",text:u.message,icon:"error",confirmButtonColor:"#EF4444"})}finally{c(!1)}}},t=async m=>{console.error("Camera error:",m),await _.fire({title:"Error!",text:"Gagal mengakses kamera. Pastikan kamera dalam keadaan aktif.",icon:"error",confirmButtonColor:"#EF4444"})},o=()=>{n(null),window.location.reload()},g=280,x={height:g,width:g,objectFit:"cover"},r={height:g+40,width:g+40};return e.jsxs("div",{className:"h-screen bg-white relative overflow-hidden",children:[e.jsx(be,{}),e.jsx("div",{className:"bg-white relative overflow-hidden flex flex-col items-center justify-center",children:e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center px-10",children:e.jsx("div",{className:"max-w-2xl w-full mx-auto justify-center bg-white mb-4 rounded-lg shadow-xl p-8 px-24 pb-10 flex flex-col items-center",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center mb-8",children:"Scan QR Code Absensi"}),!a&&!h&&e.jsx("div",{className:"relative mb-8 flex items-center justify-center",children:e.jsxs("div",{className:"relative",style:r,children:[e.jsx("div",{className:"absolute inset-5",children:e.jsx($e,{delay:300,style:x,onError:t,onScan:s,className:"rounded-lg"})}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-10 h-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-red-500"}),e.jsx("div",{className:"absolute top-0 left-0 w-2 h-full bg-red-500"})]}),e.jsxs("div",{className:"absolute top-0 right-0 w-10 h-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-2 bg-red-500"}),e.jsx("div",{className:"absolute top-0 right-0 w-2 h-full bg-red-500"})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 w-10 h-10",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-2 bg-red-500"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-full bg-red-500"})]}),e.jsxs("div",{className:"absolute bottom-0 right-0 w-10 h-10",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-2 bg-red-500"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-full bg-red-500"})]})]})]})}),h&&e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsx(Re,{})}),e.jsx("div",{className:"text-center space-y-4",children:!a&&!h&&e.jsx("button",{className:"px-6 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",onClick:()=>l("/"),children:"Tutup"})})]})})})}),e.jsx(je,{})]})}const fa=()=>e.jsx(pa,{});function Z(){const a=he(),n=G(),[h,c]=i.useState(null),l=(t,o)=>{c(t),n(o)},s=[{id:1,name:"Dashboard",link:"/dashboard"},{id:2,name:"Internship",link:"/internship"},{id:3,name:"Absensi",link:"/absensi"},{id:4,name:"Logbook",link:"/logbook"},{id:5,name:"Laporan",link:"/laporan"}];return e.jsx("div",{className:"md:ml-6 h-full flex flex-col md:flex-row space-x-8",children:s.map(t=>e.jsx("div",{className:`${a.pathname===t.link||h===t.id?"text-red-500 border-b-2 border-red-500 ":"text-gray-500 hover:text-gray-700 duration-500"} px-3 pt-5 cursor-pointer`,onClick:()=>l(t.id,t.link),children:t.name},t.id))})}var ba={};const Y=({type:a})=>{var u,p;const{user:n,logout:h}=$(),[c,l]=i.useState(!1),[s,t]=i.useState(!1),o=i.useRef(null),g=G(),x=()=>{t(!s)},r=async()=>{try{await h(),g("/login")}catch(d){console.error("Logout error:",d)}},m=()=>n!=null&&n.photo_profile?n.photo_profile.startsWith("http")?n.photo_profile:`${ba.REACT_APP_API_URL||"http://localhost:3000"}/uploads/profiles/${n.photo_profile}`:null;return e.jsx("nav",{className:"bg-white z-50 fixed px-8 shadow-md w-full",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsxs("div",{className:"flex h-full items-center",children:[e.jsx("img",{src:"images/cemenLogo.svg",alt:"Logo",className:"h-11 w-auto"}),e.jsx("div",{className:"ml-6 h-full md:flex space-x-8 hidden",children:e.jsx(we,{type:a})})]}),e.jsxs("div",{className:"md:flex items-center hidden relative",ref:o,children:[e.jsx("button",{onClick:()=>l(!c),className:"flex items-center group hover:bg-gray-50 rounded-lg transition-all duration-150 ease-in-out",children:e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900 duration-500",children:(n==null?void 0:n.nama)||"Admin"}),e.jsx("span",{className:"text-xs text-gray-500 group-hover:text-gray-700 duration-500",children:((u=n==null?void 0:n.role)==null?void 0:u.charAt(0).toUpperCase())+((p=n==null?void 0:n.role)==null?void 0:p.slice(1))||"Admin"})]}),m()?e.jsx("img",{src:m(),alt:"Profile",className:"h-9 w-9 rounded-full ring-2 ring-gray-100 duration-500 group-hover:ring-red-300 object-cover",onError:d=>{d.target.onerror=null,d.target.src=null,d.target.className="hidden",d.target.nextSibling.className="h-9 w-9 rounded-full ring-2 ring-gray-100 duration-500 group-hover:ring-red-200 bg-gray-200 flex items-center justify-center"}}):e.jsx("div",{className:"h-9 w-9 rounded-full ring-2 ring-gray-100 duration-500 group-hover:ring-red-200 bg-gray-200 flex items-center justify-center",children:e.jsx(ie,{className:"h-6 w-6 text-gray-500"})}),e.jsx(ke,{className:`h-4 w-4 text-gray-500 transition-transform duration-500 ${c?"transform rotate-180":""}`})]})}),e.jsx("div",{className:`absolute right-0 top-full mt-1 w-60 rounded-xl bg-white shadow-lg ring-1 ring-black ring-opacity-5 transform transition-all duration-500 ease-in-out ${c?"opacity-100 translate-y-0 visible":"opacity-0 -translate-y-2 invisible"}`,children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-400 px-3 py-2",children:"Account Settings"}),e.jsxs(ae,{to:"/profile",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-700 hover:bg-blue-50 duration-500 transition-colors",onClick:()=>l(!1),children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-blue-50 text-blue-600",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:"Edit Profile"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Manage your account"})]})]}),e.jsx("div",{className:"h-px bg-gray-100 my-2"}),e.jsxs("button",{onClick:()=>{r(),l(!1)},className:"flex items-center gap-3 w-full px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50 duration-500 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-red-50 text-red-600",children:e.jsx(Se,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Log Out"}),e.jsx("span",{className:"text-xs text-red-500",children:"End your session"})]})]})]})})]}),e.jsx("div",{className:"md:hidden flex justify-between items-center w-full",children:e.jsx("div",{className:"bg-white shadow ml-auto px-[12px] py-[12px] rounded-md",children:e.jsx(Ce,{onClick:x,className:"h-5 w-5 text-gray-800"})})}),e.jsx("div",{className:`absolute shadow text-end justify-end items-end cursor-pointer mr-[32px] rounded-lg top-20 right-0 bg-white z-50 flex flex-col px-5 pb-5 transition-all duration-500 ease-in-out ${s?"opacity-100 translate-y-0 visible":"opacity-0 -translate-y-2 invisible"}`,children:e.jsx(we,{type:a})})]})})})},we=({type:a})=>a==="dashboard"?e.jsx(Z,{}):a==="internship"?e.jsx(Z,{}):a==="absensi"?e.jsx(Z,{}):a==="logbook"?e.jsx(Z,{}):e.jsx(Z,{});function ja(){const[a,n]=i.useState({totalInternship:0,kehadiranHariIni:0,pengajuanIzin:0,logbookPending:0}),{user:h}=$();i.useEffect(()=>{const l=async()=>{try{const s=await w.get("http://localhost:3000/api/absen/dashboard/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(s.data.success){const t=s.data.data;n({totalInternship:t.totalInternship,kehadiranHariIni:t.kehadiranHariIni,pengajuanIzin:t.izinHariIni,logbookPending:t.logbookPending})}}catch(s){console.error("Error fetching dashboard stats:",s)}};if((h==null?void 0:h.role)==="admin"){l();const s=setInterval(l,3e5);return()=>clearInterval(s)}},[h]);const c=[{title:"Total Internship Aktif",value:a.totalInternship,color:"text-black"},{title:"Kehadiran Hari Ini",value:a.kehadiranHariIni,color:"text-green-500"},{title:"Pengajuan Izin",value:a.pengajuanIzin,color:"text-yellow-500"},{title:"Logbook Pending",value:a.logbookPending,color:"text-yellow-500"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:c.map((l,s)=>e.jsxs("div",{className:"group bg-white p-6 rounded-lg shadow hover:scale-105 duration-500",children:[e.jsx("h3",{className:"text-gray-600 mb-2 group-hover:text-red-500 duration-500",children:l.title}),e.jsx("p",{className:`text-3xl font-bold ${l.color}`,children:l.value})]},s))})}const ya=()=>{const[a,n]=i.useState([]),[h,c]=i.useState({approved:0,pending:0,rejected:0}),[l,s]=i.useState(!1),t=Math.PI*2*15.9155,g=(()=>{const x=h.approved+h.pending+h.rejected;if(x===0)return{approved:0,pending:0,rejected:0};const r=h.approved/x*t,m=h.pending/x*t,u=h.rejected/x*t;return{approved:{offset:0,length:r},pending:{offset:r,length:m},rejected:{offset:r+m,length:u}}})();return i.useEffect(()=>{const x=async()=>{try{s(!0);const m=localStorage.getItem("token"),p=await(await fetch("http://localhost:3000/api/logbook/stats",{headers:{Authorization:`Bearer ${m}`}})).json();p.success&&c({approved:Number(p.data.approved)||0,pending:Number(p.data.pending)||0,rejected:Number(p.data.rejected)||0})}catch(m){console.error("Error fetching stats:",m)}finally{setTimeout(()=>s(!1),1e3)}};x();const r=setInterval(x,3e5);return()=>clearInterval(r)},[]),i.useEffect(()=>{const x=async()=>{try{const m=new Date,u=new Date(m.getTime()-7*24*60*60*1e3),p=await w.get("http://localhost:3000/api/absen/statistics",{params:{startDate:u.toISOString().split("T")[0],endDate:m.toISOString().split("T")[0]}});if(p.data.success){const d=p.data.data.map(f=>({day:new Date(f.date).toLocaleDateString("id-ID",{weekday:"long"}),hadir:f.hadir||0,izin:f.izin||0,alpha:f.alpha||0,total:(f.hadir||0)+(f.izin||0)+(f.alpha||0)}));n(d)}}catch(m){console.error("Error fetching attendance data:",m)}};x();const r=setInterval(x,3e5);return()=>clearInterval(r)},[]),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Grafik Kehadiran Mingguan"}),e.jsx("div",{className:"h-64",children:e.jsx(ve,{width:"100%",height:"100%",children:e.jsxs(Ue,{data:a,children:[e.jsx(Fe,{strokeDasharray:"3 3"}),e.jsx(ze,{dataKey:"day"}),e.jsx(Oe,{}),e.jsx(Ge,{}),e.jsx(re,{type:"monotone",dataKey:"hadir",stroke:"#10B981",name:"Hadir"}),e.jsx(re,{type:"monotone",dataKey:"izin",stroke:"#F59E0B",name:"Izin"}),e.jsx(re,{type:"monotone",dataKey:"alpha",stroke:"#EF4444",name:"Alpha"}),e.jsx(re,{type:"monotone",dataKey:"total",stroke:"#6366F1",name:"Total",strokeDasharray:"5 5"})]})})}),e.jsxs("div",{className:"flex justify-center mt-4 space-x-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Hadir"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Izin"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Alpha"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Total"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Status Logbook"}),e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(ve,{width:"80%",height:"80%",children:e.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full",children:[e.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#ddd",strokeWidth:"3"}),e.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeDasharray:`${g.approved.length} ${t}`,strokeDashoffset:l?t:g.approved.offset,transform:"rotate(-90 18 18)",className:"transition-all duration-1000 ease-out"}),h.pending>0&&e.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#F59E0B",strokeWidth:"3",strokeDasharray:`${g.pending.length} ${t}`,strokeDashoffset:l?t:-g.pending.offset,transform:"rotate(-90 18 18)",className:"transition-all duration-1000 ease-out delay-100"}),h.rejected>0&&e.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#EF4444",strokeWidth:"3",strokeDasharray:`${g.rejected.length} ${t}`,strokeDashoffset:l?t:-g.rejected.offset,transform:"rotate(-90 18 18)",className:"transition-all duration-1000 ease-out delay-200"})]})})}),e.jsxs("div",{className:"flex justify-center space-x-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full mr-2"}),e.jsxs("span",{className:`text-sm text-gray-600 transition-opacity duration-500 ${l?"opacity-0":"opacity-100"}`,children:["Approved (",h.approved.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full mr-2"}),e.jsxs("span",{className:`text-sm text-gray-600 transition-opacity duration-500 delay-100 ${l?"opacity-0":"opacity-100"}`,children:["Pending (",h.pending.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),e.jsxs("span",{className:`text-sm text-gray-600 transition-opacity duration-500 delay-200 ${l?"opacity-0":"opacity-100"}`,children:["Rejected (",h.rejected.toFixed(1),"%)"]})]})]})]})]})};function va(){const[a,n]=i.useState([]);i.useEffect(()=>{const s=async()=>{try{const o=new Date,x=new Date(o-24*60*60*1e3).toISOString().split("T")[0],[r,m,u]=await Promise.all([w.get("http://localhost:3000/api/logbook",{params:{startDate:x,endDate:new Date().toISOString().split("T")[0]}}),w.get("http://localhost:3000/api/reports",{params:{startDate:x,sort:"created_at",order:"desc"}}),w.get("http://localhost:3000/api/izin/history",{params:{startDate:x}})]),p=(f,j,v)=>f.filter(y=>{const S=new Date(y.created_at||y.tanggal);return o-S<=24*60*60*1e3}).map(y=>({type:j,description:v(y),timestamp:new Date(y.created_at||y.tanggal),status:y.status,mahasiswa_nama:y.mahasiswa_nama,details:y})),d=[...p(r.data.data,"Logbook",f=>`${f.mahasiswa_nama} mengajukan logbook untuk tanggal ${new Date(f.tanggal).toLocaleDateString("id-ID")}`),...p(m.data.data,"Laporan",f=>`${f.mahasiswa_nama} mengajukan laporan V${f.versi}`),...p(u.data.data,"Pengajuan Izin",f=>`${f.mahasiswa_nama} mengajukan izin ${f.kategori||""}`)].sort((f,j)=>j.timestamp-f.timestamp).slice(0,5);n(d)}catch(o){console.error("Error fetching activities:",o)}};s();const t=setInterval(s,5*60*1e3);return()=>clearInterval(t)},[]);const h=s=>{switch(s){case"Logbook":return e.jsx(qe,{className:"w-5 h-5 text-blue-500"});case"Laporan":return e.jsx(_e,{className:"w-5 h-5 text-green-500"});case"Pengajuan Izin":return e.jsx(Ke,{className:"w-5 h-5 text-purple-500"});default:return e.jsx(W,{className:"w-5 h-5 text-gray-500"})}},c=s=>{const t={pending:["Menunggu","bg-yellow-100 text-yellow-800"],approved:["Disetujui","bg-green-100 text-green-800"],rejected:["Ditolak","bg-red-100 text-red-800"],pending_review:["Menunggu Review","bg-blue-100 text-blue-800"],perlu_revisi:["Perlu Revisi","bg-orange-100 text-orange-800"]},[o,g]=t[s]||["Unknown","bg-gray-100 text-gray-800"];return e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${g}`,children:o})},l=s=>{if(!(s instanceof Date)||isNaN(s))return"Invalid Date";const o=new Date-s,g=Math.floor(o/6e4),x=Math.floor(o/36e5);return g<60?`${g} menit yang lalu`:x<24?`${x} jam yang lalu`:s.toLocaleString("id-ID",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short"})};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Aktifitas Terbaru"}),a.length>0?e.jsx("div",{className:"space-y-4",children:a.map((s,t)=>e.jsxs("div",{className:"flex items-start space-x-4 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"mt-1",children:h(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:s.type}),c(s.status)]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:l(s.timestamp)})]})]},t))}):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Tidak ada aktivitas dalam 24 jam terakhir"})]})}const wa=()=>e.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[e.jsx(ja,{}),e.jsx(ya,{}),e.jsx(va,{})]})});function Na(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{type:"dashboard"}),e.jsx(wa,{})]})}function ka(a){const{children:n,variant:h="",onClick:c=()=>{},type:l="Button"}=a;return e.jsx("button",{type:l,className:`${h} bg-gray-400 hover:bg-gray-600 text-white px-4 py-2 rounded-lg`,onClick:()=>c(),children:n})}function ue({onFilterChange:a}){const[n,h]=i.useState({status:"Semua Status",institusi:"Semua Institusi",periode:null,search:""}),[c,l]=i.useState([]),s=["Semua Status","aktif","selesai","berhenti"];i.useEffect(()=>{(async()=>{try{const g=await w.get("http://localhost:3000/api/admin/institutions");l(["Semua Institusi",...g.data.institutions])}catch(g){console.error("Error fetching institutions:",g)}})()},[]);const t=(o,g)=>{const x={...n,[o]:g};h(x),a(x)};return e.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Status"}),e.jsx("select",{className:"w-full border rounded-md p-2",value:n.status,onChange:o=>t("status",o.target.value),children:s.map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Institusi"}),e.jsx("select",{className:"w-full border rounded-md p-2",value:n.institusi,onChange:o=>t("institusi",o.target.value),children:c.map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Periode Magang"}),e.jsxs("div",{className:"flex",children:[e.jsx(J,{selected:n.periode,onChange:o=>t("periode",o),placeholderText:"Pilih tanggal",className:"w-full border rounded-l-md p-2 pr-44",dateFormat:"dd/MM/yyyy"}),e.jsx("button",{className:"bg-gray-100 px-3 border-y border-r rounded-r-md",onClick:()=>document.querySelector(".react-datepicker__input-container input").focus(),children:e.jsx(q,{size:20,className:"text-gray-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Pencarian"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Cari nama atau NIM",className:"flex-1 p-2 border rounded-lg",value:n.search,onChange:o=>t("search",o.target.value)}),e.jsx(ka,{onClick:()=>a(n),children:"Cari"})]})]})]})})}const Sa=({isOpen:a,onClose:n,mahasiswaData:h})=>{$();const[c,l]=i.useState({nama:"",nim:"",institusi:"",jenis_kelamin:"",alamat:"",no_telepon:"",tanggal_mulai:"",tanggal_selesai:""}),[s,t]=i.useState(!1),[o,g]=i.useState("");i.useEffect(()=>{h&&a&&l({nama:h.nama||"",nim:h.nim||"",institusi:h.institusi||"",jenis_kelamin:h.jenis_kelamin||"",alamat:h.alamat||"",no_telepon:h.no_telepon||"",tanggal_mulai:h.tanggal_mulai?new Date(h.tanggal_mulai).toISOString().split("T")[0]:"",tanggal_selesai:h.tanggal_selesai?new Date(h.tanggal_selesai).toISOString().split("T")[0]:""})},[h,a]);const x=m=>{const{name:u,value:p}=m.target;l(d=>({...d,[u]:p}))},r=async m=>{var u,p;m.preventDefault(),t(!0),g("");try{await w.put(`http://localhost:3000/api/admin/mahasiswa/${h.id}`,c,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),n(),window.location.reload()}catch(d){console.error("Update mahasiswa error:",d),g(((p=(u=d.response)==null?void 0:u.data)==null?void 0:p.message)||"Terjadi kesalahan saat memperbarui data mahasiswa")}finally{t(!1)}};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Data Mahasiswa"}),o&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:o}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nama"}),e.jsx("input",{type:"text",name:"nama",value:c.nama,onChange:x,className:"w-full px-3 py-2 border rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"NIM"}),e.jsx("input",{type:"text",name:"nim",value:c.nim,onChange:x,className:"w-full px-3 py-2 border rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Institusi"}),e.jsx("input",{type:"text",name:"institusi",value:c.institusi,onChange:x,className:"w-full px-3 py-2 border rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jenis Kelamin"}),e.jsxs("select",{name:"jenis_kelamin",value:c.jenis_kelamin,onChange:x,className:"w-full px-3 py-2 border rounded",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Jenis Kelamin"}),e.jsx("option",{value:"Laki-laki",children:"Laki-laki"}),e.jsx("option",{value:"Perempuan",children:"Perempuan"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alamat"}),e.jsx("textarea",{name:"alamat",value:c.alamat,onChange:x,className:"w-full px-3 py-2 border rounded",rows:"3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nomor Telepon"}),e.jsx("input",{type:"tel",name:"no_telepon",value:c.no_telepon,onChange:x,className:"w-full px-3 py-2 border rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal Mulai Magang"}),e.jsx("input",{type:"date",name:"tanggal_mulai",value:c.tanggal_mulai,onChange:x,className:"w-full px-3 py-2 border rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal Selesai Magang"}),e.jsx("input",{type:"date",name:"tanggal_selesai",value:c.tanggal_selesai,onChange:x,className:"w-full px-3 py-2 border rounded",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",disabled:s,children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:s,children:s?"Memperbarui...":"Perbarui"})]})]})]})}):null};function Ca(){const[a,n]=i.useState([]),[h,c]=i.useState(!0),[l,s]=i.useState(""),[t,o]=i.useState(1),[g,x]=i.useState(1),[r,m]=i.useState({status:"Semua Status",institusi:"Semua Institusi",periode:null,search:""}),[u,p]=i.useState(null),[d,f]=i.useState(!1),j=10,{user:v}=$(),y=async(b=t)=>{var N,D;try{const P={page:b,limit:j,...r.status!=="Semua Status"&&{status:r.status},...r.institusi!=="Semua Institusi"&&{institusi:r.institusi},...r.periode&&{periode:r.periode.toISOString().split("T")[0]},...r.search&&{search:r.search}},A=await w.get("http://localhost:3000/api/admin/mahasiswa",{params:P,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});A.data.success&&(n(A.data.mahasiswa),x(Math.ceil(A.data.total/j)))}catch(P){console.error("Error details:",P.response||P),s(((D=(N=P.response)==null?void 0:N.data)==null?void 0:D.message)||"Gagal memuat data mahasiswa")}finally{c(!1)}},S=b=>{m(b),o(1)};i.useEffect(()=>{v&&v.role==="admin"?y():c(!1)},[v,t,r]);const C=async b=>{var N,D;if(window.confirm("Apakah Anda yakin ingin menghapus data ini?"))try{await w.delete(`http://localhost:3000/api/admin/mahasiswa/${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),n(a.filter(P=>P.id!==b)),alert("Data mahasiswa berhasil dihapus.")}catch(P){console.error("Error deleting mahasiswa:",P.response||P),alert(((D=(N=P.response)==null?void 0:N.data)==null?void 0:D.message)||"Gagal menghapus data mahasiswa.")}},E=b=>{p(b),f(!0)},B=()=>{f(!1),p(null)};return h?e.jsxs("div",{children:[e.jsx(ue,{onFilterChange:S}),e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{children:"Loading data mahasiswa..."})})]}):l?e.jsxs("div",{children:[e.jsx(ue,{onFilterChange:S}),e.jsxs("div",{className:"p-4 text-center text-red-500",children:[e.jsxs("p",{children:["Error: ",l]}),e.jsx("button",{onClick:()=>y(),className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Coba Lagi"})]})]}):!v||v.role!=="admin"?e.jsx("div",{className:"p-4 text-center text-yellow-600",children:"Anda harus login sebagai admin untuk melihat data ini."}):e.jsxs("div",{children:[e.jsx(ue,{onFilterChange:S}),e.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.length===0?e.jsx("div",{className:"p-4 text-center text-gray-600",children:"Tidak ada data mahasiswa yang tersedia."}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"p-4 text-left",children:"Nama"}),e.jsx("th",{className:"p-4 text-left",children:"NIM"}),e.jsx("th",{className:"p-4 text-left",children:"Institusi"}),e.jsx("th",{className:"p-4 text-left",children:"Periode Magang"}),e.jsx("th",{className:"p-4 text-left",children:"Status"}),e.jsx("th",{className:"p-4 text-left",children:"Aksi"})]})}),e.jsx("tbody",{children:a.map(b=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:b.photo_profile||"/api/placeholder/40/40",alt:b.nama,className:"h-10 w-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:b.nama}),e.jsx("div",{className:"text-gray-500 text-sm",children:b.email})]})]})}),e.jsx("td",{className:"p-4",children:b.nim}),e.jsx("td",{className:"p-4",children:b.institusi}),e.jsxs("td",{className:"p-4",children:[new Date(b.tanggal_mulai).toLocaleDateString()," -"," ",new Date(b.tanggal_selesai).toLocaleDateString()]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${b.status==="aktif"?"bg-green-100 text-green-800":b.status==="selesai"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:b.status})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{className:"text-blue-500 hover:bg-blue-50 p-1",onClick:()=>E(b),children:e.jsx(Pe,{size:20})}),e.jsx("button",{className:"text-red-500 hover:bg-red-50 p-1",onClick:()=>C(b.id),children:e.jsx(He,{size:20})})]})})]},b.id))})]}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-between",children:[e.jsxs("div",{className:"text-gray-600",children:["Showing ",(t-1)*j+1," to"," ",Math.min(t*j,a.length)," of"," ",a.length," entries"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 border rounded text-gray-600 disabled:opacity-50",onClick:()=>o(b=>Math.max(b-1,1)),disabled:t===1,children:"Previous"}),[...Array(g)].map((b,N)=>e.jsx("button",{className:`px-3 py-1 border rounded ${t===N+1?"bg-gray-100":"text-gray-600"}`,onClick:()=>o(N+1),children:N+1},N+1)),e.jsx("button",{className:"px-3 py-1 border rounded text-gray-600 disabled:opacity-50",onClick:()=>o(b=>Math.min(b+1,g)),disabled:t===g,children:"Next"})]})]})]})}),e.jsx(Sa,{isOpen:d,onClose:B,mahasiswaData:u})]})}function z(a){const{children:n}=a;return e.jsx("h1",{className:"text-2xl font-bold",children:n})}function _a(){return e.jsx("div",{className:"h-auto relative px-8 pt-[70px] w-full",children:e.jsx("div",{className:"max-w-7xl mx-auto py-8",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsx(z,{children:"Manajemen Data Intership"})}),e.jsx(Ca,{})]})})})}function Pa(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{type:"internship"}),e.jsx(_a,{})]})}function Da(){const[a,n]=i.useState({totalMahasiswa:0,hadir:0,izin:0,alpha:0}),{user:h}=$();i.useEffect(()=>{const s=async()=>{try{const t=await w.get("http://localhost:3000/api/admin/mahasiswa",{params:{status:"aktif"},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),o=new Date().toISOString().split("T")[0],g=await w.get("http://localhost:3000/api/absen/riwayat",{params:{tanggal:o},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(g.data.success){const x=g.data.data;n({totalMahasiswa:t.data.total||0,hadir:x.filter(r=>r.status_kehadiran==="hadir").length,izin:x.filter(r=>r.status_kehadiran==="izin").length,alpha:x.filter(r=>r.status_kehadiran==="alpha").length})}else n(x=>({...x,totalMahasiswa:t.data.total||0}))}catch(t){console.error("Error fetching stats:",t)}};if((h==null?void 0:h.role)==="admin"){s();const t=setInterval(s,3e5);return()=>clearInterval(t)}},[h]);const c=s=>{switch(s){case"Total Intership":return"text-black";case"Hadir":return"text-green-500";case"Izin":return"text-yellow-500";case"Alpha":return"text-red-500";default:return"text-gray-500"}},l=[{title:"Total Intership",value:a.totalMahasiswa},{title:"Hadir",value:a.hadir},{title:"Izin",value:a.izin},{title:"Alpha",value:a.alpha}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:l.map((s,t)=>e.jsxs("div",{className:"group bg-white p-6 rounded-lg shadow hover:scale-105 duration-500",children:[e.jsx("h3",{className:"text-gray-600 mb-2 group-hover:text-red-500 duration-500",children:s.title}),e.jsx("p",{className:`text-3xl font-bold ${c(s.title)}`,children:s.value})]},t))})}function me({onFilterChange:a}){const[n,h]=i.useState(null),[c,l]=i.useState(""),[s,t]=i.useState("");i.useEffect(()=>{const r={startDate:n?o(n):null,endDate:n?o(n):null,status:c||"Semua Status",search:s.trim()};a(r)},[n,c,s]);const o=r=>{if(!r)return null;const m=r.getFullYear(),u=String(r.getMonth()+1).padStart(2,"0"),p=String(r.getDate()).padStart(2,"0");return`${m}-${u}-${p}`},g=()=>{h(null),l(""),t(""),a({startDate:null,endDate:null,status:"Semua Status",search:""})},x=ge.forwardRef(({value:r,onClick:m,placeholder:u},p)=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",ref:p,className:"w-full p-2 pl-10 border rounded-lg cursor-pointer bg-white pr-44",value:r||"",onClick:m,placeholder:u,readOnly:!0}),e.jsx(q,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}));return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal"}),e.jsx(J,{selected:n,onChange:r=>h(r),dateFormat:"dd/MM/yyyy",placeholderText:"Pilih tanggal",isClearable:!0,customInput:e.jsx(x,{})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Kehadiran"}),e.jsxs("select",{value:c,onChange:r=>l(r.target.value),className:"w-full p-2 border rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"hadir",children:"Hadir"}),e.jsx("option",{value:"izin",children:"Izin"}),e.jsx("option",{value:"alpha",children:"Alpha"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cari Mahasiswa"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s,onChange:r=>t(r.target.value),placeholder:"Cari nama atau NIM...",className:"w-full p-2 pl-10 pr-10 border rounded-lg"}),e.jsx(pe,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s&&e.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(K,{size:16})})]})]})]}),(n||c||s)&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:g,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear Filters"})})]})}function La(){const[a,n]=i.useState([]),[h,c]=i.useState(!0),[l,s]=i.useState(""),[t,o]=i.useState(1),[g,x]=i.useState(1),[r,m]=i.useState({tanggal:null,status:"Semua Status",search:""}),[u,p]=i.useState([]),[d,f]=i.useState(!1),{user:j}=$(),v=10,y=async(b=t)=>{var N,D;try{c(!0),s(null);const P={page:b,limit:v};r.status!=="Semua Status"&&(P.status=r.status),r.startDate&&r.endDate&&(P.startDate=r.startDate,P.endDate=r.endDate),r.search&&(P.search=r.search);const A=await w.get("http://localhost:3000/api/absen/riwayat",{params:P,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(A.data.success){const U=A.data.data.map((I,k)=>({id:I.id||`temp-${k}`,nama:I.mahasiswa_nama||"-",nim:I.nim||"-",tanggal:I.tanggal?new Date(I.tanggal).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",waktu_masuk:I.waktu_masuk?new Date(I.waktu_masuk).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"-",waktu_keluar:I.waktu_keluar?new Date(I.waktu_keluar).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"-",status_kehadiran:I.status_kehadiran||"-",dalam_radius:I.dalam_radius||!1,status_masuk:I.status_masuk||"-",uniqueKey:`${I.id||k}-${I.nim||"nonim"}-${I.tanggal||"nodate"}`}));n(U),x(Math.ceil((A.data.total||U.length)/v))}}catch(P){console.error("Error fetching data:",P),s(((D=(N=P.response)==null?void 0:N.data)==null?void 0:D.message)||"Gagal memuat data absensi"),n([]),x(1)}finally{c(!1)}},S=async()=>{var b;if(u.length===0){alert("Pilih setidaknya satu data untuk diekspor");return}f(!0);try{const N=await w.post("http://localhost:3000/api/absen/export-admin",{selectedIds:u},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},responseType:"blob"});if(N.data instanceof Blob){const D=new Blob([N.data],{type:"application/pdf"}),P=window.URL.createObjectURL(D),A=document.createElement("a");A.href=P,A.setAttribute("download",`Absensi_Admin_${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(A),A.click(),document.body.removeChild(A),window.URL.revokeObjectURL(P)}else throw new Error("Invalid response format")}catch(N){console.error("Export error:",N);let D="Gagal mengekspor data";if(N.response)if(N.response.data instanceof Blob){const P=await N.response.data.text();try{D=JSON.parse(P).message||D}catch(A){console.error("Error parsing error response:",A)}}else D=((b=N.response.data)==null?void 0:b.message)||D;alert(D)}finally{f(!1)}},C=b=>{m(b),o(1),p([])},E=b=>{p(b.target.checked?a.map(N=>N.id):[])},B=b=>{p(N=>N.includes(b)?N.filter(D=>D!==b):[...N,b])};return i.useEffect(()=>{(j==null?void 0:j.role)==="admin"&&y()},[j,t,r]),!j||j.role!=="admin"?e.jsxs("div",{className:"p-4 text-center text-yellow-600 bg-yellow-50 rounded-lg",children:[e.jsx(te,{className:"w-6 h-6 mx-auto mb-2"}),"Anda harus login sebagai admin untuk melihat data ini."]}):h?e.jsxs("div",{children:[e.jsx(me,{onFilterChange:C}),e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Q,{className:"w-8 h-8 animate-spin mx-auto text-blue-500"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading data absensi..."})]})]}):l?e.jsxs("div",{children:[e.jsx(me,{onFilterChange:C}),e.jsxs("div",{className:"p-6 text-center text-red-500 bg-red-50 rounded-lg mt-4",children:[e.jsx(te,{className:"w-8 h-8 mx-auto mb-2"}),e.jsxs("p",{className:"mb-2",children:["Error: ",l]}),e.jsx("button",{onClick:()=>y(),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Coba Lagi"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{onFilterChange:C}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[u.length," data terpilih dari ",a.length," total data"]}),e.jsxs("button",{onClick:S,disabled:u.length===0||d,className:`flex items-center px-4 py-2 rounded transition-colors ${u.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"text-white bg-green-600 hover:bg-green-700"}`,children:[d?e.jsx(Q,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(V,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-8 py-4 px-4",children:e.jsx("input",{type:"checkbox",checked:u.length===a.length&&a.length>0,onChange:E,className:"rounded border-gray-300 text-blue-500 focus:ring-blue-500"})}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Nama"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"NIM"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Tanggal"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Waktu Masuk"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Waktu Keluar"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Ketepatan"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-600",children:"Lokasi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("input",{type:"checkbox",checked:u.includes(b.id),onChange:()=>B(b.id),className:"rounded border-gray-300 text-blue-500 focus:ring-blue-500"})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:b.nama}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:b.nim}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:b.tanggal}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:b.waktu_masuk}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:b.waktu_keluar}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${b.status_kehadiran==="hadir"?"bg-green-100 text-green-800":b.status_kehadiran==="izin"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:b.status_kehadiran.charAt(0).toUpperCase()+b.status_kehadiran.slice(1)})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${b.status_masuk==="tepat_waktu"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.status_masuk==="tepat_waktu"?"Tepat Waktu":"Telat"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${b.dalam_radius?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.dalam_radius?"Dalam Radius":"Luar Radius"})})]},b.uniqueKey))})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4 px-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(t-1)*v+1," to"," ",Math.min(t*v,a.length)," of"," ",a.length," entries"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>o(b=>Math.max(b-1,1)),disabled:t===1,className:"px-4 py-2 border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(g)].map((b,N)=>e.jsx("button",{onClick:()=>o(N+1),className:`px-4 py-2 border rounded-md ${t===N+1?"bg-blue-50 text-blue-600 border-blue-200":"hover:bg-gray-50"}`,children:N+1},N)),e.jsx("button",{onClick:()=>o(b=>Math.min(b+1,g)),disabled:t===g,className:"px-4 py-2 border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}function Ea(){const[a,n]=i.useState([]),[h,c]=i.useState(!0),[l,s]=i.useState(null),[t,o]=i.useState(1),g=10;i.useEffect(()=>{x()},[]);const x=async()=>{try{const y=await w.get("http://localhost:3000/api/izin/history",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});n(y.data.data),c(!1)}catch{s("Gagal mengambil data izin"),c(!1)}},r=async(y,S)=>{var C,E;try{S==="approve"?(await _.fire({title:"Konfirmasi Persetujuan",text:"Apakah Anda yakin ingin menyetujui izin ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed&&await m(y.id,"approved"):(await _.fire({title:"Tolak Izin",text:"Apakah Anda yakin ingin menolak izin ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280"})).isConfirmed&&await m(y.id,"rejected")}catch(B){console.error("Error in handling action:",B),await _.fire({title:"Error!",text:((E=(C=B.response)==null?void 0:C.data)==null?void 0:E.message)||"Terjadi kesalahan",icon:"error",confirmButtonColor:"#EF4444"})}},m=async(y,S)=>{try{await w.put(`http://localhost:3000/api/izin/${y}/status`,{status:S,alasan_response:""},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),n(a.map(C=>C.id===y?{...C,status:S}:C)),await _.fire({title:"Berhasil!",text:S==="approved"?"Izin telah disetujui":"Izin telah ditolak",icon:"success",confirmButtonColor:"#10B981"})}catch(C){throw C}},u=y=>`px-2 py-1 rounded-full text-xs ${{pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[y]}`,p=y=>new Date(y).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),d=t*g,f=d-g,j=a.slice(f,d),v=Math.ceil(a.length/g);return h?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Q,{className:"w-8 h-8 animate-spin text-gray-500"})}):l?e.jsxs("div",{className:"flex justify-center items-center h-64 text-red-500",children:[e.jsx(te,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:l})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mt-8",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4",children:"Mahasiswa"}),e.jsx("th",{className:"text-left p-4",children:"Tanggal"}),e.jsx("th",{className:"text-left p-4",children:"Kategori"}),e.jsx("th",{className:"text-left p-4",children:"Keterangan"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Aksi"})]})}),e.jsx("tbody",{children:j.map(y=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{children:e.jsx("div",{className:"font-medium",children:y.mahasiswa_nama})})})}),e.jsxs("td",{className:"p-4",children:[p(y.tanggal_mulai)," -"," ",p(y.tanggal_selesai)]}),e.jsx("td",{className:"p-4",children:y.kategori}),e.jsx("td",{className:"p-4",children:y.keterangan}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:u(y.status),children:y.status==="pending"?"Menunggu":y.status==="approved"?"Disetujui":"Ditolak"})}),e.jsx("td",{className:"p-4",children:y.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(y,"approve"),className:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Setujui",children:e.jsx(oe,{size:20})}),e.jsx("button",{onClick:()=>r(y,"reject"),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Tolak",children:e.jsx(K,{size:20})})]})})]},y.id))})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-gray-600",children:["Showing ",f+1," to"," ",Math.min(d,a.length)," of"," ",a.length," entries"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-50 disabled:opacity-50",onClick:()=>o(y=>Math.max(y-1,1)),disabled:t===1,children:"Previous"}),[...Array(v)].map((y,S)=>e.jsx("button",{className:`px-4 py-2 border rounded ${t===S+1?"bg-gray-50":"hover:bg-gray-50"}`,onClick:()=>o(S+1),children:S+1},S)),e.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-50 disabled:opacity-50",onClick:()=>o(y=>Math.min(y+1,v)),disabled:t===v,children:"Next"})]})]})})]})}function Ia(){return e.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsx(z,{children:"Manajemen Absensi"})}),e.jsx(Da,{}),e.jsx(La,{}),e.jsx(Ea,{})]})})}function Aa(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{type:"absensi"}),e.jsx(Ia,{})]})}function Ba({refreshTrigger:a=0}){const[n,h]=i.useState({total:0,approved:0,pending:0,rejected:0});i.useEffect(()=>{c()},[a]);const c=async()=>{try{const s=await w.get("http://localhost:3000/api/logbook");if(s.data.success&&s.data.data){const t=s.data.data;h({total:t.length,approved:t.filter(o=>o.status==="approved").length,pending:t.filter(o=>o.status==="pending").length,rejected:t.filter(o=>o.status==="rejected").length})}}catch(s){console.error("Error fetching logbook stats:",s)}},l=s=>{switch(s){case"Total Logbook":return"text-black";case"Approved":return"text-green-500";case"Pending":return"text-yellow-500";case"Rejected":return"text-red-500";default:return"text-gray-500"}};return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{title:"Total Logbook",value:n.total},{title:"Approved",value:n.approved},{title:"Pending",value:n.pending},{title:"Rejected",value:n.rejected}].map((s,t)=>e.jsxs("div",{className:"group bg-white p-6 rounded-lg shadow hover:scale-105 duration-500",children:[e.jsx("h3",{className:"text-gray-600 mb-2 group-hover:text-red-500 duration-500",children:s.title}),e.jsx("p",{className:`text-3xl font-bold ${l(s.title)}`,children:s.value})]},t))})}function Ta({onFilter:a}){const[n,h]=i.useState(null),[c,l]=i.useState(""),[s,t]=i.useState("");i.useEffect(()=>{const r={};n&&(r.date=o(n)),c&&(r.status=c),s.trim()&&(r.search=s.trim()),a(r)},[n,c,s]);const o=r=>{if(!r)return"";const m=r.getFullYear(),u=String(r.getMonth()+1).padStart(2,"0"),p=String(r.getDate()).padStart(2,"0");return`${m}-${u}-${p}`},g=()=>{h(null),l(""),t(""),a({})},x=ge.forwardRef(({value:r,onClick:m,placeholder:u},p)=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",ref:p,className:"w-full p-2 pl-10 border rounded-lg cursor-pointer bg-white pr-44",value:r||"",onClick:m,placeholder:u,readOnly:!0}),e.jsx(q,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}));return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal"}),e.jsx(J,{selected:n,onChange:r=>h(r),dateFormat:"dd/MM/yyyy",placeholderText:"Pilih tanggal",isClearable:!0,customInput:e.jsx(x,{})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:c,onChange:r=>l(r.target.value),className:"w-full p-2 border rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cari Mahasiswa"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s,onChange:r=>t(r.target.value),placeholder:"Cari nama atau NIM...",className:"w-full p-2 pl-10 pr-10 border rounded-lg"}),e.jsx(pe,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s&&e.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(K,{size:16})})]})]})]}),(n||c||s)&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:g,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear Filters"})})]})}function Ma({logbooks:a,onApprove:n,onReject:h,onSelectUser:c}){const[l,s]=i.useState(null),[t,o]=i.useState(!1),[g,x]=i.useState(null),[r,m]=i.useState(""),u=(d,f)=>{l===d?(s(null),c(null)):(s(d),c({id:d,name:f}))},p=async()=>{r.trim()&&(await h(g.id,r),o(!1),x(null),m(""))};return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 w-20",children:"Select"}),e.jsx("th",{className:"text-left p-4",children:"Mahasiswa"}),e.jsx("th",{className:"text-left p-4",children:"Tanggal"}),e.jsx("th",{className:"text-left p-4",children:"Aktivitas"}),e.jsx("th",{className:"text-left p-4",children:"Progress"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Aksi"})]})}),e.jsx("tbody",{children:a.map(d=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>u(d.mahasiswa_id,d.mahasiswa_nama),className:`w-6 h-6 rounded border ${l===d.mahasiswa_id?"bg-blue-500 border-blue-500":"border-gray-300"} flex items-center justify-center`,children:l===d.mahasiswa_id&&e.jsx(oe,{className:"w-4 h-4 text-white"})})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d.mahasiswa_nama}),e.jsx("div",{className:"text-gray-500 text-sm",children:d.nim})]})]})}),e.jsx("td",{className:"p-4",children:d.tanggal}),e.jsx("td",{className:"p-4 max-w-md",children:d.aktivitas}),e.jsxs("td",{className:"p-4",children:[d.progress,"%"]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${d.status==="approved"?"bg-green-100 text-green-800":d.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:d.status})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex gap-2",children:d.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>n(d.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-full",children:e.jsx(oe,{size:20})}),e.jsx("button",{onClick:()=>{x(d),o(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:e.jsx(K,{size:20})})]})})})]},d.id))})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Reject Logbook"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{value:r,onChange:d=>m(d.target.value),className:"w-full p-2 border rounded-md",rows:4,placeholder:"Masukkan catatan untuk mahasiswa..."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Batal"}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Reject"})]})]})]})})})]})}function $a(){const[a,n]=i.useState([]),[h,c]=i.useState(!0),[l,s]=i.useState(null),[t,o]=i.useState(null),[g,x]=i.useState(!1),[r,m]=i.useState({}),[u,p]=i.useState(0);i.useEffect(()=>{d()},[u]);const d=async(C={})=>{try{c(!0),s(null);const E=await w.get("http://localhost:3000/api/logbook",{params:C});E.data.success&&n(E.data.data)}catch(E){console.error("Error fetching logbooks:",E),s("Gagal mengambil data logbook")}finally{c(!1)}},f=C=>{m(C),d(C)},j=C=>{o(C)},v=async()=>{if(!(!(t!=null&&t.id)||g))try{x(!0);const C=await w.get(`http://localhost:3000/api/logbook/export/${t.id}`,{responseType:"blob"}),E=new Blob([C.data],{type:"application/pdf"}),B=window.URL.createObjectURL(E),b=document.createElement("a");b.href=B,b.download=`logbook_${t.name}_${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(B)}catch(C){console.error("Error downloading logbook:",C),await _.fire({title:"Gagal!",text:"Gagal mengunduh logbook",icon:"error",confirmButtonColor:"#EF4444"})}finally{x(!1)}},y=async C=>{var E,B;try{(await _.fire({title:"Konfirmasi Persetujuan",text:"Apakah Anda yakin ingin menyetujui logbook ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed&&(await w.put(`http://localhost:3000/api/logbook/${C}/status`,{status:"approved"})).data.success&&(p(D=>D+1),await d(r),await _.fire({title:"Berhasil!",text:"Logbook telah disetujui",icon:"success",confirmButtonColor:"#10B981"}))}catch(b){console.error("Error approving logbook:",b),await _.fire({title:"Gagal!",text:((B=(E=b.response)==null?void 0:E.data)==null?void 0:B.message)||"Gagal menyetujui logbook",icon:"error",confirmButtonColor:"#EF4444"})}},S=async(C,E)=>{var B,b;try{(await w.put(`http://localhost:3000/api/logbook/${C}/status`,{status:"rejected",catatan_admin:E})).data.success&&(p(D=>D+1),await d(r),await _.fire({title:"Berhasil!",text:"Logbook telah ditolak",icon:"success",confirmButtonColor:"#10B981"}))}catch(N){console.error("Error rejecting logbook:",N),await _.fire({title:"Gagal!",text:((b=(B=N.response)==null?void 0:B.data)==null?void 0:b.message)||"Gagal menolak logbook",icon:"error",confirmButtonColor:"#EF4444"})}};return e.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx(z,{children:"Manajemen Logbook"}),e.jsxs("button",{onClick:v,disabled:!t||g,className:`bg-green-600 hover:bg-green-700 text-white px-6 py-2.5 rounded-lg 
              inline-flex items-center transition-colors duration-200
              ${!t||g?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(V,{className:"mr-2 h-5 w-5"}),g?"Mengunduh...":"Download Logbook"]})]}),l&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-600 rounded-lg",children:l}),e.jsx(Ba,{refreshTrigger:u}),e.jsx(Ta,{onFilter:f}),h?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:"Tidak ada data logbook yang ditemukan"}):e.jsx(Ma,{logbooks:a,onSelectUser:j,onApprove:y,onReject:S}),t&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg",children:["Selected: ",t.name]})]})})}function Ra(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{type:"logbook"}),e.jsx($a,{})]})}function Ua(a){const{children:n,variant:h="",onClick:c=()=>{},type:l="Button"}=a;return e.jsxs("button",{type:l,className:`${h} bg-green-600 hover:bg-green-800 text-white px-4 py-2 rounded-lg flex items-center gap-2`,onClick:()=>c(),children:[e.jsx(Je,{size:20}),e.jsx("span",{children:n})]})}function Fa({filters:a={}}){$();const[n,h]=i.useState({total_laporan:0,disetujui:0,pending_review:0,perlu_revisi:0,avg_progress:0,first_submit:null,last_submit:null}),[c,l]=i.useState(!0),[s,t]=i.useState("");i.useEffect(()=>{o()},[a]);const o=async()=>{try{l(!0);const m=new URLSearchParams(a).toString(),u=await w.get(`http://localhost:3000/api/reports/stats?${m}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});u.data.success&&u.data.summary&&h(u.data.summary),t("")}catch(m){console.error("Error fetching stats:",m),t("Gagal memuat statistik laporan")}finally{l(!1)}},g=m=>{switch(m){case"Total Laporan":return"text-blue-600";case"Disetujui":return"text-green-600";case"Pending Review":return"text-yellow-600";case"Perlu Revisi":return"text-red-600";default:return"text-gray-600"}},x=m=>{switch(m){case"Total Laporan":return e.jsx(_e,{className:"h-6 w-6"});case"Disetujui":return e.jsx(fe,{className:"h-6 w-6"});case"Pending Review":return e.jsx(W,{className:"h-6 w-6"});case"Perlu Revisi":return e.jsx(We,{className:"h-6 w-6"});default:return null}};if(c)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(m=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"})]},m))});const r=[{title:"Total Laporan",value:n.total_laporan},{title:"Disetujui",value:n.disetujui},{title:"Pending Review",value:n.pending_review},{title:"Perlu Revisi",value:n.perlu_revisi}];return e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:s}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:r.map((m,u)=>e.jsx("div",{className:"bg-white group rounded-lg p-6 shadow hover:scale-105 duration-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:g(m.title),children:x(m.title)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 group-hover:text-red-500 duration-500",children:m.title}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:m.value})})]})]})},u))})]})}function za({onFilter:a}){const[n,h]=i.useState(null),[c,l]=i.useState(""),[s,t]=i.useState(""),[o,g]=i.useState(!1),[x]=Qe(s,500);i.useEffect(()=>{r()},[x,c,n]);const r=()=>{g(!0);const m={created_at:n?n.toISOString().split("T")[0]:null,status:c||null,search:s||null};Object.keys(m).forEach(u=>m[u]===null&&delete m[u]),a(m),g(!1)};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Tanggal Submit"}),e.jsxs("div",{className:"flex",children:[e.jsx(J,{selected:n,onChange:m=>h(m),placeholderText:"Pilih tanggal submit",className:"w-full border rounded-l-md p-2",locale:de,dateFormat:"dd/MM/yyyy",isClearable:!0,maxDate:new Date}),e.jsx("button",{className:"bg-gray-100 px-3 border-y border-r rounded-r-md",onClick:()=>document.querySelector(".react-datepicker__input-container input").focus(),children:e.jsx(q,{size:20,className:"text-gray-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Status"}),e.jsxs("select",{className:"w-full p-2 border rounded-lg",value:c,onChange:m=>l(m.target.value),children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"pending_review",children:"Pending Review"}),e.jsx("option",{value:"perlu_revisi",children:"Perlu Revisi"}),e.jsx("option",{value:"disetujui",children:"Disetujui"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Cari"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg pl-10",placeholder:"Cari nama/NIM...",value:s,onChange:m=>t(m.target.value)}),e.jsx(pe,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]})]}),o&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})}const Oa=({isOpen:a,onClose:n,onSubmit:h,report:c})=>{const[l,s]=i.useState(""),[t,o]=i.useState(null),[g,x]=i.useState(!1),r=async m=>{m.preventDefault(),x(!0);try{await h({feedback:l,file:t}),s(""),o(null)}catch(u){console.error("Error in reject submission:",u)}finally{x(!1)}};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Alasan Penolakan"}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:e.jsx(K,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-x-12 gap-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-500 text-sm block mb-1",children:"Mahasiswa:"}),e.jsx("span",{className:"text-gray-900 text-lg",children:c==null?void 0:c.mahasiswa_nama})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-500 text-sm block mb-1",children:"NIM:"}),e.jsx("span",{className:"text-gray-900 text-lg",children:c==null?void 0:c.nim})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-500 text-sm block mb-1",children:"Versi:"}),e.jsx("span",{className:"text-gray-900 text-lg",children:c==null?void 0:c.versi})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-500 text-sm block mb-1",children:"Tanggal Submit:"}),e.jsx("span",{className:"text-gray-900 text-lg",children:ce(new Date(c==null?void 0:c.created_at),"d/M/yyyy")})]})]})}),e.jsxs("form",{onSubmit:r,children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block mb-2",children:[e.jsx("span",{className:"text-gray-700 text-lg",children:"Feedback"}),e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{required:!0,value:l,onChange:m=>s(m.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:"4",placeholder:"Tuliskan feedback untuk perbaikan laporan..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block mb-2",children:e.jsx("span",{className:"text-gray-700 text-lg",children:"File Revisi (Opsional)"})}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"w-full flex items-center px-4 py-3 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"file",onChange:m=>o(m.target.files[0]),className:"hidden",accept:".pdf,.doc,.docx"}),e.jsx("span",{className:"inline-flex rounded-md shadow-sm",children:e.jsx("span",{className:"px-3 py-2 text-sm font-medium bg-white border border-gray-300 rounded-md",children:"Choose File"})}),e.jsx("span",{className:"ml-3 text-sm text-gray-600",children:t?t.name:"No file chosen"})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Format yang diizinkan: PDF, DOC, DOCX (Maks. 10MB)"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:n,className:"px-6 py-2.5 text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg text-lg font-medium transition-colors",disabled:g,children:"Batal"}),e.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-red-600 text-white rounded-lg text-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",disabled:g,children:g?"Mengirim...":"Kirim Feedback"})]})]})]})]})}):null};function Ga({filters:a={},onSelectionChange:n}){const[h,c]=i.useState(!1),[l,s]=i.useState(null),[t,o]=i.useState([]),[g,x]=i.useState(!0),[r,m]=i.useState(""),[u,p]=i.useState(1),[d,f]=i.useState(1),[j,v]=i.useState(0),[y,S]=i.useState([]),C=10;i.useEffect(()=>{E()},[u,a]),i.useEffect(()=>{n&&n(y)},[y]);const E=async()=>{var k,L;x(!0);try{const T=new URLSearchParams({page:u,limit:C,...a}).toString(),M=await w.get(`http://localhost:3000/api/reports?${T}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});M.data.success&&(o(M.data.data),f(M.data.totalPages),v(M.data.total),m(""))}catch(T){console.error("Error fetching reports:",T),m(((L=(k=T.response)==null?void 0:k.data)==null?void 0:L.message)||"Gagal memuat data laporan"),o([])}finally{x(!1)}},B=k=>{if(k.target.checked){const L=t.map(T=>T.id);S(L)}else S([])},b=k=>{S(L=>L.includes(k)?L.filter(T=>T!==k):[...L,k])},N=async(k,L)=>{var T,M;try{const H=await w({url:`http://localhost:3000${k}`,method:"GET",responseType:"blob",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/pdf"}}),Ae=new Blob([H.data],{type:"application/pdf"}),ye=window.URL.createObjectURL(Ae),X=document.createElement("a");X.href=ye,X.setAttribute("download",L),document.body.appendChild(X),X.click(),X.remove(),window.URL.revokeObjectURL(ye)}catch(H){console.error("Download error:",H),_.fire({title:"Gagal!",text:"Gagal mengunduh file. "+(((M=(T=H.response)==null?void 0:T.data)==null?void 0:M.message)||"Silakan coba lagi."),icon:"error",confirmButtonColor:"#EF4444"})}},D=async k=>{var L,T;try{(await _.fire({title:"Konfirmasi Persetujuan",text:"Apakah Anda yakin ingin menyetujui laporan ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#EF4444"})).isConfirmed&&(await w.post(`http://localhost:3000/api/reports/${k}/review`,{status:"disetujui",feedback:"Laporan disetujui"},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.success&&(await _.fire({title:"Berhasil!",text:"Laporan telah disetujui",icon:"success",confirmButtonColor:"#10B981"}),E())}catch(M){console.error("Error approving report:",M),await _.fire({title:"Gagal!",text:((T=(L=M.response)==null?void 0:L.data)==null?void 0:T.message)||"Gagal menyetujui laporan",icon:"error",confirmButtonColor:"#EF4444"})}},P=async k=>{try{(await _.fire({title:"Konfirmasi Penolakan",text:"Apakah Anda yakin ingin menolak laporan ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280"})).isConfirmed&&(s(k),c(!0))}catch(L){console.error("Error in rejection confirmation:",L),await _.fire({title:"Gagal!",text:"Terjadi kesalahan saat memproses penolakan",icon:"error",confirmButtonColor:"#EF4444"})}},A=async k=>{var L,T;try{const M=new FormData;M.append("status","perlu_revisi"),M.append("feedback",k.feedback),k.file&&M.append("file_revisi",k.file),(await w.post(`http://localhost:3000/api/reports/${l.id}/review`,M,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.success&&(c(!1),await _.fire({title:"Berhasil!",text:"Feedback telah berhasil dikirim",icon:"success",confirmButtonColor:"#10B981"}),E())}catch(M){console.error("Error rejecting report:",M),await _.fire({title:"Gagal!",text:((T=(L=M.response)==null?void 0:L.data)==null?void 0:T.message)||"Gagal mengirim feedback",icon:"error",confirmButtonColor:"#EF4444"})}},U=k=>{try{return k?ce(new Date(k),"d MMMM yyyy",{locale:de}):"-"}catch(L){return console.error("Date formatting error:",L),k}},I=k=>{const L={pending_review:"bg-yellow-100 text-yellow-800 border border-yellow-200",perlu_revisi:"bg-red-100 text-red-800 border border-red-200",disetujui:"bg-green-100 text-green-800 border border-green-200"},T={pending_review:"Menunggu Review",perlu_revisi:"Perlu Revisi",disetujui:"Disetujui"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${L[k]||"bg-gray-100 text-gray-800"}`,children:T[k]||k})};return g?e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-16 bg-gray-100"}),e.jsx("div",{className:"p-4 space-y-3",children:[...Array(5)].map((k,L)=>e.jsx("div",{className:"h-20 bg-gray-100 rounded"},L))})]})}):e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r&&e.jsx("div",{className:"p-4 bg-red-100 border-l-4 border-red-500 text-red-700",children:r}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full whitespace-nowrap",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:e.jsx("input",{type:"checkbox",checked:y.length===t.length&&t.length>0,onChange:B,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Mahasiswa"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Tanggal Submit"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Versi"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Progress"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Dokumen"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-600",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-8 text-gray-500",children:"Tidak ada data laporan"})}):t.map(k=>{var L;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",checked:y.includes(k.id),onChange:()=>b(k.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-medium",children:(L=k.mahasiswa_nama)==null?void 0:L.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:k.mahasiswa_nama}),e.jsx("div",{className:"text-gray-500 text-sm",children:k.nim})]})]})}),e.jsx("td",{className:"p-4 text-gray-600",children:U(k.created_at)}),e.jsx("td",{className:"p-4 text-gray-900 font-medium",children:k.versi}),e.jsxs("td",{className:"p-4 text-gray-600 font-medium",children:[k.progress||0,"%"]}),e.jsx("td",{className:"p-4",children:I(k.status)}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-2",children:[k.file_path&&e.jsxs("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg flex items-center gap-2 transition-colors",onClick:()=>N(k.file_path,`Laporan_${k.versi}.pdf`),children:[e.jsx(Ve,{size:18}),e.jsx("span",{className:"text-sm",children:"Laporan"})]}),k.file_revisi_path&&e.jsxs("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg flex items-center gap-2 transition-colors",onClick:()=>N(k.file_revisi_path,`Revisi_${k.versi}.pdf`),children:[e.jsx(Ye,{size:18}),e.jsx("span",{className:"text-sm",children:"Revisi"})]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex gap-2",children:k.status==="pending_review"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>D(k.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Setujui",children:e.jsx(oe,{size:18})}),e.jsx("button",{onClick:()=>P(k),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Tolak",children:e.jsx(K,{size:18})})]})})})]},k.id)})})]})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Menampilkan ",t.length," dari ",j," data"]}),d>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",onClick:()=>p(u-1),disabled:u===1,children:e.jsx(Xe,{className:"h-5 w-5"})}),[...Array(d)].map((k,L)=>e.jsx("button",{className:`px-4 py-2 border rounded-lg hover:bg-gray-50 transition-colors ${u===L+1?"bg-blue-50 text-blue-600 border-blue-600":"text-gray-600"}`,onClick:()=>p(L+1),children:L+1},L+1)),e.jsx("button",{className:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",onClick:()=>p(u+1),disabled:u===d,children:e.jsx(Ze,{className:"h-5 w-5"})})]})]})}),e.jsx(Oa,{isOpen:h,onClose:()=>{c(!1),s(null)},onSubmit:A,report:l})]})}function Ka(){G();const[a,n]=i.useState({}),[h,c]=i.useState(!1),[l,s]=i.useState([]),t=x=>{n(x)},o=x=>{s(x)},g=async()=>{if(l.length===0){alert("Pilih laporan yang akan diekspor");return}try{c(!0);const x=await w({url:"http://localhost:3000/api/reports/export",method:"POST",responseType:"blob",data:{selectedIds:l},headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),r=new Blob([x.data],{type:"application/pdf"}),m=window.URL.createObjectURL(r),u=document.createElement("a");u.href=m,u.setAttribute("download",`laporan_mahasiswa_${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(m)}catch(x){console.error("Export error:",x),alert("Gagal mengekspor data. Silakan coba lagi.")}finally{c(!1)}};return e.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx(z,{children:"Manajemen Laporan Akhir"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[l.length>0&&e.jsxs("span",{className:"text-sm text-gray-600",children:[l.length," laporan dipilih"]}),e.jsx(Ua,{onClick:g,disabled:h||l.length===0,children:h?"Mengekspor...":"Export Data"})]})]}),e.jsx(Fa,{filters:a}),e.jsx(za,{onFilter:t}),e.jsx(Ga,{filters:a,onSelectionChange:o})]})})}function qa(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{type:"laporan"}),e.jsx(Ka,{})]})}function Ha(){const[a,n]=i.useState({nama:"",institusi:"",sisa_hari:0});return i.useEffect(()=>{(async()=>{try{const c=localStorage.getItem("token"),l=await w.get("http://localhost:3000/api/user/profile",{headers:{Authorization:`Bearer ${c}`}});if(l.data.success){const{data:s}=l.data;n({nama:s.profile.nama,institusi:s.profile.institusi,sisa_hari:s.profile.sisa_hari})}}catch(c){console.error("Error fetching user data:",c)}})()},[]),e.jsx("div",{className:"bg-white rounded-xl shadow p-4 md:p-8 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Selamat Datang, ",a.nama]}),e.jsxs("p",{className:"text-gray-600",children:["Magang - ",a.institusi]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-600",children:"Masa Magang"}),e.jsxs("div",{className:"text-red-500 text-xl font-medium",children:[a.sisa_hari," Hari Tersisa"]})]})]})})}function Ja(){const[a,n]=i.useState(null),[h,c]=i.useState(!0),[l,s]=i.useState(""),[t,o]=i.useState(null),g=async()=>{var x,r;try{c(!0),s(null);const m=localStorage.getItem("token"),u=await w.get("http://localhost:3000/api/absen/absensi",{params:{page:1,limit:1},headers:{Authorization:`Bearer ${m}`}});if(u.data.success&&u.data.data[0]){const d=u.data.data[0],f={id:d.id,tanggal:new Date(d.tanggal).toLocaleDateString("id-ID"),waktu_masuk:d.waktu_masuk?new Date(d.waktu_masuk).toLocaleTimeString("id-ID"):null,waktu_keluar:d.waktu_keluar?new Date(d.waktu_keluar).toLocaleTimeString("id-ID"):null,status_kehadiran:d.status_kehadiran||"-",status_masuk:d.status_masuk||"-",dalam_radius:d.dalam_radius||!1};n(f)}const p=await w.get("http://localhost:3000/api/user/profileQr",{headers:{Authorization:`Bearer ${m}`}});p.data.success&&p.data.data.qr_code&&o(p.data.data.qr_code)}catch(m){console.error("Error fetching data:",m),s(((r=(x=m.response)==null?void 0:x.data)==null?void 0:r.message)||"Failed to load data")}finally{c(!1)}};return i.useEffect(()=>{g()},[]),h?e.jsx("div",{className:"bg-white rounded-xl shadow p-4 md:p-8 mb-6",children:e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{children:"Loading data..."})})}):l?e.jsx("div",{className:"bg-white rounded-xl shadow p-4 md:p-8 mb-6",children:e.jsxs("div",{className:"p-4 text-center text-red-500",children:[e.jsxs("p",{children:["Error: ",l]}),e.jsx("button",{onClick:g,className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry"})]})}):e.jsx("div",{className:"bg-white rounded-xl shadow p-4 md:p-8 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"flex flex-col items-center",children:t?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:t,alt:"QR Code",className:"w-64 h-64 object-contain",onError:x=>{console.error("Error loading QR code"),o(null)}}),e.jsx("p",{className:"text-gray-600 mt-2",children:"QR Code Anda"})]}):e.jsx("div",{className:"w-64 h-64 flex items-center justify-center border border-gray-200 rounded-lg",children:e.jsx("p",{className:"text-gray-500",children:"QR Code tidak tersedia"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-6",children:"Status Absensi Hari Ini"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(W,{className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Jam Masuk"}),e.jsx("div",{className:"font-medium",children:(a==null?void 0:a.waktu_masuk)||"Belum Absen"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ea,{className:"text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Status Lokasi"}),e.jsx("div",{className:"font-medium",children:a?e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${a.dalam_radius?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.dalam_radius?"Dalam Radius":"Luar Radius"}):"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(W,{className:"text-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Jam Keluar"}),e.jsx("div",{className:"font-medium",children:(a==null?void 0:a.waktu_keluar)||"Belum Absen"})]})]})]})]})]})})}const Wa=()=>{const[a,n]=i.useState({attendance:{total:0,days:0},logbook:{submitted:0,total:0,lastUpdate:null},report:{status:"",lastSubmission:null,version:"",feedback:"",daysSinceSubmission:0}}),[h,c]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const x=await(await fetch("http://localhost:3000/api/user/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),m=await(await fetch("http://localhost:3000/api/logbook",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),p=await(await fetch("http://localhost:3000/api/reports",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),d=new Date(x.data.profile.tanggal_mulai),f=new Date(x.data.profile.tanggal_selesai),j=Math.ceil((f-d)/(1e3*60*60*24))+1,v=x.data.statistik.total_kehadiran||0,y=m.data.sort((b,N)=>new Date(N.created_at)-new Date(b.created_at)),S=y.length>0?new Date(y[0].created_at).toLocaleDateString():"No submissions yet",C=p.data[0]||{},E=C.created_at?new Date(C.created_at):null,B=E?Math.ceil((new Date-E)/(1e3*60*60*24)):0;n({attendance:{total:v,days:j},logbook:{submitted:m.data.length,total:j,lastUpdate:S},report:{status:C.status||"Belum Submit",lastSubmission:E==null?void 0:E.toLocaleDateString("id-ID"),version:C.versi||"-",feedback:C.feedback||"-",daysSinceSubmission:B}})}catch(g){console.error("Error fetching dashboard data:",g)}finally{c(!1)}})()},[]);const l=()=>a.attendance.days===0?0:a.attendance.total/a.attendance.days*100,s=o=>{switch(o==null?void 0:o.toLowerCase()){case"disetujui":return"text-green-500";case"pending_review":case"menunggu review":return"text-orange-500";case"perlu_revisi":case"perlu revisi":return"text-red-500";default:return"text-gray-500"}},t=o=>{switch(o==null?void 0:o.toLowerCase()){case"disetujui":return"bg-green-100";case"pending_review":case"menunggu review":return"bg-orange-100";case"perlu_revisi":case"perlu revisi":return"bg-red-100";default:return"bg-gray-100"}};return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h3",{className:"text-gray-600 mb-2",children:"Total Kehadiran"}),h?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xl font-bold mb-4",children:[a.attendance.total,"/",a.attendance.days," Hari"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${l()}%`}})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h3",{className:"text-gray-600 mb-2",children:"Logbook Terisi"}),h?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xl font-bold mb-4",children:[a.logbook.submitted,"/",a.logbook.total," Hari"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Terakhir diperbarui: ",a.logbook.lastUpdate]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h3",{className:"text-gray-600 mb-2",children:"Status Laporan"}),h?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${s(a.report.status)} font-medium mb-2`,children:e.jsx("span",{className:`${t(a.report.status)} px-3 py-1 rounded-full text-sm`,children:a.report.status})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Versi:"})," ",a.report.version]}),a.report.lastSubmission&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Terakhir disubmit"})," ",a.report.daysSinceSubmission," hari yang lalu"]})})]})]})]})]})};function Qa(){return e.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[e.jsx(Ha,{}),e.jsx(Ja,{}),e.jsx(Wa,{})]})})}function le(){const a=he(),n=G(),[h,c]=i.useState(null),l=(t,o)=>{c(t),n(o)},s=[{id:1,name:"Dashboard",link:"/dashboardUser"},{id:2,name:"Absensi",link:"/absensiUser"},{id:3,name:"Logbook",link:"/logbookUser"},{id:4,name:"Laporan",link:"/laporanUser"}];return e.jsx("div",{className:"md:ml-6 h-full flex flex-col md:flex-row space-x-8",children:s.map(t=>e.jsx("div",{className:`${a.pathname===t.link||h===t.id?"text-red-500 border-b-2 border-red-500":"text-gray-500 hover:text-gray-700 duration-500"} px-3 pt-5 cursor-pointer`,onClick:()=>l(t.id,t.link),children:t.name},t.id))})}const se=({type:a})=>{const{user:n,logout:h}=$(),[c,l]=i.useState(!1),[s,t]=i.useState(!1),o=i.useRef(null),g=G(),x=()=>{t(!s)},r=async()=>{try{await h(),g("/login")}catch(m){console.error("Logout error:",m)}};return e.jsx("nav",{className:"bg-white z-50 fixed px-8 shadow-md w-full",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsxs("div",{className:"flex h-full items-center",children:[e.jsx("img",{src:"images/cemenLogo.svg",alt:"Logo",className:"h-11 w-auto"}),e.jsx("div",{className:"ml-6 h-full md:flex hidden space-x-8",children:e.jsx(Ne,{type:a})})]}),e.jsxs("div",{className:"md:flex items-center hidden relative",ref:o,children:[e.jsx("button",{onClick:()=>l(!c),className:"flex items-center group hover:bg-gray-50 rounded-lg transition-all duration-150 ease-in-out",children:e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900 duration-500",children:(n==null?void 0:n.nama)||"Mahasiswa"}),e.jsx("span",{className:"text-xs text-gray-500 group-hover:text-gray-700 duration-500",children:"Magang"})]}),e.jsx("div",{className:"h-9 w-9 rounded-full ring-2 ring-gray-100 duration-500 group-hover:ring-red-200 overflow-hidden",children:n!=null&&n.photo_profile?e.jsx("img",{src:n.photo_profile,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx(ie,{className:"h-6 w-6 text-gray-500"})})}),e.jsx(ke,{className:`h-4 w-4 text-gray-500 transition-transform duration-200 ${c?"transform rotate-180":""}`})]})}),e.jsx("div",{className:`
                absolute right-0 top-full mt-1 w-60 rounded-xl bg-white shadow-lg ring-1 ring-black ring-opacity-5
                transform transition-all duration-200 ease-in-out
                ${c?"opacity-100 translate-y-0 visible":"opacity-0 -translate-y-2 invisible"}
              `,children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-400 px-3 py-2",children:"Account Settings"}),e.jsxs(ae,{to:"/profileUser",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>l(!1),children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-blue-50 text-blue-600",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:"Edit Profile"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Manage your account"})]})]}),e.jsx("div",{className:"h-px bg-gray-100 my-2"}),e.jsxs("button",{onClick:()=>{r(),l(!1)},className:"flex items-center gap-3 w-full px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-red-50 text-red-600",children:e.jsx(Se,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Log Out"}),e.jsx("span",{className:"text-xs text-red-500",children:"End your session"})]})]})]})})]}),e.jsxs("div",{className:"md:hidden flex justify-between items-center w-full",children:[e.jsx("div",{className:"bg-white shadow ml-auto px-[12px] py-[12px] rounded-md",children:e.jsx("div",{children:e.jsx(Ce,{className:"text-3xl cursor-pointer text-gray-500",onClick:x})})}),e.jsx("div",{className:`absolute shadow text-end justify-end items-end cursor-pointer mr-[32px] rounded-lg top-20 right-0 bg-white z-50 flex flex-col px-5 pb-5 transition-all duration-500 ease-in-out ${s?"opacity-100 translate-y-0 visible":"opacity-0 -translate-y-2 invisible"}`,children:e.jsx(Ne,{type:a})})]})]})})})},Ne=({type:a})=>a==="dashboardUser"?e.jsx(le,{}):a==="absensiUser"?e.jsx(le,{}):a==="logbookUser"?e.jsx(le,{}):e.jsx(le,{});function Va(){return e.jsxs(e.Fragment,{children:[e.jsx(se,{type:"dashboardUser"}),e.jsx(Qa,{})]})}const Ya=({isOpen:a,onClose:n})=>{$();const[h,c]=i.useState([]),[l,s]=i.useState({tanggal_mulai:"",tanggal_selesai:"",kategori:"",keterangan:"",file_bukti:null}),[t,o]=i.useState(!1),[g,x]=i.useState("");i.useEffect(()=>{(async()=>{try{const d=await w.get("http://localhost:3000/api/izin/categories");c(d.data)}catch(d){console.error("Error fetching categories:",d),x("Failed to load categories")}})()},[]);const r=p=>{const{name:d,value:f}=p.target;s(j=>({...j,[d]:f}))},m=p=>{s(d=>({...d,file_bukti:p.target.files[0]}))},u=async p=>{var d,f,j,v;p.preventDefault(),o(!0),x("");try{const y=new FormData;Object.keys(l).forEach(S=>{l[S]&&y.append(S,l[S])}),await w.post("http://localhost:3000/api/izin/submit",y,{headers:{"Content-Type":"multipart/form-data"}}),_.fire({title:"Berhasil!",text:"Pengajuan izin berhasil dikirim",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}).then(S=>{S.isConfirmed&&n()})}catch(y){_.fire({title:"Gagal!",text:((f=(d=y.response)==null?void 0:d.data)==null?void 0:f.message)||"Terjadi kesalahan saat mengajukan izin",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),x(((v=(j=y.response)==null?void 0:j.data)==null?void 0:v.message)||"Terjadi kesalahan saat mengajukan izin")}finally{o(!1)}};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pengajuan Izin"}),g&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:g}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal Mulai"}),e.jsx("input",{type:"date",name:"tanggal_mulai",value:l.tanggal_mulai,onChange:r,className:"w-full px-3 py-2 border rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal Selesai"}),e.jsx("input",{type:"date",name:"tanggal_selesai",value:l.tanggal_selesai,onChange:r,className:"w-full px-3 py-2 border rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kategori"}),e.jsxs("select",{name:"kategori",value:l.kategori,onChange:r,className:"w-full px-3 py-2 border rounded",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Kategori"}),e.jsx("option",{value:"Sakit",children:"Sakit"}),e.jsx("option",{value:"Keperluan Keluarga",children:"Keperluan Keluarga"}),e.jsx("option",{value:"Keperluan Kampus",children:"Keperluan Kampus"}),e.jsx("option",{value:"Lainnya",children:"Lainnya"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Keterangan"}),e.jsx("textarea",{name:"keterangan",value:l.keterangan,onChange:r,className:"w-full px-3 py-2 border rounded",rows:"4",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Upload Bukti"}),e.jsx("input",{type:"file",name:"file_bukti",onChange:m,className:"w-full px-3 py-2 border rounded text-sm file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:bg-blue-50 file:text-blue-700",accept:".pdf,.jpg,.jpeg,.png"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",disabled:t,children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:t,children:t?"Mengirim...":"Ajukan"})]})]})]})}):null};function Xa(){const[a,n]=i.useState([]),[h,c]=i.useState(!0),[l,s]=i.useState(""),[t,o]=i.useState(1),[g,x]=i.useState(1),[r,m]=i.useState([]),[u,p]=i.useState(!1),{user:d}=$(),f=10,j=async(b=t)=>{var N,D;try{c(!0),s(null);const P=await w.get("http://localhost:3000/api/absen/absensi",{params:{page:b,limit:f},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(P.data.success){const A=P.data.data.map(I=>({id:I.id,tanggal:new Date(I.tanggal).toLocaleDateString("id-ID"),waktu_masuk:I.waktu_masuk?new Date(I.waktu_masuk).toLocaleTimeString("id-ID"):"-",waktu_keluar:I.waktu_keluar?new Date(I.waktu_keluar).toLocaleTimeString("id-ID"):"-",status_kehadiran:I.status_kehadiran||"-",status_masuk:I.status_masuk||"-",dalam_radius:I.dalam_radius||!1}));n(A);const U=P.data.total||A.length;x(Math.ceil(U/f))}}catch(P){console.error("Error fetching data:",P),s(((D=(N=P.response)==null?void 0:N.data)==null?void 0:D.message)||"Gagal memuat data absensi"),n([]),x(1)}finally{c(!1)}},v=async()=>{var b,N;if(r.length===0){alert("Pilih setidaknya satu data untuk diekspor");return}p(!0);try{const D=await w.post("http://localhost:3000/api/absen/export-mahasiswa",{selectedIds:r},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},responseType:"blob"}),P=new Blob([D.data],{type:"application/pdf"}),A=window.URL.createObjectURL(P),U=document.createElement("a");U.href=A,U.setAttribute("download",`Absensi_${d.nim||"Mahasiswa"}_${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(U),U.click(),document.body.removeChild(U),window.URL.revokeObjectURL(A)}catch(D){console.error("Export error:",D),alert("Gagal mengekspor data: "+(((N=(b=D.response)==null?void 0:b.data)==null?void 0:N.message)||"Terjadi kesalahan"))}finally{p(!1)}},y=b=>{b.target.checked?m(a.map(N=>N.id)):m([])},S=b=>{m(N=>N.includes(b)?N.filter(D=>D!==b):[...N,b])};if(i.useEffect(()=>{j()},[t]),h)return e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Q,{className:"w-8 h-8 animate-spin text-gray-500"})})});if(l)return e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64 text-red-500",children:[e.jsx(te,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:l})]})});const C=a.length,E=(t-1)*f,B=Math.min(E+f,C);return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-8 ",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Riwayat Absensi"}),e.jsxs("button",{onClick:v,disabled:r.length===0||u,className:`flex items-center px-4 py-2 rounded ${r.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[u?e.jsx(Q,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(V,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),e.jsx("div",{className:"overflow-x-auto",children:a.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada data absensi yang tersedia."}):e.jsxs("div",{children:[e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"w-8 py-4 px-4",children:e.jsx("input",{type:"checkbox",checked:r.length===a.length,onChange:y,className:"rounded border-gray-300"})}),e.jsx("th",{className:"text-left py-4",children:"Tanggal"}),e.jsx("th",{className:"text-left py-4",children:"Status"}),e.jsx("th",{className:"text-left py-4",children:"Waktu Masuk"}),e.jsx("th",{className:"text-left py-4",children:"Waktu Keluar"}),e.jsx("th",{className:"text-left py-4",children:"Ketepatan Waktu"}),e.jsx("th",{className:"text-left py-4",children:"Lokasi"})]})}),e.jsx("tbody",{children:a.map(b=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("input",{type:"checkbox",checked:r.includes(b.id),onChange:()=>S(b.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"py-4",children:b.tanggal}),e.jsx("td",{className:"py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${b.status_kehadiran==="hadir"?"bg-green-100 text-green-800":b.status_kehadiran==="izin"?"bg-yellow-100 text-[#F59E0B]":b.status_kehadiran==="alpha"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:b.status_kehadiran})}),e.jsx("td",{className:"py-4",children:b.waktu_masuk}),e.jsx("td",{className:"py-4",children:b.waktu_keluar}),e.jsx("td",{className:"py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${b.status_masuk==="tepat_waktu"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.status_masuk==="tepat_waktu"?"Tepat Waktu":"Telat"})}),e.jsx("td",{className:"py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${b.dalam_radius?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.dalam_radius?"Dalam Radius":"Luar Radius"})})]},b.id))})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",E+1," to ",B," of ",C," entries"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>o(b=>Math.max(b-1,1)),disabled:t===1,className:"px-4 py-2 border rounded text-gray-600 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),[...Array(g)].map((b,N)=>e.jsx("button",{onClick:()=>o(N+1),className:`px-4 py-2 border rounded ${t===N+1?"bg-blue-50 text-blue-600 border-blue-200":"hover:bg-gray-50"}`,children:N+1},N)),e.jsx("button",{onClick:()=>o(b=>Math.min(b+1,g)),disabled:t===g,className:"px-4 py-2 border rounded text-gray-600 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})]})]})})]})}const ne=({icon:a,title:n,value:h,color:c})=>e.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`${c} p-2 rounded`,children:a}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:n}),e.jsx("p",{className:"text-2xl font-semibold mt-1",children:h})]})]})});function Za(){const[a,n]=i.useState(null),[h,c]=i.useState(!0),[l,s]=i.useState(null);return i.useEffect(()=>{(async()=>{try{const o=await w.get("http://localhost:3000/api/absen/attendance-stats");n(o.data.data),c(!1)}catch{s("Gagal memuat data kehadiran"),c(!1)}})()},[]),h?e.jsx("div",{className:"text-center py-4",children:"Memuat data..."}):l?e.jsx("div",{className:"text-center text-red-500 py-4",children:l}):a?e.jsx("div",{className:"",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(ne,{icon:e.jsx(q,{className:"text-purple-500",size:24}),title:"Total Kehadiran",value:`${a.total_attendance}/${a.total_days}`,color:"bg-purple-100"}),e.jsx(ne,{icon:e.jsx(fe,{className:"text-green-500",size:24}),title:"Hadir Tepat Waktu",value:a.hadir_tepat,color:"bg-green-100"}),e.jsx(ne,{icon:e.jsx(W,{className:"text-orange-500",size:24}),title:"Izin",value:a.izin,color:"bg-orange-100"}),e.jsx(ne,{icon:e.jsx(aa,{className:"text-red-500",size:24}),title:"Alpha",value:a.alpha,color:"bg-red-100"})]})}):null}function et(){const[a,n]=i.useState([]),[h,c]=i.useState(!0),[l,s]=i.useState(null),[t,o]=i.useState(1),g=10;i.useEffect(()=>{x()},[]);const x=async()=>{try{const j=await w.get("http://localhost:3000/api/izin/history",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});n(j.data.data),c(!1)}catch{s("Gagal mengambil data izin"),c(!1)}},r=j=>`px-2 py-1 rounded-full text-xs ${{pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[j]}`,m=j=>new Date(j).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),u=t*g,p=u-g,d=a.slice(p,u),f=Math.ceil(a.length/g);return h?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Q,{className:"w-8 h-8 animate-spin text-gray-500"})}):l?e.jsxs("div",{className:"flex justify-center items-center h-64 text-red-500",children:[e.jsx(te,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:l})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mt-8 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Riwayat Izin"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4",children:"Tanggal"}),e.jsx("th",{className:"text-left p-4",children:"Total Hari"}),e.jsx("th",{className:"text-left p-4",children:"Kategori"}),e.jsx("th",{className:"text-left p-4",children:"Keterangan"}),e.jsx("th",{className:"text-left p-4",children:"Status"})]})}),e.jsx("tbody",{children:d.map((j,v)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{children:e.jsxs("div",{className:" font-medium",children:[m(j.tanggal_mulai)," - ",m(j.tanggal_selesai)]})})})}),e.jsxs("td",{className:"p-4",children:[j.total_hari," hari"]}),e.jsx("td",{className:"p-4",children:j.kategori}),e.jsx("td",{className:"p-4",children:j.keterangan}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:r(j.status),children:j.status})})]},v))})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-gray-600",children:["Showing ",p+1," to ",Math.min(u,a.length)," of ",a.length," entries"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-50 disabled:opacity-50",onClick:()=>o(j=>Math.max(j-1,1)),disabled:t===1,children:"Previous"}),[...Array(f)].map((j,v)=>e.jsx("button",{className:`px-4 py-2 border rounded ${t===v+1?"bg-gray-50":"hover:bg-gray-50"}`,onClick:()=>o(v+1),children:v+1},v)),e.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-50 disabled:opacity-50",onClick:()=>o(j=>Math.min(j+1,f)),disabled:t===f,children:"Next"})]})]})})]})}const at=()=>{const[a,n]=i.useState(!1);return e.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx(z,{children:"Absensi"}),e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{onClick:()=>n(!0),className:"inline-flex items-center px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Ajukan Izin"})})]}),e.jsx(Za,{}),e.jsx("div",{className:"mt-8",children:e.jsx(Xa,{})}),e.jsx("div",{className:"mt-8",children:e.jsx(et,{})}),a&&e.jsx(Ya,{isOpen:a,onClose:()=>n(!1)})]})})};function tt(){return e.jsxs(e.Fragment,{children:[e.jsx(se,{type:"absensiUser"}),e.jsx(at,{})]})}const Ie=({isOpen:a,onClose:n,onSubmit:h,initialData:c,isEdit:l=!1})=>{const[s,t]=i.useState({tanggal:"",aktivitas:"",progress:""}),[o,g]=i.useState({aktivitas:"",progress:""});if(i.useEffect(()=>{c&&l&&t({tanggal:c.tanggal,aktivitas:c.aktivitas,progress:c.progress.toString()})},[c,l]),!a)return null;const x=u=>{const{name:p,value:d}=u.target;if(p==="progress"){const f=parseInt(d);if(f<0||f>100||isNaN(f)){g(j=>({...j,progress:"Masukkan nilai antara 0 sampai 100"}));return}else g(j=>({...j,progress:""}))}p==="aktivitas"&&(d.length<10||d.length>255?g(f=>({...f,aktivitas:"Aktivitas harus antara 10-255 karakter"})):g(f=>({...f,aktivitas:""}))),t(f=>({...f,[p]:d}))},r=u=>{if(u.preventDefault(),s.aktivitas.length<10||s.aktivitas.length>255){g(d=>({...d,aktivitas:"Aktivitas harus antara 10-255 karakter"}));return}const p=parseInt(s.progress);if(p<0||p>100||isNaN(p)){g(d=>({...d,progress:"Masukkan nilai antara 0 sampai 100"}));return}h(s)},m=()=>{t({tanggal:"",aktivitas:"",progress:""}),g({aktivitas:"",progress:""}),n()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:u=>{u.target===u.currentTarget&&m()},children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4",onClick:u=>u.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:l?"Edit Aktivitas":"Tambah Aktivitas"}),e.jsx("button",{onClick:m,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(K,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:r,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Tanggal"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"date",name:"tanggal",value:s.tanggal,onChange:x,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Aktivitas"}),e.jsx("textarea",{name:"aktivitas",value:s.aktivitas,onChange:x,placeholder:"Masukkan deskripsi aktivitas...",className:`w-full border rounded-lg p-3 h-32 resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.aktivitas?"border-red-500":""}`,required:!0}),o.aktivitas&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.aktivitas})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Progress (%)"}),e.jsx("input",{type:"number",name:"progress",value:s.progress,onChange:x,min:"0",max:"100",placeholder:"Masukkan progress (0-100)",className:`w-full border rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.progress?"border-red-500":""}`,required:!0}),o.progress&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.progress})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"px-6 py-2.5 border rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors",children:l?"Update":"Simpan"})]})]})]})})})},xe=({icon:a,title:n,value:h,color:c})=>e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`${c} p-3 rounded-lg`,children:a}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-gray-600 text-sm",children:n}),e.jsx("p",{className:"text-2xl font-semibold mt-1",children:h})]})]})});function st({logbooks:a}){const n=(a==null?void 0:a.length)||0,h=(a==null?void 0:a.filter(l=>l.status==="pending").length)||0,c=(a==null?void 0:a.filter(l=>l.status==="approved").length)||0;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(xe,{icon:e.jsx(ta,{className:"text-blue-600 h-6 w-6"}),title:"Total Entries",value:n.toString(),color:"bg-blue-100"}),e.jsx(xe,{icon:e.jsx(W,{className:"text-orange-500 h-6 w-6"}),title:"Pending Review",value:h.toString(),color:"bg-orange-100"}),e.jsx(xe,{icon:e.jsx(fe,{className:"text-green-600 h-6 w-6"}),title:"Approved",value:c.toString(),color:"bg-green-100"})]})}function rt({logbooks:a}){const[n,h]=i.useState(!1),[c,l]=i.useState(null),s=o=>{l(o),h(!0)},t=async o=>{var g,x;try{(await w.put(`http://localhost:3000/api/logbook/${c.id}`,o)).data.success&&(h(!1),window.location.reload(),alert("Logbook berhasil diupdate"))}catch(r){console.error("Error updating logbook:",r),alert(((x=(g=r.response)==null?void 0:g.data)==null?void 0:x.message)||"Gagal mengupdate logbook")}};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-4 px-4",children:"Tanggal"}),e.jsx("th",{className:"text-left py-4 px-4",children:"Aktivitas"}),e.jsx("th",{className:"text-left py-4 px-4",children:"Progress"}),e.jsx("th",{className:"text-left py-4 px-4",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-4",children:"Aksi"})]})}),e.jsx("tbody",{children:a==null?void 0:a.map((o,g)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-4",children:new Date(o.tanggal).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),e.jsxs("td",{className:"py-4 px-4 max-w-md",children:[o.aktivitas,o.catatan_admin&&e.jsxs("div",{className:"text-sm text-red-600 mt-1",children:["Catatan Admin: ",o.catatan_admin]})]}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"w-12 text-center",children:[o.progress,"%"]})})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${o.status==="approved"?"bg-green-100 text-green-800":o.status==="pending"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:o.status.charAt(0).toUpperCase()+o.status.slice(1)})}),e.jsx("td",{className:"py-4 px-4",children:o.status==="rejected"&&e.jsx("button",{onClick:()=>s(o),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"Edit Logbook",children:e.jsx(Pe,{size:20})})})]},o.id||g))})]})}),e.jsx(Ie,{isOpen:n,onClose:()=>h(!1),onSubmit:t,initialData:c,isEdit:!0})]})}const lt=()=>{const[a,n]=i.useState([]),[h,c]=i.useState(!1),[l,s]=i.useState(!0),[t,o]=i.useState(null),[g,x]=i.useState(!1);i.useEffect(()=>{r()},[]);const r=async()=>{try{s(!0),o(null);const d=await w.get("http://localhost:3000/api/logbook");n(d.data.success?d.data.data:[])}catch(d){console.error("Error fetching logbooks:",d),o(d.message)}finally{s(!1)}},m=async d=>{var f,j;try{if(!d.tanggal||!d.aktivitas||!d.progress)throw new Error("Mohon lengkapi semua field yang diperlukan");const v=new FormData;v.append("tanggal",d.tanggal),v.append("aktivitas",d.aktivitas),v.append("progress",d.progress),d.file&&v.append("file_dokumentasi",d.file);const y=await w.post("http://localhost:3000/api/logbook",v,{headers:{"Content-Type":"multipart/form-data"}});if(y.data.success)c(!1),await r(),_.fire({title:"Berhasil!",text:"Logbook berhasil disimpan",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"});else throw new Error(y.data.message)}catch(v){console.error("Error submitting logbook:",v),_.fire({title:"Gagal!",text:((j=(f=v.response)==null?void 0:f.data)==null?void 0:j.message)||v.message||"Terjadi kesalahan saat menyimpan logbook",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}},u=async d=>{var f,j;try{const v=new FormData;v.append("tanggal",d.tanggal),v.append("aktivitas",d.aktivitas),v.append("progress",d.progress);const y=await w.put(`http://localhost:3000/api/logbook/${d.id}`,v,{headers:{"Content-Type":"multipart/form-data"}});if(y.data.success)await r(),_.fire({title:"Berhasil!",text:"Logbook berhasil diperbarui",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"});else throw new Error(y.data.message)}catch(v){console.error("Error updating logbook:",v),_.fire({title:"Gagal!",text:((j=(f=v.response)==null?void 0:f.data)==null?void 0:j.message)||v.message||"Terjadi kesalahan saat memperbarui logbook",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}},p=async()=>{if(!g)try{x(!0);const d=await w.get("http://localhost:3000/api/logbook/export",{responseType:"blob"});if(d.headers["content-type"]==="application/json"){const S=new FileReader;S.onload=()=>{const C=JSON.parse(S.result);_.fire({title:"Gagal!",text:C.message||"Terjadi kesalahan saat mengunduh logbook",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})},S.readAsText(d.data);return}const j=new Blob([d.data],{type:"application/pdf"}),v=window.URL.createObjectURL(j),y=document.createElement("a");y.href=v,y.setAttribute("download",`logbook_${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(v),_.fire({title:"Berhasil!",text:"File logbook berhasil diunduh",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}catch(d){console.error("Error downloading logbook:",d),_.fire({title:"Gagal!",text:"Terjadi kesalahan saat mengunduh logbook",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}finally{x(!1)}};return t?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-red-600 text-center",children:[e.jsx("p",{className:"text-xl font-semibold",children:"Error"}),e.jsx("p",{children:t})]})}):e.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8",children:[e.jsx(z,{children:"Logbook Aktivitas"}),e.jsxs("div",{className:"flex space-x-4 mt-4 md:mt-0",children:[e.jsxs("button",{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2.5 rounded-lg inline-flex items-center justify-center min-w-[180px] transition-colors",disabled:l,children:[e.jsx(sa,{className:"mr-2 h-5 w-5"})," Tambah Aktivitas"]}),e.jsxs("button",{onClick:p,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2.5 rounded-lg inline-flex items-center justify-center min-w-[180px] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:g,children:[e.jsx(V,{className:"mr-2 h-5 w-5"}),g?"Mengunduh...":"Download Rekap"]})]})]}),e.jsx(st,{logbooks:a}),e.jsx(rt,{logbooks:a,onEdit:u}),e.jsx(Ie,{isOpen:h,onClose:()=>c(!1),onSubmit:m})]})})};function nt(){return e.jsxs(e.Fragment,{children:[e.jsx(se,{type:"logbookUser"}),e.jsx(lt,{})]})}const it=({isOpen:a,onClose:n,onSuccess:h,onUploadComplete:c})=>{$();const[l,s]=i.useState(!1),[t,o]=i.useState(""),[g,x]=i.useState({versi:"",progress:"",catatan:"",file:null}),r=()=>{_.fire({title:"Berhasil!",text:"Laporan berhasil diunggah",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#3B82F6",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})},m=f=>{_.fire({title:"Gagal!",text:f,icon:"error",confirmButtonText:"OK",confirmButtonColor:"#EF4444",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})},u=f=>{const{name:j,value:v,files:y}=f.target;x(S=>({...S,[j]:y?y[0]:v}))},p=()=>g.versi?g.file?g.progress&&(g.progress<0||g.progress>100)?(m("Progress harus antara 0-100"),!1):!0:(m("File laporan wajib diunggah"),!1):(m("Versi laporan wajib diisi"),!1),d=async f=>{var v,y;if(f.preventDefault(),o(""),!p())return;_.fire({title:"Mengunggah...",html:"Mohon tunggu sebentar",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{_.showLoading()}});const j=new FormData;j.append("versi",g.versi),j.append("progress",g.progress),j.append("catatan",g.catatan),j.append("file_laporan",g.file);try{await w.post("http://localhost:3000/api/reports",j,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}),x({versi:"",progress:"",catatan:"",file:null}),r(),h&&h(),c&&c(),n()}catch(S){const C=((y=(v=S.response)==null?void 0:v.data)==null?void 0:y.message)||"Terjadi kesalahan saat mengunggah laporan";m(C)}finally{s(!1)}};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-xl mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Upload Laporan"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 focus:outline-none",disabled:l,children:e.jsx(K,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:d,className:"p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Versi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"versi",value:g.versi,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"v1.0",required:!0,disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress (%)"}),e.jsx("input",{type:"number",name:"progress",value:g.progress,onChange:u,min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0-100",disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catatan"}),e.jsx("textarea",{name:"catatan",value:g.catatan,onChange:u,rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tambahkan catatan...",disabled:l})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["File Laporan (PDF/DOC/DOCX) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"file",name:"file",onChange:u,accept:".pdf,.doc,.docx",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:l}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maksimal ukuran file 10MB"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300",disabled:l,children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:l,children:l?"Mengunggah...":"Upload"})]})]})]})}):null};function ot(){$();const[a,n]=i.useState(!0),[h,c]=i.useState(""),[l,s]=i.useState({progress_terakhir:0,deadline:null});i.useEffect(()=>{t()},[]);const t=async()=>{try{const r=await w.get("http://localhost:3000/api/reports/progress");s(r.data.data),c("")}catch(r){c("Gagal memuat data progress"),console.error("Error fetching progress:",r)}finally{n(!1)}},o=r=>r?ce(new Date(r),"d MMMM yyyy",{locale:de}):"-";if(a)return e.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})});const g=(r,m,u)=>r>0?"text-green-600":u>0?"text-red-600":m>0?"text-yellow-600":"text-gray-600",x=(r,m,u)=>r>0?"Disetujui":u>0?"Perlu Revisi":m>0?"Menunggu Review":"Belum Ada Laporan";return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Status Laporan"}),h&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:h}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Progress"}),e.jsxs("span",{className:"text-gray-600",children:[l.progress_terakhir||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${l.progress_terakhir||0}%`}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Deadline Pengumpulan:"}),e.jsx("span",{className:"text-gray-800 font-medium",children:o(l.deadline)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Total Versi"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:l.total_versi||0})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Versi Disetujui"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.approved||0})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Status"}),e.jsx("p",{className:`text-lg font-bold ${g(l.approved,l.pending,l.need_revision)}`,children:x(l.approved,l.pending,l.need_revision)})]})]}),l.update_terakhir&&e.jsxs("div",{className:"text-sm text-gray-500 mt-4",children:["Terakhir diperbarui: ",o(l.update_terakhir)]})]})]})}function dt(){$();const[a,n]=i.useState(!0),[h,c]=i.useState(""),[l,s]=i.useState([]);i.useEffect(()=>{t()},[]);const t=async()=>{try{const r=await w.get("http://localhost:3000/api/reports",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s(r.data.data),c("")}catch(r){c("Gagal memuat riwayat pengumpulan"),console.error("Error fetching reports:",r)}finally{n(!1)}},o=async(r,m)=>{var u,p;try{const d=`http://localhost:3000${r}`;console.log("Downloading from:",d);const f=await w({url:d,method:"GET",responseType:"blob",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/pdf"}}),j=new Blob([f.data],{type:"application/pdf"}),v=window.URL.createObjectURL(j),y=document.createElement("a");y.href=v,y.setAttribute("download",m),document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(v)}catch(d){console.error("Download error:",d),alert("Gagal mengunduh file. "+(((p=(u=d.response)==null?void 0:u.data)==null?void 0:p.message)||"Silakan coba lagi."))}},g=r=>r?ce(new Date(r),"d MMMM yyyy",{locale:de}):"-",x=r=>{const m={pending_review:"bg-yellow-100 text-yellow-800",perlu_revisi:"bg-red-100 text-red-800",disetujui:"bg-green-100 text-green-800"},u={pending_review:"Menunggu Review",perlu_revisi:"Perlu Revisi",disetujui:"Disetujui"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${m[r]||"bg-gray-100 text-gray-800"}`,children:u[r]||r})};return a?e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"animate-pulse p-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})}):e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Riwayat Pengumpulan"}),h&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:h}),l.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Belum ada laporan yang dikumpulkan"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Versi"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Feedback"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((r,m)=>e.jsxs("tr",{className:m%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:r.versi}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(r.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x(r.status)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:r.feedback||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex space-x-4",children:[r.file_path&&e.jsxs("button",{onClick:()=>o(r.file_path,`Laporan_${r.versi}.pdf`),className:"text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx(V,{className:"h-4 w-4 mr-1"})," Laporan"]}),r.file_revisi_path&&e.jsxs("button",{onClick:()=>o(r.file_revisi_path,`Revisi_${r.versi}.pdf`),className:"text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx(V,{className:"h-4 w-4 mr-1"})," Revisi"]})]})})]},r.id))})]})})]})})}const ct=()=>{const[a,n]=i.useState(!1);return e.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx(z,{children:"Laporan Akhir Magang"}),e.jsxs("button",{onClick:()=>n(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg inline-flex items-center hover:bg-blue-700",children:[e.jsx(ra,{className:"mr-2 h-5 w-5"})," Upload Laporan"]})]}),e.jsx(ot,{}),e.jsx(dt,{}),e.jsx(it,{isOpen:a,onClose:()=>n(!1)})]})})};function ut(){return e.jsxs(e.Fragment,{children:[e.jsx(se,{type:"laporanUser"}),e.jsx(ct,{})]})}const mt=()=>{const{user:a,updateProfile:n}=$(),[h,c]=i.useState(!1),[l,s]=i.useState({type:"",text:""}),[t,o]=i.useState({nama:(a==null?void 0:a.nama)||"",email:(a==null?void 0:a.email)||"",photo:null,photoPreview:(a==null?void 0:a.photo_profile)||null}),g=r=>{const m=r.target.files[0];if(m){if(m.size>5*1024*1024){s({type:"error",text:"File terlalu besar. Maksimal 5MB"});return}if(!["image/jpeg","image/png","image/jpg"].includes(m.type)){s({type:"error",text:"Tipe file tidak diizinkan. Gunakan JPG, JPEG, atau PNG"});return}o(u=>({...u,photo:m,photoPreview:URL.createObjectURL(m)}))}},x=async r=>{r.preventDefault(),c(!0),s({type:"",text:""});try{const m=new FormData;t.nama!==a.nama&&m.append("nama",t.nama),t.email!==a.email&&m.append("email",t.email),t.photo&&m.append("photo_profile",t.photo);const u=await n(m);if(u.success)s({type:"success",text:u.message});else throw new Error(u.message||"Update profile gagal")}catch(m){s({type:"error",text:m.message||"Terjadi kesalahan saat update profile"})}finally{c(!1)}};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mt-8 max-w-3xl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Informasi Pribadi"}),l.text&&e.jsx("div",{className:`mb-4 p-3 rounded ${l.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:l.text}),e.jsxs("div",{className:"flex items-start",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-200",children:t.photoPreview?e.jsx("img",{src:t.photoPreview,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Photo"})}),e.jsxs("label",{className:"absolute bottom-0 right-0 p-2 bg-gray-800 rounded-full text-white cursor-pointer",children:[e.jsx(De,{size:20}),e.jsx("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/jpg",onChange:g})]})]}),e.jsxs("form",{className:"flex-1 ml-8",onSubmit:x,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Nama Lengkap"}),e.jsx("input",{type:"text",value:t.nama,onChange:r=>o({...t,nama:r.target.value}),className:"w-full p-2 border rounded-lg",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:t.email,onChange:r=>o({...t,email:r.target.value}),className:"w-full p-2 border rounded-lg",required:!0})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"submit",disabled:h,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:h?"Menyimpan...":"Simpan Perubahan"})})]})]})]})};var xt={};function ht(){const[a,n]=i.useState({selectedFile:null,previewUrl:null,error:null,loading:!1,success:!1});i.useEffect(()=>{(async()=>{try{const s=await w.get("http://localhost:3000/api/admin/profile");s.data.success&&s.data.data.paraf_image&&n(t=>({...t,previewUrl:`${xt.REACT_APP_API_URL}/${s.data.data.paraf_image}`}))}catch(s){console.error("Error fetching paraf:",s)}})()},[]);const h=l=>{const s=l.target.files[0];if(s&&s.type.startsWith("image/")){const t=URL.createObjectURL(s);n({selectedFile:s,previewUrl:t,error:null,loading:!1,success:!1})}else n({selectedFile:null,previewUrl:null,error:"File harus berupa gambar",loading:!1,success:!1})},c=async l=>{if(l.preventDefault(),!a.selectedFile)return;n(t=>({...t,loading:!0,error:null}));const s=new FormData;s.append("paraf_image",a.selectedFile);try{const t=await w.put("http://localhost:3000/api/admin/paraf",s,{headers:{"Content-Type":"multipart/form-data"}});if(t.data.success)n(o=>({...o,loading:!1,success:!0,error:null})),alert("Paraf berhasil diupload");else throw new Error(t.data.message||"Gagal mengupload paraf")}catch(t){console.error("Upload error:",t),n(o=>({...o,error:t.message||"Gagal mengupload paraf",loading:!1,success:!1})),a.previewUrl&&URL.revokeObjectURL(a.previewUrl)}};return i.useEffect(()=>()=>{a.previewUrl&&URL.revokeObjectURL(a.previewUrl)},[]),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mt-8 max-w-3xl",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Upload Paraf"}),a.error&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 text-red-600 rounded-md",children:a.error}),a.success&&e.jsx("div",{className:"mb-4 p-4 bg-green-50 text-green-600 rounded-md",children:"Paraf berhasil diupload!"}),a.previewUrl&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview Paraf:"}),e.jsx("img",{src:a.previewUrl,alt:"Preview Paraf",className:"h-20 object-contain border rounded-md"})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pilih Gambar Paraf"}),e.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"w-full p-2 border rounded-md",disabled:a.loading}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Format yang didukung: JPG, JPEG, PNG (Max: 5MB)"})]}),e.jsx("button",{type:"submit",disabled:!a.selectedFile||a.loading,className:`px-4 py-2 rounded-md text-white transition-colors
            ${!a.selectedFile||a.loading?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:a.loading?"Mengupload...":"Upload Paraf"})]})]})}function gt(){const{updatePassword:a}=$(),[n,h]=i.useState(!1),[c,l]=i.useState({type:"",text:""}),[s,t]=i.useState({oldPassword:"",newPassword:"",konfirmasiPassword:""}),o=async g=>{if(g.preventDefault(),h(!0),l({type:"",text:""}),s.newPassword!==s.konfirmasiPassword){l({type:"error",text:"Konfirmasi password tidak sesuai"}),h(!1);return}try{const x=await a({oldPassword:s.oldPassword,newPassword:s.newPassword});l({type:"success",text:x.message}),t({oldPassword:"",newPassword:"",konfirmasiPassword:""})}catch(x){l({type:"error",text:x.message||"Terjadi kesalahan saat update password"})}finally{h(!1)}};return e.jsxs("section",{className:"bg-white p-6 rounded-lg shadow mt-8 max-w-3xl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Ubah Password"}),c.text&&e.jsx("div",{className:`mb-4 p-3 rounded ${c.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:c.text}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Password Lama"})," ",e.jsx("input",{type:"password",value:s.oldPassword,onChange:g=>t({...s,oldPassword:g.target.value}),className:"w-full p-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Password Baru"}),e.jsx("input",{type:"password",value:s.newPassword,onChange:g=>t({...s,newPassword:g.target.value}),className:"w-full p-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-2",children:"Konfirmasi Password"}),e.jsx("input",{type:"password",value:s.konfirmasiPassword,onChange:g=>t({...s,konfirmasiPassword:g.target.value}),className:"w-full p-2 border rounded-lg"})]}),e.jsx("div",{className:"justify-end flex",children:e.jsx("button",{type:"submit",disabled:n,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"Memperbarui...":"Update Password"})})]})]})}const pt=()=>e.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6 bg-white p-6 rounded-lg shadow my-8",children:[e.jsx(z,{children:"Pengaturan Profile"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(mt,{}),e.jsx(ht,{}),e.jsx(gt,{})]})]})});function ft(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx(pt,{})]})}const bt="http://localhost:3000/api";function jt(){const{user:a,updateProfile:n,refreshProfile:h}=$(),[c,l]=i.useState(!1),[s,t]=i.useState({type:"",text:""}),[o,g]=i.useState({namaLengkap:"",nim:"",email:"",nomorTelepon:"",institusi:"",alamat:"",photo:null,photoPreview:null}),[x,r]=i.useState({passwordLama:"",passwordBaru:"",konfirmasiPassword:""});i.useEffect(()=>{a&&g({namaLengkap:a.nama||"",nim:a.nim||"",email:a.email||"",nomorTelepon:a.no_telepon||"",institusi:a.institusi||"",alamat:a.alamat||"",photo:null,photoPreview:a.photo_profile||null})},[a]);const m=d=>{const f=d.target.files[0];if(f){if(f.size>2*1024*1024){t({type:"error",text:"Ukuran file tidak boleh lebih dari 2MB"});return}if(!f.type.match(/^image\/(jpeg|png|jpg)$/)){t({type:"error",text:"Format file harus JPG atau PNG"});return}g(j=>({...j,photo:f,photoPreview:URL.createObjectURL(f)}))}},u=async d=>{var f,j;d.preventDefault(),l(!0),t({type:"",text:""});try{const v=new FormData;o.email!==a.email&&v.append("email",o.email),o.nomorTelepon!==a.no_telepon&&v.append("no_telepon",o.nomorTelepon),o.alamat!==a.alamat&&v.append("alamat",o.alamat),o.photo&&v.append("photo_profile",o.photo);const y=await n(v);y.success&&(t({type:"success",text:y.message}),await h())}catch(v){console.error("Error updating profile:",v),t({type:"error",text:((j=(f=v.response)==null?void 0:f.data)==null?void 0:j.message)||"Terjadi kesalahan saat update profile"})}finally{l(!1)}},p=async d=>{var f,j;if(d.preventDefault(),x.passwordBaru!==x.konfirmasiPassword){t({type:"error",text:"Konfirmasi password tidak sesuai"});return}l(!0),t({type:"",text:""});try{const v=await w.put(`${bt}/user/profile/password`,{oldPassword:x.passwordLama,newPassword:x.passwordBaru},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});v.data.success&&(t({type:"success",text:v.data.message}),r({passwordLama:"",passwordBaru:"",konfirmasiPassword:""}))}catch(v){t({type:"error",text:((j=(f=v.response)==null?void 0:f.data)==null?void 0:j.message)||"Terjadi kesalahan saat update password"})}finally{l(!1)}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.text&&e.jsx("div",{className:`p-4 rounded-lg ${s.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.text}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Informasi Pribadi"}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200",children:o.photoPreview?e.jsx("img",{src:o.photoPreview,alt:"Profile",className:"w-full h-full object-cover"},o.photoPreview):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Photo"})}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-white rounded-full p-2 shadow-lg cursor-pointer",children:[e.jsx(De,{className:"w-4 h-4 text-gray-600"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:m})]})]})}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap"}),e.jsx("input",{type:"text",value:o.namaLengkap,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIM"}),e.jsx("input",{type:"text",value:o.nim,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:o.email,onChange:d=>g({...o,email:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nomor Telepon"}),e.jsx("input",{type:"tel",value:o.nomorTelepon,onChange:d=>g({...o,nomorTelepon:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Institusi"}),e.jsx("input",{type:"text",value:o.institusi,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat"}),e.jsx("input",{type:"text",value:o.alamat,onChange:d=>g({...o,alamat:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{type:"submit",disabled:c,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Menyimpan...":"Simpan Perubahan"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Ubah Password"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Lama"}),e.jsx("input",{type:"password",value:x.passwordLama,onChange:d=>r({...x,passwordLama:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Baru"}),e.jsx("input",{type:"password",value:x.passwordBaru,onChange:d=>r({...x,passwordBaru:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konfirmasi Password"}),e.jsx("input",{type:"password",value:x.konfirmasiPassword,onChange:d=>r({...x,konfirmasiPassword:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{type:"submit",disabled:c,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Memperbarui...":"Update Password"})})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Status Magang"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"text-green-500 font-medium",children:(a==null?void 0:a.status)||"Aktif"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Periode Magang"}),e.jsxs("p",{className:"font-medium",children:[a==null?void 0:a.tanggal_mulai," - ",a==null?void 0:a.tanggal_selesai]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Sisa Waktu"}),e.jsxs("p",{className:"font-medium",children:[(a==null?void 0:a.sisa_hari)||"0"," Hari"]})]})]})]})})]})}const yt=()=>e.jsx("div",{className:"h-auto relative px-8 pt-[70px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[e.jsx(z,{children:"Pengaturan Profile"}),e.jsx("div",{className:"mt-6",children:e.jsx(jt,{})})]})});function vt(){const[a,n]=i.useState(null),[h,c]=i.useState([]),[l,s]=i.useState(null),[t,o]=i.useState("");i.useEffect(()=>{g(),x(),r()},[]);const g=async()=>{try{const d=(await w.get("/api/user/profile")).data.data;n(d),o(d.period)}catch(p){console.error("Error fetching profile:",p)}},x=async()=>{try{const p=await w.get("/api/user/recent-activities");c(p.data.data)}catch(p){console.error("Error fetching recent activities:",p)}},r=async()=>{try{const p=await w.get("/api/user/status-magang");s(p.data.data)}catch(p){console.error("Error fetching status magang:",p)}},m=async p=>{try{await w.put("/api/user/profile",p),g()}catch(d){console.error("Error updating profile:",d)}},u=async p=>{try{await w.put("/api/user/profile/password",p),g()}catch(d){console.error("Error updating password:",d)}};return e.jsxs(e.Fragment,{children:[e.jsx(se,{profile:a}),e.jsx(yt,{profile:a,onUpdateProfile:m,onUpdatePassword:u})]})}la.createRoot(document.getElementById("root")).render(e.jsx(ge.StrictMode,{children:e.jsx(na,{basename:"/Sistem-Manajemen-Magang",children:e.jsx(oa,{children:e.jsxs(ia,{children:[e.jsx(R,{path:"/",element:e.jsx(ee,{to:"/login",replace:!0})}),e.jsx(R,{path:"/login",element:e.jsx(ua,{})}),e.jsx(R,{path:"/register",element:e.jsx(ga,{})}),e.jsx(R,{path:"/scan",element:e.jsx(fa,{})}),e.jsx(R,{path:"/dashboard",element:e.jsx(F,{allowedRoles:["admin"],children:e.jsx(Na,{})})}),e.jsx(R,{path:"/internship",element:e.jsx(F,{allowedRoles:["admin"],children:e.jsx(Pa,{})})}),e.jsx(R,{path:"/absensi",element:e.jsx(F,{allowedRoles:["admin"],children:e.jsx(Aa,{})})}),e.jsx(R,{path:"/logbook",element:e.jsx(F,{allowedRoles:["admin"],children:e.jsx(Ra,{})})}),e.jsx(R,{path:"/laporan",element:e.jsx(F,{allowedRoles:["admin"],children:e.jsx(qa,{})})}),e.jsx(R,{path:"/profile",element:e.jsx(F,{allowedRoles:["admin"],children:e.jsx(ft,{})})}),e.jsx(R,{path:"/dashboardUser",element:e.jsx(F,{allowedRoles:["mahasiswa"],children:e.jsx(Va,{})})}),e.jsx(R,{path:"/absensiUser",element:e.jsx(F,{allowedRoles:["mahasiswa"],children:e.jsx(tt,{})})}),e.jsx(R,{path:"/logbookUser",element:e.jsx(F,{allowedRoles:["mahasiswa"],children:e.jsx(nt,{})})}),e.jsx(R,{path:"/laporanUser",element:e.jsx(F,{allowedRoles:["mahasiswa"],children:e.jsx(ut,{})})}),e.jsx(R,{path:"/profileUser",element:e.jsx(F,{allowedRoles:["mahasiswa"],children:e.jsx(vt,{})})})]})})})}));
